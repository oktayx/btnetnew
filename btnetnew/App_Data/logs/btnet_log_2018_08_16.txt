2018-08-16 09:15:15  caught exception in util.set_context:Request is not available in this context
2018-08-16 09:15:15  threadproc_votes
2018-08-16 09:15:15  started creating Lucene index using folder F:\Synced\Visual Studio 2017\Projects\temp\btnetnew\btnetnew\App_Data\lucene_index
2018-08-16 09:15:15  sql=

if exists (select * from dbo.sysobjects where id = object_id(N'[votes_view]'))
drop view [votes_view]
2018-08-16 09:15:16  sql=

/* get searchable cols */					
select sc.name
from syscolumns sc
inner join systypes st on st.xusertype = sc.xusertype
inner join sysobjects so on sc.id = so.id
where so.name = 'bugs'
and st.[name] <> 'sysname'
and sc.name not in ('rowguid',
'bg_id',
'bg_short_desc',
'bg_reported_user',
'bg_reported_date',
'bg_project',
'bg_org',
'bg_category',
'bg_priority',
'bg_status',
'bg_assigned_to_user',
'bg_last_updated_user',
'bg_last_updated_date',
'bg_user_defined_attribute',
'bg_project_custom_dropdown_value1',
'bg_project_custom_dropdown_value2',
'bg_project_custom_dropdown_value3',
'bg_tags')
and st.[name] in ('nvarchar','varchar')
and sc.length > 30
2018-08-16 09:15:16  sql=

create view votes_view as
select bu_bug as vote_bug, sum(bu_vote) as vote_total
from bug_user
group by bu_bug
having sum(bu_vote) > 0
2018-08-16 09:15:16  sql=

select bu_bug, count(1)
from bug_user 
where bu_vote = 1
group by bu_bug
2018-08-16 09:15:16  elapsed milliseconds:0084
2018-08-16 09:15:16  elapsed milliseconds:0190
2018-08-16 09:15:16  sql=

select bg_id, 	

isnull(bg_tags,'') bg_tags,
bg_short_desc
from bugs
2018-08-16 09:15:16  elapsed milliseconds:0034
2018-08-16 09:15:16  sql=

select bp_bug, bp_id, 
isnull(bp_comment_search,bp_comment) [text] 
from bug_posts 
where bp_type <> 'update'
and bp_hidden_from_external_users = 0
2018-08-16 09:15:16  elapsed milliseconds:0005
2018-08-16 09:15:16  done creating Lucene index
2018-08-16 09:15:19 http://localhost:49412/default.aspx sql=
select count(1) from users
2018-08-16 09:15:23 http://localhost:49412/default.aspx sql=
select count(1) from users
2018-08-16 09:15:23 http://localhost:49412/default.aspx sql=

select us_username, us_id, us_password, isnull(us_salt,0) us_salt, us_active
from users
where us_username = N'admin'
2018-08-16 09:15:23 http://localhost:49412/default.aspx elapsed milliseconds:0001
2018-08-16 09:15:23 http://localhost:49412/default.aspx sql=
update users set us_most_recent_login_datetime = getdate() where us_id = 1
2018-08-16 09:15:23 http://localhost:49412/default.aspx sql=
select us_id from users where us_username = N'admin'
2018-08-16 09:15:23 http://localhost:49412/default.aspx elapsed milliseconds:0001
2018-08-16 09:15:23 http://localhost:49412/default.aspx guid=ca17647f-ea7c-4b1a-a002-85a95e17a7ee
2018-08-16 09:15:23 http://localhost:49412/default.aspx sql=
insert into sessions (se_id, se_user) values('ca17647f-ea7c-4b1a-a002-85a95e17a7ee', 1)
2018-08-16 09:15:23 http://localhost:49412/default.aspx AppPath:
2018-08-16 09:15:29 http://localhost:49412/bugs.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = 'ca17647f-ea7c-4b1a-a002-85a95e17a7ee';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = 'ca17647f-ea7c-4b1a-a002-85a95e17a7ee'
and us_active = 1
2018-08-16 09:15:29 http://localhost:49412/bugs.aspx elapsed milliseconds:0012
2018-08-16 09:15:29 http://localhost:49412/bugs.aspx sql=

/* custom columns */ select sc.name, st.[name] [datatype], 
case when st.[name] = 'nvarchar' or st.[name] = 'nchar' then sc.length/2 else sc.length end as [length], 
sc.xprec, sc.xscale, sc.isnullable,
mm.text [default value], 
dflts.name [default name], 
isnull(ccm_dropdown_type,'') [dropdown type],
isnull(ccm_dropdown_vals,'') [vals],
isnull(ccm_sort_seq, sc.colorder) [column order],
sc.colorder
from syscolumns sc
inner join systypes st on st.xusertype = sc.xusertype
inner join sysobjects so on sc.id = so.id
left outer join syscomments mm on sc.cdefault = mm.id
left outer join custom_col_metadata on ccm_colorder = sc.colorder
left outer join sysobjects dflts on dflts.id = mm.id
where so.name = 'bugs'
and st.[name] <> 'sysname'
and sc.name not in ('rowguid',
'bg_id',
'bg_short_desc',
'bg_reported_user',
'bg_reported_date',
'bg_project',
'bg_org',
'bg_category',
'bg_priority',
'bg_status',
'bg_assigned_to_user',
'bg_last_updated_user',
'bg_last_updated_date',
'bg_user_defined_attribute',
'bg_project_custom_dropdown_value1',
'bg_project_custom_dropdown_value2',
'bg_project_custom_dropdown_value3',
'bg_tags')
order by sc.id, isnull(ccm_sort_seq,sc.colorder)
2018-08-16 09:15:32 http://localhost:49412/bugs.aspx elapsed milliseconds:2680
2018-08-16 09:15:32 http://localhost:49412/bugs.aspx sql=
/* query dropdown */
select qu_id, qu_desc
from queries
where (isnull(qu_user,0) = 0 and isnull(qu_org,0) = 0)
or isnull(qu_user,0) = 1
or isnull(qu_org,0) = 1
order by qu_desc
2018-08-16 09:15:32 http://localhost:49412/bugs.aspx elapsed milliseconds:0004
2018-08-16 09:15:32 http://localhost:49412/bugs.aspx sql=
select qu_id, qu_sql from queries where qu_id in
			(select us_default_query from users where us_id = 1)
2018-08-16 09:15:32 http://localhost:49412/bugs.aspx elapsed milliseconds:0004
2018-08-16 09:15:32 http://localhost:49412/bugs.aspx sql=
select isnull(pr_background_color,'#ffffff'), bg_id [id], isnull(bu_flag,0) [$FLAG], 
 bg_short_desc [desc], isnull(pj_name,'') [project], isnull(og_name,'') [organization], isnull(ct_name,'') [category], rpt.us_username [reported by],
 bg_reported_date [reported on], isnull(pr_name,'') [priority], isnull(asg.us_username,'') [assigned to],
 isnull(st_name,'') [status], isnull(lu.us_username,'') [last updated by], bg_last_updated_date [last updated on]
 from bugs 
 left outer join bug_user on bu_bug = bg_id and bu_user = 1 
 left outer join users rpt on rpt.us_id = bg_reported_user
 left outer join users asg on asg.us_id = bg_assigned_to_user
 left outer join users lu on lu.us_id = bg_last_updated_user
 left outer join projects on pj_id = bg_project
 left outer join orgs on og_id = bg_org
 left outer join categories on ct_id = bg_category
 left outer join priorities on pr_id = bg_priority
 left outer join statuses on st_id = bg_status
  /* altered - just order by  */ WHERE  (bugs.bg_project not in (
					select pu_project
					from project_user_xref
					where pu_user = 1
					and pu_permission_level = 0)) order by bg_id desc
2018-08-16 09:15:32 http://localhost:49412/bugs.aspx elapsed milliseconds:0018
2018-08-16 09:15:44 http://localhost:49412/admin.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = 'ca17647f-ea7c-4b1a-a002-85a95e17a7ee';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = 'ca17647f-ea7c-4b1a-a002-85a95e17a7ee'
and us_active = 1
2018-08-16 09:15:44 http://localhost:49412/admin.aspx elapsed milliseconds:0006
2018-08-16 09:15:46 http://localhost:49412/priorities.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = 'ca17647f-ea7c-4b1a-a002-85a95e17a7ee';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = 'ca17647f-ea7c-4b1a-a002-85a95e17a7ee'
and us_active = 1
2018-08-16 09:15:46 http://localhost:49412/priorities.aspx elapsed milliseconds:0000
2018-08-16 09:15:46 http://localhost:49412/priorities.aspx sql=
select pr_id [id],
		pr_name [description],
		pr_sort_seq [sort seq],
		'<div style=''background:' + pr_background_color + ';''>' + pr_background_color + '</div>' [background<br>color],
		pr_style [css<br>class],
		case when pr_default = 1 then 'Y' else 'N' end [default],
		pr_id [hidden] from priorities
2018-08-16 09:15:46 http://localhost:49412/priorities.aspx elapsed milliseconds:0001
2018-08-16 09:15:49 http://localhost:49412/delete_priority.aspx?id=4 sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = 'ca17647f-ea7c-4b1a-a002-85a95e17a7ee';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = 'ca17647f-ea7c-4b1a-a002-85a95e17a7ee'
and us_active = 1
2018-08-16 09:15:49 http://localhost:49412/delete_priority.aspx?id=4 elapsed milliseconds:0000
2018-08-16 09:15:49 http://localhost:49412/delete_priority.aspx?id=4 sql=
declare @cnt int
			select @cnt = count(1) from bugs where bg_priority = 4
			select pr_name, @cnt [cnt] from priorities where pr_id = 4
2018-08-16 09:15:49 http://localhost:49412/delete_priority.aspx?id=4 elapsed milliseconds:0001

TIME: 9:17:54 AM
MSG: Only Content controls are allowed directly in a content page that contains Content controls.
URL: http://localhost:49412/delete_priority.aspx?id=4
EXCEPTION: System.Web.HttpParseException (0x80004005): Only Content controls are allowed directly in a content page that contains Content controls.
   at System.Web.UI.FileLevelPageControlBuilder.AppendSubBuilder(ControlBuilder subBuilder)
   at System.Web.UI.TemplateParser.AppendSubBuilder(ControlBuilder builder, ControlBuilder subBuilder)
   at System.Web.UI.TemplateParser.MaybeTerminateControl(String tagName, Match match)
   at System.Web.UI.TemplateParser.ProcessEndTag(Match match)
   at System.Web.UI.TemplateParser.ParseStringInternal(String text, Encoding fileEncoding)
   at System.Web.UI.TemplateParser.ParseString(String text, VirtualPath virtualPath, Encoding fileEncoding)
   at System.Web.UI.TemplateParser.ParseFile(String physicalPath, VirtualPath virtualPath)
   at System.Web.UI.TemplateParser.ParseInternal()
   at System.Web.UI.TemplateParser.Parse()
   at System.Web.Compilation.BaseTemplateBuildProvider.get_CodeCompilerType()
   at System.Web.Compilation.BuildProvider.GetCompilerTypeFromBuildProvider(BuildProvider buildProvider)
   at System.Web.Compilation.BuildProvidersCompiler.ProcessBuildProviders()
   at System.Web.Compilation.BuildProvidersCompiler.PerformBuild()
   at System.Web.Compilation.BuildManager.CompileWebFile(VirtualPath virtualPath)
   at System.Web.Compilation.BuildManager.GetVPathBuildResultInternal(VirtualPath virtualPath, Boolean noBuild, Boolean allowCrossApp, Boolean allowBuildInPrecompile, Boolean throwIfNotFound, Boolean ensureIsUpToDate)
   at System.Web.Compilation.BuildManager.GetVPathBuildResultWithNoAssert(HttpContext context, VirtualPath virtualPath, Boolean noBuild, Boolean allowCrossApp, Boolean allowBuildInPrecompile, Boolean throwIfNotFound, Boolean ensureIsUpToDate)
   at System.Web.Compilation.BuildManager.GetVirtualPathObjectFactory(VirtualPath virtualPath, HttpContext context, Boolean allowCrossApp, Boolean throwIfNotFound)
   at System.Web.Compilation.BuildManager.CreateInstanceFromVirtualPath(VirtualPath virtualPath, Type requiredBaseType, HttpContext context, Boolean allowCrossApp)
   at System.Web.UI.PageHandlerFactory.GetHandlerHelper(HttpContext context, String requestType, VirtualPath virtualPath, String physicalPath)
   at System.Web.UI.PageHandlerFactory.GetHandler(HttpContext context, String requestType, String virtualPath, String path)
   at System.Web.HttpApplication.MaterializeHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute()
   at System.Web.HttpApplication.ExecuteStepImpl(IExecutionStep step)
   at System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously)

ALL_HTTP=HTTP_CACHE_CONTROL:max-age=0
HTTP_CONNECTION:keep-alive
HTTP_ACCEPT:text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8
HTTP_ACCEPT_ENCODING:gzip, deflate, br
HTTP_ACCEPT_LANGUAGE:en-US,en;q=0.9,tr;q=0.8
HTTP_COOKIE:hide_inactive_users=0; filter_users=; images_inline=1; history_inline=1; user=name=admin&NTLM=0; se_id=ca17647f-ea7c-4b1a-a002-85a95e17a7ee; ASP.NET_SessionId=ti2whxeac4s231xvdwadrboy
HTTP_HOST:localhost:49412
HTTP_USER_AGENT:Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36
HTTP_UPGRADE_INSECURE_REQUESTS:1

ALL_RAW=Cache-Control: max-age=0
Connection: keep-alive
Accept: text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8
Accept-Encoding: gzip, deflate, br
Accept-Language: en-US,en;q=0.9,tr;q=0.8
Cookie: hide_inactive_users=0; filter_users=; images_inline=1; history_inline=1; user=name=admin&NTLM=0; se_id=ca17647f-ea7c-4b1a-a002-85a95e17a7ee; ASP.NET_SessionId=ti2whxeac4s231xvdwadrboy
Host: localhost:49412
User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36
Upgrade-Insecure-Requests: 1

APPL_MD_PATH=/LM/W3SVC/2/ROOT
APPL_PHYSICAL_PATH=F:\Synced\Visual Studio 2017\Projects\temp\btnetnew\btnetnew\
CONTENT_LENGTH=0
GATEWAY_INTERFACE=CGI/1.1
HTTPS=off
INSTANCE_ID=2
INSTANCE_META_PATH=/LM/W3SVC/2
LOCAL_ADDR=::1
PATH_INFO=/delete_priority.aspx
PATH_TRANSLATED=F:\Synced\Visual Studio 2017\Projects\temp\btnetnew\btnetnew\delete_priority.aspx
QUERY_STRING=id=4
REMOTE_ADDR=::1
REMOTE_HOST=::1
REMOTE_PORT=49867
REQUEST_METHOD=GET
SCRIPT_NAME=/delete_priority.aspx
SERVER_NAME=localhost
SERVER_PORT=49412
SERVER_PORT_SECURE=0
SERVER_PROTOCOL=HTTP/1.1
SERVER_SOFTWARE=Microsoft-IIS/10.0
URL=/delete_priority.aspx
HTTP_CACHE_CONTROL=max-age=0
HTTP_CONNECTION=keep-alive
HTTP_ACCEPT=text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8
HTTP_ACCEPT_ENCODING=gzip, deflate, br
HTTP_ACCEPT_LANGUAGE=en-US,en;q=0.9,tr;q=0.8
HTTP_COOKIE=hide_inactive_users=0; filter_users=; images_inline=1; history_inline=1; user=name=admin&NTLM=0; se_id=ca17647f-ea7c-4b1a-a002-85a95e17a7ee; ASP.NET_SessionId=ti2whxeac4s231xvdwadrboy
HTTP_HOST=localhost:49412
HTTP_USER_AGENT=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36
HTTP_UPGRADE_INSECURE_REQUESTS=1
2018-08-16 09:17:54 http://localhost:49412/delete_priority.aspx?id=4 to email addr: admin@example.com
2018-08-16 09:17:54 http://localhost:49412/delete_priority.aspx?id=4 There was a problem sending email.   Check settings in Web.config.
2018-08-16 09:17:54 http://localhost:49412/delete_priority.aspx?id=4 TO:admin@example.com
2018-08-16 09:17:54 http://localhost:49412/delete_priority.aspx?id=4 FROM:errors@example.com
2018-08-16 09:17:54 http://localhost:49412/delete_priority.aspx?id=4 SUBJECT:Error: Only Content controls are allowed directly in a content page that contains Content controls.
2018-08-16 09:17:54 http://localhost:49412/delete_priority.aspx?id=4 Could not find a part of the path 'C:\temp\pickup\869a330d-1ba4-4273-9614-52f082f23694.eml'.
2018-08-16 09:18:04 http://localhost:49412/delete_priority.aspx?id=4 sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = 'ca17647f-ea7c-4b1a-a002-85a95e17a7ee';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = 'ca17647f-ea7c-4b1a-a002-85a95e17a7ee'
and us_active = 1
2018-08-16 09:18:04 http://localhost:49412/delete_priority.aspx?id=4 elapsed milliseconds:0008
2018-08-16 09:18:04 http://localhost:49412/delete_priority.aspx?id=4 sql=
declare @cnt int
			select @cnt = count(1) from bugs where bg_priority = 4
			select pr_name, @cnt [cnt] from priorities where pr_id = 4
2018-08-16 09:18:04 http://localhost:49412/delete_priority.aspx?id=4 elapsed milliseconds:0002
2018-08-16 09:18:07 http://localhost:49412/delete_priority.aspx?id=4 sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = 'ca17647f-ea7c-4b1a-a002-85a95e17a7ee';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = 'ca17647f-ea7c-4b1a-a002-85a95e17a7ee'
and us_active = 1
2018-08-16 09:18:07 http://localhost:49412/delete_priority.aspx?id=4 elapsed milliseconds:0000
2018-08-16 09:18:07 http://localhost:49412/delete_priority.aspx?id=4 sql=
delete priorities where pr_id = 4
2018-08-16 09:18:07 http://localhost:49412/delete_priority.aspx?id=4 sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = 'ca17647f-ea7c-4b1a-a002-85a95e17a7ee';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = 'ca17647f-ea7c-4b1a-a002-85a95e17a7ee'
and us_active = 1
2018-08-16 09:18:07 http://localhost:49412/delete_priority.aspx?id=4 elapsed milliseconds:0000
2018-08-16 09:18:07 http://localhost:49412/delete_priority.aspx?id=4 sql=
select pr_id [id],
		pr_name [description],
		pr_sort_seq [sort seq],
		'<div style=''background:' + pr_background_color + ';''>' + pr_background_color + '</div>' [background<br>color],
		pr_style [css<br>class],
		case when pr_default = 1 then 'Y' else 'N' end [default],
		pr_id [hidden] from priorities
2018-08-16 09:18:07 http://localhost:49412/delete_priority.aspx?id=4 elapsed milliseconds:0001
2018-08-16 09:19:47 http://localhost:49412/admin.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = 'ca17647f-ea7c-4b1a-a002-85a95e17a7ee';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = 'ca17647f-ea7c-4b1a-a002-85a95e17a7ee'
and us_active = 1
2018-08-16 09:19:47 http://localhost:49412/admin.aspx elapsed milliseconds:0010
2018-08-16 09:19:55 http://localhost:49412/query.aspx sql=
select count(1) from users
2018-08-16 09:19:55 http://localhost:49412/query.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = 'ca17647f-ea7c-4b1a-a002-85a95e17a7ee';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = 'ca17647f-ea7c-4b1a-a002-85a95e17a7ee'
and us_active = 1
2018-08-16 09:19:55 http://localhost:49412/query.aspx elapsed milliseconds:0008
2018-08-16 09:19:55 http://localhost:49412/query.aspx sql=
select name from sysobjects where type = 'u' order by 1
2018-08-16 09:19:55 http://localhost:49412/query.aspx elapsed milliseconds:0009
2018-08-16 09:20:16 http://localhost:49412/reports.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = 'ca17647f-ea7c-4b1a-a002-85a95e17a7ee';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = 'ca17647f-ea7c-4b1a-a002-85a95e17a7ee'
and us_active = 1
2018-08-16 09:20:17 http://localhost:49412/reports.aspx elapsed milliseconds:0017
2018-08-16 09:20:17 http://localhost:49412/reports.aspx sql=

select
rp_desc [report],
case
	when rp_chart_type = 'pie' then
		'<a target=''_blank'' href=''view_report.aspx?view=chart&id=' + convert(varchar, rp_id) + '''>pie</a>'
	when rp_chart_type = 'line' then
		'<a target=''_blank'' href=''view_report.aspx?view=chart&id=' + convert(varchar, rp_id) + '''>line</a>'
	when rp_chart_type = 'bar' then
		'<a target=''_blank'' href=''view_report.aspx?view=chart&id=' + convert(varchar, rp_id) + '''>bar</a>'
	else
		'&nbsp;' end [view<br>chart],
'<a target=''_blank'' href=''view_report.aspx?view=data&id=' + convert(varchar, rp_id) + '''>data</a>' [view<br>data]
, '<a href=''edit_report.aspx?id=' + convert(varchar, rp_id) + '''>edit</a>' [edit], '<a href=''delete_report.aspx?id=' + convert(varchar, rp_id) + '''>delete</a>' [delete] 
from reports order by rp_desc
2018-08-16 09:20:17 http://localhost:49412/reports.aspx elapsed milliseconds:0004
2018-08-16 09:20:21 http://localhost:49412/edit_report.aspx?id=3 sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = 'ca17647f-ea7c-4b1a-a002-85a95e17a7ee';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = 'ca17647f-ea7c-4b1a-a002-85a95e17a7ee'
and us_active = 1
2018-08-16 09:20:21 http://localhost:49412/edit_report.aspx?id=3 elapsed milliseconds:0000
2018-08-16 09:20:21 http://localhost:49412/edit_report.aspx?id=3 sql=
select
				rp_desc, rp_sql, rp_chart_type
				from reports where rp_id = 3
2018-08-16 09:20:21 http://localhost:49412/edit_report.aspx?id=3 elapsed milliseconds:0001
2018-08-16 09:20:54 http://localhost:49412/reports.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = 'ca17647f-ea7c-4b1a-a002-85a95e17a7ee';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = 'ca17647f-ea7c-4b1a-a002-85a95e17a7ee'
and us_active = 1
2018-08-16 09:20:54 http://localhost:49412/reports.aspx elapsed milliseconds:0000
2018-08-16 09:20:54 http://localhost:49412/reports.aspx sql=

select
rp_desc [report],
case
	when rp_chart_type = 'pie' then
		'<a target=''_blank'' href=''view_report.aspx?view=chart&id=' + convert(varchar, rp_id) + '''>pie</a>'
	when rp_chart_type = 'line' then
		'<a target=''_blank'' href=''view_report.aspx?view=chart&id=' + convert(varchar, rp_id) + '''>line</a>'
	when rp_chart_type = 'bar' then
		'<a target=''_blank'' href=''view_report.aspx?view=chart&id=' + convert(varchar, rp_id) + '''>bar</a>'
	else
		'&nbsp;' end [view<br>chart],
'<a target=''_blank'' href=''view_report.aspx?view=data&id=' + convert(varchar, rp_id) + '''>data</a>' [view<br>data]
, '<a href=''edit_report.aspx?id=' + convert(varchar, rp_id) + '''>edit</a>' [edit], '<a href=''delete_report.aspx?id=' + convert(varchar, rp_id) + '''>delete</a>' [delete] 
from reports order by rp_desc
2018-08-16 09:20:54 http://localhost:49412/reports.aspx elapsed milliseconds:0000
2018-08-16 09:20:57 http://localhost:49412/edit_report.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = 'ca17647f-ea7c-4b1a-a002-85a95e17a7ee';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = 'ca17647f-ea7c-4b1a-a002-85a95e17a7ee'
and us_active = 1
2018-08-16 09:20:57 http://localhost:49412/edit_report.aspx elapsed milliseconds:0009
2018-08-16 09:21:13 http://localhost:49412/edit_report.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = 'ca17647f-ea7c-4b1a-a002-85a95e17a7ee';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = 'ca17647f-ea7c-4b1a-a002-85a95e17a7ee'
and us_active = 1
2018-08-16 09:21:13 http://localhost:49412/edit_report.aspx elapsed milliseconds:0009
2018-08-16 09:21:14 http://localhost:49412/edit_report.aspx sql=
insert into reports
				(rp_desc, rp_sql, rp_chart_type)
				values (N'samplereport', N'select * from Users', N'table')
2018-08-16 09:21:14 http://localhost:49412/edit_report.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = 'ca17647f-ea7c-4b1a-a002-85a95e17a7ee';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = 'ca17647f-ea7c-4b1a-a002-85a95e17a7ee'
and us_active = 1
2018-08-16 09:21:14 http://localhost:49412/edit_report.aspx elapsed milliseconds:0001
2018-08-16 09:21:14 http://localhost:49412/edit_report.aspx sql=

select
rp_desc [report],
case
	when rp_chart_type = 'pie' then
		'<a target=''_blank'' href=''view_report.aspx?view=chart&id=' + convert(varchar, rp_id) + '''>pie</a>'
	when rp_chart_type = 'line' then
		'<a target=''_blank'' href=''view_report.aspx?view=chart&id=' + convert(varchar, rp_id) + '''>line</a>'
	when rp_chart_type = 'bar' then
		'<a target=''_blank'' href=''view_report.aspx?view=chart&id=' + convert(varchar, rp_id) + '''>bar</a>'
	else
		'&nbsp;' end [view<br>chart],
'<a target=''_blank'' href=''view_report.aspx?view=data&id=' + convert(varchar, rp_id) + '''>data</a>' [view<br>data]
, '<a href=''edit_report.aspx?id=' + convert(varchar, rp_id) + '''>edit</a>' [edit], '<a href=''delete_report.aspx?id=' + convert(varchar, rp_id) + '''>delete</a>' [delete] 
from reports order by rp_desc
2018-08-16 09:21:14 http://localhost:49412/edit_report.aspx elapsed milliseconds:0002
2018-08-16 09:21:18 http://localhost:49412/edit_report.aspx?id=9 sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = 'ca17647f-ea7c-4b1a-a002-85a95e17a7ee';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = 'ca17647f-ea7c-4b1a-a002-85a95e17a7ee'
and us_active = 1
2018-08-16 09:21:18 http://localhost:49412/edit_report.aspx?id=9 elapsed milliseconds:0000
2018-08-16 09:21:18 http://localhost:49412/edit_report.aspx?id=9 sql=
select
				rp_desc, rp_sql, rp_chart_type
				from reports where rp_id = 9
2018-08-16 09:21:18 http://localhost:49412/edit_report.aspx?id=9 elapsed milliseconds:0001
2018-08-16 09:21:22 http://localhost:49412/delete_report.aspx?id=9 sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = 'ca17647f-ea7c-4b1a-a002-85a95e17a7ee';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = 'ca17647f-ea7c-4b1a-a002-85a95e17a7ee'
and us_active = 1
2018-08-16 09:21:22 http://localhost:49412/delete_report.aspx?id=9 elapsed milliseconds:0000
2018-08-16 09:21:22 http://localhost:49412/delete_report.aspx?id=9 sql=
select rp_desc from reports where rp_id = 9
2018-08-16 09:21:22 http://localhost:49412/delete_report.aspx?id=9 elapsed milliseconds:0001
2018-08-16 09:22:52 http://localhost:49412/delete_report.aspx?id=9 sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = 'ca17647f-ea7c-4b1a-a002-85a95e17a7ee';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = 'ca17647f-ea7c-4b1a-a002-85a95e17a7ee'
and us_active = 1
2018-08-16 09:22:52 http://localhost:49412/delete_report.aspx?id=9 elapsed milliseconds:0018
2018-08-16 09:22:52 http://localhost:49412/delete_report.aspx?id=9 sql=
select rp_desc from reports where rp_id = 9
2018-08-16 09:22:52 http://localhost:49412/delete_report.aspx?id=9 elapsed milliseconds:0001
2018-08-16 09:22:54 http://localhost:49412/delete_report.aspx?id=9 sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = 'ca17647f-ea7c-4b1a-a002-85a95e17a7ee';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = 'ca17647f-ea7c-4b1a-a002-85a95e17a7ee'
and us_active = 1
2018-08-16 09:22:54 http://localhost:49412/delete_report.aspx?id=9 elapsed milliseconds:0000
2018-08-16 09:22:55 http://localhost:49412/delete_report.aspx?id=9 sql=

delete reports where rp_id = 9;
delete dashboard_items where ds_report = 9
2018-08-16 09:22:55 http://localhost:49412/delete_report.aspx?id=9 sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = 'ca17647f-ea7c-4b1a-a002-85a95e17a7ee';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = 'ca17647f-ea7c-4b1a-a002-85a95e17a7ee'
and us_active = 1
2018-08-16 09:22:55 http://localhost:49412/delete_report.aspx?id=9 elapsed milliseconds:0000
2018-08-16 09:22:55 http://localhost:49412/delete_report.aspx?id=9 sql=

select
rp_desc [report],
case
	when rp_chart_type = 'pie' then
		'<a target=''_blank'' href=''view_report.aspx?view=chart&id=' + convert(varchar, rp_id) + '''>pie</a>'
	when rp_chart_type = 'line' then
		'<a target=''_blank'' href=''view_report.aspx?view=chart&id=' + convert(varchar, rp_id) + '''>line</a>'
	when rp_chart_type = 'bar' then
		'<a target=''_blank'' href=''view_report.aspx?view=chart&id=' + convert(varchar, rp_id) + '''>bar</a>'
	else
		'&nbsp;' end [view<br>chart],
'<a target=''_blank'' href=''view_report.aspx?view=data&id=' + convert(varchar, rp_id) + '''>data</a>' [view<br>data]
, '<a href=''edit_report.aspx?id=' + convert(varchar, rp_id) + '''>edit</a>' [edit], '<a href=''delete_report.aspx?id=' + convert(varchar, rp_id) + '''>delete</a>' [delete] 
from reports order by rp_desc
2018-08-16 09:22:55 http://localhost:49412/delete_report.aspx?id=9 elapsed milliseconds:0001
2018-08-16 09:23:04 http://localhost:49412/admin.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = 'ca17647f-ea7c-4b1a-a002-85a95e17a7ee';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = 'ca17647f-ea7c-4b1a-a002-85a95e17a7ee'
and us_active = 1
2018-08-16 09:23:04 http://localhost:49412/admin.aspx elapsed milliseconds:0000
2018-08-16 09:23:05 http://localhost:49412/statuses.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = 'ca17647f-ea7c-4b1a-a002-85a95e17a7ee';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = 'ca17647f-ea7c-4b1a-a002-85a95e17a7ee'
and us_active = 1
2018-08-16 09:23:06 http://localhost:49412/statuses.aspx elapsed milliseconds:0000
2018-08-16 09:23:06 http://localhost:49412/statuses.aspx sql=
select st_id [id],
		st_name [status],
		st_sort_seq [sort seq],
		st_style [css<br>class],
		case when st_default = 1 then 'Y' else 'N' end [default],
		st_id [hidden]
		from statuses order by st_sort_seq
2018-08-16 09:23:06 http://localhost:49412/statuses.aspx elapsed milliseconds:0002
2018-08-16 09:23:09 http://localhost:49412/edit_status.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = 'ca17647f-ea7c-4b1a-a002-85a95e17a7ee';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = 'ca17647f-ea7c-4b1a-a002-85a95e17a7ee'
and us_active = 1
2018-08-16 09:23:09 http://localhost:49412/edit_status.aspx elapsed milliseconds:0009
2018-08-16 09:23:20 http://localhost:49412/edit_status.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = 'ca17647f-ea7c-4b1a-a002-85a95e17a7ee';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = 'ca17647f-ea7c-4b1a-a002-85a95e17a7ee'
and us_active = 1
2018-08-16 09:23:20 http://localhost:49412/edit_status.aspx elapsed milliseconds:0009
2018-08-16 09:23:20 http://localhost:49412/edit_status.aspx sql=
insert into statuses (st_name, st_sort_seq, st_style, st_default) values (N'testst', 0, N'', 0)
2018-08-16 09:23:21 http://localhost:49412/edit_status.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = 'ca17647f-ea7c-4b1a-a002-85a95e17a7ee';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = 'ca17647f-ea7c-4b1a-a002-85a95e17a7ee'
and us_active = 1
2018-08-16 09:23:21 http://localhost:49412/edit_status.aspx elapsed milliseconds:0000
2018-08-16 09:23:21 http://localhost:49412/edit_status.aspx sql=
select st_id [id],
		st_name [status],
		st_sort_seq [sort seq],
		st_style [css<br>class],
		case when st_default = 1 then 'Y' else 'N' end [default],
		st_id [hidden]
		from statuses order by st_sort_seq
2018-08-16 09:23:21 http://localhost:49412/edit_status.aspx elapsed milliseconds:0001
2018-08-16 09:23:27 http://localhost:49412/delete_status.aspx?id=6 sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = 'ca17647f-ea7c-4b1a-a002-85a95e17a7ee';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = 'ca17647f-ea7c-4b1a-a002-85a95e17a7ee'
and us_active = 1
2018-08-16 09:23:27 http://localhost:49412/delete_status.aspx?id=6 elapsed milliseconds:0000
2018-08-16 09:23:27 http://localhost:49412/delete_status.aspx?id=6 sql=
declare @cnt int
			select @cnt = count(1) from bugs where bg_status = 6
			select st_name, @cnt [cnt] from statuses where st_id = 6
2018-08-16 09:23:27 http://localhost:49412/delete_status.aspx?id=6 elapsed milliseconds:0002
2018-08-16 09:25:20 http://localhost:49412/delete_status.aspx?id=6 sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = 'ca17647f-ea7c-4b1a-a002-85a95e17a7ee';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = 'ca17647f-ea7c-4b1a-a002-85a95e17a7ee'
and us_active = 1
2018-08-16 09:25:20 http://localhost:49412/delete_status.aspx?id=6 elapsed milliseconds:0008
2018-08-16 09:25:20 http://localhost:49412/delete_status.aspx?id=6 sql=
declare @cnt int
			select @cnt = count(1) from bugs where bg_status = 6
			select st_name, @cnt [cnt] from statuses where st_id = 6
2018-08-16 09:25:20 http://localhost:49412/delete_status.aspx?id=6 elapsed milliseconds:0001
2018-08-16 09:25:23 http://localhost:49412/delete_status.aspx?id=6 sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = 'ca17647f-ea7c-4b1a-a002-85a95e17a7ee';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = 'ca17647f-ea7c-4b1a-a002-85a95e17a7ee'
and us_active = 1
2018-08-16 09:25:23 http://localhost:49412/delete_status.aspx?id=6 elapsed milliseconds:0009
2018-08-16 09:25:23 http://localhost:49412/delete_status.aspx?id=6 sql=
delete statuses where st_id = 6
2018-08-16 09:25:23 http://localhost:49412/delete_status.aspx?id=6 sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = 'ca17647f-ea7c-4b1a-a002-85a95e17a7ee';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = 'ca17647f-ea7c-4b1a-a002-85a95e17a7ee'
and us_active = 1
2018-08-16 09:25:23 http://localhost:49412/delete_status.aspx?id=6 elapsed milliseconds:0000
2018-08-16 09:25:23 http://localhost:49412/delete_status.aspx?id=6 sql=
select st_id [id],
		st_name [status],
		st_sort_seq [sort seq],
		st_style [css<br>class],
		case when st_default = 1 then 'Y' else 'N' end [default],
		st_id [hidden]
		from statuses order by st_sort_seq
2018-08-16 09:25:23 http://localhost:49412/delete_status.aspx?id=6 elapsed milliseconds:0001
2018-08-16 09:25:32 http://localhost:49412/admin.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = 'ca17647f-ea7c-4b1a-a002-85a95e17a7ee';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = 'ca17647f-ea7c-4b1a-a002-85a95e17a7ee'
and us_active = 1
2018-08-16 09:25:32 http://localhost:49412/admin.aspx elapsed milliseconds:0009
2018-08-16 09:25:37 http://localhost:49412/bugs.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = 'ca17647f-ea7c-4b1a-a002-85a95e17a7ee';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = 'ca17647f-ea7c-4b1a-a002-85a95e17a7ee'
and us_active = 1
2018-08-16 09:25:37 http://localhost:49412/bugs.aspx elapsed milliseconds:0000
2018-08-16 09:25:37 http://localhost:49412/bugs.aspx sql=
/* query dropdown */
select qu_id, qu_desc
from queries
where (isnull(qu_user,0) = 0 and isnull(qu_org,0) = 0)
or isnull(qu_user,0) = 1
or isnull(qu_org,0) = 1
order by qu_desc
2018-08-16 09:25:37 http://localhost:49412/bugs.aspx elapsed milliseconds:0002
2018-08-16 09:25:37 http://localhost:49412/bugs.aspx sql=
select qu_sql from queries where qu_id = 1
2018-08-16 09:25:37 http://localhost:49412/bugs.aspx sql=
select isnull(pr_background_color,'#ffffff'), bg_id [id], isnull(bu_flag,0) [$FLAG], 
 bg_short_desc [desc], isnull(pj_name,'') [project], isnull(og_name,'') [organization], isnull(ct_name,'') [category], rpt.us_username [reported by],
 bg_reported_date [reported on], isnull(pr_name,'') [priority], isnull(asg.us_username,'') [assigned to],
 isnull(st_name,'') [status], isnull(lu.us_username,'') [last updated by], bg_last_updated_date [last updated on]
 from bugs 
 left outer join bug_user on bu_bug = bg_id and bu_user = 1 
 left outer join users rpt on rpt.us_id = bg_reported_user
 left outer join users asg on asg.us_id = bg_assigned_to_user
 left outer join users lu on lu.us_id = bg_last_updated_user
 left outer join projects on pj_id = bg_project
 left outer join orgs on og_id = bg_org
 left outer join categories on ct_id = bg_category
 left outer join priorities on pr_id = bg_priority
 left outer join statuses on st_id = bg_status
  /* altered - just order by  */ WHERE  (bugs.bg_project not in (
					select pu_project
					from project_user_xref
					where pu_user = 1
					and pu_permission_level = 0)) order by bg_id desc
2018-08-16 09:25:37 http://localhost:49412/bugs.aspx elapsed milliseconds:0012
2018-08-16 09:25:38 http://localhost:49412/edit_bug.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = 'ca17647f-ea7c-4b1a-a002-85a95e17a7ee';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = 'ca17647f-ea7c-4b1a-a002-85a95e17a7ee'
and us_active = 1
2018-08-16 09:25:38 http://localhost:49412/edit_bug.aspx elapsed milliseconds:0000
2018-08-16 09:25:38 http://localhost:49412/edit_bug.aspx sql=
/* drop downs */ select pj_id, pj_name
		from projects
		left outer join project_user_xref on pj_id = pu_project
		and pu_user = 1
		where pj_active = 1
		and isnull(pu_permission_level,2) not in (0, 1)
		order by pj_name;
select og_id, og_name from orgs where og_active = 1 order by og_name;
select ct_id, ct_name from categories order by ct_sort_seq, ct_name;
select pr_id, pr_name from priorities order by pr_sort_seq, pr_name;
select st_id, st_name from statuses order by st_sort_seq, st_name;
select udf_id, udf_name from user_defined_attribute order by udf_sort_seq, udf_name;
2018-08-16 09:25:38 http://localhost:49412/edit_bug.aspx elapsed milliseconds:0008
2018-08-16 09:25:38 http://localhost:49412/edit_bug.aspx sql=

select top 1 pj_id from projects where pj_default = 1 order by pj_name;
select top 1 ct_id from categories where ct_default = 1 order by ct_name;
select top 1 pr_id from priorities where pr_default = 1 order by pr_name;
select top 1 st_id from statuses where st_default = 1 order by st_name;
select top 1 udf_id from user_defined_attribute where udf_default = 1 order by udf_name;
2018-08-16 09:25:38 http://localhost:49412/edit_bug.aspx elapsed milliseconds:0005
2018-08-16 09:25:38 http://localhost:49412/edit_bug.aspx sql=

/* users this project */ select us_id, case when 0 = 1 then us_lastname + ', ' + us_firstname else us_username end us_username
from users
inner join orgs on us_org = og_id
where us_active = 1
and og_can_be_assigned_to = 1
and (2 <> 0 or 1 = og_id or (og_external_user = 0 and 0 = 1))
and us_id not in
	(select pu_user from project_user_xref
		where pu_project = 0
		and pu_permission_level = 0)
order by us_username; 
2018-08-16 09:25:38 http://localhost:49412/edit_bug.aspx elapsed milliseconds:0005
2018-08-16 09:26:06 http://localhost:49412/edit_bug.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = 'ca17647f-ea7c-4b1a-a002-85a95e17a7ee';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = 'ca17647f-ea7c-4b1a-a002-85a95e17a7ee'
and us_active = 1
2018-08-16 09:26:07 http://localhost:49412/edit_bug.aspx elapsed milliseconds:0000
2018-08-16 09:26:07 http://localhost:49412/edit_bug.aspx sql=
 /* get_bug_datarow */
declare @svn_revisions int
declare @git_commits int
declare @hg_revisions int
declare @tasks int
declare @related int;
set @svn_revisions = 0
set @git_commits = 0
set @hg_revisions = 0
set @tasks = 0
set @related = 0

select bg_id [id],
bg_short_desc [short_desc],
isnull(bg_tags,'') [bg_tags],
isnull(ru.us_username,'[deleted user]') [reporter],
isnull(ru.us_email,'') [reporter_email],
case rtrim(ru.us_firstname)
	when null then isnull(ru.us_lastname, '')
	when '' then isnull(ru.us_lastname, '')
	else isnull(ru.us_lastname + ', ' + ru.us_firstname,'')
	end [reporter_fullname],
bg_reported_date [reported_date],
datediff(s,bg_reported_date,getdate()) [seconds_ago],
isnull(lu.us_username,'') [last_updated_user],
case rtrim(lu.us_firstname)
	when null then isnull(lu.us_lastname, '')
	when '' then isnull(lu.us_lastname, '')
	else isnull(lu.us_lastname + ', ' + lu.us_firstname,'')
	end [last_updated_fullname],


bg_last_updated_date [last_updated_date],
isnull(bg_project,0) [project],
isnull(pj_name,'[no project]') [current_project],

isnull(bg_org,0) [organization],
isnull(bugorg.og_name,'') [og_name],

isnull(bg_category,0) [category],
isnull(ct_name,'') [category_name],

isnull(bg_priority,0) [priority],
isnull(pr_name,'') [priority_name],

isnull(bg_status,0) [status],
isnull(st_name,'') [status_name],

isnull(bg_user_defined_attribute,0) [udf],
isnull(udf_name,'') [udf_name],

isnull(bg_assigned_to_user,0) [assigned_to_user],
isnull(asg.us_username,'[not assigned]') [assigned_to_username],
case rtrim(asg.us_firstname)
when null then isnull(asg.us_lastname, '[not assigned]')
when '' then isnull(asg.us_lastname, '[not assigned]')
else isnull(asg.us_lastname + ', ' + asg.us_firstname,'[not assigned]')
end [assigned_to_fullname],

isnull(bs_user,0) [subscribed],

case
when
	1 <> bg_org
	and userorg.og_other_orgs_permission_level < 2
	and userorg.og_other_orgs_permission_level < isnull(pu_permission_level,2)
		then userorg.og_other_orgs_permission_level
else
	isnull(pu_permission_level,2)
end [pu_permission_level],

isnull(bg_project_custom_dropdown_value1,'') [bg_project_custom_dropdown_value1],
isnull(bg_project_custom_dropdown_value2,'') [bg_project_custom_dropdown_value2],
isnull(bg_project_custom_dropdown_value3,'') [bg_project_custom_dropdown_value3],
@related [relationship_cnt],
@svn_revisions [svn_revision_cnt],
@git_commits [git_commit_cnt],
@hg_revisions [hg_commit_cnt],
@tasks [task_cnt],
getdate() [snapshot_timestamp]
,[test],[drop1]
from bugs
inner join users this_user on us_id = 1
inner join orgs userorg on this_user.us_org = userorg.og_id
left outer join user_defined_attribute on bg_user_defined_attribute = udf_id
left outer join projects on bg_project = pj_id
left outer join orgs bugorg on bg_org = bugorg.og_id
left outer join categories on bg_category = ct_id
left outer join priorities on bg_priority = pr_id
left outer join statuses on bg_status = st_id
left outer join users asg on bg_assigned_to_user = asg.us_id
left outer join users ru on bg_reported_user = ru.us_id
left outer join users lu on bg_last_updated_user = lu.us_id
left outer join bug_subscriptions on bs_bug = bg_id and bs_user = 1
left outer join project_user_xref on pj_id = pu_project
and pu_user = 1
where bg_id = 0
2018-08-16 09:26:07 http://localhost:49412/edit_bug.aspx elapsed milliseconds:0015
2018-08-16 09:26:07 http://localhost:49412/edit_bug.aspx sql=

/* validate org versus assigned_to */
select case when og_other_orgs_permission_level <> 0
or 1 = og_id then 1
else 0 end as [answer]
from users
inner join orgs on us_org = og_id
where us_id = 1
2018-08-16 09:26:07 http://localhost:49412/edit_bug.aspx sql=
insert into bugs
					(bg_short_desc,
					bg_tags,
					bg_reported_user,
					bg_last_updated_user,
					bg_reported_date,
					bg_last_updated_date,
					bg_project,
					bg_org,
					bg_category,
					bg_priority,
					bg_status,
					bg_assigned_to_user,
					bg_user_defined_attribute,
					bg_project_custom_dropdown_value1,
					bg_project_custom_dropdown_value2,
					bg_project_custom_dropdown_value3
					,[test],[drop1])
					values (N'test task', N'', 1,  1, getdate(), getdate(),
					0, 1,
					3, 1, 1, 1, 0,
					N'',N'',N'' ,N'',N'1')
select scope_identity()
2018-08-16 09:26:07 http://localhost:49412/edit_bug.aspx sql=

declare @now datetime
set @now = getdate()

insert into bug_posts
(bp_bug, bp_user, bp_date, bp_comment, bp_comment_search, bp_email_from, bp_email_cc, bp_type, bp_content_type,
bp_hidden_from_external_users)
values(
3,
1,
@now,
N'<p>
	test</p>
',
N'
	test
',
null,
N'',
N'comment',
N'text/html',
0)
select scope_identity();
2018-08-16 09:26:07 http://localhost:49412/edit_bug.aspx sql=

declare @pj int
select @pj = bg_project from bugs where bg_id = 3

delete from bug_subscriptions
where bs_bug = 3
and bs_user in
(select x.pu_user
from projects
left outer join project_user_xref x on pu_project = pj_id
where pu_project = @pj
and isnull(pu_permission_level,2) = 0)

delete from bug_subscriptions
where bs_bug = 3
and bs_user in
(select us_id from users
 inner join orgs on us_org = og_id
 inner join bugs on bg_id = 3
 where og_other_orgs_permission_level = 0
 and bg_org <> og_id)

insert into bug_subscriptions (bs_bug, bs_user)
select 3, us_id
from users
inner join orgs on us_org = og_id
inner join bugs on bg_id = 3
left outer join project_user_xref on pu_project = @pj and pu_user = us_id
where us_auto_subscribe = 1
and
case
	when
		us_org <> bg_org
		and og_other_orgs_permission_level < 2
		and og_other_orgs_permission_level < isnull(pu_permission_level,2)
			then og_other_orgs_permission_level
	else
		isnull(pu_permission_level,2)
end <> 0
and us_active = 1
and us_id not in
(select bs_user from bug_subscriptions
where bs_bug = 3)

insert into bug_subscriptions (bs_bug, bs_user)
select 3, pj_default_user
from projects
inner join users on pj_default_user = us_id
where pj_id = @pj
and pj_default_user <> 0
and pj_auto_subscribe_default_user = 1
and us_active = 1
and pj_default_user not in
(select bs_user from bug_subscriptions
where bs_bug = 3)

insert into bug_subscriptions (bs_bug, bs_user)
select 3, pu_user from project_user_xref
inner join users on pu_user = us_id
inner join orgs on us_org = og_id
inner join bugs on bg_id = 3
where pu_auto_subscribe = 1
and
case
	when
		us_org <> bg_org
		and og_other_orgs_permission_level < 2
		and og_other_orgs_permission_level < isnull(pu_permission_level,2)
			then og_other_orgs_permission_level
	else
		isnull(pu_permission_level,2)
end <> 0
and us_active = 1
and pu_project = @pj
and pu_user not in
(select bs_user from bug_subscriptions
where bs_bug = 3)

insert into bug_subscriptions (bs_bug, bs_user)
select 3, us_id
from users
inner join bugs on bg_id = 3
inner join orgs on us_org = og_id
left outer join project_user_xref on pu_project = @pj and pu_user = us_id
where ((us_auto_subscribe_own_bugs = 1 and bg_assigned_to_user = us_id)
or
(us_auto_subscribe_reported_bugs = 1 and bg_reported_user = us_id))
and
case
	when
		us_org <> bg_org
		and og_other_orgs_permission_level < 2
		and og_other_orgs_permission_level < isnull(pu_permission_level,2)
			then og_other_orgs_permission_level
	else
		isnull(pu_permission_level,2)
end <> 0
and us_active = 1
and us_id not in
(select bs_user from bug_subscriptions
where bs_bug = 3)
2018-08-16 09:26:07 http://localhost:49412/edit_bug.aspx sql=

/* get notification emails for all subscribers */
select us_email, us_id, us_admin, og.*
from bug_subscriptions
inner join users on bs_user = us_id
inner join orgs og on us_org = og_id
inner join bugs on bg_id = bs_bug
left outer join project_user_xref on pu_user = us_id and pu_project = bg_project
where us_email is not null
and us_enable_notifications = 1
-- $status_change
and us_active = 1
and us_email <> ''
and (   (1 <= us_reported_notifications and bg_reported_user = bs_user)
or (1 <= us_assigned_notifications and bg_assigned_to_user = bs_user)
or (1 <= us_assigned_notifications and 0 = bs_user)
or (1 <= us_subscribed_notifications))
and
case
when
us_org <> bg_org
and og_other_orgs_permission_level < 2
and og_other_orgs_permission_level < isnull(pu_permission_level,2)
	then og_other_orgs_permission_level
else
isnull(pu_permission_level,2)
end <> 0
and bs_bug = 3
and (us_id <> 1 or isnull(us_send_notifications_to_self,0) = 1)
2018-08-16 09:26:07  started updating Lucene index using folder F:\Synced\Visual Studio 2017\Projects\temp\btnetnew\btnetnew\App_Data\lucene_index
2018-08-16 09:26:07 http://localhost:49412/edit_bug.aspx elapsed milliseconds:0009
2018-08-16 09:26:07 http://localhost:49412/edit_bug.aspx?id=3 sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = 'ca17647f-ea7c-4b1a-a002-85a95e17a7ee';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = 'ca17647f-ea7c-4b1a-a002-85a95e17a7ee'
and us_active = 1
2018-08-16 09:26:07  sql=

/* get searchable cols */					
select sc.name
from syscolumns sc
inner join systypes st on st.xusertype = sc.xusertype
inner join sysobjects so on sc.id = so.id
where so.name = 'bugs'
and st.[name] <> 'sysname'
and sc.name not in ('rowguid',
'bg_id',
'bg_short_desc',
'bg_reported_user',
'bg_reported_date',
'bg_project',
'bg_org',
'bg_category',
'bg_priority',
'bg_status',
'bg_assigned_to_user',
'bg_last_updated_user',
'bg_last_updated_date',
'bg_user_defined_attribute',
'bg_project_custom_dropdown_value1',
'bg_project_custom_dropdown_value2',
'bg_project_custom_dropdown_value3',
'bg_tags')
and st.[name] in ('nvarchar','varchar')
and sc.length > 30
2018-08-16 09:26:07 http://localhost:49412/edit_bug.aspx?id=3 elapsed milliseconds:0000
2018-08-16 09:26:07 http://localhost:49412/edit_bug.aspx?id=3 sql=
 /* get_bug_datarow */
declare @svn_revisions int
declare @git_commits int
declare @hg_revisions int
declare @tasks int
declare @related int;
set @svn_revisions = 0
set @git_commits = 0
set @hg_revisions = 0
set @tasks = 0
set @related = 0

select bg_id [id],
bg_short_desc [short_desc],
isnull(bg_tags,'') [bg_tags],
isnull(ru.us_username,'[deleted user]') [reporter],
isnull(ru.us_email,'') [reporter_email],
case rtrim(ru.us_firstname)
	when null then isnull(ru.us_lastname, '')
	when '' then isnull(ru.us_lastname, '')
	else isnull(ru.us_lastname + ', ' + ru.us_firstname,'')
	end [reporter_fullname],
bg_reported_date [reported_date],
datediff(s,bg_reported_date,getdate()) [seconds_ago],
isnull(lu.us_username,'') [last_updated_user],
case rtrim(lu.us_firstname)
	when null then isnull(lu.us_lastname, '')
	when '' then isnull(lu.us_lastname, '')
	else isnull(lu.us_lastname + ', ' + lu.us_firstname,'')
	end [last_updated_fullname],


bg_last_updated_date [last_updated_date],
isnull(bg_project,0) [project],
isnull(pj_name,'[no project]') [current_project],

isnull(bg_org,0) [organization],
isnull(bugorg.og_name,'') [og_name],

isnull(bg_category,0) [category],
isnull(ct_name,'') [category_name],

isnull(bg_priority,0) [priority],
isnull(pr_name,'') [priority_name],

isnull(bg_status,0) [status],
isnull(st_name,'') [status_name],

isnull(bg_user_defined_attribute,0) [udf],
isnull(udf_name,'') [udf_name],

isnull(bg_assigned_to_user,0) [assigned_to_user],
isnull(asg.us_username,'[not assigned]') [assigned_to_username],
case rtrim(asg.us_firstname)
when null then isnull(asg.us_lastname, '[not assigned]')
when '' then isnull(asg.us_lastname, '[not assigned]')
else isnull(asg.us_lastname + ', ' + asg.us_firstname,'[not assigned]')
end [assigned_to_fullname],

isnull(bs_user,0) [subscribed],

case
when
	1 <> bg_org
	and userorg.og_other_orgs_permission_level < 2
	and userorg.og_other_orgs_permission_level < isnull(pu_permission_level,2)
		then userorg.og_other_orgs_permission_level
else
	isnull(pu_permission_level,2)
end [pu_permission_level],

isnull(bg_project_custom_dropdown_value1,'') [bg_project_custom_dropdown_value1],
isnull(bg_project_custom_dropdown_value2,'') [bg_project_custom_dropdown_value2],
isnull(bg_project_custom_dropdown_value3,'') [bg_project_custom_dropdown_value3],
@related [relationship_cnt],
@svn_revisions [svn_revision_cnt],
@git_commits [git_commit_cnt],
@hg_revisions [hg_commit_cnt],
@tasks [task_cnt],
getdate() [snapshot_timestamp]
,[test],[drop1]
from bugs
inner join users this_user on us_id = 1
inner join orgs userorg on this_user.us_org = userorg.og_id
left outer join user_defined_attribute on bg_user_defined_attribute = udf_id
left outer join projects on bg_project = pj_id
left outer join orgs bugorg on bg_org = bugorg.og_id
left outer join categories on bg_category = ct_id
left outer join priorities on bg_priority = pr_id
left outer join statuses on bg_status = st_id
left outer join users asg on bg_assigned_to_user = asg.us_id
left outer join users ru on bg_reported_user = ru.us_id
left outer join users lu on bg_last_updated_user = lu.us_id
left outer join bug_subscriptions on bs_bug = bg_id and bs_user = 1
left outer join project_user_xref on pj_id = pu_project
and pu_user = 1
where bg_id = 3
2018-08-16 09:26:07 http://localhost:49412/edit_bug.aspx?id=3 elapsed milliseconds:0028
2018-08-16 09:26:07 http://localhost:49412/edit_bug.aspx?id=3 sql=
/* drop downs */ select pj_id, pj_name
		from projects
		left outer join project_user_xref on pj_id = pu_project
		and pu_user = 1
		where pj_active = 1
		and isnull(pu_permission_level,2) not in (0, 1)
		order by pj_name;
select og_id, og_name from orgs where og_active = 1 order by og_name;
select ct_id, ct_name from categories order by ct_sort_seq, ct_name;
select pr_id, pr_name from priorities order by pr_sort_seq, pr_name;
select st_id, st_name from statuses order by st_sort_seq, st_name;
select udf_id, udf_name from user_defined_attribute order by udf_sort_seq, udf_name;
2018-08-16 09:26:07  elapsed milliseconds:0075
2018-08-16 09:26:07 http://localhost:49412/edit_bug.aspx?id=3 elapsed milliseconds:0001
2018-08-16 09:26:07  sql=

select bg_id, 

isnull(bg_tags,'') bg_tags,
bg_short_desc    
from bugs where bg_id = 3
2018-08-16 09:26:07 http://localhost:49412/edit_bug.aspx?id=3 sql=

/* users this project */ select us_id, case when 0 = 1 then us_lastname + ', ' + us_firstname else us_username end us_username
from users
inner join orgs on us_org = og_id
where us_active = 1
and og_can_be_assigned_to = 1
and (2 <> 0 or 1 = og_id or (og_external_user = 0 and 0 = 1))
and us_id not in
	(select pu_user from project_user_xref
		where pu_project = 0
		and pu_permission_level = 0)
order by us_username; 
2018-08-16 09:26:07  elapsed milliseconds:0001
2018-08-16 09:26:07 http://localhost:49412/edit_bug.aspx?id=3 elapsed milliseconds:0000
2018-08-16 09:26:07  sql=

select bp_bug, bp_id, 
isnull(bp_comment_search,bp_comment) [text] 
from bug_posts 
where bp_type <> 'update'
and bp_hidden_from_external_users = 0
and bp_bug = 3
2018-08-16 09:26:07 http://localhost:49412/edit_bug.aspx?id=3 sql=

/* get_bug_posts */
select
a.bp_bug,
a.bp_comment,
isnull(us_username,'') [us_username],
case rtrim(us_firstname)
	when null then isnull(us_lastname, '')
	when '' then isnull(us_lastname, '')
	else isnull(us_lastname + ', ' + us_firstname,'')
	end [us_fullname],
isnull(us_email,'') [us_email],
a.bp_date,
datediff(s,a.bp_date,getdate()) [seconds_ago],
a.bp_id,
a.bp_type,
isnull(a.bp_email_from,'') bp_email_from,
isnull(a.bp_email_to,'') bp_email_to,
isnull(a.bp_email_cc,'') bp_email_cc,
isnull(a.bp_file,'') bp_file,
isnull(a.bp_size,0) bp_size,
isnull(a.bp_content_type,'') bp_content_type,
a.bp_hidden_from_external_users,
isnull(ba.bp_file,'') ba_file,  -- intentionally ba
isnull(ba.bp_id,'') ba_id, -- intentionally ba
isnull(ba.bp_size,'') ba_size,  -- intentionally ba
isnull(ba.bp_content_type,'') ba_content_type -- intentionally ba
from bug_posts a
left outer join users on us_id = a.bp_user
left outer join bug_posts ba on ba.bp_parent = a.bp_id and ba.bp_bug = a.bp_bug
where a.bp_bug = 3
and a.bp_parent is null
 order by a.bp_id desc, ba.bp_parent, ba.bp_id
2018-08-16 09:26:07  elapsed milliseconds:0002
2018-08-16 09:26:07 http://localhost:49412/edit_bug.aspx?id=3 elapsed milliseconds:0005
2018-08-16 09:26:07  done updating Lucene index
2018-08-16 09:26:17 http://localhost:49412/delete_comment.aspx?id=7&bug_id=3 sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = 'ca17647f-ea7c-4b1a-a002-85a95e17a7ee';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = 'ca17647f-ea7c-4b1a-a002-85a95e17a7ee'
and us_active = 1
2018-08-16 09:26:17 http://localhost:49412/delete_comment.aspx?id=7&bug_id=3 elapsed milliseconds:0000
2018-08-16 09:26:17 http://localhost:49412/delete_comment.aspx?id=7&bug_id=3 sql=

declare @bg_org int

select isnull(pu_permission_level,2),
bg_org
from bugs
left outer join project_user_xref
on pu_project = bg_project
and pu_user = 1
where bg_id = 3
2018-08-16 09:26:17 http://localhost:49412/delete_comment.aspx?id=7&bug_id=3 elapsed milliseconds:0002
2018-08-16 09:26:17 http://localhost:49412/delete_comment.aspx?id=7&bug_id=3 sql=
select bp_comment from bug_posts where bp_id = 7
2018-08-16 09:26:17 http://localhost:49412/delete_comment.aspx?id=7&bug_id=3 elapsed milliseconds:0001
2018-08-16 09:27:11 http://localhost:49412/view_subscribers.aspx?id=3 sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = 'ca17647f-ea7c-4b1a-a002-85a95e17a7ee';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = 'ca17647f-ea7c-4b1a-a002-85a95e17a7ee'
and us_active = 1
2018-08-16 09:27:11 http://localhost:49412/view_subscribers.aspx?id=3 elapsed milliseconds:0018
2018-08-16 09:27:11 http://localhost:49412/view_subscribers.aspx?id=3 sql=

declare @bg_org int

select isnull(pu_permission_level,2),
bg_org
from bugs
left outer join project_user_xref
on pu_project = bg_project
and pu_user = 1
where bg_id = 3
2018-08-16 09:27:11 http://localhost:49412/view_subscribers.aspx?id=3 elapsed milliseconds:0002
2018-08-16 09:27:11 http://localhost:49412/view_subscribers.aspx?id=3 sql=

declare @pj int
select @pj = bg_project from bugs where bg_id = 3

delete from bug_subscriptions
where bs_bug = 3
and bs_user in
(select x.pu_user
from projects
left outer join project_user_xref x on pu_project = pj_id
where pu_project = @pj
and isnull(pu_permission_level,2) = 0)

delete from bug_subscriptions
where bs_bug = 3
and bs_user in
(select us_id from users
 inner join orgs on us_org = og_id
 inner join bugs on bg_id = 3
 where og_other_orgs_permission_level = 0
 and bg_org <> og_id)

insert into bug_subscriptions (bs_bug, bs_user)
select 3, us_id
from users
inner join orgs on us_org = og_id
inner join bugs on bg_id = 3
left outer join project_user_xref on pu_project = @pj and pu_user = us_id
where us_auto_subscribe = 1
and
case
	when
		us_org <> bg_org
		and og_other_orgs_permission_level < 2
		and og_other_orgs_permission_level < isnull(pu_permission_level,2)
			then og_other_orgs_permission_level
	else
		isnull(pu_permission_level,2)
end <> 0
and us_active = 1
and us_id not in
(select bs_user from bug_subscriptions
where bs_bug = 3)

insert into bug_subscriptions (bs_bug, bs_user)
select 3, pj_default_user
from projects
inner join users on pj_default_user = us_id
where pj_id = @pj
and pj_default_user <> 0
and pj_auto_subscribe_default_user = 1
and us_active = 1
and pj_default_user not in
(select bs_user from bug_subscriptions
where bs_bug = 3)

insert into bug_subscriptions (bs_bug, bs_user)
select 3, pu_user from project_user_xref
inner join users on pu_user = us_id
inner join orgs on us_org = og_id
inner join bugs on bg_id = 3
where pu_auto_subscribe = 1
and
case
	when
		us_org <> bg_org
		and og_other_orgs_permission_level < 2
		and og_other_orgs_permission_level < isnull(pu_permission_level,2)
			then og_other_orgs_permission_level
	else
		isnull(pu_permission_level,2)
end <> 0
and us_active = 1
and pu_project = @pj
and pu_user not in
(select bs_user from bug_subscriptions
where bs_bug = 3)

insert into bug_subscriptions (bs_bug, bs_user)
select 3, us_id
from users
inner join bugs on bg_id = 3
inner join orgs on us_org = og_id
left outer join project_user_xref on pu_project = @pj and pu_user = us_id
where ((us_auto_subscribe_own_bugs = 1 and bg_assigned_to_user = us_id)
or
(us_auto_subscribe_reported_bugs = 1 and bg_reported_user = us_id))
and
case
	when
		us_org <> bg_org
		and og_other_orgs_permission_level < 2
		and og_other_orgs_permission_level < isnull(pu_permission_level,2)
			then og_other_orgs_permission_level
	else
		isnull(pu_permission_level,2)
end <> 0
and us_active = 1
and us_id not in
(select bs_user from bug_subscriptions
where bs_bug = 3)
2018-08-16 09:27:11 http://localhost:49412/view_subscribers.aspx?id=3 sql=

select
'<a href=delete_subscriber.aspx?ses=ca17647f-ea7c-4b1a-a002-85a95e17a7ee&bg_id=3&us_id=' + convert(varchar,us_id) + '>unsubscribe</a>'	[$no_sort_unsubscriber],
us_username [user],
us_lastname + ', ' + us_firstname [name],
us_email [email],
case when us_reported_notifications < 4 or us_assigned_notifications < 4 or us_subscribed_notifications < 4 then 'Y' else 'N' end [user is<br>filtering<br>notifications]
from bug_subscriptions
inner join users on bs_user = us_id
where bs_bug = 3
and us_enable_notifications = 1
and us_active = 1
order by 1
2018-08-16 09:27:11 http://localhost:49412/view_subscribers.aspx?id=3 elapsed milliseconds:0003
2018-08-16 09:27:11 http://localhost:49412/view_subscribers.aspx?id=3 sql=

declare @project int;
declare @org int;
select @project = bg_project, @org = bg_org from bugs where bg_id = 3;select us_id, case when 0 = 1 then us_lastname + ', ' + us_firstname else us_username end us_username
			from users
			where us_active = 1
			and us_enable_notifications = 1
			and us_id not in
				(select pu_user from project_user_xref
				where pu_project = @project
				and pu_permission_level = 0)
			and us_id not in (
				select us_id
				from bug_subscriptions
				inner join users on bs_user = us_id
				where bs_bug = 3
				and us_enable_notifications = 1
				and us_active = 1)
			and us_id not in (
				select us_id from users
				inner join orgs on us_org = og_id
				where us_org <> @org
				and og_other_orgs_permission_level = 0)
			order by us_username; 
2018-08-16 09:27:11 http://localhost:49412/view_subscribers.aspx?id=3 elapsed milliseconds:0010
2018-08-16 09:27:15 http://localhost:49412/view_subscribers.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = 'ca17647f-ea7c-4b1a-a002-85a95e17a7ee';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = 'ca17647f-ea7c-4b1a-a002-85a95e17a7ee'
and us_active = 1
2018-08-16 09:27:15 http://localhost:49412/view_subscribers.aspx elapsed milliseconds:0000
2018-08-16 09:27:15 http://localhost:49412/view_subscribers.aspx sql=

declare @bg_org int

select isnull(pu_permission_level,2),
bg_org
from bugs
left outer join project_user_xref
on pu_project = bg_project
and pu_user = 1
where bg_id = 3
2018-08-16 09:27:15 http://localhost:49412/view_subscribers.aspx elapsed milliseconds:0000
2018-08-16 09:27:15 http://localhost:49412/view_subscribers.aspx sql=
delete from bug_subscriptions where bs_bug = 3 and bs_user = 1;
			insert into bug_subscriptions (bs_bug, bs_user) values(3, 1)
2018-08-16 09:27:15 http://localhost:49412/view_subscribers.aspx sql=

/* get notification email for just one user  */
select us_email, us_id, us_admin, og.*
from bug_subscriptions
inner join users on bs_user = us_id
inner join orgs og on us_org = og_id
inner join bugs on bg_id = bs_bug
left outer join project_user_xref on pu_user = us_id and pu_project = bg_project
where us_email is not null
and us_enable_notifications = 1
-- $status_change
and us_active = 1
and us_email <> ''
and
case
when
	us_org <> bg_org
	and og_other_orgs_permission_level < 2
	and og_other_orgs_permission_level < isnull(pu_permission_level,2)
		then og_other_orgs_permission_level
else
	isnull(pu_permission_level,2)
end <> 0
and bs_bug = 3
and us_id = 1
2018-08-16 09:27:15  started updating Lucene index using folder F:\Synced\Visual Studio 2017\Projects\temp\btnetnew\btnetnew\App_Data\lucene_index
2018-08-16 09:27:15 http://localhost:49412/view_subscribers.aspx elapsed milliseconds:0006
2018-08-16 09:27:15 http://localhost:49412/view_subscribers.aspx sql=

declare @pj int
select @pj = bg_project from bugs where bg_id = 3

delete from bug_subscriptions
where bs_bug = 3
and bs_user in
(select x.pu_user
from projects
left outer join project_user_xref x on pu_project = pj_id
where pu_project = @pj
and isnull(pu_permission_level,2) = 0)

delete from bug_subscriptions
where bs_bug = 3
and bs_user in
(select us_id from users
 inner join orgs on us_org = og_id
 inner join bugs on bg_id = 3
 where og_other_orgs_permission_level = 0
 and bg_org <> og_id)

insert into bug_subscriptions (bs_bug, bs_user)
select 3, us_id
from users
inner join orgs on us_org = og_id
inner join bugs on bg_id = 3
left outer join project_user_xref on pu_project = @pj and pu_user = us_id
where us_auto_subscribe = 1
and
case
	when
		us_org <> bg_org
		and og_other_orgs_permission_level < 2
		and og_other_orgs_permission_level < isnull(pu_permission_level,2)
			then og_other_orgs_permission_level
	else
		isnull(pu_permission_level,2)
end <> 0
and us_active = 1
and us_id not in
(select bs_user from bug_subscriptions
where bs_bug = 3)

insert into bug_subscriptions (bs_bug, bs_user)
select 3, pj_default_user
from projects
inner join users on pj_default_user = us_id
where pj_id = @pj
and pj_default_user <> 0
and pj_auto_subscribe_default_user = 1
and us_active = 1
and pj_default_user not in
(select bs_user from bug_subscriptions
where bs_bug = 3)

insert into bug_subscriptions (bs_bug, bs_user)
select 3, pu_user from project_user_xref
inner join users on pu_user = us_id
inner join orgs on us_org = og_id
inner join bugs on bg_id = 3
where pu_auto_subscribe = 1
and
case
	when
		us_org <> bg_org
		and og_other_orgs_permission_level < 2
		and og_other_orgs_permission_level < isnull(pu_permission_level,2)
			then og_other_orgs_permission_level
	else
		isnull(pu_permission_level,2)
end <> 0
and us_active = 1
and pu_project = @pj
and pu_user not in
(select bs_user from bug_subscriptions
where bs_bug = 3)

insert into bug_subscriptions (bs_bug, bs_user)
select 3, us_id
from users
inner join bugs on bg_id = 3
inner join orgs on us_org = og_id
left outer join project_user_xref on pu_project = @pj and pu_user = us_id
where ((us_auto_subscribe_own_bugs = 1 and bg_assigned_to_user = us_id)
or
(us_auto_subscribe_reported_bugs = 1 and bg_reported_user = us_id))
and
case
	when
		us_org <> bg_org
		and og_other_orgs_permission_level < 2
		and og_other_orgs_permission_level < isnull(pu_permission_level,2)
			then og_other_orgs_permission_level
	else
		isnull(pu_permission_level,2)
end <> 0
and us_active = 1
and us_id not in
(select bs_user from bug_subscriptions
where bs_bug = 3)
2018-08-16 09:27:15  sql=

/* get searchable cols */					
select sc.name
from syscolumns sc
inner join systypes st on st.xusertype = sc.xusertype
inner join sysobjects so on sc.id = so.id
where so.name = 'bugs'
and st.[name] <> 'sysname'
and sc.name not in ('rowguid',
'bg_id',
'bg_short_desc',
'bg_reported_user',
'bg_reported_date',
'bg_project',
'bg_org',
'bg_category',
'bg_priority',
'bg_status',
'bg_assigned_to_user',
'bg_last_updated_user',
'bg_last_updated_date',
'bg_user_defined_attribute',
'bg_project_custom_dropdown_value1',
'bg_project_custom_dropdown_value2',
'bg_project_custom_dropdown_value3',
'bg_tags')
and st.[name] in ('nvarchar','varchar')
and sc.length > 30
2018-08-16 09:27:15 http://localhost:49412/view_subscribers.aspx sql=

select
'<a href=delete_subscriber.aspx?ses=ca17647f-ea7c-4b1a-a002-85a95e17a7ee&bg_id=3&us_id=' + convert(varchar,us_id) + '>unsubscribe</a>'	[$no_sort_unsubscriber],
us_username [user],
us_lastname + ', ' + us_firstname [name],
us_email [email],
case when us_reported_notifications < 4 or us_assigned_notifications < 4 or us_subscribed_notifications < 4 then 'Y' else 'N' end [user is<br>filtering<br>notifications]
from bug_subscriptions
inner join users on bs_user = us_id
where bs_bug = 3
and us_enable_notifications = 1
and us_active = 1
order by 1
2018-08-16 09:27:15 http://localhost:49412/view_subscribers.aspx elapsed milliseconds:0003
2018-08-16 09:27:15 http://localhost:49412/view_subscribers.aspx sql=

declare @project int;
declare @org int;
select @project = bg_project, @org = bg_org from bugs where bg_id = 3;select us_id, case when 0 = 1 then us_lastname + ', ' + us_firstname else us_username end us_username
			from users
			where us_active = 1
			and us_enable_notifications = 1
			and us_id not in
				(select pu_user from project_user_xref
				where pu_project = @project
				and pu_permission_level = 0)
			and us_id not in (
				select us_id
				from bug_subscriptions
				inner join users on bs_user = us_id
				where bs_bug = 3
				and us_enable_notifications = 1
				and us_active = 1)
			and us_id not in (
				select us_id from users
				inner join orgs on us_org = og_id
				where us_org <> @org
				and og_other_orgs_permission_level = 0)
			order by us_username; 
2018-08-16 09:27:15 http://localhost:49412/view_subscribers.aspx elapsed milliseconds:0000
2018-08-16 09:27:15  elapsed milliseconds:0064
2018-08-16 09:27:15  sql=

select bg_id, 

isnull(bg_tags,'') bg_tags,
bg_short_desc    
from bugs where bg_id = 3
2018-08-16 09:27:15  elapsed milliseconds:0001
2018-08-16 09:27:15  sql=

select bp_bug, bp_id, 
isnull(bp_comment_search,bp_comment) [text] 
from bug_posts 
where bp_type <> 'update'
and bp_hidden_from_external_users = 0
and bp_bug = 3
2018-08-16 09:27:15  elapsed milliseconds:0002
2018-08-16 09:27:15  done updating Lucene index
2018-08-16 09:27:27 http://localhost:49412/subscribe.aspx?ses=ca17647f-ea7c-4b1a-a002-85a95e17a7ee&id=3&actn=1 sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = 'ca17647f-ea7c-4b1a-a002-85a95e17a7ee';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = 'ca17647f-ea7c-4b1a-a002-85a95e17a7ee'
and us_active = 1
2018-08-16 09:27:27 http://localhost:49412/subscribe.aspx?ses=ca17647f-ea7c-4b1a-a002-85a95e17a7ee&id=3&actn=1 elapsed milliseconds:0000
2018-08-16 09:27:27 http://localhost:49412/subscribe.aspx?ses=ca17647f-ea7c-4b1a-a002-85a95e17a7ee&id=3&actn=1 sql=

declare @bg_org int

select isnull(pu_permission_level,2),
bg_org
from bugs
left outer join project_user_xref
on pu_project = bg_project
and pu_user = 1
where bg_id = 3
2018-08-16 09:27:27 http://localhost:49412/subscribe.aspx?ses=ca17647f-ea7c-4b1a-a002-85a95e17a7ee&id=3&actn=1 elapsed milliseconds:0000
2018-08-16 09:27:27 http://localhost:49412/subscribe.aspx?ses=ca17647f-ea7c-4b1a-a002-85a95e17a7ee&id=3&actn=1 sql=
insert into bug_subscriptions (bs_bug, bs_user)
			values(3, 1)

TIME: 9:27:27 AM
MSG: Cannot insert duplicate key row in object 'dbo.bug_subscriptions' with unique index 'bs_index_2'. The duplicate key value is (3, 1).
The statement has been terminated.
URL: http://localhost:49412/subscribe.aspx?ses=ca17647f-ea7c-4b1a-a002-85a95e17a7ee&id=3&actn=1
EXCEPTION: System.Data.SqlClient.SqlException (0x80131904): Cannot insert duplicate key row in object 'dbo.bug_subscriptions' with unique index 'bs_index_2'. The duplicate key value is (3, 1).
The statement has been terminated.
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlCommand.RunExecuteNonQueryTds(String methodName, Boolean async, Int32 timeout, Boolean asyncWrite)
   at System.Data.SqlClient.SqlCommand.InternalExecuteNonQuery(TaskCompletionSource`1 completion, String methodName, Boolean sendToPipe, Int32 timeout, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry)
   at System.Data.SqlClient.SqlCommand.ExecuteNonQuery()
   at btnet.DbUtil.execute_nonquery(String sql) in F:\Synced\Visual Studio 2017\Projects\temp\btnetnew\btnetnew\AppCode\dbutil.cs:line 57
   at ASP.subscribe_aspx.Page_Load(Object sender, EventArgs e) in f:\Synced\Visual Studio 2017\Projects\temp\btnetnew\btnetnew\subscribe.aspx:line 49
   at System.Web.Util.CalliEventHandlerDelegateProxy.Callback(Object sender, EventArgs e)
   at System.Web.UI.Control.OnLoad(EventArgs e)
   at System.Web.UI.Control.LoadRecursive()
   at System.Web.UI.Page.ProcessRequestMain(Boolean includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint)
ClientConnectionId:ffab0541-8863-4420-b507-aee89cb04d83
Error Number:2601,State:1,Class:14

ALL_HTTP=HTTP_CONNECTION:keep-alive
HTTP_ACCEPT:*/*
HTTP_ACCEPT_ENCODING:gzip, deflate, br
HTTP_ACCEPT_LANGUAGE:en-US,en;q=0.9,tr;q=0.8
HTTP_COOKIE:hide_inactive_users=0; filter_users=; images_inline=1; history_inline=1; user=name=admin&NTLM=0; se_id=ca17647f-ea7c-4b1a-a002-85a95e17a7ee; ASP.NET_SessionId=ti2whxeac4s231xvdwadrboy
HTTP_HOST:localhost:49412
HTTP_REFERER:http://localhost:49412/edit_bug.aspx?id=3
HTTP_USER_AGENT:Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36
HTTP_X_REQUESTED_WITH:XMLHttpRequest

ALL_RAW=Connection: keep-alive
Accept: */*
Accept-Encoding: gzip, deflate, br
Accept-Language: en-US,en;q=0.9,tr;q=0.8
Cookie: hide_inactive_users=0; filter_users=; images_inline=1; history_inline=1; user=name=admin&NTLM=0; se_id=ca17647f-ea7c-4b1a-a002-85a95e17a7ee; ASP.NET_SessionId=ti2whxeac4s231xvdwadrboy
Host: localhost:49412
Referer: http://localhost:49412/edit_bug.aspx?id=3
User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36
X-Requested-With: XMLHttpRequest

APPL_MD_PATH=/LM/W3SVC/2/ROOT
APPL_PHYSICAL_PATH=F:\Synced\Visual Studio 2017\Projects\temp\btnetnew\btnetnew\
CONTENT_LENGTH=0
GATEWAY_INTERFACE=CGI/1.1
HTTPS=off
INSTANCE_ID=2
INSTANCE_META_PATH=/LM/W3SVC/2
LOCAL_ADDR=::1
PATH_INFO=/subscribe.aspx
PATH_TRANSLATED=F:\Synced\Visual Studio 2017\Projects\temp\btnetnew\btnetnew\subscribe.aspx
QUERY_STRING=ses=ca17647f-ea7c-4b1a-a002-85a95e17a7ee&id=3&actn=1
REMOTE_ADDR=::1
REMOTE_HOST=::1
REMOTE_PORT=49867
REQUEST_METHOD=GET
SCRIPT_NAME=/subscribe.aspx
SERVER_NAME=localhost
SERVER_PORT=49412
SERVER_PORT_SECURE=0
SERVER_PROTOCOL=HTTP/1.1
SERVER_SOFTWARE=Microsoft-IIS/10.0
URL=/subscribe.aspx
HTTP_CONNECTION=keep-alive
HTTP_ACCEPT=*/*
HTTP_ACCEPT_ENCODING=gzip, deflate, br
HTTP_ACCEPT_LANGUAGE=en-US,en;q=0.9,tr;q=0.8
HTTP_COOKIE=hide_inactive_users=0; filter_users=; images_inline=1; history_inline=1; user=name=admin&NTLM=0; se_id=ca17647f-ea7c-4b1a-a002-85a95e17a7ee; ASP.NET_SessionId=ti2whxeac4s231xvdwadrboy
HTTP_HOST=localhost:49412
HTTP_REFERER=http://localhost:49412/edit_bug.aspx?id=3
HTTP_USER_AGENT=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36
HTTP_X_REQUESTED_WITH=XMLHttpRequest
2018-08-16 09:27:27 http://localhost:49412/subscribe.aspx?ses=ca17647f-ea7c-4b1a-a002-85a95e17a7ee&id=3&actn=1 to email addr: admin@example.com
2018-08-16 09:27:27 http://localhost:49412/subscribe.aspx?ses=ca17647f-ea7c-4b1a-a002-85a95e17a7ee&id=3&actn=0 sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = 'ca17647f-ea7c-4b1a-a002-85a95e17a7ee';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = 'ca17647f-ea7c-4b1a-a002-85a95e17a7ee'
and us_active = 1
2018-08-16 09:27:27 http://localhost:49412/subscribe.aspx?ses=ca17647f-ea7c-4b1a-a002-85a95e17a7ee&id=3&actn=0 elapsed milliseconds:0000
2018-08-16 09:27:27 http://localhost:49412/subscribe.aspx?ses=ca17647f-ea7c-4b1a-a002-85a95e17a7ee&id=3&actn=0 sql=

declare @bg_org int

select isnull(pu_permission_level,2),
bg_org
from bugs
left outer join project_user_xref
on pu_project = bg_project
and pu_user = 1
where bg_id = 3
2018-08-16 09:27:27 http://localhost:49412/subscribe.aspx?ses=ca17647f-ea7c-4b1a-a002-85a95e17a7ee&id=3&actn=0 elapsed milliseconds:0000
2018-08-16 09:27:27 http://localhost:49412/subscribe.aspx?ses=ca17647f-ea7c-4b1a-a002-85a95e17a7ee&id=3&actn=0 sql=
delete from bug_subscriptions
			where bs_bug = 3 and bs_user = 1
2018-08-16 09:27:31 http://localhost:49412/delete_bug.aspx?id=3 sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = 'ca17647f-ea7c-4b1a-a002-85a95e17a7ee';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = 'ca17647f-ea7c-4b1a-a002-85a95e17a7ee'
and us_active = 1
2018-08-16 09:27:31 http://localhost:49412/delete_bug.aspx?id=3 elapsed milliseconds:0000
2018-08-16 09:27:31 http://localhost:49412/delete_bug.aspx?id=3 sql=

declare @bg_org int

select isnull(pu_permission_level,2),
bg_org
from bugs
left outer join project_user_xref
on pu_project = bg_project
and pu_user = 1
where bg_id = 3
2018-08-16 09:27:31 http://localhost:49412/delete_bug.aspx?id=3 elapsed milliseconds:0000
2018-08-16 09:27:31 http://localhost:49412/delete_bug.aspx?id=3 sql=
select bg_short_desc from bugs where bg_id = 3
2018-08-16 09:27:31 http://localhost:49412/delete_bug.aspx?id=3 elapsed milliseconds:0001
2018-08-16 09:27:34 http://localhost:49412/print_bug.aspx?id=3 sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = 'ca17647f-ea7c-4b1a-a002-85a95e17a7ee';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = 'ca17647f-ea7c-4b1a-a002-85a95e17a7ee'
and us_active = 1
2018-08-16 09:27:34 http://localhost:49412/print_bug.aspx?id=3 elapsed milliseconds:0008
2018-08-16 09:27:34 http://localhost:49412/print_bug.aspx?id=3 sql=
 /* get_bug_datarow */
declare @svn_revisions int
declare @git_commits int
declare @hg_revisions int
declare @tasks int
declare @related int;
set @svn_revisions = 0
set @git_commits = 0
set @hg_revisions = 0
set @tasks = 0
set @related = 0

select bg_id [id],
bg_short_desc [short_desc],
isnull(bg_tags,'') [bg_tags],
isnull(ru.us_username,'[deleted user]') [reporter],
isnull(ru.us_email,'') [reporter_email],
case rtrim(ru.us_firstname)
	when null then isnull(ru.us_lastname, '')
	when '' then isnull(ru.us_lastname, '')
	else isnull(ru.us_lastname + ', ' + ru.us_firstname,'')
	end [reporter_fullname],
bg_reported_date [reported_date],
datediff(s,bg_reported_date,getdate()) [seconds_ago],
isnull(lu.us_username,'') [last_updated_user],
case rtrim(lu.us_firstname)
	when null then isnull(lu.us_lastname, '')
	when '' then isnull(lu.us_lastname, '')
	else isnull(lu.us_lastname + ', ' + lu.us_firstname,'')
	end [last_updated_fullname],


bg_last_updated_date [last_updated_date],
isnull(bg_project,0) [project],
isnull(pj_name,'[no project]') [current_project],

isnull(bg_org,0) [organization],
isnull(bugorg.og_name,'') [og_name],

isnull(bg_category,0) [category],
isnull(ct_name,'') [category_name],

isnull(bg_priority,0) [priority],
isnull(pr_name,'') [priority_name],

isnull(bg_status,0) [status],
isnull(st_name,'') [status_name],

isnull(bg_user_defined_attribute,0) [udf],
isnull(udf_name,'') [udf_name],

isnull(bg_assigned_to_user,0) [assigned_to_user],
isnull(asg.us_username,'[not assigned]') [assigned_to_username],
case rtrim(asg.us_firstname)
when null then isnull(asg.us_lastname, '[not assigned]')
when '' then isnull(asg.us_lastname, '[not assigned]')
else isnull(asg.us_lastname + ', ' + asg.us_firstname,'[not assigned]')
end [assigned_to_fullname],

isnull(bs_user,0) [subscribed],

case
when
	1 <> bg_org
	and userorg.og_other_orgs_permission_level < 2
	and userorg.og_other_orgs_permission_level < isnull(pu_permission_level,2)
		then userorg.og_other_orgs_permission_level
else
	isnull(pu_permission_level,2)
end [pu_permission_level],

isnull(bg_project_custom_dropdown_value1,'') [bg_project_custom_dropdown_value1],
isnull(bg_project_custom_dropdown_value2,'') [bg_project_custom_dropdown_value2],
isnull(bg_project_custom_dropdown_value3,'') [bg_project_custom_dropdown_value3],
@related [relationship_cnt],
@svn_revisions [svn_revision_cnt],
@git_commits [git_commit_cnt],
@hg_revisions [hg_commit_cnt],
@tasks [task_cnt],
getdate() [snapshot_timestamp]
,[test],[drop1]
from bugs
inner join users this_user on us_id = 1
inner join orgs userorg on this_user.us_org = userorg.og_id
left outer join user_defined_attribute on bg_user_defined_attribute = udf_id
left outer join projects on bg_project = pj_id
left outer join orgs bugorg on bg_org = bugorg.og_id
left outer join categories on bg_category = ct_id
left outer join priorities on bg_priority = pr_id
left outer join statuses on bg_status = st_id
left outer join users asg on bg_assigned_to_user = asg.us_id
left outer join users ru on bg_reported_user = ru.us_id
left outer join users lu on bg_last_updated_user = lu.us_id
left outer join bug_subscriptions on bs_bug = bg_id and bs_user = 1
left outer join project_user_xref on pj_id = pu_project
and pu_user = 1
where bg_id = 3
2018-08-16 09:27:34 http://localhost:49412/print_bug.aspx?id=3 elapsed milliseconds:0016
2018-08-16 09:27:34 http://localhost:49412/print_bug.aspx?id=3 sql=

/* get_bug_posts */
select
a.bp_bug,
a.bp_comment,
isnull(us_username,'') [us_username],
case rtrim(us_firstname)
	when null then isnull(us_lastname, '')
	when '' then isnull(us_lastname, '')
	else isnull(us_lastname + ', ' + us_firstname,'')
	end [us_fullname],
isnull(us_email,'') [us_email],
a.bp_date,
datediff(s,a.bp_date,getdate()) [seconds_ago],
a.bp_id,
a.bp_type,
isnull(a.bp_email_from,'') bp_email_from,
isnull(a.bp_email_to,'') bp_email_to,
isnull(a.bp_email_cc,'') bp_email_cc,
isnull(a.bp_file,'') bp_file,
isnull(a.bp_size,0) bp_size,
isnull(a.bp_content_type,'') bp_content_type,
a.bp_hidden_from_external_users,
isnull(ba.bp_file,'') ba_file,  -- intentionally ba
isnull(ba.bp_id,'') ba_id, -- intentionally ba
isnull(ba.bp_size,'') ba_size,  -- intentionally ba
isnull(ba.bp_content_type,'') ba_content_type -- intentionally ba
from bug_posts a
left outer join users on us_id = a.bp_user
left outer join bug_posts ba on ba.bp_parent = a.bp_id and ba.bp_bug = a.bp_bug
where a.bp_bug = 3
and a.bp_parent is null
 order by a.bp_id desc, ba.bp_parent, ba.bp_id
2018-08-16 09:27:34 http://localhost:49412/print_bug.aspx?id=3 elapsed milliseconds:0006
2018-08-16 09:28:03 http://localhost:49412/admin.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = 'ca17647f-ea7c-4b1a-a002-85a95e17a7ee';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = 'ca17647f-ea7c-4b1a-a002-85a95e17a7ee'
and us_active = 1
2018-08-16 09:28:04 http://localhost:49412/admin.aspx elapsed milliseconds:0018
2018-08-16 09:28:06 http://localhost:49412/udfs.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = 'ca17647f-ea7c-4b1a-a002-85a95e17a7ee';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = 'ca17647f-ea7c-4b1a-a002-85a95e17a7ee'
and us_active = 1
2018-08-16 09:28:06 http://localhost:49412/udfs.aspx elapsed milliseconds:0000
2018-08-16 09:28:06 http://localhost:49412/udfs.aspx sql=
select udf_id [id],
		udf_name [user defined attribute value],
		udf_sort_seq [sort seq],
		case when udf_default = 1 then 'Y' else 'N' end [default],
		udf_id [hidden]
		from user_defined_attribute order by udf_name
2018-08-16 09:28:06 http://localhost:49412/udfs.aspx elapsed milliseconds:0001
2018-08-16 09:28:16 http://localhost:49412/edit_udf.aspx?id=2 sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = 'ca17647f-ea7c-4b1a-a002-85a95e17a7ee';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = 'ca17647f-ea7c-4b1a-a002-85a95e17a7ee'
and us_active = 1
2018-08-16 09:28:16 http://localhost:49412/edit_udf.aspx?id=2 elapsed milliseconds:0000
2018-08-16 09:28:17 http://localhost:49412/edit_udf.aspx?id=2 sql=
select udf_name, udf_sort_seq, udf_default from user_defined_attribute where udf_id = 2
2018-08-16 09:28:17 http://localhost:49412/edit_udf.aspx?id=2 elapsed milliseconds:0001
2018-08-16 09:28:21 http://localhost:49412/delete_udf.aspx?id=2 sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = 'ca17647f-ea7c-4b1a-a002-85a95e17a7ee';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = 'ca17647f-ea7c-4b1a-a002-85a95e17a7ee'
and us_active = 1
2018-08-16 09:28:21 http://localhost:49412/delete_udf.aspx?id=2 elapsed milliseconds:0000
2018-08-16 09:28:21 http://localhost:49412/delete_udf.aspx?id=2 sql=
declare @cnt int
			select @cnt = count(1) from bugs where bg_user_defined_attribute = 2
			select udf_name, @cnt [cnt] from user_defined_attribute where udf_id = 2
2018-08-16 09:28:21 http://localhost:49412/delete_udf.aspx?id=2 elapsed milliseconds:0001
2018-08-16 09:29:59 http://localhost:49412/delete_udf.aspx?id=2 sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = 'ca17647f-ea7c-4b1a-a002-85a95e17a7ee';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = 'ca17647f-ea7c-4b1a-a002-85a95e17a7ee'
and us_active = 1
2018-08-16 09:29:59 http://localhost:49412/delete_udf.aspx?id=2 elapsed milliseconds:0010
2018-08-16 09:29:59 http://localhost:49412/delete_udf.aspx?id=2 sql=
declare @cnt int
			select @cnt = count(1) from bugs where bg_user_defined_attribute = 2
			select udf_name, @cnt [cnt] from user_defined_attribute where udf_id = 2
2018-08-16 09:29:59 http://localhost:49412/delete_udf.aspx?id=2 elapsed milliseconds:0002
2018-08-16 09:30:02 http://localhost:49412/delete_udf.aspx?id=2 sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = 'ca17647f-ea7c-4b1a-a002-85a95e17a7ee';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = 'ca17647f-ea7c-4b1a-a002-85a95e17a7ee'
and us_active = 1
2018-08-16 09:30:02 http://localhost:49412/delete_udf.aspx?id=2 elapsed milliseconds:0000
2018-08-16 09:30:02 http://localhost:49412/delete_udf.aspx?id=2 sql=
delete user_defined_attribute where udf_id = 2
2018-08-16 09:30:02 http://localhost:49412/delete_udf.aspx?id=2 sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = 'ca17647f-ea7c-4b1a-a002-85a95e17a7ee';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = 'ca17647f-ea7c-4b1a-a002-85a95e17a7ee'
and us_active = 1
2018-08-16 09:30:02 http://localhost:49412/delete_udf.aspx?id=2 elapsed milliseconds:0000
2018-08-16 09:30:02 http://localhost:49412/delete_udf.aspx?id=2 sql=
select udf_id [id],
		udf_name [user defined attribute value],
		udf_sort_seq [sort seq],
		case when udf_default = 1 then 'Y' else 'N' end [default],
		udf_id [hidden]
		from user_defined_attribute order by udf_name
2018-08-16 09:30:02 http://localhost:49412/delete_udf.aspx?id=2 elapsed milliseconds:0001
2018-08-16 09:30:22 http://localhost:49412/queries.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = 'ca17647f-ea7c-4b1a-a002-85a95e17a7ee';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = 'ca17647f-ea7c-4b1a-a002-85a95e17a7ee'
and us_active = 1
2018-08-16 09:30:22 http://localhost:49412/queries.aspx elapsed milliseconds:0000
2018-08-16 09:30:22 http://localhost:49412/queries.aspx sql=
select
			qu_desc [query],
			case
				when isnull(qu_user,0) = 0 and isnull(qu_org,0) is null then 'everybody'
				when isnull(qu_user,0) <> 0 then 'user:' + us_username
				when isnull(qu_org,0) <> 0 then 'org:' + og_name
				else ' '
				end [visibility],
			'<a href=bugs.aspx?qu_id=' + convert(varchar,qu_id) + '>view list</a>' [view list],
			'<a target=_blank href=print_bugs.aspx?qu_id=' + convert(varchar,qu_id) + '>print list</a>' [print list],
			'<a target=_blank href=print_bugs.aspx?format=excel&qu_id=' + convert(varchar,qu_id) + '>export as excel</a>' [export as excel],
			'<a target=_blank href=print_bugs2.aspx?qu_id=' + convert(varchar,qu_id) + '>print detail</a>' [print list<br>with detail],
			'<a href=edit_query.aspx?id=' + convert(varchar,qu_id) + '>edit</a>' [edit],
			'<a href=delete_query.aspx?id=' + convert(varchar,qu_id) + '>delete</a>' [delete],
			replace(convert(nvarchar(4000),qu_sql), char(10),'<br>') [sql]
			from queries
			left outer join users on qu_user = us_id
			left outer join orgs on qu_org = og_id
			where 1 = 0 /* all */
			or isnull(qu_user,0) = 1
			or isnull(qu_user,0) = 0
			order by qu_desc
2018-08-16 09:30:22 http://localhost:49412/queries.aspx elapsed milliseconds:0006
2018-08-16 09:30:26 http://localhost:49412/edit_query.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = 'ca17647f-ea7c-4b1a-a002-85a95e17a7ee';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = 'ca17647f-ea7c-4b1a-a002-85a95e17a7ee'
and us_active = 1
2018-08-16 09:30:26 http://localhost:49412/edit_query.aspx elapsed milliseconds:0000
2018-08-16 09:30:26 http://localhost:49412/edit_query.aspx sql=
/* populate org/user dropdowns */
select og_id, og_name from orgs order by og_name;
select us_id, us_username from users order by us_username
2018-08-16 09:30:26 http://localhost:49412/edit_query.aspx elapsed milliseconds:0001
2018-08-16 09:31:45 http://localhost:49412/edit_query.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = 'ca17647f-ea7c-4b1a-a002-85a95e17a7ee';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = 'ca17647f-ea7c-4b1a-a002-85a95e17a7ee'
and us_active = 1
2018-08-16 09:31:45 http://localhost:49412/edit_query.aspx elapsed milliseconds:0008
2018-08-16 09:31:45 http://localhost:49412/edit_query.aspx sql=
select count(1) from queries where qu_desc = N'myquery'
2018-08-16 09:31:45 http://localhost:49412/edit_query.aspx sql=
insert into queries
				(qu_desc, qu_sql, qu_default, qu_user, qu_org)
				values (N'myquery', N'select * from Users', 0, 0, 0)
2018-08-16 09:31:45 http://localhost:49412/edit_query.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = 'ca17647f-ea7c-4b1a-a002-85a95e17a7ee';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = 'ca17647f-ea7c-4b1a-a002-85a95e17a7ee'
and us_active = 1
2018-08-16 09:31:45 http://localhost:49412/edit_query.aspx elapsed milliseconds:0000
2018-08-16 09:31:45 http://localhost:49412/edit_query.aspx sql=
select
			qu_desc [query],
			case
				when isnull(qu_user,0) = 0 and isnull(qu_org,0) is null then 'everybody'
				when isnull(qu_user,0) <> 0 then 'user:' + us_username
				when isnull(qu_org,0) <> 0 then 'org:' + og_name
				else ' '
				end [visibility],
			'<a href=bugs.aspx?qu_id=' + convert(varchar,qu_id) + '>view list</a>' [view list],
			'<a target=_blank href=print_bugs.aspx?qu_id=' + convert(varchar,qu_id) + '>print list</a>' [print list],
			'<a target=_blank href=print_bugs.aspx?format=excel&qu_id=' + convert(varchar,qu_id) + '>export as excel</a>' [export as excel],
			'<a target=_blank href=print_bugs2.aspx?qu_id=' + convert(varchar,qu_id) + '>print detail</a>' [print list<br>with detail],
			'<a href=edit_query.aspx?id=' + convert(varchar,qu_id) + '>edit</a>' [edit],
			'<a href=delete_query.aspx?id=' + convert(varchar,qu_id) + '>delete</a>' [delete],
			replace(convert(nvarchar(4000),qu_sql), char(10),'<br>') [sql]
			from queries
			left outer join users on qu_user = us_id
			left outer join orgs on qu_org = og_id
			where 1 = 0 /* all */
			or isnull(qu_user,0) = 1
			or isnull(qu_user,0) = 0
			order by qu_desc
2018-08-16 09:31:45 http://localhost:49412/edit_query.aspx elapsed milliseconds:0005
2018-08-16 09:31:48 http://localhost:49412/edit_query.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = 'ca17647f-ea7c-4b1a-a002-85a95e17a7ee';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = 'ca17647f-ea7c-4b1a-a002-85a95e17a7ee'
and us_active = 1
2018-08-16 09:31:48 http://localhost:49412/edit_query.aspx elapsed milliseconds:0000
2018-08-16 09:31:48 http://localhost:49412/edit_query.aspx sql=
/* populate org/user dropdowns */
select og_id, og_name from orgs order by og_name;
select us_id, us_username from users order by us_username
2018-08-16 09:31:48 http://localhost:49412/edit_query.aspx elapsed milliseconds:0001
2018-08-16 09:31:52 http://localhost:49412/queries.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = 'ca17647f-ea7c-4b1a-a002-85a95e17a7ee';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = 'ca17647f-ea7c-4b1a-a002-85a95e17a7ee'
and us_active = 1
2018-08-16 09:31:52 http://localhost:49412/queries.aspx elapsed milliseconds:0000
2018-08-16 09:31:52 http://localhost:49412/queries.aspx sql=
select
			qu_desc [query],
			case
				when isnull(qu_user,0) = 0 and isnull(qu_org,0) is null then 'everybody'
				when isnull(qu_user,0) <> 0 then 'user:' + us_username
				when isnull(qu_org,0) <> 0 then 'org:' + og_name
				else ' '
				end [visibility],
			'<a href=bugs.aspx?qu_id=' + convert(varchar,qu_id) + '>view list</a>' [view list],
			'<a target=_blank href=print_bugs.aspx?qu_id=' + convert(varchar,qu_id) + '>print list</a>' [print list],
			'<a target=_blank href=print_bugs.aspx?format=excel&qu_id=' + convert(varchar,qu_id) + '>export as excel</a>' [export as excel],
			'<a target=_blank href=print_bugs2.aspx?qu_id=' + convert(varchar,qu_id) + '>print detail</a>' [print list<br>with detail],
			'<a href=edit_query.aspx?id=' + convert(varchar,qu_id) + '>edit</a>' [edit],
			'<a href=delete_query.aspx?id=' + convert(varchar,qu_id) + '>delete</a>' [delete],
			replace(convert(nvarchar(4000),qu_sql), char(10),'<br>') [sql]
			from queries
			left outer join users on qu_user = us_id
			left outer join orgs on qu_org = og_id
			where 1 = 0 /* all */
			or isnull(qu_user,0) = 1
			or isnull(qu_user,0) = 0
			order by qu_desc
2018-08-16 09:31:52 http://localhost:49412/queries.aspx elapsed milliseconds:0001
2018-08-16 09:32:00 http://localhost:49412/bugs.aspx?qu_id=11 sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = 'ca17647f-ea7c-4b1a-a002-85a95e17a7ee';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = 'ca17647f-ea7c-4b1a-a002-85a95e17a7ee'
and us_active = 1
2018-08-16 09:32:00 http://localhost:49412/bugs.aspx?qu_id=11 elapsed milliseconds:0010
2018-08-16 09:32:00 http://localhost:49412/bugs.aspx?qu_id=11 sql=
/* query dropdown */
select qu_id, qu_desc
from queries
where (isnull(qu_user,0) = 0 and isnull(qu_org,0) = 0)
or isnull(qu_user,0) = 1
or isnull(qu_org,0) = 1
order by qu_desc
2018-08-16 09:32:00 http://localhost:49412/bugs.aspx?qu_id=11 elapsed milliseconds:0001
2018-08-16 09:32:00 http://localhost:49412/bugs.aspx?qu_id=11 sql=
select qu_sql from queries where qu_id = 11
2018-08-16 09:32:00 http://localhost:49412/bugs.aspx?qu_id=11 sql=
select * from Users /* altered - neither */ WHERE  (bugs.bg_project not in (
					select pu_project
					from project_user_xref
					where pu_user = 1
					and pu_permission_level = 0)) 
2018-08-16 09:32:09 http://localhost:49412/print_bugs.aspx?qu_id=11 sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = 'ca17647f-ea7c-4b1a-a002-85a95e17a7ee';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = 'ca17647f-ea7c-4b1a-a002-85a95e17a7ee'
and us_active = 1
2018-08-16 09:32:09 http://localhost:49412/print_bugs.aspx?qu_id=11 elapsed milliseconds:0008
2018-08-16 09:32:09 http://localhost:49412/print_bugs.aspx?qu_id=11 sql=
select qu_sql from queries where qu_id = 11
2018-08-16 09:32:09 http://localhost:49412/print_bugs.aspx?qu_id=11 sql=
select * from Users /* altered - neither */ WHERE  (bugs.bg_project not in (
					select pu_project
					from project_user_xref
					where pu_user = 1
					and pu_permission_level = 0)) 

TIME: 9:32:09 AM
MSG: The multi-part identifier "bugs.bg_project" could not be bound.
URL: http://localhost:49412/print_bugs.aspx?qu_id=11
EXCEPTION: System.Data.SqlClient.SqlException (0x80131904): The multi-part identifier "bugs.bg_project" could not be bound.
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at System.Data.SqlClient.SqlDataReader.get_MetaData()
   at System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.System.Data.IDbCommand.ExecuteReader(CommandBehavior behavior)
   at System.Data.Common.DbDataAdapter.FillInternal(DataSet dataset, DataTable[] datatables, Int32 startRecord, Int32 maxRecords, String srcTable, IDbCommand command, CommandBehavior behavior)
   at System.Data.Common.DbDataAdapter.Fill(DataSet dataSet, Int32 startRecord, Int32 maxRecords, String srcTable, IDbCommand command, CommandBehavior behavior)
   at System.Data.Common.DbDataAdapter.Fill(DataSet dataSet)
   at btnet.DbUtil.get_dataset(String sql) in F:\Synced\Visual Studio 2017\Projects\temp\btnetnew\btnetnew\AppCode\dbutil.cs:line 144
   at ASP.print_bugs_aspx.Page_Load(Object sender, EventArgs e) in f:\Synced\Visual Studio 2017\Projects\temp\btnetnew\btnetnew\print_bugs.aspx:line 53
   at System.Web.Util.CalliEventHandlerDelegateProxy.Callback(Object sender, EventArgs e)
   at System.Web.UI.Control.OnLoad(EventArgs e)
   at System.Web.UI.Control.LoadRecursive()
   at System.Web.UI.Page.ProcessRequestMain(Boolean includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint)
ClientConnectionId:fa1aa990-e50a-4420-aea3-91e5306b65d9
Error Number:4104,State:1,Class:16

ALL_HTTP=HTTP_CONNECTION:keep-alive
HTTP_ACCEPT:text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8
HTTP_ACCEPT_ENCODING:gzip, deflate, br
HTTP_ACCEPT_LANGUAGE:en-US,en;q=0.9,tr;q=0.8
HTTP_COOKIE:hide_inactive_users=0; filter_users=; images_inline=1; history_inline=1; user=name=admin&NTLM=0; se_id=ca17647f-ea7c-4b1a-a002-85a95e17a7ee; ASP.NET_SessionId=ti2whxeac4s231xvdwadrboy
HTTP_HOST:localhost:49412
HTTP_REFERER:http://localhost:49412/queries.aspx
HTTP_USER_AGENT:Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36
HTTP_UPGRADE_INSECURE_REQUESTS:1

ALL_RAW=Connection: keep-alive
Accept: text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8
Accept-Encoding: gzip, deflate, br
Accept-Language: en-US,en;q=0.9,tr;q=0.8
Cookie: hide_inactive_users=0; filter_users=; images_inline=1; history_inline=1; user=name=admin&NTLM=0; se_id=ca17647f-ea7c-4b1a-a002-85a95e17a7ee; ASP.NET_SessionId=ti2whxeac4s231xvdwadrboy
Host: localhost:49412
Referer: http://localhost:49412/queries.aspx
User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36
Upgrade-Insecure-Requests: 1

APPL_MD_PATH=/LM/W3SVC/2/ROOT
APPL_PHYSICAL_PATH=F:\Synced\Visual Studio 2017\Projects\temp\btnetnew\btnetnew\
CONTENT_LENGTH=0
GATEWAY_INTERFACE=CGI/1.1
HTTPS=off
INSTANCE_ID=2
INSTANCE_META_PATH=/LM/W3SVC/2
LOCAL_ADDR=::1
PATH_INFO=/print_bugs.aspx
PATH_TRANSLATED=F:\Synced\Visual Studio 2017\Projects\temp\btnetnew\btnetnew\print_bugs.aspx
QUERY_STRING=qu_id=11
REMOTE_ADDR=::1
REMOTE_HOST=::1
REMOTE_PORT=49867
REQUEST_METHOD=GET
SCRIPT_NAME=/print_bugs.aspx
SERVER_NAME=localhost
SERVER_PORT=49412
SERVER_PORT_SECURE=0
SERVER_PROTOCOL=HTTP/1.1
SERVER_SOFTWARE=Microsoft-IIS/10.0
URL=/print_bugs.aspx
HTTP_CONNECTION=keep-alive
HTTP_ACCEPT=text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8
HTTP_ACCEPT_ENCODING=gzip, deflate, br
HTTP_ACCEPT_LANGUAGE=en-US,en;q=0.9,tr;q=0.8
HTTP_COOKIE=hide_inactive_users=0; filter_users=; images_inline=1; history_inline=1; user=name=admin&NTLM=0; se_id=ca17647f-ea7c-4b1a-a002-85a95e17a7ee; ASP.NET_SessionId=ti2whxeac4s231xvdwadrboy
HTTP_HOST=localhost:49412
HTTP_REFERER=http://localhost:49412/queries.aspx
HTTP_USER_AGENT=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36
HTTP_UPGRADE_INSECURE_REQUESTS=1
2018-08-16 09:32:09 http://localhost:49412/print_bugs.aspx?qu_id=11 to email addr: admin@example.com
2018-08-16 09:32:09 http://localhost:49412/print_bugs.aspx?qu_id=11 There was a problem sending email.   Check settings in Web.config.
2018-08-16 09:32:09 http://localhost:49412/print_bugs.aspx?qu_id=11 TO:admin@example.com
2018-08-16 09:32:09 http://localhost:49412/print_bugs.aspx?qu_id=11 FROM:errors@example.com
2018-08-16 09:32:09 http://localhost:49412/print_bugs.aspx?qu_id=11 SUBJECT:Error: The multi-part identifier "bugs.bg_project" could not be bound.
2018-08-16 09:32:09 http://localhost:49412/print_bugs.aspx?qu_id=11 Could not find a part of the path 'C:\temp\pickup\eb9a1c23-6bdd-493f-9f34-d5c978254595.eml'.
2018-08-16 09:32:21 http://localhost:49412/print_bugs2.aspx?qu_id=11 sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = 'ca17647f-ea7c-4b1a-a002-85a95e17a7ee';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = 'ca17647f-ea7c-4b1a-a002-85a95e17a7ee'
and us_active = 1
2018-08-16 09:32:21 http://localhost:49412/print_bugs2.aspx?qu_id=11 elapsed milliseconds:0000
2018-08-16 09:32:21 http://localhost:49412/print_bugs2.aspx?qu_id=11 sql=
select qu_sql from queries where qu_id = 11
2018-08-16 09:32:21 http://localhost:49412/print_bugs2.aspx?qu_id=11 sql=
select * from Users /* altered - neither */ WHERE  (bugs.bg_project not in (
					select pu_project
					from project_user_xref
					where pu_user = 1
					and pu_permission_level = 0)) 

TIME: 9:32:21 AM
MSG: The multi-part identifier "bugs.bg_project" could not be bound.
URL: http://localhost:49412/print_bugs2.aspx?qu_id=11
EXCEPTION: System.Data.SqlClient.SqlException (0x80131904): The multi-part identifier "bugs.bg_project" could not be bound.
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at System.Data.SqlClient.SqlDataReader.get_MetaData()
   at System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.System.Data.IDbCommand.ExecuteReader(CommandBehavior behavior)
   at System.Data.Common.DbDataAdapter.FillInternal(DataSet dataset, DataTable[] datatables, Int32 startRecord, Int32 maxRecords, String srcTable, IDbCommand command, CommandBehavior behavior)
   at System.Data.Common.DbDataAdapter.Fill(DataSet dataSet, Int32 startRecord, Int32 maxRecords, String srcTable, IDbCommand command, CommandBehavior behavior)
   at System.Data.Common.DbDataAdapter.Fill(DataSet dataSet)
   at btnet.DbUtil.get_dataset(String sql) in F:\Synced\Visual Studio 2017\Projects\temp\btnetnew\btnetnew\AppCode\dbutil.cs:line 144
   at ASP.print_bugs2_aspx.Page_Load(Object sender, EventArgs e) in f:\Synced\Visual Studio 2017\Projects\temp\btnetnew\btnetnew\print_bugs2.aspx:line 50
   at System.Web.Util.CalliEventHandlerDelegateProxy.Callback(Object sender, EventArgs e)
   at System.Web.UI.Control.OnLoad(EventArgs e)
   at System.Web.UI.Control.LoadRecursive()
   at System.Web.UI.Page.ProcessRequestMain(Boolean includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint)
ClientConnectionId:fa1aa990-e50a-4420-aea3-91e5306b65d9
Error Number:4104,State:1,Class:16

ALL_HTTP=HTTP_CONNECTION:keep-alive
HTTP_ACCEPT:text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8
HTTP_ACCEPT_ENCODING:gzip, deflate, br
HTTP_ACCEPT_LANGUAGE:en-US,en;q=0.9,tr;q=0.8
HTTP_COOKIE:hide_inactive_users=0; filter_users=; images_inline=1; history_inline=1; user=name=admin&NTLM=0; se_id=ca17647f-ea7c-4b1a-a002-85a95e17a7ee; ASP.NET_SessionId=ti2whxeac4s231xvdwadrboy
HTTP_HOST:localhost:49412
HTTP_REFERER:http://localhost:49412/queries.aspx
HTTP_USER_AGENT:Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36
HTTP_UPGRADE_INSECURE_REQUESTS:1

ALL_RAW=Connection: keep-alive
Accept: text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8
Accept-Encoding: gzip, deflate, br
Accept-Language: en-US,en;q=0.9,tr;q=0.8
Cookie: hide_inactive_users=0; filter_users=; images_inline=1; history_inline=1; user=name=admin&NTLM=0; se_id=ca17647f-ea7c-4b1a-a002-85a95e17a7ee; ASP.NET_SessionId=ti2whxeac4s231xvdwadrboy
Host: localhost:49412
Referer: http://localhost:49412/queries.aspx
User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36
Upgrade-Insecure-Requests: 1

APPL_MD_PATH=/LM/W3SVC/2/ROOT
APPL_PHYSICAL_PATH=F:\Synced\Visual Studio 2017\Projects\temp\btnetnew\btnetnew\
CONTENT_LENGTH=0
GATEWAY_INTERFACE=CGI/1.1
HTTPS=off
INSTANCE_ID=2
INSTANCE_META_PATH=/LM/W3SVC/2
LOCAL_ADDR=::1
PATH_INFO=/print_bugs2.aspx
PATH_TRANSLATED=F:\Synced\Visual Studio 2017\Projects\temp\btnetnew\btnetnew\print_bugs2.aspx
QUERY_STRING=qu_id=11
REMOTE_ADDR=::1
REMOTE_HOST=::1
REMOTE_PORT=49867
REQUEST_METHOD=GET
SCRIPT_NAME=/print_bugs2.aspx
SERVER_NAME=localhost
SERVER_PORT=49412
SERVER_PORT_SECURE=0
SERVER_PROTOCOL=HTTP/1.1
SERVER_SOFTWARE=Microsoft-IIS/10.0
URL=/print_bugs2.aspx
HTTP_CONNECTION=keep-alive
HTTP_ACCEPT=text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8
HTTP_ACCEPT_ENCODING=gzip, deflate, br
HTTP_ACCEPT_LANGUAGE=en-US,en;q=0.9,tr;q=0.8
HTTP_COOKIE=hide_inactive_users=0; filter_users=; images_inline=1; history_inline=1; user=name=admin&NTLM=0; se_id=ca17647f-ea7c-4b1a-a002-85a95e17a7ee; ASP.NET_SessionId=ti2whxeac4s231xvdwadrboy
HTTP_HOST=localhost:49412
HTTP_REFERER=http://localhost:49412/queries.aspx
HTTP_USER_AGENT=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36
HTTP_UPGRADE_INSECURE_REQUESTS=1
2018-08-16 09:32:21 http://localhost:49412/print_bugs2.aspx?qu_id=11 to email addr: admin@example.com
2018-08-16 09:32:21 http://localhost:49412/print_bugs2.aspx?qu_id=11 There was a problem sending email.   Check settings in Web.config.
2018-08-16 09:32:21 http://localhost:49412/print_bugs2.aspx?qu_id=11 TO:admin@example.com
2018-08-16 09:32:21 http://localhost:49412/print_bugs2.aspx?qu_id=11 FROM:errors@example.com
2018-08-16 09:32:21 http://localhost:49412/print_bugs2.aspx?qu_id=11 SUBJECT:Error: The multi-part identifier "bugs.bg_project" could not be bound.
2018-08-16 09:32:21 http://localhost:49412/print_bugs2.aspx?qu_id=11 Could not find a part of the path 'C:\temp\pickup\677df967-667d-40c6-9333-e68f17b3c773.eml'.
2018-08-16 09:33:52 http://localhost:49412/print_bugs2.aspx?qu_id=11 sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = 'ca17647f-ea7c-4b1a-a002-85a95e17a7ee';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = 'ca17647f-ea7c-4b1a-a002-85a95e17a7ee'
and us_active = 1
2018-08-16 09:34:12 http://localhost:49412/print_bugs2.aspx?qu_id=11 elapsed milliseconds:1225
2018-08-16 09:34:28 http://localhost:49412/print_bugs2.aspx?qu_id=11 sql=
select qu_sql from queries where qu_id = 11
2018-08-16 09:34:28 http://localhost:49412/print_bugs2.aspx?qu_id=11 sql=
select * from Users /* altered - neither */ WHERE  (bugs.bg_project not in (
					select pu_project
					from project_user_xref
					where pu_user = 1
					and pu_permission_level = 0)) 

TIME: 9:34:44 AM
MSG: The multi-part identifier "bugs.bg_project" could not be bound.
URL: http://localhost:49412/print_bugs2.aspx?qu_id=11
EXCEPTION: System.Data.SqlClient.SqlException (0x80131904): The multi-part identifier "bugs.bg_project" could not be bound.
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at System.Data.SqlClient.SqlDataReader.get_MetaData()
   at System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.System.Data.IDbCommand.ExecuteReader(CommandBehavior behavior)
   at System.Data.Common.DbDataAdapter.FillInternal(DataSet dataset, DataTable[] datatables, Int32 startRecord, Int32 maxRecords, String srcTable, IDbCommand command, CommandBehavior behavior)
   at System.Data.Common.DbDataAdapter.Fill(DataSet dataSet, Int32 startRecord, Int32 maxRecords, String srcTable, IDbCommand command, CommandBehavior behavior)
   at System.Data.Common.DbDataAdapter.Fill(DataSet dataSet)
   at btnet.DbUtil.get_dataset(String sql) in F:\Synced\Visual Studio 2017\Projects\temp\btnetnew\btnetnew\AppCode\dbutil.cs:line 144
   at ASP.print_bugs2_aspx.Page_Load(Object sender, EventArgs e) in f:\Synced\Visual Studio 2017\Projects\temp\btnetnew\btnetnew\print_bugs2.aspx:line 50
   at System.Web.Util.CalliEventHandlerDelegateProxy.Callback(Object sender, EventArgs e)
   at System.Web.UI.Control.OnLoad(EventArgs e)
   at System.Web.UI.Control.LoadRecursive()
   at System.Web.UI.Page.ProcessRequestMain(Boolean includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint)
ClientConnectionId:fa1aa990-e50a-4420-aea3-91e5306b65d9
Error Number:4104,State:1,Class:16

ALL_HTTP=HTTP_CACHE_CONTROL:max-age=0
HTTP_CONNECTION:keep-alive
HTTP_ACCEPT:text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8
HTTP_ACCEPT_ENCODING:gzip, deflate, br
HTTP_ACCEPT_LANGUAGE:en-US,en;q=0.9,tr;q=0.8
HTTP_COOKIE:hide_inactive_users=0; filter_users=; images_inline=1; history_inline=1; user=name=admin&NTLM=0; se_id=ca17647f-ea7c-4b1a-a002-85a95e17a7ee; ASP.NET_SessionId=ti2whxeac4s231xvdwadrboy
HTTP_HOST:localhost:49412
HTTP_USER_AGENT:Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36
HTTP_UPGRADE_INSECURE_REQUESTS:1

ALL_RAW=Cache-Control: max-age=0
Connection: keep-alive
Accept: text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8
Accept-Encoding: gzip, deflate, br
Accept-Language: en-US,en;q=0.9,tr;q=0.8
Cookie: hide_inactive_users=0; filter_users=; images_inline=1; history_inline=1; user=name=admin&NTLM=0; se_id=ca17647f-ea7c-4b1a-a002-85a95e17a7ee; ASP.NET_SessionId=ti2whxeac4s231xvdwadrboy
Host: localhost:49412
User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36
Upgrade-Insecure-Requests: 1

APPL_MD_PATH=/LM/W3SVC/2/ROOT
APPL_PHYSICAL_PATH=F:\Synced\Visual Studio 2017\Projects\temp\btnetnew\btnetnew\
CONTENT_LENGTH=0
GATEWAY_INTERFACE=CGI/1.1
HTTPS=off
INSTANCE_ID=2
INSTANCE_META_PATH=/LM/W3SVC/2
LOCAL_ADDR=::1
PATH_INFO=/print_bugs2.aspx
PATH_TRANSLATED=F:\Synced\Visual Studio 2017\Projects\temp\btnetnew\btnetnew\print_bugs2.aspx
QUERY_STRING=qu_id=11
REMOTE_ADDR=::1
REMOTE_HOST=::1
REMOTE_PORT=49867
REQUEST_METHOD=GET
SCRIPT_NAME=/print_bugs2.aspx
SERVER_NAME=localhost
SERVER_PORT=49412
SERVER_PORT_SECURE=0
SERVER_PROTOCOL=HTTP/1.1
SERVER_SOFTWARE=Microsoft-IIS/10.0
URL=/print_bugs2.aspx
HTTP_CACHE_CONTROL=max-age=0
HTTP_CONNECTION=keep-alive
HTTP_ACCEPT=text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8
HTTP_ACCEPT_ENCODING=gzip, deflate, br
HTTP_ACCEPT_LANGUAGE=en-US,en;q=0.9,tr;q=0.8
HTTP_COOKIE=hide_inactive_users=0; filter_users=; images_inline=1; history_inline=1; user=name=admin&NTLM=0; se_id=ca17647f-ea7c-4b1a-a002-85a95e17a7ee; ASP.NET_SessionId=ti2whxeac4s231xvdwadrboy
HTTP_HOST=localhost:49412
HTTP_USER_AGENT=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36
HTTP_UPGRADE_INSECURE_REQUESTS=1
2018-08-16 09:34:45 http://localhost:49412/print_bugs2.aspx?qu_id=11 to email addr: admin@example.com
2018-08-16 09:34:45 http://localhost:49412/print_bugs2.aspx?qu_id=11 There was a problem sending email.   Check settings in Web.config.
2018-08-16 09:34:45 http://localhost:49412/print_bugs2.aspx?qu_id=11 TO:admin@example.com
2018-08-16 09:34:45 http://localhost:49412/print_bugs2.aspx?qu_id=11 FROM:errors@example.com
2018-08-16 09:34:45 http://localhost:49412/print_bugs2.aspx?qu_id=11 SUBJECT:Error: The multi-part identifier "bugs.bg_project" could not be bound.
2018-08-16 09:34:45 http://localhost:49412/print_bugs2.aspx?qu_id=11 Could not find a part of the path 'C:\temp\pickup\ae193b47-7d7a-4ea2-9b10-f8f1dab19c56.eml'.
2018-08-16 09:36:12 http://localhost:49412/edit_query.aspx?id=11 sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = 'ca17647f-ea7c-4b1a-a002-85a95e17a7ee';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = 'ca17647f-ea7c-4b1a-a002-85a95e17a7ee'
and us_active = 1
2018-08-16 09:36:15 http://localhost:49412/edit_query.aspx?id=11 elapsed milliseconds:0011
2018-08-16 09:36:15 http://localhost:49412/edit_query.aspx?id=11 sql=
/* populate org/user dropdowns */
select og_id, og_name from orgs order by og_name;
select us_id, us_username from users order by us_username
2018-08-16 09:36:15 http://localhost:49412/edit_query.aspx?id=11 elapsed milliseconds:0002
2018-08-16 09:36:15 http://localhost:49412/edit_query.aspx?id=11 sql=
select
				qu_desc, qu_sql, isnull(qu_user,0) [qu_user], isnull(qu_org,0) [qu_org]
				from queries where qu_id = 11
2018-08-16 09:36:15 http://localhost:49412/edit_query.aspx?id=11 elapsed milliseconds:0002
2018-08-16 09:36:38 http://localhost:49412/print_bugs2.aspx?qu_id=11 sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = 'ca17647f-ea7c-4b1a-a002-85a95e17a7ee';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = 'ca17647f-ea7c-4b1a-a002-85a95e17a7ee'
and us_active = 1
2018-08-16 09:36:42 http://localhost:49412/print_bugs2.aspx?qu_id=11 elapsed milliseconds:0000
2018-08-16 09:36:42 http://localhost:49412/print_bugs2.aspx?qu_id=11 sql=
select qu_sql from queries where qu_id = 11
2018-08-16 09:36:42 http://localhost:49412/print_bugs2.aspx?qu_id=11 sql=
select * from Users /* altered - neither */ WHERE  (bugs.bg_project not in (
					select pu_project
					from project_user_xref
					where pu_user = 1
					and pu_permission_level = 0)) 
2018-08-16 09:37:34 http://localhost:49412/print_bugs2.aspx?qu_id=11 elapsed milliseconds:0570

TIME: 9:37:49 AM
MSG: Specified cast is not valid.
URL: http://localhost:49412/print_bugs2.aspx?qu_id=11
EXCEPTION: System.InvalidCastException: Specified cast is not valid.
   at ASP.print_bugs2_aspx.__Render__control1(HtmlTextWriter __w, Control parameterContainer) in f:\Synced\Visual Studio 2017\Projects\temp\btnetnew\btnetnew\print_bugs2.aspx:line 137
   at System.Web.UI.Control.RenderChildrenInternal(HtmlTextWriter writer, ICollection children)
   at System.Web.UI.Control.RenderChildren(HtmlTextWriter writer)
   at System.Web.UI.Page.Render(HtmlTextWriter writer)
   at System.Web.UI.Control.RenderControlInternal(HtmlTextWriter writer, ControlAdapter adapter)
   at System.Web.UI.Control.RenderControl(HtmlTextWriter writer, ControlAdapter adapter)
   at System.Web.UI.Control.RenderControl(HtmlTextWriter writer)
   at System.Web.UI.Page.ProcessRequestMain(Boolean includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint)

ALL_HTTP=HTTP_CONNECTION:keep-alive
HTTP_ACCEPT:text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8
HTTP_ACCEPT_ENCODING:gzip, deflate, br
HTTP_ACCEPT_LANGUAGE:en-US,en;q=0.9,tr;q=0.8
HTTP_COOKIE:hide_inactive_users=0; filter_users=; images_inline=1; history_inline=1; user=name=admin&NTLM=0; se_id=ca17647f-ea7c-4b1a-a002-85a95e17a7ee; ASP.NET_SessionId=ti2whxeac4s231xvdwadrboy
HTTP_HOST:localhost:49412
HTTP_REFERER:http://localhost:49412/queries.aspx
HTTP_USER_AGENT:Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36
HTTP_UPGRADE_INSECURE_REQUESTS:1

ALL_RAW=Connection: keep-alive
Accept: text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8
Accept-Encoding: gzip, deflate, br
Accept-Language: en-US,en;q=0.9,tr;q=0.8
Cookie: hide_inactive_users=0; filter_users=; images_inline=1; history_inline=1; user=name=admin&NTLM=0; se_id=ca17647f-ea7c-4b1a-a002-85a95e17a7ee; ASP.NET_SessionId=ti2whxeac4s231xvdwadrboy
Host: localhost:49412
Referer: http://localhost:49412/queries.aspx
User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36
Upgrade-Insecure-Requests: 1

APPL_MD_PATH=/LM/W3SVC/2/ROOT
APPL_PHYSICAL_PATH=F:\Synced\Visual Studio 2017\Projects\temp\btnetnew\btnetnew\
CONTENT_LENGTH=0
GATEWAY_INTERFACE=CGI/1.1
HTTPS=off
INSTANCE_ID=2
INSTANCE_META_PATH=/LM/W3SVC/2
LOCAL_ADDR=::1
PATH_INFO=/print_bugs2.aspx
PATH_TRANSLATED=F:\Synced\Visual Studio 2017\Projects\temp\btnetnew\btnetnew\print_bugs2.aspx
QUERY_STRING=qu_id=11
REMOTE_ADDR=::1
REMOTE_HOST=::1
REMOTE_PORT=49867
REQUEST_METHOD=GET
SCRIPT_NAME=/print_bugs2.aspx
SERVER_NAME=localhost
SERVER_PORT=49412
SERVER_PORT_SECURE=0
SERVER_PROTOCOL=HTTP/1.1
SERVER_SOFTWARE=Microsoft-IIS/10.0
URL=/print_bugs2.aspx
HTTP_CONNECTION=keep-alive
HTTP_ACCEPT=text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8
HTTP_ACCEPT_ENCODING=gzip, deflate, br
HTTP_ACCEPT_LANGUAGE=en-US,en;q=0.9,tr;q=0.8
HTTP_COOKIE=hide_inactive_users=0; filter_users=; images_inline=1; history_inline=1; user=name=admin&NTLM=0; se_id=ca17647f-ea7c-4b1a-a002-85a95e17a7ee; ASP.NET_SessionId=ti2whxeac4s231xvdwadrboy
HTTP_HOST=localhost:49412
HTTP_REFERER=http://localhost:49412/queries.aspx
HTTP_USER_AGENT=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36
HTTP_UPGRADE_INSECURE_REQUESTS=1
2018-08-16 09:37:49 http://localhost:49412/print_bugs2.aspx?qu_id=11 to email addr: admin@example.com
2018-08-16 09:37:49 http://localhost:49412/print_bugs2.aspx?qu_id=11 There was a problem sending email.   Check settings in Web.config.
2018-08-16 09:37:49 http://localhost:49412/print_bugs2.aspx?qu_id=11 TO:admin@example.com
2018-08-16 09:37:50 http://localhost:49412/print_bugs2.aspx?qu_id=11 FROM:errors@example.com
2018-08-16 09:37:50 http://localhost:49412/print_bugs2.aspx?qu_id=11 SUBJECT:Error: Specified cast is not valid.
2018-08-16 09:37:50 http://localhost:49412/print_bugs2.aspx?qu_id=11 Could not find a part of the path 'C:\temp\pickup\dfb0b92d-8953-4a24-97d6-c436355681c8.eml'.
2018-08-16 09:38:00 http://localhost:49412/print_bugs2.aspx?qu_id=11 sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = 'ca17647f-ea7c-4b1a-a002-85a95e17a7ee';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = 'ca17647f-ea7c-4b1a-a002-85a95e17a7ee'
and us_active = 1
2018-08-16 09:38:00 http://localhost:49412/print_bugs2.aspx?qu_id=11 elapsed milliseconds:0000
2018-08-16 09:38:00 http://localhost:49412/print_bugs2.aspx?qu_id=11 sql=
select qu_sql from queries where qu_id = 11
2018-08-16 09:39:17 http://localhost:49412/print_bugs2.aspx?qu_id=11 sql=
select * from Users /* altered - neither */ WHERE  (bugs.bg_project not in (
					select pu_project
					from project_user_xref
					where pu_user = 1
					and pu_permission_level = 0)) 

TIME: 9:39:18 AM
MSG: The multi-part identifier "bugs.bg_project" could not be bound.
URL: http://localhost:49412/print_bugs2.aspx?qu_id=11
EXCEPTION: System.Data.SqlClient.SqlException (0x80131904): The multi-part identifier "bugs.bg_project" could not be bound.
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at System.Data.SqlClient.SqlDataReader.get_MetaData()
   at System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.System.Data.IDbCommand.ExecuteReader(CommandBehavior behavior)
   at System.Data.Common.DbDataAdapter.FillInternal(DataSet dataset, DataTable[] datatables, Int32 startRecord, Int32 maxRecords, String srcTable, IDbCommand command, CommandBehavior behavior)
   at System.Data.Common.DbDataAdapter.Fill(DataSet dataSet, Int32 startRecord, Int32 maxRecords, String srcTable, IDbCommand command, CommandBehavior behavior)
   at System.Data.Common.DbDataAdapter.Fill(DataSet dataSet)
   at btnet.DbUtil.get_dataset(String sql) in F:\Synced\Visual Studio 2017\Projects\temp\btnetnew\btnetnew\AppCode\dbutil.cs:line 144
   at ASP.print_bugs2_aspx.Page_Load(Object sender, EventArgs e) in f:\Synced\Visual Studio 2017\Projects\temp\btnetnew\btnetnew\print_bugs2.aspx:line 50
   at System.Web.Util.CalliEventHandlerDelegateProxy.Callback(Object sender, EventArgs e)
   at System.Web.UI.Control.OnLoad(EventArgs e)
   at System.Web.UI.Control.LoadRecursive()
   at System.Web.UI.Page.ProcessRequestMain(Boolean includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint)
ClientConnectionId:fa1aa990-e50a-4420-aea3-91e5306b65d9
Error Number:4104,State:1,Class:16

ALL_HTTP=HTTP_CACHE_CONTROL:max-age=0
HTTP_CONNECTION:keep-alive
HTTP_ACCEPT:text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8
HTTP_ACCEPT_ENCODING:gzip, deflate, br
HTTP_ACCEPT_LANGUAGE:en-US,en;q=0.9,tr;q=0.8
HTTP_COOKIE:hide_inactive_users=0; filter_users=; images_inline=1; history_inline=1; user=name=admin&NTLM=0; se_id=ca17647f-ea7c-4b1a-a002-85a95e17a7ee; ASP.NET_SessionId=ti2whxeac4s231xvdwadrboy
HTTP_HOST:localhost:49412
HTTP_USER_AGENT:Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36
HTTP_UPGRADE_INSECURE_REQUESTS:1

ALL_RAW=Cache-Control: max-age=0
Connection: keep-alive
Accept: text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8
Accept-Encoding: gzip, deflate, br
Accept-Language: en-US,en;q=0.9,tr;q=0.8
Cookie: hide_inactive_users=0; filter_users=; images_inline=1; history_inline=1; user=name=admin&NTLM=0; se_id=ca17647f-ea7c-4b1a-a002-85a95e17a7ee; ASP.NET_SessionId=ti2whxeac4s231xvdwadrboy
Host: localhost:49412
User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36
Upgrade-Insecure-Requests: 1

APPL_MD_PATH=/LM/W3SVC/2/ROOT
APPL_PHYSICAL_PATH=F:\Synced\Visual Studio 2017\Projects\temp\btnetnew\btnetnew\
CONTENT_LENGTH=0
GATEWAY_INTERFACE=CGI/1.1
HTTPS=off
INSTANCE_ID=2
INSTANCE_META_PATH=/LM/W3SVC/2
LOCAL_ADDR=::1
PATH_INFO=/print_bugs2.aspx
PATH_TRANSLATED=F:\Synced\Visual Studio 2017\Projects\temp\btnetnew\btnetnew\print_bugs2.aspx
QUERY_STRING=qu_id=11
REMOTE_ADDR=::1
REMOTE_HOST=::1
REMOTE_PORT=49867
REQUEST_METHOD=GET
SCRIPT_NAME=/print_bugs2.aspx
SERVER_NAME=localhost
SERVER_PORT=49412
SERVER_PORT_SECURE=0
SERVER_PROTOCOL=HTTP/1.1
SERVER_SOFTWARE=Microsoft-IIS/10.0
URL=/print_bugs2.aspx
HTTP_CACHE_CONTROL=max-age=0
HTTP_CONNECTION=keep-alive
HTTP_ACCEPT=text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8
HTTP_ACCEPT_ENCODING=gzip, deflate, br
HTTP_ACCEPT_LANGUAGE=en-US,en;q=0.9,tr;q=0.8
HTTP_COOKIE=hide_inactive_users=0; filter_users=; images_inline=1; history_inline=1; user=name=admin&NTLM=0; se_id=ca17647f-ea7c-4b1a-a002-85a95e17a7ee; ASP.NET_SessionId=ti2whxeac4s231xvdwadrboy
HTTP_HOST=localhost:49412
HTTP_USER_AGENT=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36
HTTP_UPGRADE_INSECURE_REQUESTS=1
2018-08-16 09:39:18 http://localhost:49412/print_bugs2.aspx?qu_id=11 to email addr: admin@example.com
2018-08-16 09:39:18 http://localhost:49412/print_bugs2.aspx?qu_id=11 There was a problem sending email.   Check settings in Web.config.
2018-08-16 09:39:18 http://localhost:49412/print_bugs2.aspx?qu_id=11 TO:admin@example.com
2018-08-16 09:39:18 http://localhost:49412/print_bugs2.aspx?qu_id=11 FROM:errors@example.com
2018-08-16 09:39:18 http://localhost:49412/print_bugs2.aspx?qu_id=11 SUBJECT:Error: The multi-part identifier "bugs.bg_project" could not be bound.
2018-08-16 09:39:18 http://localhost:49412/print_bugs2.aspx?qu_id=11 Could not find a part of the path 'C:\temp\pickup\c5b2bbd9-7549-474c-85b3-7064c753fdea.eml'.
2018-08-16 09:39:23 http://localhost:49412/edit_query.aspx?id=11 sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = 'ca17647f-ea7c-4b1a-a002-85a95e17a7ee';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = 'ca17647f-ea7c-4b1a-a002-85a95e17a7ee'
and us_active = 1
2018-08-16 09:39:23 http://localhost:49412/edit_query.aspx?id=11 elapsed milliseconds:0000
2018-08-16 09:39:23 http://localhost:49412/edit_query.aspx?id=11 sql=
/* populate org/user dropdowns */
select og_id, og_name from orgs order by og_name;
select us_id, us_username from users order by us_username
2018-08-16 09:39:23 http://localhost:49412/edit_query.aspx?id=11 elapsed milliseconds:0000
2018-08-16 09:39:23 http://localhost:49412/edit_query.aspx?id=11 sql=
select
				qu_desc, qu_sql, isnull(qu_user,0) [qu_user], isnull(qu_org,0) [qu_org]
				from queries where qu_id = 11
2018-08-16 09:39:23 http://localhost:49412/edit_query.aspx?id=11 elapsed milliseconds:0000
2018-08-16 09:39:29 http://localhost:49412/edit_query.aspx?id=11 sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = 'ca17647f-ea7c-4b1a-a002-85a95e17a7ee';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = 'ca17647f-ea7c-4b1a-a002-85a95e17a7ee'
and us_active = 1
2018-08-16 09:39:29 http://localhost:49412/edit_query.aspx?id=11 elapsed milliseconds:0000
2018-08-16 09:39:29 http://localhost:49412/edit_query.aspx?id=11 sql=
select count(1) from queries where qu_desc = N'myquery' and qu_id <> 11
2018-08-16 09:39:29 http://localhost:49412/edit_query.aspx?id=11 sql=
update queries set
				qu_desc = N'myquery',
				qu_sql = N'select * from bugs',
				qu_user = 0,
				qu_org = 0
				where qu_id = 11
2018-08-16 09:39:29 http://localhost:49412/edit_query.aspx?id=11 sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = 'ca17647f-ea7c-4b1a-a002-85a95e17a7ee';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = 'ca17647f-ea7c-4b1a-a002-85a95e17a7ee'
and us_active = 1
2018-08-16 09:39:29 http://localhost:49412/edit_query.aspx?id=11 elapsed milliseconds:0000
2018-08-16 09:39:29 http://localhost:49412/edit_query.aspx?id=11 sql=
select
			qu_desc [query],
			case
				when isnull(qu_user,0) = 0 and isnull(qu_org,0) is null then 'everybody'
				when isnull(qu_user,0) <> 0 then 'user:' + us_username
				when isnull(qu_org,0) <> 0 then 'org:' + og_name
				else ' '
				end [visibility],
			'<a href=bugs.aspx?qu_id=' + convert(varchar,qu_id) + '>view list</a>' [view list],
			'<a target=_blank href=print_bugs.aspx?qu_id=' + convert(varchar,qu_id) + '>print list</a>' [print list],
			'<a target=_blank href=print_bugs.aspx?format=excel&qu_id=' + convert(varchar,qu_id) + '>export as excel</a>' [export as excel],
			'<a target=_blank href=print_bugs2.aspx?qu_id=' + convert(varchar,qu_id) + '>print detail</a>' [print list<br>with detail],
			'<a href=edit_query.aspx?id=' + convert(varchar,qu_id) + '>edit</a>' [edit],
			'<a href=delete_query.aspx?id=' + convert(varchar,qu_id) + '>delete</a>' [delete],
			replace(convert(nvarchar(4000),qu_sql), char(10),'<br>') [sql]
			from queries
			left outer join users on qu_user = us_id
			left outer join orgs on qu_org = og_id
			where 1 = 0 /* all */
			or isnull(qu_user,0) = 1
			or isnull(qu_user,0) = 0
			order by qu_desc
2018-08-16 09:39:29 http://localhost:49412/edit_query.aspx?id=11 elapsed milliseconds:0005
2018-08-16 09:39:38 http://localhost:49412/bugs.aspx?qu_id=11 sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = 'ca17647f-ea7c-4b1a-a002-85a95e17a7ee';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = 'ca17647f-ea7c-4b1a-a002-85a95e17a7ee'
and us_active = 1
2018-08-16 09:39:38 http://localhost:49412/bugs.aspx?qu_id=11 elapsed milliseconds:0000
2018-08-16 09:39:38 http://localhost:49412/bugs.aspx?qu_id=11 sql=
/* query dropdown */
select qu_id, qu_desc
from queries
where (isnull(qu_user,0) = 0 and isnull(qu_org,0) = 0)
or isnull(qu_user,0) = 1
or isnull(qu_org,0) = 1
order by qu_desc
2018-08-16 09:39:38 http://localhost:49412/bugs.aspx?qu_id=11 elapsed milliseconds:0001
2018-08-16 09:39:38 http://localhost:49412/bugs.aspx?qu_id=11 sql=
select qu_sql from queries where qu_id = 11
2018-08-16 09:39:38 http://localhost:49412/bugs.aspx?qu_id=11 sql=
select * from bugs /* altered - neither */ WHERE  (bugs.bg_project not in (
					select pu_project
					from project_user_xref
					where pu_user = 1
					and pu_permission_level = 0)) 
2018-08-16 09:39:38 http://localhost:49412/bugs.aspx?qu_id=11 elapsed milliseconds:0002
2018-08-16 09:39:44 http://localhost:49412/print_bugs.aspx?qu_id=11 sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = 'ca17647f-ea7c-4b1a-a002-85a95e17a7ee';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = 'ca17647f-ea7c-4b1a-a002-85a95e17a7ee'
and us_active = 1
2018-08-16 09:39:44 http://localhost:49412/print_bugs.aspx?qu_id=11 elapsed milliseconds:0000
2018-08-16 09:39:44 http://localhost:49412/print_bugs.aspx?qu_id=11 sql=
select qu_sql from queries where qu_id = 11
2018-08-16 09:39:44 http://localhost:49412/print_bugs.aspx?qu_id=11 sql=
select * from bugs /* altered - neither */ WHERE  (bugs.bg_project not in (
					select pu_project
					from project_user_xref
					where pu_user = 1
					and pu_permission_level = 0)) 
2018-08-16 09:39:44 http://localhost:49412/print_bugs.aspx?qu_id=11 elapsed milliseconds:0000
2018-08-16 09:39:47 http://localhost:49412/print_bugs2.aspx?qu_id=11 sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = 'ca17647f-ea7c-4b1a-a002-85a95e17a7ee';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = 'ca17647f-ea7c-4b1a-a002-85a95e17a7ee'
and us_active = 1
2018-08-16 09:39:47 http://localhost:49412/print_bugs2.aspx?qu_id=11 elapsed milliseconds:0000
2018-08-16 09:39:47 http://localhost:49412/print_bugs2.aspx?qu_id=11 sql=
select qu_sql from queries where qu_id = 11
2018-08-16 09:39:50 http://localhost:49412/print_bugs2.aspx?qu_id=11 sql=
select * from bugs /* altered - neither */ WHERE  (bugs.bg_project not in (
					select pu_project
					from project_user_xref
					where pu_user = 1
					and pu_permission_level = 0)) 
2018-08-16 09:39:50 http://localhost:49412/print_bugs2.aspx?qu_id=11 elapsed milliseconds:0000

TIME: 9:39:50 AM
MSG: Specified cast is not valid.
URL: http://localhost:49412/print_bugs2.aspx?qu_id=11
EXCEPTION: System.InvalidCastException: Specified cast is not valid.
   at ASP.print_bugs2_aspx.__Render__control1(HtmlTextWriter __w, Control parameterContainer) in f:\Synced\Visual Studio 2017\Projects\temp\btnetnew\btnetnew\print_bugs2.aspx:line 137
   at System.Web.UI.Control.RenderChildrenInternal(HtmlTextWriter writer, ICollection children)
   at System.Web.UI.Control.RenderChildren(HtmlTextWriter writer)
   at System.Web.UI.Page.Render(HtmlTextWriter writer)
   at System.Web.UI.Control.RenderControlInternal(HtmlTextWriter writer, ControlAdapter adapter)
   at System.Web.UI.Control.RenderControl(HtmlTextWriter writer, ControlAdapter adapter)
   at System.Web.UI.Control.RenderControl(HtmlTextWriter writer)
   at System.Web.UI.Page.ProcessRequestMain(Boolean includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint)

ALL_HTTP=HTTP_CONNECTION:keep-alive
HTTP_ACCEPT:text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8
HTTP_ACCEPT_ENCODING:gzip, deflate, br
HTTP_ACCEPT_LANGUAGE:en-US,en;q=0.9,tr;q=0.8
HTTP_COOKIE:hide_inactive_users=0; filter_users=; images_inline=1; history_inline=1; user=name=admin&NTLM=0; se_id=ca17647f-ea7c-4b1a-a002-85a95e17a7ee; ASP.NET_SessionId=ti2whxeac4s231xvdwadrboy
HTTP_HOST:localhost:49412
HTTP_REFERER:http://localhost:49412/edit_query.aspx?id=11
HTTP_USER_AGENT:Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36
HTTP_UPGRADE_INSECURE_REQUESTS:1

ALL_RAW=Connection: keep-alive
Accept: text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8
Accept-Encoding: gzip, deflate, br
Accept-Language: en-US,en;q=0.9,tr;q=0.8
Cookie: hide_inactive_users=0; filter_users=; images_inline=1; history_inline=1; user=name=admin&NTLM=0; se_id=ca17647f-ea7c-4b1a-a002-85a95e17a7ee; ASP.NET_SessionId=ti2whxeac4s231xvdwadrboy
Host: localhost:49412
Referer: http://localhost:49412/edit_query.aspx?id=11
User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36
Upgrade-Insecure-Requests: 1

APPL_MD_PATH=/LM/W3SVC/2/ROOT
APPL_PHYSICAL_PATH=F:\Synced\Visual Studio 2017\Projects\temp\btnetnew\btnetnew\
CONTENT_LENGTH=0
GATEWAY_INTERFACE=CGI/1.1
HTTPS=off
INSTANCE_ID=2
INSTANCE_META_PATH=/LM/W3SVC/2
LOCAL_ADDR=::1
PATH_INFO=/print_bugs2.aspx
PATH_TRANSLATED=F:\Synced\Visual Studio 2017\Projects\temp\btnetnew\btnetnew\print_bugs2.aspx
QUERY_STRING=qu_id=11
REMOTE_ADDR=::1
REMOTE_HOST=::1
REMOTE_PORT=49867
REQUEST_METHOD=GET
SCRIPT_NAME=/print_bugs2.aspx
SERVER_NAME=localhost
SERVER_PORT=49412
SERVER_PORT_SECURE=0
SERVER_PROTOCOL=HTTP/1.1
SERVER_SOFTWARE=Microsoft-IIS/10.0
URL=/print_bugs2.aspx
HTTP_CONNECTION=keep-alive
HTTP_ACCEPT=text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8
HTTP_ACCEPT_ENCODING=gzip, deflate, br
HTTP_ACCEPT_LANGUAGE=en-US,en;q=0.9,tr;q=0.8
HTTP_COOKIE=hide_inactive_users=0; filter_users=; images_inline=1; history_inline=1; user=name=admin&NTLM=0; se_id=ca17647f-ea7c-4b1a-a002-85a95e17a7ee; ASP.NET_SessionId=ti2whxeac4s231xvdwadrboy
HTTP_HOST=localhost:49412
HTTP_REFERER=http://localhost:49412/edit_query.aspx?id=11
HTTP_USER_AGENT=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36
HTTP_UPGRADE_INSECURE_REQUESTS=1
2018-08-16 09:39:50 http://localhost:49412/print_bugs2.aspx?qu_id=11 to email addr: admin@example.com
2018-08-16 09:39:50 http://localhost:49412/print_bugs2.aspx?qu_id=11 There was a problem sending email.   Check settings in Web.config.
2018-08-16 09:39:50 http://localhost:49412/print_bugs2.aspx?qu_id=11 TO:admin@example.com
2018-08-16 09:39:50 http://localhost:49412/print_bugs2.aspx?qu_id=11 FROM:errors@example.com
2018-08-16 09:39:50 http://localhost:49412/print_bugs2.aspx?qu_id=11 SUBJECT:Error: Specified cast is not valid.
2018-08-16 09:39:50 http://localhost:49412/print_bugs2.aspx?qu_id=11 Could not find a part of the path 'C:\temp\pickup\07305049-bddc-4423-8af1-3fa9d26caa49.eml'.
2018-08-16 09:40:27 http://localhost:49412/print_bugs2.aspx?qu_id=11 sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = 'ca17647f-ea7c-4b1a-a002-85a95e17a7ee';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = 'ca17647f-ea7c-4b1a-a002-85a95e17a7ee'
and us_active = 1
2018-08-16 09:40:28 http://localhost:49412/print_bugs2.aspx?qu_id=11 elapsed milliseconds:0000
2018-08-16 09:40:28 http://localhost:49412/print_bugs2.aspx?qu_id=11 sql=
select qu_sql from queries where qu_id = 11
2018-08-16 09:40:28 http://localhost:49412/print_bugs2.aspx?qu_id=11 sql=
select * from bugs /* altered - neither */ WHERE  (bugs.bg_project not in (
					select pu_project
					from project_user_xref
					where pu_user = 1
					and pu_permission_level = 0)) 
2018-08-16 09:40:28 http://localhost:49412/print_bugs2.aspx?qu_id=11 elapsed milliseconds:0000
2018-08-16 09:42:22  caught exception in util.set_context:Request is not available in this context
2018-08-16 09:42:22  threadproc_votes
2018-08-16 09:42:22  sql=

if exists (select * from dbo.sysobjects where id = object_id(N'[votes_view]'))
drop view [votes_view]
2018-08-16 09:42:23  sql=

create view votes_view as
select bu_bug as vote_bug, sum(bu_vote) as vote_total
from bug_user
group by bu_bug
having sum(bu_vote) > 0
2018-08-16 09:42:23  sql=

select bu_bug, count(1)
from bug_user 
where bu_vote = 1
group by bu_bug
2018-08-16 09:42:23  elapsed milliseconds:0065
2018-08-16 09:42:23  started creating Lucene index using folder F:\Synced\Visual Studio 2017\Projects\temp\btnetnew\btnetnew\App_Data\lucene_index
2018-08-16 09:42:24  sql=

/* get searchable cols */					
select sc.name
from syscolumns sc
inner join systypes st on st.xusertype = sc.xusertype
inner join sysobjects so on sc.id = so.id
where so.name = 'bugs'
and st.[name] <> 'sysname'
and sc.name not in ('rowguid',
'bg_id',
'bg_short_desc',
'bg_reported_user',
'bg_reported_date',
'bg_project',
'bg_org',
'bg_category',
'bg_priority',
'bg_status',
'bg_assigned_to_user',
'bg_last_updated_user',
'bg_last_updated_date',
'bg_user_defined_attribute',
'bg_project_custom_dropdown_value1',
'bg_project_custom_dropdown_value2',
'bg_project_custom_dropdown_value3',
'bg_tags')
and st.[name] in ('nvarchar','varchar')
and sc.length > 30
2018-08-16 09:42:24  elapsed milliseconds:0079
2018-08-16 09:42:24 http://localhost:49412/default.aspx sql=
select count(1) from users
2018-08-16 09:42:24  sql=

select bg_id, 	

isnull(bg_tags,'') bg_tags,
bg_short_desc
from bugs
2018-08-16 09:42:24  elapsed milliseconds:0054
2018-08-16 09:42:24  sql=

select bp_bug, bp_id, 
isnull(bp_comment_search,bp_comment) [text] 
from bug_posts 
where bp_type <> 'update'
and bp_hidden_from_external_users = 0
2018-08-16 09:42:24  elapsed milliseconds:0004
2018-08-16 09:42:24  done creating Lucene index
2018-08-16 09:42:27 http://localhost:49412/default.aspx sql=
select count(1) from users
2018-08-16 09:42:27 http://localhost:49412/default.aspx sql=

select us_username, us_id, us_password, isnull(us_salt,0) us_salt, us_active
from users
where us_username = N'admin'
2018-08-16 09:42:27 http://localhost:49412/default.aspx elapsed milliseconds:0001
2018-08-16 09:42:27 http://localhost:49412/default.aspx sql=
update users set us_most_recent_login_datetime = getdate() where us_id = 1
2018-08-16 09:42:27 http://localhost:49412/default.aspx sql=
select us_id from users where us_username = N'admin'
2018-08-16 09:42:27 http://localhost:49412/default.aspx elapsed milliseconds:0001
2018-08-16 09:42:27 http://localhost:49412/default.aspx guid=1065bd65-353b-4958-9ff1-01a79735e033
2018-08-16 09:42:27 http://localhost:49412/default.aspx sql=
insert into sessions (se_id, se_user) values('1065bd65-353b-4958-9ff1-01a79735e033', 1)
2018-08-16 09:42:27 http://localhost:49412/default.aspx AppPath:
2018-08-16 09:42:28 http://localhost:49412/bugs.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '1065bd65-353b-4958-9ff1-01a79735e033';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '1065bd65-353b-4958-9ff1-01a79735e033'
and us_active = 1
2018-08-16 09:42:28 http://localhost:49412/bugs.aspx elapsed milliseconds:0006
2018-08-16 09:42:28 http://localhost:49412/bugs.aspx sql=

/* custom columns */ select sc.name, st.[name] [datatype], 
case when st.[name] = 'nvarchar' or st.[name] = 'nchar' then sc.length/2 else sc.length end as [length], 
sc.xprec, sc.xscale, sc.isnullable,
mm.text [default value], 
dflts.name [default name], 
isnull(ccm_dropdown_type,'') [dropdown type],
isnull(ccm_dropdown_vals,'') [vals],
isnull(ccm_sort_seq, sc.colorder) [column order],
sc.colorder
from syscolumns sc
inner join systypes st on st.xusertype = sc.xusertype
inner join sysobjects so on sc.id = so.id
left outer join syscomments mm on sc.cdefault = mm.id
left outer join custom_col_metadata on ccm_colorder = sc.colorder
left outer join sysobjects dflts on dflts.id = mm.id
where so.name = 'bugs'
and st.[name] <> 'sysname'
and sc.name not in ('rowguid',
'bg_id',
'bg_short_desc',
'bg_reported_user',
'bg_reported_date',
'bg_project',
'bg_org',
'bg_category',
'bg_priority',
'bg_status',
'bg_assigned_to_user',
'bg_last_updated_user',
'bg_last_updated_date',
'bg_user_defined_attribute',
'bg_project_custom_dropdown_value1',
'bg_project_custom_dropdown_value2',
'bg_project_custom_dropdown_value3',
'bg_tags')
order by sc.id, isnull(ccm_sort_seq,sc.colorder)
2018-08-16 09:42:28 http://localhost:49412/bugs.aspx elapsed milliseconds:0071
2018-08-16 09:42:28 http://localhost:49412/bugs.aspx sql=
/* query dropdown */
select qu_id, qu_desc
from queries
where (isnull(qu_user,0) = 0 and isnull(qu_org,0) = 0)
or isnull(qu_user,0) = 1
or isnull(qu_org,0) = 1
order by qu_desc
2018-08-16 09:42:28 http://localhost:49412/bugs.aspx elapsed milliseconds:0000
2018-08-16 09:42:28 http://localhost:49412/bugs.aspx sql=
select qu_id, qu_sql from queries where qu_id in
			(select us_default_query from users where us_id = 1)
2018-08-16 09:42:28 http://localhost:49412/bugs.aspx elapsed milliseconds:0001
2018-08-16 09:42:28 http://localhost:49412/bugs.aspx sql=
select isnull(pr_background_color,'#ffffff'), bg_id [id], isnull(bu_flag,0) [$FLAG], 
 bg_short_desc [desc], isnull(pj_name,'') [project], isnull(og_name,'') [organization], isnull(ct_name,'') [category], rpt.us_username [reported by],
 bg_reported_date [reported on], isnull(pr_name,'') [priority], isnull(asg.us_username,'') [assigned to],
 isnull(st_name,'') [status], isnull(lu.us_username,'') [last updated by], bg_last_updated_date [last updated on]
 from bugs 
 left outer join bug_user on bu_bug = bg_id and bu_user = 1 
 left outer join users rpt on rpt.us_id = bg_reported_user
 left outer join users asg on asg.us_id = bg_assigned_to_user
 left outer join users lu on lu.us_id = bg_last_updated_user
 left outer join projects on pj_id = bg_project
 left outer join orgs on og_id = bg_org
 left outer join categories on ct_id = bg_category
 left outer join priorities on pr_id = bg_priority
 left outer join statuses on st_id = bg_status
  /* altered - just order by  */ WHERE  (bugs.bg_project not in (
					select pu_project
					from project_user_xref
					where pu_user = 1
					and pu_permission_level = 0)) order by bg_id desc
2018-08-16 09:42:28 http://localhost:49412/bugs.aspx elapsed milliseconds:0028
2018-08-16 09:42:30 http://localhost:49412/queries.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '1065bd65-353b-4958-9ff1-01a79735e033';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '1065bd65-353b-4958-9ff1-01a79735e033'
and us_active = 1
2018-08-16 09:42:30 http://localhost:49412/queries.aspx elapsed milliseconds:0000
2018-08-16 09:42:30 http://localhost:49412/queries.aspx sql=
select
			qu_desc [query],
			case
				when isnull(qu_user,0) = 0 and isnull(qu_org,0) is null then 'everybody'
				when isnull(qu_user,0) <> 0 then 'user:' + us_username
				when isnull(qu_org,0) <> 0 then 'org:' + og_name
				else ' '
				end [visibility],
			'<a href=bugs.aspx?qu_id=' + convert(varchar,qu_id) + '>view list</a>' [view list],
			'<a target=_blank href=print_bugs.aspx?qu_id=' + convert(varchar,qu_id) + '>print list</a>' [print list],
			'<a target=_blank href=print_bugs.aspx?format=excel&qu_id=' + convert(varchar,qu_id) + '>export as excel</a>' [export as excel],
			'<a target=_blank href=print_bugs2.aspx?qu_id=' + convert(varchar,qu_id) + '>print detail</a>' [print list<br>with detail],
			'<a href=edit_query.aspx?id=' + convert(varchar,qu_id) + '>edit</a>' [edit],
			'<a href=delete_query.aspx?id=' + convert(varchar,qu_id) + '>delete</a>' [delete],
			replace(convert(nvarchar(4000),qu_sql), char(10),'<br>') [sql]
			from queries
			left outer join users on qu_user = us_id
			left outer join orgs on qu_org = og_id
			where 1 = 0 /* all */
			or isnull(qu_user,0) = 1
			or isnull(qu_user,0) = 0
			order by qu_desc
2018-08-16 09:42:30 http://localhost:49412/queries.aspx elapsed milliseconds:0001
2018-08-16 09:42:43 http://localhost:49412/print_bugs2.aspx?qu_id=11 sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '1065bd65-353b-4958-9ff1-01a79735e033';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '1065bd65-353b-4958-9ff1-01a79735e033'
and us_active = 1
2018-08-16 09:42:43 http://localhost:49412/print_bugs2.aspx?qu_id=11 elapsed milliseconds:0000
2018-08-16 09:42:43 http://localhost:49412/print_bugs2.aspx?qu_id=11 sql=
select qu_sql from queries where qu_id = 11
2018-08-16 09:42:43 http://localhost:49412/print_bugs2.aspx?qu_id=11 sql=
select * from bugs /* altered - neither */ WHERE  (bugs.bg_project not in (
					select pu_project
					from project_user_xref
					where pu_user = 1
					and pu_permission_level = 0)) 
2018-08-16 09:42:43 http://localhost:49412/print_bugs2.aspx?qu_id=11 elapsed milliseconds:0000
2018-08-16 09:43:24  caught exception in util.set_context:Request is not available in this context
2018-08-16 09:43:24  threadproc_votes
2018-08-16 09:43:24  sql=

if exists (select * from dbo.sysobjects where id = object_id(N'[votes_view]'))
drop view [votes_view]
2018-08-16 09:43:24  started creating Lucene index using folder F:\Synced\Visual Studio 2017\Projects\temp\btnetnew\btnetnew\App_Data\lucene_index
2018-08-16 09:43:24  sql=

/* get searchable cols */					
select sc.name
from syscolumns sc
inner join systypes st on st.xusertype = sc.xusertype
inner join sysobjects so on sc.id = so.id
where so.name = 'bugs'
and st.[name] <> 'sysname'
and sc.name not in ('rowguid',
'bg_id',
'bg_short_desc',
'bg_reported_user',
'bg_reported_date',
'bg_project',
'bg_org',
'bg_category',
'bg_priority',
'bg_status',
'bg_assigned_to_user',
'bg_last_updated_user',
'bg_last_updated_date',
'bg_user_defined_attribute',
'bg_project_custom_dropdown_value1',
'bg_project_custom_dropdown_value2',
'bg_project_custom_dropdown_value3',
'bg_tags')
and st.[name] in ('nvarchar','varchar')
and sc.length > 30
2018-08-16 09:43:24 http://localhost:49412/default.aspx sql=
select count(1) from users
2018-08-16 09:43:24  sql=

create view votes_view as
select bu_bug as vote_bug, sum(bu_vote) as vote_total
from bug_user
group by bu_bug
having sum(bu_vote) > 0
2018-08-16 09:43:24  sql=

select bu_bug, count(1)
from bug_user 
where bu_vote = 1
group by bu_bug
2018-08-16 09:43:24  elapsed milliseconds:0032
2018-08-16 09:43:24  elapsed milliseconds:0078
2018-08-16 09:43:24  sql=

select bg_id, 	

isnull(bg_tags,'') bg_tags,
bg_short_desc
from bugs
2018-08-16 09:43:24  elapsed milliseconds:0036
2018-08-16 09:43:25  sql=

select bp_bug, bp_id, 
isnull(bp_comment_search,bp_comment) [text] 
from bug_posts 
where bp_type <> 'update'
and bp_hidden_from_external_users = 0
2018-08-16 09:43:25  elapsed milliseconds:0000
2018-08-16 09:43:25  done creating Lucene index
2018-08-16 09:43:30 http://localhost:49412/default.aspx sql=
select count(1) from users
2018-08-16 09:43:30 http://localhost:49412/default.aspx sql=

select us_username, us_id, us_password, isnull(us_salt,0) us_salt, us_active
from users
where us_username = N'admin'
2018-08-16 09:43:30 http://localhost:49412/default.aspx elapsed milliseconds:0000
2018-08-16 09:43:30 http://localhost:49412/default.aspx sql=
update users set us_most_recent_login_datetime = getdate() where us_id = 1
2018-08-16 09:43:30 http://localhost:49412/default.aspx sql=
select us_id from users where us_username = N'admin'
2018-08-16 09:43:30 http://localhost:49412/default.aspx elapsed milliseconds:0000
2018-08-16 09:43:30 http://localhost:49412/default.aspx guid=2f565d9f-4b8b-40c3-92b2-5aac9806d744
2018-08-16 09:43:30 http://localhost:49412/default.aspx sql=
insert into sessions (se_id, se_user) values('2f565d9f-4b8b-40c3-92b2-5aac9806d744', 1)
2018-08-16 09:43:30 http://localhost:49412/default.aspx AppPath:
2018-08-16 09:43:30 http://localhost:49412/bugs.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '2f565d9f-4b8b-40c3-92b2-5aac9806d744';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '2f565d9f-4b8b-40c3-92b2-5aac9806d744'
and us_active = 1
2018-08-16 09:43:30 http://localhost:49412/bugs.aspx elapsed milliseconds:0007
2018-08-16 09:43:30 http://localhost:49412/bugs.aspx sql=

/* custom columns */ select sc.name, st.[name] [datatype], 
case when st.[name] = 'nvarchar' or st.[name] = 'nchar' then sc.length/2 else sc.length end as [length], 
sc.xprec, sc.xscale, sc.isnullable,
mm.text [default value], 
dflts.name [default name], 
isnull(ccm_dropdown_type,'') [dropdown type],
isnull(ccm_dropdown_vals,'') [vals],
isnull(ccm_sort_seq, sc.colorder) [column order],
sc.colorder
from syscolumns sc
inner join systypes st on st.xusertype = sc.xusertype
inner join sysobjects so on sc.id = so.id
left outer join syscomments mm on sc.cdefault = mm.id
left outer join custom_col_metadata on ccm_colorder = sc.colorder
left outer join sysobjects dflts on dflts.id = mm.id
where so.name = 'bugs'
and st.[name] <> 'sysname'
and sc.name not in ('rowguid',
'bg_id',
'bg_short_desc',
'bg_reported_user',
'bg_reported_date',
'bg_project',
'bg_org',
'bg_category',
'bg_priority',
'bg_status',
'bg_assigned_to_user',
'bg_last_updated_user',
'bg_last_updated_date',
'bg_user_defined_attribute',
'bg_project_custom_dropdown_value1',
'bg_project_custom_dropdown_value2',
'bg_project_custom_dropdown_value3',
'bg_tags')
order by sc.id, isnull(ccm_sort_seq,sc.colorder)
2018-08-16 09:43:30 http://localhost:49412/bugs.aspx elapsed milliseconds:0003
2018-08-16 09:43:30 http://localhost:49412/bugs.aspx sql=
/* query dropdown */
select qu_id, qu_desc
from queries
where (isnull(qu_user,0) = 0 and isnull(qu_org,0) = 0)
or isnull(qu_user,0) = 1
or isnull(qu_org,0) = 1
order by qu_desc
2018-08-16 09:43:30 http://localhost:49412/bugs.aspx elapsed milliseconds:0000
2018-08-16 09:43:30 http://localhost:49412/bugs.aspx sql=
select qu_id, qu_sql from queries where qu_id in
			(select us_default_query from users where us_id = 1)
2018-08-16 09:43:30 http://localhost:49412/bugs.aspx elapsed milliseconds:0000
2018-08-16 09:43:30 http://localhost:49412/bugs.aspx sql=
select isnull(pr_background_color,'#ffffff'), bg_id [id], isnull(bu_flag,0) [$FLAG], 
 bg_short_desc [desc], isnull(pj_name,'') [project], isnull(og_name,'') [organization], isnull(ct_name,'') [category], rpt.us_username [reported by],
 bg_reported_date [reported on], isnull(pr_name,'') [priority], isnull(asg.us_username,'') [assigned to],
 isnull(st_name,'') [status], isnull(lu.us_username,'') [last updated by], bg_last_updated_date [last updated on]
 from bugs 
 left outer join bug_user on bu_bug = bg_id and bu_user = 1 
 left outer join users rpt on rpt.us_id = bg_reported_user
 left outer join users asg on asg.us_id = bg_assigned_to_user
 left outer join users lu on lu.us_id = bg_last_updated_user
 left outer join projects on pj_id = bg_project
 left outer join orgs on og_id = bg_org
 left outer join categories on ct_id = bg_category
 left outer join priorities on pr_id = bg_priority
 left outer join statuses on st_id = bg_status
  /* altered - just order by  */ WHERE  (bugs.bg_project not in (
					select pu_project
					from project_user_xref
					where pu_user = 1
					and pu_permission_level = 0)) order by bg_id desc
2018-08-16 09:43:30 http://localhost:49412/bugs.aspx elapsed milliseconds:0002
2018-08-16 09:43:32 http://localhost:49412/queries.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '2f565d9f-4b8b-40c3-92b2-5aac9806d744';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '2f565d9f-4b8b-40c3-92b2-5aac9806d744'
and us_active = 1
2018-08-16 09:43:32 http://localhost:49412/queries.aspx elapsed milliseconds:0000
2018-08-16 09:43:32 http://localhost:49412/queries.aspx sql=
select
			qu_desc [query],
			case
				when isnull(qu_user,0) = 0 and isnull(qu_org,0) is null then 'everybody'
				when isnull(qu_user,0) <> 0 then 'user:' + us_username
				when isnull(qu_org,0) <> 0 then 'org:' + og_name
				else ' '
				end [visibility],
			'<a href=bugs.aspx?qu_id=' + convert(varchar,qu_id) + '>view list</a>' [view list],
			'<a target=_blank href=print_bugs.aspx?qu_id=' + convert(varchar,qu_id) + '>print list</a>' [print list],
			'<a target=_blank href=print_bugs.aspx?format=excel&qu_id=' + convert(varchar,qu_id) + '>export as excel</a>' [export as excel],
			'<a target=_blank href=print_bugs2.aspx?qu_id=' + convert(varchar,qu_id) + '>print detail</a>' [print list<br>with detail],
			'<a href=edit_query.aspx?id=' + convert(varchar,qu_id) + '>edit</a>' [edit],
			'<a href=delete_query.aspx?id=' + convert(varchar,qu_id) + '>delete</a>' [delete],
			replace(convert(nvarchar(4000),qu_sql), char(10),'<br>') [sql]
			from queries
			left outer join users on qu_user = us_id
			left outer join orgs on qu_org = og_id
			where 1 = 0 /* all */
			or isnull(qu_user,0) = 1
			or isnull(qu_user,0) = 0
			order by qu_desc
2018-08-16 09:43:32 http://localhost:49412/queries.aspx elapsed milliseconds:0001

TIME: 9:43:39 AM
MSG: f:\Synced\Visual Studio 2017\Projects\temp\btnetnew\btnetnew\print_bugs2.aspx(133): error CS1502: The best overloaded method match for 'btnet.Bug.get_bug_datarow(int, btnet.Security)' has some invalid arguments
URL: http://localhost:49412/print_bugs2.aspx?qu_id=11
EXCEPTION: System.Web.HttpCompileException (0x80004005): f:\Synced\Visual Studio 2017\Projects\temp\btnetnew\btnetnew\print_bugs2.aspx(133): error CS1502: The best overloaded method match for 'btnet.Bug.get_bug_datarow(int, btnet.Security)' has some invalid arguments
   at System.Web.Compilation.BuildManager.CompileWebFile(VirtualPath virtualPath)
   at System.Web.Compilation.BuildManager.GetVPathBuildResultInternal(VirtualPath virtualPath, Boolean noBuild, Boolean allowCrossApp, Boolean allowBuildInPrecompile, Boolean throwIfNotFound, Boolean ensureIsUpToDate)
   at System.Web.Compilation.BuildManager.GetVPathBuildResultWithNoAssert(HttpContext context, VirtualPath virtualPath, Boolean noBuild, Boolean allowCrossApp, Boolean allowBuildInPrecompile, Boolean throwIfNotFound, Boolean ensureIsUpToDate)
   at System.Web.Compilation.BuildManager.GetVirtualPathObjectFactory(VirtualPath virtualPath, HttpContext context, Boolean allowCrossApp, Boolean throwIfNotFound)
   at System.Web.Compilation.BuildManager.CreateInstanceFromVirtualPath(VirtualPath virtualPath, Type requiredBaseType, HttpContext context, Boolean allowCrossApp)
   at System.Web.UI.PageHandlerFactory.GetHandlerHelper(HttpContext context, String requestType, VirtualPath virtualPath, String physicalPath)
   at System.Web.UI.PageHandlerFactory.GetHandler(HttpContext context, String requestType, String virtualPath, String path)
   at System.Web.HttpApplication.MaterializeHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute()
   at System.Web.HttpApplication.ExecuteStepImpl(IExecutionStep step)
   at System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously)

ALL_HTTP=HTTP_CONNECTION:keep-alive
HTTP_ACCEPT:text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8
HTTP_ACCEPT_ENCODING:gzip, deflate, br
HTTP_ACCEPT_LANGUAGE:en-US,en;q=0.9,tr;q=0.8
HTTP_COOKIE:hide_inactive_users=0; filter_users=; images_inline=1; history_inline=1; user=name=admin&NTLM=0; se_id=2f565d9f-4b8b-40c3-92b2-5aac9806d744; ASP.NET_SessionId=f5pqmnnadbcirc5p4vhxc23i
HTTP_HOST:localhost:49412
HTTP_REFERER:http://localhost:49412/queries.aspx
HTTP_USER_AGENT:Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36
HTTP_UPGRADE_INSECURE_REQUESTS:1

ALL_RAW=Connection: keep-alive
Accept: text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8
Accept-Encoding: gzip, deflate, br
Accept-Language: en-US,en;q=0.9,tr;q=0.8
Cookie: hide_inactive_users=0; filter_users=; images_inline=1; history_inline=1; user=name=admin&NTLM=0; se_id=2f565d9f-4b8b-40c3-92b2-5aac9806d744; ASP.NET_SessionId=f5pqmnnadbcirc5p4vhxc23i
Host: localhost:49412
Referer: http://localhost:49412/queries.aspx
User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36
Upgrade-Insecure-Requests: 1

APPL_MD_PATH=/LM/W3SVC/2/ROOT
APPL_PHYSICAL_PATH=F:\Synced\Visual Studio 2017\Projects\temp\btnetnew\btnetnew\
CONTENT_LENGTH=0
GATEWAY_INTERFACE=CGI/1.1
HTTPS=off
INSTANCE_ID=2
INSTANCE_META_PATH=/LM/W3SVC/2
LOCAL_ADDR=::1
PATH_INFO=/print_bugs2.aspx
PATH_TRANSLATED=F:\Synced\Visual Studio 2017\Projects\temp\btnetnew\btnetnew\print_bugs2.aspx
QUERY_STRING=qu_id=11
REMOTE_ADDR=::1
REMOTE_HOST=::1
REMOTE_PORT=49994
REQUEST_METHOD=GET
SCRIPT_NAME=/print_bugs2.aspx
SERVER_NAME=localhost
SERVER_PORT=49412
SERVER_PORT_SECURE=0
SERVER_PROTOCOL=HTTP/1.1
SERVER_SOFTWARE=Microsoft-IIS/10.0
URL=/print_bugs2.aspx
HTTP_CONNECTION=keep-alive
HTTP_ACCEPT=text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8
HTTP_ACCEPT_ENCODING=gzip, deflate, br
HTTP_ACCEPT_LANGUAGE=en-US,en;q=0.9,tr;q=0.8
HTTP_COOKIE=hide_inactive_users=0; filter_users=; images_inline=1; history_inline=1; user=name=admin&NTLM=0; se_id=2f565d9f-4b8b-40c3-92b2-5aac9806d744; ASP.NET_SessionId=f5pqmnnadbcirc5p4vhxc23i
HTTP_HOST=localhost:49412
HTTP_REFERER=http://localhost:49412/queries.aspx
HTTP_USER_AGENT=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36
HTTP_UPGRADE_INSECURE_REQUESTS=1
2018-08-16 09:43:39 http://localhost:49412/print_bugs2.aspx?qu_id=11 to email addr: admin@example.com
2018-08-16 09:43:39 http://localhost:49412/print_bugs2.aspx?qu_id=11 There was a problem sending email.   Check settings in Web.config.
2018-08-16 09:43:39 http://localhost:49412/print_bugs2.aspx?qu_id=11 TO:admin@example.com
2018-08-16 09:43:39 http://localhost:49412/print_bugs2.aspx?qu_id=11 FROM:errors@example.com
2018-08-16 09:43:39 http://localhost:49412/print_bugs2.aspx?qu_id=11 SUBJECT:Error: f:\Synced\Visual Studio 2017\Projects\temp\btnetnew\btnetnew\print_bugs2.aspx(133): error CS1502: The best overloaded method match for 'btnet.Bug.get_bug_datarow(int, btnet.Security)' has some invalid arguments
2018-08-16 09:43:39 http://localhost:49412/print_bugs2.aspx?qu_id=11 Could not find a part of the path 'C:\temp\pickup\2b9f7054-934d-4dfa-8924-82bd65692ff1.eml'.
2018-08-16 09:44:02 http://localhost:49412/print_bugs2.aspx?qu_id=11 sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '2f565d9f-4b8b-40c3-92b2-5aac9806d744';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '2f565d9f-4b8b-40c3-92b2-5aac9806d744'
and us_active = 1
2018-08-16 09:44:02 http://localhost:49412/print_bugs2.aspx?qu_id=11 elapsed milliseconds:0000
2018-08-16 09:44:02 http://localhost:49412/print_bugs2.aspx?qu_id=11 sql=
select qu_sql from queries where qu_id = 11
2018-08-16 09:44:02 http://localhost:49412/print_bugs2.aspx?qu_id=11 sql=
select * from bugs /* altered - neither */ WHERE  (bugs.bg_project not in (
					select pu_project
					from project_user_xref
					where pu_user = 1
					and pu_permission_level = 0)) 
2018-08-16 09:44:02 http://localhost:49412/print_bugs2.aspx?qu_id=11 elapsed milliseconds:0000
2018-08-16 09:44:02 http://localhost:49412/print_bugs2.aspx?qu_id=11 sql=
 /* get_bug_datarow */
declare @svn_revisions int
declare @git_commits int
declare @hg_revisions int
declare @tasks int
declare @related int;
set @svn_revisions = 0
set @git_commits = 0
set @hg_revisions = 0
set @tasks = 0
set @related = 0

select bg_id [id],
bg_short_desc [short_desc],
isnull(bg_tags,'') [bg_tags],
isnull(ru.us_username,'[deleted user]') [reporter],
isnull(ru.us_email,'') [reporter_email],
case rtrim(ru.us_firstname)
	when null then isnull(ru.us_lastname, '')
	when '' then isnull(ru.us_lastname, '')
	else isnull(ru.us_lastname + ', ' + ru.us_firstname,'')
	end [reporter_fullname],
bg_reported_date [reported_date],
datediff(s,bg_reported_date,getdate()) [seconds_ago],
isnull(lu.us_username,'') [last_updated_user],
case rtrim(lu.us_firstname)
	when null then isnull(lu.us_lastname, '')
	when '' then isnull(lu.us_lastname, '')
	else isnull(lu.us_lastname + ', ' + lu.us_firstname,'')
	end [last_updated_fullname],


bg_last_updated_date [last_updated_date],
isnull(bg_project,0) [project],
isnull(pj_name,'[no project]') [current_project],

isnull(bg_org,0) [organization],
isnull(bugorg.og_name,'') [og_name],

isnull(bg_category,0) [category],
isnull(ct_name,'') [category_name],

isnull(bg_priority,0) [priority],
isnull(pr_name,'') [priority_name],

isnull(bg_status,0) [status],
isnull(st_name,'') [status_name],

isnull(bg_user_defined_attribute,0) [udf],
isnull(udf_name,'') [udf_name],

isnull(bg_assigned_to_user,0) [assigned_to_user],
isnull(asg.us_username,'[not assigned]') [assigned_to_username],
case rtrim(asg.us_firstname)
when null then isnull(asg.us_lastname, '[not assigned]')
when '' then isnull(asg.us_lastname, '[not assigned]')
else isnull(asg.us_lastname + ', ' + asg.us_firstname,'[not assigned]')
end [assigned_to_fullname],

isnull(bs_user,0) [subscribed],

case
when
	1 <> bg_org
	and userorg.og_other_orgs_permission_level < 2
	and userorg.og_other_orgs_permission_level < isnull(pu_permission_level,2)
		then userorg.og_other_orgs_permission_level
else
	isnull(pu_permission_level,2)
end [pu_permission_level],

isnull(bg_project_custom_dropdown_value1,'') [bg_project_custom_dropdown_value1],
isnull(bg_project_custom_dropdown_value2,'') [bg_project_custom_dropdown_value2],
isnull(bg_project_custom_dropdown_value3,'') [bg_project_custom_dropdown_value3],
@related [relationship_cnt],
@svn_revisions [svn_revision_cnt],
@git_commits [git_commit_cnt],
@hg_revisions [hg_commit_cnt],
@tasks [task_cnt],
getdate() [snapshot_timestamp]
,[test],[drop1]
from bugs
inner join users this_user on us_id = 1
inner join orgs userorg on this_user.us_org = userorg.og_id
left outer join user_defined_attribute on bg_user_defined_attribute = udf_id
left outer join projects on bg_project = pj_id
left outer join orgs bugorg on bg_org = bugorg.og_id
left outer join categories on bg_category = ct_id
left outer join priorities on bg_priority = pr_id
left outer join statuses on bg_status = st_id
left outer join users asg on bg_assigned_to_user = asg.us_id
left outer join users ru on bg_reported_user = ru.us_id
left outer join users lu on bg_last_updated_user = lu.us_id
left outer join bug_subscriptions on bs_bug = bg_id and bs_user = 1
left outer join project_user_xref on pj_id = pu_project
and pu_user = 1
where bg_id = 1
2018-08-16 09:44:02 http://localhost:49412/print_bugs2.aspx?qu_id=11 elapsed milliseconds:0014
2018-08-16 09:44:02 http://localhost:49412/print_bugs2.aspx?qu_id=11 sql=
select
					isnull(pj_enable_custom_dropdown1,0) [pj_enable_custom_dropdown1],
					isnull(pj_enable_custom_dropdown2,0) [pj_enable_custom_dropdown2],
					isnull(pj_enable_custom_dropdown3,0) [pj_enable_custom_dropdown3],
					isnull(pj_custom_dropdown_label1,'') [pj_custom_dropdown_label1],
					isnull(pj_custom_dropdown_label2,'') [pj_custom_dropdown_label2],
					isnull(pj_custom_dropdown_label3,'') [pj_custom_dropdown_label3]
					from projects where pj_id = 1
2018-08-16 09:44:02 http://localhost:49412/print_bugs2.aspx?qu_id=11 elapsed milliseconds:0001
2018-08-16 09:44:02 http://localhost:49412/print_bugs2.aspx?qu_id=11 sql=

/* get_bug_posts */
select
a.bp_bug,
a.bp_comment,
isnull(us_username,'') [us_username],
case rtrim(us_firstname)
	when null then isnull(us_lastname, '')
	when '' then isnull(us_lastname, '')
	else isnull(us_lastname + ', ' + us_firstname,'')
	end [us_fullname],
isnull(us_email,'') [us_email],
a.bp_date,
datediff(s,a.bp_date,getdate()) [seconds_ago],
a.bp_id,
a.bp_type,
isnull(a.bp_email_from,'') bp_email_from,
isnull(a.bp_email_to,'') bp_email_to,
isnull(a.bp_email_cc,'') bp_email_cc,
isnull(a.bp_file,'') bp_file,
isnull(a.bp_size,0) bp_size,
isnull(a.bp_content_type,'') bp_content_type,
a.bp_hidden_from_external_users,
isnull(ba.bp_file,'') ba_file,  -- intentionally ba
isnull(ba.bp_id,'') ba_id, -- intentionally ba
isnull(ba.bp_size,'') ba_size,  -- intentionally ba
isnull(ba.bp_content_type,'') ba_content_type -- intentionally ba
from bug_posts a
left outer join users on us_id = a.bp_user
left outer join bug_posts ba on ba.bp_parent = a.bp_id and ba.bp_bug = a.bp_bug
where a.bp_bug = 1
and a.bp_parent is null
 order by a.bp_id desc, ba.bp_parent, ba.bp_id
2018-08-16 09:44:02 http://localhost:49412/print_bugs2.aspx?qu_id=11 elapsed milliseconds:0005
2018-08-16 09:44:02 http://localhost:49412/print_bugs2.aspx?qu_id=11 sql=
 /* get_bug_datarow */
declare @svn_revisions int
declare @git_commits int
declare @hg_revisions int
declare @tasks int
declare @related int;
set @svn_revisions = 0
set @git_commits = 0
set @hg_revisions = 0
set @tasks = 0
set @related = 0

select bg_id [id],
bg_short_desc [short_desc],
isnull(bg_tags,'') [bg_tags],
isnull(ru.us_username,'[deleted user]') [reporter],
isnull(ru.us_email,'') [reporter_email],
case rtrim(ru.us_firstname)
	when null then isnull(ru.us_lastname, '')
	when '' then isnull(ru.us_lastname, '')
	else isnull(ru.us_lastname + ', ' + ru.us_firstname,'')
	end [reporter_fullname],
bg_reported_date [reported_date],
datediff(s,bg_reported_date,getdate()) [seconds_ago],
isnull(lu.us_username,'') [last_updated_user],
case rtrim(lu.us_firstname)
	when null then isnull(lu.us_lastname, '')
	when '' then isnull(lu.us_lastname, '')
	else isnull(lu.us_lastname + ', ' + lu.us_firstname,'')
	end [last_updated_fullname],


bg_last_updated_date [last_updated_date],
isnull(bg_project,0) [project],
isnull(pj_name,'[no project]') [current_project],

isnull(bg_org,0) [organization],
isnull(bugorg.og_name,'') [og_name],

isnull(bg_category,0) [category],
isnull(ct_name,'') [category_name],

isnull(bg_priority,0) [priority],
isnull(pr_name,'') [priority_name],

isnull(bg_status,0) [status],
isnull(st_name,'') [status_name],

isnull(bg_user_defined_attribute,0) [udf],
isnull(udf_name,'') [udf_name],

isnull(bg_assigned_to_user,0) [assigned_to_user],
isnull(asg.us_username,'[not assigned]') [assigned_to_username],
case rtrim(asg.us_firstname)
when null then isnull(asg.us_lastname, '[not assigned]')
when '' then isnull(asg.us_lastname, '[not assigned]')
else isnull(asg.us_lastname + ', ' + asg.us_firstname,'[not assigned]')
end [assigned_to_fullname],

isnull(bs_user,0) [subscribed],

case
when
	1 <> bg_org
	and userorg.og_other_orgs_permission_level < 2
	and userorg.og_other_orgs_permission_level < isnull(pu_permission_level,2)
		then userorg.og_other_orgs_permission_level
else
	isnull(pu_permission_level,2)
end [pu_permission_level],

isnull(bg_project_custom_dropdown_value1,'') [bg_project_custom_dropdown_value1],
isnull(bg_project_custom_dropdown_value2,'') [bg_project_custom_dropdown_value2],
isnull(bg_project_custom_dropdown_value3,'') [bg_project_custom_dropdown_value3],
@related [relationship_cnt],
@svn_revisions [svn_revision_cnt],
@git_commits [git_commit_cnt],
@hg_revisions [hg_commit_cnt],
@tasks [task_cnt],
getdate() [snapshot_timestamp]
,[test],[drop1]
from bugs
inner join users this_user on us_id = 1
inner join orgs userorg on this_user.us_org = userorg.og_id
left outer join user_defined_attribute on bg_user_defined_attribute = udf_id
left outer join projects on bg_project = pj_id
left outer join orgs bugorg on bg_org = bugorg.og_id
left outer join categories on bg_category = ct_id
left outer join priorities on bg_priority = pr_id
left outer join statuses on bg_status = st_id
left outer join users asg on bg_assigned_to_user = asg.us_id
left outer join users ru on bg_reported_user = ru.us_id
left outer join users lu on bg_last_updated_user = lu.us_id
left outer join bug_subscriptions on bs_bug = bg_id and bs_user = 1
left outer join project_user_xref on pj_id = pu_project
and pu_user = 1
where bg_id = 2
2018-08-16 09:44:02 http://localhost:49412/print_bugs2.aspx?qu_id=11 elapsed milliseconds:0032
2018-08-16 09:44:02 http://localhost:49412/print_bugs2.aspx?qu_id=11 sql=
select
					isnull(pj_enable_custom_dropdown1,0) [pj_enable_custom_dropdown1],
					isnull(pj_enable_custom_dropdown2,0) [pj_enable_custom_dropdown2],
					isnull(pj_enable_custom_dropdown3,0) [pj_enable_custom_dropdown3],
					isnull(pj_custom_dropdown_label1,'') [pj_custom_dropdown_label1],
					isnull(pj_custom_dropdown_label2,'') [pj_custom_dropdown_label2],
					isnull(pj_custom_dropdown_label3,'') [pj_custom_dropdown_label3]
					from projects where pj_id = 2
2018-08-16 09:44:02 http://localhost:49412/print_bugs2.aspx?qu_id=11 elapsed milliseconds:0001
2018-08-16 09:44:02 http://localhost:49412/print_bugs2.aspx?qu_id=11 sql=

/* get_bug_posts */
select
a.bp_bug,
a.bp_comment,
isnull(us_username,'') [us_username],
case rtrim(us_firstname)
	when null then isnull(us_lastname, '')
	when '' then isnull(us_lastname, '')
	else isnull(us_lastname + ', ' + us_firstname,'')
	end [us_fullname],
isnull(us_email,'') [us_email],
a.bp_date,
datediff(s,a.bp_date,getdate()) [seconds_ago],
a.bp_id,
a.bp_type,
isnull(a.bp_email_from,'') bp_email_from,
isnull(a.bp_email_to,'') bp_email_to,
isnull(a.bp_email_cc,'') bp_email_cc,
isnull(a.bp_file,'') bp_file,
isnull(a.bp_size,0) bp_size,
isnull(a.bp_content_type,'') bp_content_type,
a.bp_hidden_from_external_users,
isnull(ba.bp_file,'') ba_file,  -- intentionally ba
isnull(ba.bp_id,'') ba_id, -- intentionally ba
isnull(ba.bp_size,'') ba_size,  -- intentionally ba
isnull(ba.bp_content_type,'') ba_content_type -- intentionally ba
from bug_posts a
left outer join users on us_id = a.bp_user
left outer join bug_posts ba on ba.bp_parent = a.bp_id and ba.bp_bug = a.bp_bug
where a.bp_bug = 2
and a.bp_parent is null
 order by a.bp_id desc, ba.bp_parent, ba.bp_id
2018-08-16 09:44:02 http://localhost:49412/print_bugs2.aspx?qu_id=11 elapsed milliseconds:0005
2018-08-16 09:44:02 http://localhost:49412/print_bugs2.aspx?qu_id=11 sql=
 /* get_bug_datarow */
declare @svn_revisions int
declare @git_commits int
declare @hg_revisions int
declare @tasks int
declare @related int;
set @svn_revisions = 0
set @git_commits = 0
set @hg_revisions = 0
set @tasks = 0
set @related = 0

select bg_id [id],
bg_short_desc [short_desc],
isnull(bg_tags,'') [bg_tags],
isnull(ru.us_username,'[deleted user]') [reporter],
isnull(ru.us_email,'') [reporter_email],
case rtrim(ru.us_firstname)
	when null then isnull(ru.us_lastname, '')
	when '' then isnull(ru.us_lastname, '')
	else isnull(ru.us_lastname + ', ' + ru.us_firstname,'')
	end [reporter_fullname],
bg_reported_date [reported_date],
datediff(s,bg_reported_date,getdate()) [seconds_ago],
isnull(lu.us_username,'') [last_updated_user],
case rtrim(lu.us_firstname)
	when null then isnull(lu.us_lastname, '')
	when '' then isnull(lu.us_lastname, '')
	else isnull(lu.us_lastname + ', ' + lu.us_firstname,'')
	end [last_updated_fullname],


bg_last_updated_date [last_updated_date],
isnull(bg_project,0) [project],
isnull(pj_name,'[no project]') [current_project],

isnull(bg_org,0) [organization],
isnull(bugorg.og_name,'') [og_name],

isnull(bg_category,0) [category],
isnull(ct_name,'') [category_name],

isnull(bg_priority,0) [priority],
isnull(pr_name,'') [priority_name],

isnull(bg_status,0) [status],
isnull(st_name,'') [status_name],

isnull(bg_user_defined_attribute,0) [udf],
isnull(udf_name,'') [udf_name],

isnull(bg_assigned_to_user,0) [assigned_to_user],
isnull(asg.us_username,'[not assigned]') [assigned_to_username],
case rtrim(asg.us_firstname)
when null then isnull(asg.us_lastname, '[not assigned]')
when '' then isnull(asg.us_lastname, '[not assigned]')
else isnull(asg.us_lastname + ', ' + asg.us_firstname,'[not assigned]')
end [assigned_to_fullname],

isnull(bs_user,0) [subscribed],

case
when
	1 <> bg_org
	and userorg.og_other_orgs_permission_level < 2
	and userorg.og_other_orgs_permission_level < isnull(pu_permission_level,2)
		then userorg.og_other_orgs_permission_level
else
	isnull(pu_permission_level,2)
end [pu_permission_level],

isnull(bg_project_custom_dropdown_value1,'') [bg_project_custom_dropdown_value1],
isnull(bg_project_custom_dropdown_value2,'') [bg_project_custom_dropdown_value2],
isnull(bg_project_custom_dropdown_value3,'') [bg_project_custom_dropdown_value3],
@related [relationship_cnt],
@svn_revisions [svn_revision_cnt],
@git_commits [git_commit_cnt],
@hg_revisions [hg_commit_cnt],
@tasks [task_cnt],
getdate() [snapshot_timestamp]
,[test],[drop1]
from bugs
inner join users this_user on us_id = 1
inner join orgs userorg on this_user.us_org = userorg.og_id
left outer join user_defined_attribute on bg_user_defined_attribute = udf_id
left outer join projects on bg_project = pj_id
left outer join orgs bugorg on bg_org = bugorg.og_id
left outer join categories on bg_category = ct_id
left outer join priorities on bg_priority = pr_id
left outer join statuses on bg_status = st_id
left outer join users asg on bg_assigned_to_user = asg.us_id
left outer join users ru on bg_reported_user = ru.us_id
left outer join users lu on bg_last_updated_user = lu.us_id
left outer join bug_subscriptions on bs_bug = bg_id and bs_user = 1
left outer join project_user_xref on pj_id = pu_project
and pu_user = 1
where bg_id = 3
2018-08-16 09:44:02 http://localhost:49412/print_bugs2.aspx?qu_id=11 elapsed milliseconds:0015
2018-08-16 09:44:02 http://localhost:49412/print_bugs2.aspx?qu_id=11 sql=

/* get_bug_posts */
select
a.bp_bug,
a.bp_comment,
isnull(us_username,'') [us_username],
case rtrim(us_firstname)
	when null then isnull(us_lastname, '')
	when '' then isnull(us_lastname, '')
	else isnull(us_lastname + ', ' + us_firstname,'')
	end [us_fullname],
isnull(us_email,'') [us_email],
a.bp_date,
datediff(s,a.bp_date,getdate()) [seconds_ago],
a.bp_id,
a.bp_type,
isnull(a.bp_email_from,'') bp_email_from,
isnull(a.bp_email_to,'') bp_email_to,
isnull(a.bp_email_cc,'') bp_email_cc,
isnull(a.bp_file,'') bp_file,
isnull(a.bp_size,0) bp_size,
isnull(a.bp_content_type,'') bp_content_type,
a.bp_hidden_from_external_users,
isnull(ba.bp_file,'') ba_file,  -- intentionally ba
isnull(ba.bp_id,'') ba_id, -- intentionally ba
isnull(ba.bp_size,'') ba_size,  -- intentionally ba
isnull(ba.bp_content_type,'') ba_content_type -- intentionally ba
from bug_posts a
left outer join users on us_id = a.bp_user
left outer join bug_posts ba on ba.bp_parent = a.bp_id and ba.bp_bug = a.bp_bug
where a.bp_bug = 3
and a.bp_parent is null
 order by a.bp_id desc, ba.bp_parent, ba.bp_id
2018-08-16 09:44:02 http://localhost:49412/print_bugs2.aspx?qu_id=11 elapsed milliseconds:0006
2018-08-16 09:44:54 http://localhost:49412/edit_query.aspx?id=11 sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '2f565d9f-4b8b-40c3-92b2-5aac9806d744';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '2f565d9f-4b8b-40c3-92b2-5aac9806d744'
and us_active = 1
2018-08-16 09:44:54 http://localhost:49412/edit_query.aspx?id=11 elapsed milliseconds:0000
2018-08-16 09:44:54 http://localhost:49412/edit_query.aspx?id=11 sql=
/* populate org/user dropdowns */
select og_id, og_name from orgs order by og_name;
select us_id, us_username from users order by us_username
2018-08-16 09:44:54 http://localhost:49412/edit_query.aspx?id=11 elapsed milliseconds:0000
2018-08-16 09:44:54 http://localhost:49412/edit_query.aspx?id=11 sql=
select
				qu_desc, qu_sql, isnull(qu_user,0) [qu_user], isnull(qu_org,0) [qu_org]
				from queries where qu_id = 11
2018-08-16 09:44:54 http://localhost:49412/edit_query.aspx?id=11 elapsed milliseconds:0000
2018-08-16 09:45:31 http://localhost:49412/delete_query.aspx?id=11 sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '2f565d9f-4b8b-40c3-92b2-5aac9806d744';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '2f565d9f-4b8b-40c3-92b2-5aac9806d744'
and us_active = 1
2018-08-16 09:45:31 http://localhost:49412/delete_query.aspx?id=11 elapsed milliseconds:0000
2018-08-16 09:45:31 http://localhost:49412/delete_query.aspx?id=11 sql=
select qu_desc, isnull(qu_user,0) qu_user from queries where qu_id = 11
2018-08-16 09:45:31 http://localhost:49412/delete_query.aspx?id=11 elapsed milliseconds:0001
2018-08-16 09:45:33 http://localhost:49412/delete_query.aspx?id=11 sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '2f565d9f-4b8b-40c3-92b2-5aac9806d744';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '2f565d9f-4b8b-40c3-92b2-5aac9806d744'
and us_active = 1
2018-08-16 09:45:33 http://localhost:49412/delete_query.aspx?id=11 elapsed milliseconds:0000
2018-08-16 09:45:33 http://localhost:49412/delete_query.aspx?id=11 sql=
delete queries where qu_id = 11
2018-08-16 09:45:33 http://localhost:49412/delete_query.aspx?id=11 sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '2f565d9f-4b8b-40c3-92b2-5aac9806d744';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '2f565d9f-4b8b-40c3-92b2-5aac9806d744'
and us_active = 1
2018-08-16 09:45:33 http://localhost:49412/delete_query.aspx?id=11 elapsed milliseconds:0000
2018-08-16 09:45:33 http://localhost:49412/delete_query.aspx?id=11 sql=
select
			qu_desc [query],
			case
				when isnull(qu_user,0) = 0 and isnull(qu_org,0) is null then 'everybody'
				when isnull(qu_user,0) <> 0 then 'user:' + us_username
				when isnull(qu_org,0) <> 0 then 'org:' + og_name
				else ' '
				end [visibility],
			'<a href=bugs.aspx?qu_id=' + convert(varchar,qu_id) + '>view list</a>' [view list],
			'<a target=_blank href=print_bugs.aspx?qu_id=' + convert(varchar,qu_id) + '>print list</a>' [print list],
			'<a target=_blank href=print_bugs.aspx?format=excel&qu_id=' + convert(varchar,qu_id) + '>export as excel</a>' [export as excel],
			'<a target=_blank href=print_bugs2.aspx?qu_id=' + convert(varchar,qu_id) + '>print detail</a>' [print list<br>with detail],
			'<a href=edit_query.aspx?id=' + convert(varchar,qu_id) + '>edit</a>' [edit],
			'<a href=delete_query.aspx?id=' + convert(varchar,qu_id) + '>delete</a>' [delete],
			replace(convert(nvarchar(4000),qu_sql), char(10),'<br>') [sql]
			from queries
			left outer join users on qu_user = us_id
			left outer join orgs on qu_org = og_id
			where 1 = 0 /* all */
			or isnull(qu_user,0) = 1
			or isnull(qu_user,0) = 0
			order by qu_desc
2018-08-16 09:45:33 http://localhost:49412/delete_query.aspx?id=11 elapsed milliseconds:0001
2018-08-16 09:47:08 http://localhost:49412/search.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '2f565d9f-4b8b-40c3-92b2-5aac9806d744';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '2f565d9f-4b8b-40c3-92b2-5aac9806d744'
and us_active = 1
2018-08-16 09:47:08 http://localhost:49412/search.aspx elapsed milliseconds:0000
2018-08-16 09:47:08 http://localhost:49412/search.aspx sql=

/* get related users 2 */
select  pj_id, us_id,
case when 0 = 1 then
    case when len(isnull(us_firstname,'') + ' ' + isnull(us_lastname,'')) > 1
	then isnull(us_firstname,'') + ' ' + isnull(us_lastname,'')
    else us_username end
else us_username end us_username,
isnull(us_email,'') us_email
into #temp
from projects, users
where pj_id not in
(
	select pu_project from project_user_xref
	where pu_permission_level = 0 and pu_user = 1
)





if 0 = 1 -- external
and 2 = 0 -- other orgs
begin
	select distinct a.us_id, a.us_username, a.us_email
	from #temp a
	inner join users b on a.us_id = b.us_id
	inner join orgs on b.us_org = og_id
	where og_external_user = 0 or b.us_org = 1
	order by a.us_username
end
else
begin

	select distinct us_id, us_username, us_email
		from #temp
		left outer join project_user_xref on pj_id = pu_project
		and us_id = pu_user
		where isnull(pu_permission_level,2) <> 0
		order by us_username
end

drop table #temp
2018-08-16 09:47:08 http://localhost:49412/search.aspx elapsed milliseconds:0013
2018-08-16 09:47:08 http://localhost:49412/search.aspx sql=
/* drop downs */ select pj_id, pj_name from projects order by pj_name; select og_id, og_name from orgs order by og_name;
	select ct_id, ct_name from categories order by ct_sort_seq, ct_name;
	select pr_id, pr_name from priorities order by pr_sort_seq, pr_name;
	select st_id, st_name from statuses order by st_sort_seq, st_name;
	select udf_id, udf_name from user_defined_attribute order by udf_sort_seq, udf_name
2018-08-16 09:47:08 http://localhost:49412/search.aspx elapsed milliseconds:0004
2018-08-16 09:47:08 http://localhost:49412/search.aspx sql=

select count(1)
from projects
where isnull(pj_enable_custom_dropdown1,0) = 1
or isnull(pj_enable_custom_dropdown2,0) = 1
or isnull(pj_enable_custom_dropdown3,0) = 1
2018-08-16 09:47:25 http://localhost:49412/reports.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '2f565d9f-4b8b-40c3-92b2-5aac9806d744';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '2f565d9f-4b8b-40c3-92b2-5aac9806d744'
and us_active = 1
2018-08-16 09:47:25 http://localhost:49412/reports.aspx elapsed milliseconds:0000
2018-08-16 09:47:25 http://localhost:49412/reports.aspx sql=

select
rp_desc [report],
case
	when rp_chart_type = 'pie' then
		'<a target=''_blank'' href=''view_report.aspx?view=chart&id=' + convert(varchar, rp_id) + '''>pie</a>'
	when rp_chart_type = 'line' then
		'<a target=''_blank'' href=''view_report.aspx?view=chart&id=' + convert(varchar, rp_id) + '''>line</a>'
	when rp_chart_type = 'bar' then
		'<a target=''_blank'' href=''view_report.aspx?view=chart&id=' + convert(varchar, rp_id) + '''>bar</a>'
	else
		'&nbsp;' end [view<br>chart],
'<a target=''_blank'' href=''view_report.aspx?view=data&id=' + convert(varchar, rp_id) + '''>data</a>' [view<br>data]
, '<a href=''edit_report.aspx?id=' + convert(varchar, rp_id) + '''>edit</a>' [edit], '<a href=''delete_report.aspx?id=' + convert(varchar, rp_id) + '''>delete</a>' [delete] 
from reports order by rp_desc
2018-08-16 09:47:25 http://localhost:49412/reports.aspx elapsed milliseconds:0002
2018-08-16 09:47:37 http://localhost:49412/view_report.aspx?view=data&id=3 sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '2f565d9f-4b8b-40c3-92b2-5aac9806d744';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '2f565d9f-4b8b-40c3-92b2-5aac9806d744'
and us_active = 1
2018-08-16 09:47:37 http://localhost:49412/view_report.aspx?view=data&id=3 elapsed milliseconds:0000
2018-08-16 09:47:37 http://localhost:49412/view_report.aspx?view=data&id=3 sql=
select rp_desc, rp_sql, rp_chart_type
		from reports
		where rp_id = 3
2018-08-16 09:47:37 http://localhost:49412/view_report.aspx?view=data&id=3 elapsed milliseconds:0001
2018-08-16 09:47:37 http://localhost:49412/view_report.aspx?view=data&id=3 sql=
select ct_name [category], count(1) [count] 
 from bugs 
 inner join categories on bg_category = ct_id 
 group by ct_name 
 order by ct_name
2018-08-16 09:47:37 http://localhost:49412/view_report.aspx?view=data&id=3 elapsed milliseconds:0002
2018-08-16 09:47:50 http://localhost:49412/dashboard.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '2f565d9f-4b8b-40c3-92b2-5aac9806d744';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '2f565d9f-4b8b-40c3-92b2-5aac9806d744'
and us_active = 1
2018-08-16 09:47:50 http://localhost:49412/dashboard.aspx elapsed milliseconds:0000
2018-08-16 09:47:51 http://localhost:49412/dashboard.aspx sql=

select ds.*, rp_desc
from dashboard_items ds
inner join reports on rp_id = ds_report
where ds_user = 1
order by ds_col, ds_row
2018-08-16 09:47:51 http://localhost:49412/dashboard.aspx elapsed milliseconds:0002
2018-08-16 09:47:51 http://localhost:49412/view_report.aspx?view=data&id=3 sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '2f565d9f-4b8b-40c3-92b2-5aac9806d744';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '2f565d9f-4b8b-40c3-92b2-5aac9806d744'
and us_active = 1
2018-08-16 09:47:51 http://localhost:49412/view_report.aspx?view=data&id=3 elapsed milliseconds:0000
2018-08-16 09:47:51 http://localhost:49412/view_report.aspx?view=data&id=3 sql=
select rp_desc, rp_sql, rp_chart_type
		from reports
		where rp_id = 3
2018-08-16 09:47:51 http://localhost:49412/view_report.aspx?view=data&id=3 elapsed milliseconds:0000
2018-08-16 09:47:51 http://localhost:49412/view_report.aspx?view=data&id=3 sql=
select ct_name [category], count(1) [count] 
 from bugs 
 inner join categories on bg_category = ct_id 
 group by ct_name 
 order by ct_name
2018-08-16 09:47:51 http://localhost:49412/view_report.aspx?view=data&id=3 elapsed milliseconds:0000
2018-08-16 09:47:58 http://localhost:49412/edit_dashboard.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '2f565d9f-4b8b-40c3-92b2-5aac9806d744';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '2f565d9f-4b8b-40c3-92b2-5aac9806d744'
and us_active = 1
2018-08-16 09:47:58 http://localhost:49412/edit_dashboard.aspx elapsed milliseconds:0000
2018-08-16 09:47:58 http://localhost:49412/edit_dashboard.aspx sql=

select ds_id, ds_col, ds_row, ds_chart_type, rp_desc
from dashboard_items ds
inner join reports on rp_id = ds_report
where ds_user = 1
order by ds_col, ds_row
2018-08-16 09:47:58 http://localhost:49412/edit_dashboard.aspx elapsed milliseconds:0003
2018-08-16 09:48:03 http://localhost:49412/select_report.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '2f565d9f-4b8b-40c3-92b2-5aac9806d744';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '2f565d9f-4b8b-40c3-92b2-5aac9806d744'
and us_active = 1
2018-08-16 09:48:03 http://localhost:49412/select_report.aspx elapsed milliseconds:0000
2018-08-16 09:48:03 http://localhost:49412/select_report.aspx sql=

select
rp_desc [report],
case
	when rp_chart_type = 'pie' then
		'<a href=''javascript:select_report("pie",' + convert(varchar, rp_id) + ')''>select pie</a>'
	when rp_chart_type = 'line' then
		'<a href=''javascript:select_report("line",' + convert(varchar, rp_id) + ')''>select line</a>'
	when rp_chart_type = 'bar' then
		'<a href=''javascript:select_report("bar",' + convert(varchar, rp_id) + ')''>select bar</a>'
	else
		'&nbsp;' end [chart],
'<a href=''javascript:select_report("data",' + convert(varchar, rp_id) + ')''>select data</a>' [data]
from reports order by rp_desc
2018-08-16 09:48:03 http://localhost:49412/select_report.aspx elapsed milliseconds:0001
2018-08-16 09:48:10 http://localhost:49412/update_dashboard.aspx?rp_id=3&rp_chart_type=pie&rp_col=1&actn=add&ses=2f565d9f-4b8b-40c3-92b2-5aac9806d744 sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '2f565d9f-4b8b-40c3-92b2-5aac9806d744';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '2f565d9f-4b8b-40c3-92b2-5aac9806d744'
and us_active = 1
2018-08-16 09:48:10 http://localhost:49412/update_dashboard.aspx?rp_id=3&rp_chart_type=pie&rp_col=1&actn=add&ses=2f565d9f-4b8b-40c3-92b2-5aac9806d744 elapsed milliseconds:0000
2018-08-16 09:48:10 http://localhost:49412/update_dashboard.aspx?rp_id=3&rp_chart_type=pie&rp_col=1&actn=add&ses=2f565d9f-4b8b-40c3-92b2-5aac9806d744 sql=

declare @last_row int
set @last_row = -1

select @last_row = max(ds_row) from dashboard_items
where ds_user = 1
and ds_col = 1

if @last_row = -1 or @last_row is null
	set @last_row = 1
else
	set @last_row = @last_row + 1

insert into dashboard_items
(ds_user, ds_report, ds_chart_type, ds_col, ds_row)
values (1, 3, 'pie', 1, @last_row)
2018-08-16 09:48:10 http://localhost:49412/edit_dashboard.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '2f565d9f-4b8b-40c3-92b2-5aac9806d744';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '2f565d9f-4b8b-40c3-92b2-5aac9806d744'
and us_active = 1
2018-08-16 09:48:10 http://localhost:49412/edit_dashboard.aspx elapsed milliseconds:0000
2018-08-16 09:48:10 http://localhost:49412/edit_dashboard.aspx sql=

select ds_id, ds_col, ds_row, ds_chart_type, rp_desc
from dashboard_items ds
inner join reports on rp_id = ds_report
where ds_user = 1
order by ds_col, ds_row
2018-08-16 09:48:10 http://localhost:49412/edit_dashboard.aspx elapsed milliseconds:0000
2018-08-16 09:48:15 http://localhost:49412/dashboard.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '2f565d9f-4b8b-40c3-92b2-5aac9806d744';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '2f565d9f-4b8b-40c3-92b2-5aac9806d744'
and us_active = 1
2018-08-16 09:48:15 http://localhost:49412/dashboard.aspx elapsed milliseconds:0000
2018-08-16 09:48:15 http://localhost:49412/dashboard.aspx sql=

select ds.*, rp_desc
from dashboard_items ds
inner join reports on rp_id = ds_report
where ds_user = 1
order by ds_col, ds_row
2018-08-16 09:48:15 http://localhost:49412/dashboard.aspx elapsed milliseconds:0000
2018-08-16 09:48:15 http://localhost:49412/view_report.aspx?scale=2&view=pie&id=3 sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '2f565d9f-4b8b-40c3-92b2-5aac9806d744';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '2f565d9f-4b8b-40c3-92b2-5aac9806d744'
and us_active = 1
2018-08-16 09:48:15 http://localhost:49412/view_report.aspx?scale=2&view=pie&id=3 elapsed milliseconds:0000
2018-08-16 09:48:15 http://localhost:49412/view_report.aspx?scale=2&view=pie&id=3 sql=
select rp_desc, rp_sql, rp_chart_type
		from reports
		where rp_id = 3
2018-08-16 09:48:15 http://localhost:49412/view_report.aspx?scale=2&view=pie&id=3 elapsed milliseconds:0000
2018-08-16 09:48:15 http://localhost:49412/view_report.aspx?scale=2&view=pie&id=3 sql=
select ct_name [category], count(1) [count] 
 from bugs 
 inner join categories on bg_category = ct_id 
 group by ct_name 
 order by ct_name
2018-08-16 09:48:15 http://localhost:49412/view_report.aspx?scale=2&view=pie&id=3 elapsed milliseconds:0000
2018-08-16 09:48:15 http://localhost:49412/view_report.aspx?view=data&id=3 sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '2f565d9f-4b8b-40c3-92b2-5aac9806d744';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '2f565d9f-4b8b-40c3-92b2-5aac9806d744'
and us_active = 1
2018-08-16 09:48:15 http://localhost:49412/view_report.aspx?view=data&id=3 elapsed milliseconds:0000
2018-08-16 09:48:15 http://localhost:49412/view_report.aspx?view=data&id=3 sql=
select rp_desc, rp_sql, rp_chart_type
		from reports
		where rp_id = 3
2018-08-16 09:48:15 http://localhost:49412/view_report.aspx?view=data&id=3 elapsed milliseconds:0000
2018-08-16 09:48:15 http://localhost:49412/view_report.aspx?view=data&id=3 sql=
select ct_name [category], count(1) [count] 
 from bugs 
 inner join categories on bg_category = ct_id 
 group by ct_name 
 order by ct_name
2018-08-16 09:48:15 http://localhost:49412/view_report.aspx?view=data&id=3 elapsed milliseconds:0000
2018-08-16 09:48:31 http://localhost:49412/tasks.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '2f565d9f-4b8b-40c3-92b2-5aac9806d744';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '2f565d9f-4b8b-40c3-92b2-5aac9806d744'
and us_active = 1
2018-08-16 09:48:31 http://localhost:49412/tasks.aspx elapsed milliseconds:0000
2018-08-16 09:48:31 http://localhost:49412/tasks.aspx sql=

declare @bg_org int

select isnull(pu_permission_level,2),
bg_org
from bugs
left outer join project_user_xref
on pu_project = bg_project
and pu_user = 1
where bg_id = 0
2018-08-16 09:48:31 http://localhost:49412/tasks.aspx elapsed milliseconds:0002
2018-08-16 09:49:52 http://localhost:49412/admin.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '2f565d9f-4b8b-40c3-92b2-5aac9806d744';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '2f565d9f-4b8b-40c3-92b2-5aac9806d744'
and us_active = 1
2018-08-16 09:49:52 http://localhost:49412/admin.aspx elapsed milliseconds:0000
2018-08-16 09:49:53 http://localhost:49412/users.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '2f565d9f-4b8b-40c3-92b2-5aac9806d744';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '2f565d9f-4b8b-40c3-92b2-5aac9806d744'
and us_active = 1
2018-08-16 09:49:53 http://localhost:49412/users.aspx elapsed milliseconds:0000
2018-08-16 09:49:53 http://localhost:49412/users.aspx sql=

			select distinct pu_user
			into #t
			from
			project_user_xref
			where pu_admin = 1;

			select u.us_id [id],
			'<a href=edit_user.aspx?id=' + convert(varchar,u.us_id) + '>edit</a>' [$no_sort_edit],
			'<a href=edit_user.aspx?copy=y&id=' + convert(varchar,u.us_id) + '>copy</a>' [$no_sort_add<br>like<br>this],
			'<a href=delete_user.aspx?id=' + convert(varchar,u.us_id) + '>delete</a>' [$no_sort_delete],

			u.us_username [username],
			isnull(u.us_firstname,'') + ' ' + isnull(u.us_lastname,'') [name],
			'<a sort=''' + og_name + ''' href=edit_org.aspx?id=' + convert(varchar,og_id) + '>' + og_name + '</a>' [org],
            isnull(u.us_email,'') [email],
			case when u.us_admin = 1 then 'Y' else 'N' end [admin],
			case when pu_user is null then 'N' else 'Y' end [project<br>admin],
			case when u.us_active = 1 then 'Y' else 'N' end [active],
			case when og_external_user = 1 then 'Y' else 'N' end [external],
			isnull(pj_name,'') [forced<br>project],
			isnull(qu_desc,'') [default query],
			case when u.us_enable_notifications = 1 then 'Y' else 'N' end [notif-<br>ications],
			u.us_most_recent_login_datetime [most recent login],
			u2.us_username [created<br>by]

			from users u
			inner join orgs on u.us_org = og_id
			left outer join queries on u.us_default_query = qu_id
			left outer join projects on u.us_forced_project = pj_id
			left outer join users u2 on u.us_created_user = u2.us_id
			left outer join #t on u.us_id = pu_user
			where u.us_active in (1 ,0)
			
			order by u.us_username;

			drop table #t
2018-08-16 09:49:53 http://localhost:49412/users.aspx elapsed milliseconds:0013
2018-08-16 09:49:59 http://localhost:49412/edit_user.aspx?id=1 sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '2f565d9f-4b8b-40c3-92b2-5aac9806d744';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '2f565d9f-4b8b-40c3-92b2-5aac9806d744'
and us_active = 1
2018-08-16 09:49:59 http://localhost:49412/edit_user.aspx?id=1 elapsed milliseconds:0000
2018-08-16 09:49:59 http://localhost:49412/edit_user.aspx?id=1 sql=

				select pj_id, pj_name,
				isnull(pu_permission_level,2) [pu_permission_level],
				isnull(pu_auto_subscribe,0) [pu_auto_subscribe],
				isnull(pu_admin,0) [pu_admin]
				from projects
				left outer join project_user_xref on pj_id = pu_project
				and pu_user = 1
				order by pj_name;/* populate query dropdown */
		    declare @org int
		    set @org = null
		    select @org = us_org from users where us_id = 1

			select qu_id, qu_desc
			from queries
			where (isnull(qu_user,0) = 0 and isnull(qu_org,0) = 0)
			or isnull(qu_user,0) = 1
			or isnull(qu_org,0) = isnull(@org,-1)
			order by qu_desc;/* populate org dropdown 1 */
				select og_id, og_name
				from orgs
				order by og_name;
			select
				us_username,
				isnull(us_firstname,'') [us_firstname],
				isnull(us_lastname,'') [us_lastname],
				isnull(us_bugs_per_page,10) [us_bugs_per_page],
				us_use_fckeditor,
				us_enable_bug_list_popups,
				isnull(us_email,'') [us_email],
				us_active,
				us_admin,
				us_enable_notifications,
				us_send_notifications_to_self,
                us_reported_notifications,
                us_assigned_notifications,
                us_subscribed_notifications,
				us_auto_subscribe,
				us_auto_subscribe_own_bugs,
				us_auto_subscribe_reported_bugs,
				us_default_query,
				us_org,
				isnull(us_signature,'') [us_signature],
				isnull(us_forced_project,0) [us_forced_project],
				us_created_user
				from users
				where us_id = 1
2018-08-16 09:49:59 http://localhost:49412/edit_user.aspx?id=1 elapsed milliseconds:0005
2018-08-16 09:53:00 http://localhost:49412/admin.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '2f565d9f-4b8b-40c3-92b2-5aac9806d744';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '2f565d9f-4b8b-40c3-92b2-5aac9806d744'
and us_active = 1
2018-08-16 09:53:01 http://localhost:49412/admin.aspx elapsed milliseconds:0000
2018-08-16 09:53:03 http://localhost:49412/orgs.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '2f565d9f-4b8b-40c3-92b2-5aac9806d744';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '2f565d9f-4b8b-40c3-92b2-5aac9806d744'
and us_active = 1
2018-08-16 09:53:03 http://localhost:49412/orgs.aspx elapsed milliseconds:0000
2018-08-16 09:53:03 http://localhost:49412/orgs.aspx sql=
select og_id [id],
		'<a href=edit_org.aspx?id=' + convert(varchar,og_id) + '>edit</a>' [$no_sort_edit],
		'<a href=delete_org.aspx?id=' + convert(varchar,og_id) + '>delete</a>' [$no_sort_delete],
		og_name[desc],
		case when og_active = 1 then 'Y' else 'N' end [active],
		case when og_can_search = 1 then 'Y' else 'N' end [can<br>search],
		case when og_non_admins_can_use = 1 then 'Y' else 'N' end [non-admin<br>can use],
		case when og_can_only_see_own_reported = 1 then 'Y' else 'N' end [can see<br>only own bugs],
		case
			when og_other_orgs_permission_level = 0 then 'None'
			when og_other_orgs_permission_level = 1 then 'Read Only'
			else 'Add/Edit' end [other orgs<br>permission<br>level],
		case when og_external_user = 1 then 'Y' else 'N' end [external],
		case when og_can_be_assigned_to = 1 then 'Y' else 'N' end [can<br>be assigned to],
		case
			when og_status_field_permission_level = 0 then 'None'
			when og_status_field_permission_level = 1 then 'Read Only'
			else 'Add/Edit' end [status<br>permission<br>level],
		case
			when og_assigned_to_field_permission_level = 0 then 'None'
			when og_assigned_to_field_permission_level = 1 then 'Read Only'
			else 'Add/Edit' end [assigned to<br>permission<br>level],
		case
			when og_priority_field_permission_level = 0 then 'None'
			when og_priority_field_permission_level = 1 then 'Read Only'
			else 'Add/Edit' end [priority<br>permission<br>level],
		isnull(og_domain,'')[domain]
		from orgs order by og_name
2018-08-16 09:53:03 http://localhost:49412/orgs.aspx elapsed milliseconds:0002
2018-08-16 09:53:08 http://localhost:49412/edit_org.aspx?id=1 sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '2f565d9f-4b8b-40c3-92b2-5aac9806d744';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '2f565d9f-4b8b-40c3-92b2-5aac9806d744'
and us_active = 1
2018-08-16 09:53:08 http://localhost:49412/edit_org.aspx?id=1 elapsed milliseconds:0000
2018-08-16 09:53:08 http://localhost:49412/edit_org.aspx?id=1 sql=
select *,isnull(og_domain,'') og_domain2 from orgs where og_id = 1
2018-08-16 09:53:08 http://localhost:49412/edit_org.aspx?id=1 elapsed milliseconds:0001
2018-08-16 09:53:59 http://localhost:49412/edit_org.aspx?id=1 sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '2f565d9f-4b8b-40c3-92b2-5aac9806d744';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '2f565d9f-4b8b-40c3-92b2-5aac9806d744'
and us_active = 1
2018-08-16 09:54:00 http://localhost:49412/edit_org.aspx?id=1 elapsed milliseconds:0000
2018-08-16 09:54:00 http://localhost:49412/edit_org.aspx?id=1 sql=

update orgs set
	og_name = N'org1',
	og_domain = N'',
	og_active = 1,
	og_non_admins_can_use = 0,
	og_external_user = 0,
	og_can_edit_sql = 1,
	og_can_delete_bug = 1,
	og_can_edit_and_delete_posts = 1,
	og_can_merge_bugs = 1,
	og_can_mass_edit_bugs = 1,
	og_can_use_reports = 1,
	og_can_edit_reports = 1,
	og_can_be_assigned_to = 1,
	og_can_view_tasks = 1,
	og_can_edit_tasks = 1,
	og_can_search = 1,
	og_can_only_see_own_reported = 0,
	og_can_assign_to_internal_users = 1,
	og_other_orgs_permission_level = 2,
	og_project_field_permission_level = 2,
	og_org_field_permission_level = 2,
	og_category_field_permission_level = 2,
	og_tags_field_permission_level = 2,
	og_priority_field_permission_level = 2,
	og_status_field_permission_level = 2,
	og_assigned_to_field_permission_level = 2,
	og_udf_field_permission_level = 2
	,[og_test_field_permission_level]=2,[og_drop1_field_permission_level]=2
	where og_id = 1
2018-08-16 09:54:00 http://localhost:49412/edit_org.aspx?id=1 sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '2f565d9f-4b8b-40c3-92b2-5aac9806d744';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '2f565d9f-4b8b-40c3-92b2-5aac9806d744'
and us_active = 1
2018-08-16 09:54:00 http://localhost:49412/edit_org.aspx?id=1 elapsed milliseconds:0000
2018-08-16 09:54:00 http://localhost:49412/edit_org.aspx?id=1 sql=
select og_id [id],
		'<a href=edit_org.aspx?id=' + convert(varchar,og_id) + '>edit</a>' [$no_sort_edit],
		'<a href=delete_org.aspx?id=' + convert(varchar,og_id) + '>delete</a>' [$no_sort_delete],
		og_name[desc],
		case when og_active = 1 then 'Y' else 'N' end [active],
		case when og_can_search = 1 then 'Y' else 'N' end [can<br>search],
		case when og_non_admins_can_use = 1 then 'Y' else 'N' end [non-admin<br>can use],
		case when og_can_only_see_own_reported = 1 then 'Y' else 'N' end [can see<br>only own bugs],
		case
			when og_other_orgs_permission_level = 0 then 'None'
			when og_other_orgs_permission_level = 1 then 'Read Only'
			else 'Add/Edit' end [other orgs<br>permission<br>level],
		case when og_external_user = 1 then 'Y' else 'N' end [external],
		case when og_can_be_assigned_to = 1 then 'Y' else 'N' end [can<br>be assigned to],
		case
			when og_status_field_permission_level = 0 then 'None'
			when og_status_field_permission_level = 1 then 'Read Only'
			else 'Add/Edit' end [status<br>permission<br>level],
		case
			when og_assigned_to_field_permission_level = 0 then 'None'
			when og_assigned_to_field_permission_level = 1 then 'Read Only'
			else 'Add/Edit' end [assigned to<br>permission<br>level],
		case
			when og_priority_field_permission_level = 0 then 'None'
			when og_priority_field_permission_level = 1 then 'Read Only'
			else 'Add/Edit' end [priority<br>permission<br>level],
		isnull(og_domain,'')[domain]
		from orgs order by og_name
2018-08-16 09:54:00 http://localhost:49412/edit_org.aspx?id=1 elapsed milliseconds:0000
2018-08-16 09:54:02 http://localhost:49412/bugs.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '2f565d9f-4b8b-40c3-92b2-5aac9806d744';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '2f565d9f-4b8b-40c3-92b2-5aac9806d744'
and us_active = 1
2018-08-16 09:54:02 http://localhost:49412/bugs.aspx elapsed milliseconds:0000
2018-08-16 09:54:02 http://localhost:49412/bugs.aspx sql=
/* query dropdown */
select qu_id, qu_desc
from queries
where (isnull(qu_user,0) = 0 and isnull(qu_org,0) = 0)
or isnull(qu_user,0) = 1
or isnull(qu_org,0) = 1
order by qu_desc
2018-08-16 09:54:02 http://localhost:49412/bugs.aspx elapsed milliseconds:0000
2018-08-16 09:54:02 http://localhost:49412/bugs.aspx sql=
select qu_sql from queries where qu_id = 1
2018-08-16 09:54:02 http://localhost:49412/bugs.aspx sql=
select isnull(pr_background_color,'#ffffff'), bg_id [id], isnull(bu_flag,0) [$FLAG], 
 bg_short_desc [desc], isnull(pj_name,'') [project], isnull(og_name,'') [organization], isnull(ct_name,'') [category], rpt.us_username [reported by],
 bg_reported_date [reported on], isnull(pr_name,'') [priority], isnull(asg.us_username,'') [assigned to],
 isnull(st_name,'') [status], isnull(lu.us_username,'') [last updated by], bg_last_updated_date [last updated on]
 from bugs 
 left outer join bug_user on bu_bug = bg_id and bu_user = 1 
 left outer join users rpt on rpt.us_id = bg_reported_user
 left outer join users asg on asg.us_id = bg_assigned_to_user
 left outer join users lu on lu.us_id = bg_last_updated_user
 left outer join projects on pj_id = bg_project
 left outer join orgs on og_id = bg_org
 left outer join categories on ct_id = bg_category
 left outer join priorities on pr_id = bg_priority
 left outer join statuses on st_id = bg_status
  /* altered - just order by  */ WHERE  (bugs.bg_project not in (
					select pu_project
					from project_user_xref
					where pu_user = 1
					and pu_permission_level = 0)) order by bg_id desc
2018-08-16 09:54:02 http://localhost:49412/bugs.aspx elapsed milliseconds:0000
2018-08-16 09:54:06 http://localhost:49412/ajax.aspx?bugid=3 sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '2f565d9f-4b8b-40c3-92b2-5aac9806d744';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '2f565d9f-4b8b-40c3-92b2-5aac9806d744'
and us_active = 1
2018-08-16 09:54:06 http://localhost:49412/ajax.aspx?bugid=3 elapsed milliseconds:0000
2018-08-16 09:54:07 http://localhost:49412/ajax.aspx?bugid=3 sql=

declare @bg_org int

select isnull(pu_permission_level,2),
bg_org
from bugs
left outer join project_user_xref
on pu_project = bg_project
and pu_user = 1
where bg_id = 3
2018-08-16 09:54:07 http://localhost:49412/ajax.aspx?bugid=3 elapsed milliseconds:0002
2018-08-16 09:54:07 http://localhost:49412/ajax.aspx?bugid=3 sql=

/* get_bug_posts */
select
a.bp_bug,
a.bp_comment,
isnull(us_username,'') [us_username],
case rtrim(us_firstname)
	when null then isnull(us_lastname, '')
	when '' then isnull(us_lastname, '')
	else isnull(us_lastname + ', ' + us_firstname,'')
	end [us_fullname],
isnull(us_email,'') [us_email],
a.bp_date,
datediff(s,a.bp_date,getdate()) [seconds_ago],
a.bp_id,
a.bp_type,
isnull(a.bp_email_from,'') bp_email_from,
isnull(a.bp_email_to,'') bp_email_to,
isnull(a.bp_email_cc,'') bp_email_cc,
isnull(a.bp_file,'') bp_file,
isnull(a.bp_size,0) bp_size,
isnull(a.bp_content_type,'') bp_content_type,
a.bp_hidden_from_external_users,
isnull(ba.bp_file,'') ba_file,  -- intentionally ba
isnull(ba.bp_id,'') ba_id, -- intentionally ba
isnull(ba.bp_size,'') ba_size,  -- intentionally ba
isnull(ba.bp_content_type,'') ba_content_type -- intentionally ba
from bug_posts a
left outer join users on us_id = a.bp_user
left outer join bug_posts ba on ba.bp_parent = a.bp_id and ba.bp_bug = a.bp_bug
where a.bp_bug = 3
and a.bp_parent is null
 and a.bp_type <> 'update'
 order by a.bp_id desc, ba.bp_parent, ba.bp_id
2018-08-16 09:54:07 http://localhost:49412/ajax.aspx?bugid=3 elapsed milliseconds:0005
2018-08-16 09:54:07 http://localhost:49412/edit_bug.aspx?id=3 sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '2f565d9f-4b8b-40c3-92b2-5aac9806d744';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '2f565d9f-4b8b-40c3-92b2-5aac9806d744'
and us_active = 1
2018-08-16 09:54:07 http://localhost:49412/edit_bug.aspx?id=3 elapsed milliseconds:0000
2018-08-16 09:54:07 http://localhost:49412/edit_bug.aspx?id=3 sql=
 /* get_bug_datarow */
declare @svn_revisions int
declare @git_commits int
declare @hg_revisions int
declare @tasks int
declare @related int;
set @svn_revisions = 0
set @git_commits = 0
set @hg_revisions = 0
set @tasks = 0
set @related = 0

select bg_id [id],
bg_short_desc [short_desc],
isnull(bg_tags,'') [bg_tags],
isnull(ru.us_username,'[deleted user]') [reporter],
isnull(ru.us_email,'') [reporter_email],
case rtrim(ru.us_firstname)
	when null then isnull(ru.us_lastname, '')
	when '' then isnull(ru.us_lastname, '')
	else isnull(ru.us_lastname + ', ' + ru.us_firstname,'')
	end [reporter_fullname],
bg_reported_date [reported_date],
datediff(s,bg_reported_date,getdate()) [seconds_ago],
isnull(lu.us_username,'') [last_updated_user],
case rtrim(lu.us_firstname)
	when null then isnull(lu.us_lastname, '')
	when '' then isnull(lu.us_lastname, '')
	else isnull(lu.us_lastname + ', ' + lu.us_firstname,'')
	end [last_updated_fullname],


bg_last_updated_date [last_updated_date],
isnull(bg_project,0) [project],
isnull(pj_name,'[no project]') [current_project],

isnull(bg_org,0) [organization],
isnull(bugorg.og_name,'') [og_name],

isnull(bg_category,0) [category],
isnull(ct_name,'') [category_name],

isnull(bg_priority,0) [priority],
isnull(pr_name,'') [priority_name],

isnull(bg_status,0) [status],
isnull(st_name,'') [status_name],

isnull(bg_user_defined_attribute,0) [udf],
isnull(udf_name,'') [udf_name],

isnull(bg_assigned_to_user,0) [assigned_to_user],
isnull(asg.us_username,'[not assigned]') [assigned_to_username],
case rtrim(asg.us_firstname)
when null then isnull(asg.us_lastname, '[not assigned]')
when '' then isnull(asg.us_lastname, '[not assigned]')
else isnull(asg.us_lastname + ', ' + asg.us_firstname,'[not assigned]')
end [assigned_to_fullname],

isnull(bs_user,0) [subscribed],

case
when
	1 <> bg_org
	and userorg.og_other_orgs_permission_level < 2
	and userorg.og_other_orgs_permission_level < isnull(pu_permission_level,2)
		then userorg.og_other_orgs_permission_level
else
	isnull(pu_permission_level,2)
end [pu_permission_level],

isnull(bg_project_custom_dropdown_value1,'') [bg_project_custom_dropdown_value1],
isnull(bg_project_custom_dropdown_value2,'') [bg_project_custom_dropdown_value2],
isnull(bg_project_custom_dropdown_value3,'') [bg_project_custom_dropdown_value3],
@related [relationship_cnt],
@svn_revisions [svn_revision_cnt],
@git_commits [git_commit_cnt],
@hg_revisions [hg_commit_cnt],
@tasks [task_cnt],
getdate() [snapshot_timestamp]
,[test],[drop1]
from bugs
inner join users this_user on us_id = 1
inner join orgs userorg on this_user.us_org = userorg.og_id
left outer join user_defined_attribute on bg_user_defined_attribute = udf_id
left outer join projects on bg_project = pj_id
left outer join orgs bugorg on bg_org = bugorg.og_id
left outer join categories on bg_category = ct_id
left outer join priorities on bg_priority = pr_id
left outer join statuses on bg_status = st_id
left outer join users asg on bg_assigned_to_user = asg.us_id
left outer join users ru on bg_reported_user = ru.us_id
left outer join users lu on bg_last_updated_user = lu.us_id
left outer join bug_subscriptions on bs_bug = bg_id and bs_user = 1
left outer join project_user_xref on pj_id = pu_project
and pu_user = 1
where bg_id = 3
2018-08-16 09:54:07 http://localhost:49412/edit_bug.aspx?id=3 elapsed milliseconds:0000
2018-08-16 09:54:07 http://localhost:49412/edit_bug.aspx?id=3 sql=
/* drop downs */ select pj_id, pj_name
		from projects
		left outer join project_user_xref on pj_id = pu_project
		and pu_user = 1
		where pj_active = 1
		and isnull(pu_permission_level,2) not in (0, 1)
		order by pj_name;
select og_id, og_name from orgs where og_active = 1 order by og_name;
select ct_id, ct_name from categories order by ct_sort_seq, ct_name;
select pr_id, pr_name from priorities order by pr_sort_seq, pr_name;
select st_id, st_name from statuses order by st_sort_seq, st_name;
select udf_id, udf_name from user_defined_attribute order by udf_sort_seq, udf_name;
2018-08-16 09:54:07 http://localhost:49412/edit_bug.aspx?id=3 elapsed milliseconds:0005
2018-08-16 09:54:07 http://localhost:49412/edit_bug.aspx?id=3 sql=

/* users this project */ select us_id, case when 0 = 1 then us_lastname + ', ' + us_firstname else us_username end us_username
from users
inner join orgs on us_org = og_id
where us_active = 1
and og_can_be_assigned_to = 1
and (2 <> 0 or 1 = og_id or (og_external_user = 0 and 1 = 1))
and us_id not in
	(select pu_user from project_user_xref
		where pu_project = 0
		and pu_permission_level = 0)
order by us_username; 
2018-08-16 09:54:07 http://localhost:49412/edit_bug.aspx?id=3 elapsed milliseconds:0005
2018-08-16 09:54:12 http://localhost:49412/edit_bug.aspx?id=3 sql=

/* get_bug_posts */
select
a.bp_bug,
a.bp_comment,
isnull(us_username,'') [us_username],
case rtrim(us_firstname)
	when null then isnull(us_lastname, '')
	when '' then isnull(us_lastname, '')
	else isnull(us_lastname + ', ' + us_firstname,'')
	end [us_fullname],
isnull(us_email,'') [us_email],
a.bp_date,
datediff(s,a.bp_date,getdate()) [seconds_ago],
a.bp_id,
a.bp_type,
isnull(a.bp_email_from,'') bp_email_from,
isnull(a.bp_email_to,'') bp_email_to,
isnull(a.bp_email_cc,'') bp_email_cc,
isnull(a.bp_file,'') bp_file,
isnull(a.bp_size,0) bp_size,
isnull(a.bp_content_type,'') bp_content_type,
a.bp_hidden_from_external_users,
isnull(ba.bp_file,'') ba_file,  -- intentionally ba
isnull(ba.bp_id,'') ba_id, -- intentionally ba
isnull(ba.bp_size,'') ba_size,  -- intentionally ba
isnull(ba.bp_content_type,'') ba_content_type -- intentionally ba
from bug_posts a
left outer join users on us_id = a.bp_user
left outer join bug_posts ba on ba.bp_parent = a.bp_id and ba.bp_bug = a.bp_bug
where a.bp_bug = 3
and a.bp_parent is null
 order by a.bp_id desc, ba.bp_parent, ba.bp_id
2018-08-16 09:54:12 http://localhost:49412/edit_bug.aspx?id=3 elapsed milliseconds:0000
2018-08-16 09:55:54 http://localhost:49412/edit_bug.aspx?id=3 sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '2f565d9f-4b8b-40c3-92b2-5aac9806d744';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '2f565d9f-4b8b-40c3-92b2-5aac9806d744'
and us_active = 1
2018-08-16 09:55:54 http://localhost:49412/edit_bug.aspx?id=3 elapsed milliseconds:0000
2018-08-16 09:55:54 http://localhost:49412/edit_bug.aspx?id=3 sql=
 /* get_bug_datarow */
declare @svn_revisions int
declare @git_commits int
declare @hg_revisions int
declare @tasks int
declare @related int;
set @svn_revisions = 0
set @git_commits = 0
set @hg_revisions = 0
set @tasks = 0
set @related = 0

select bg_id [id],
bg_short_desc [short_desc],
isnull(bg_tags,'') [bg_tags],
isnull(ru.us_username,'[deleted user]') [reporter],
isnull(ru.us_email,'') [reporter_email],
case rtrim(ru.us_firstname)
	when null then isnull(ru.us_lastname, '')
	when '' then isnull(ru.us_lastname, '')
	else isnull(ru.us_lastname + ', ' + ru.us_firstname,'')
	end [reporter_fullname],
bg_reported_date [reported_date],
datediff(s,bg_reported_date,getdate()) [seconds_ago],
isnull(lu.us_username,'') [last_updated_user],
case rtrim(lu.us_firstname)
	when null then isnull(lu.us_lastname, '')
	when '' then isnull(lu.us_lastname, '')
	else isnull(lu.us_lastname + ', ' + lu.us_firstname,'')
	end [last_updated_fullname],


bg_last_updated_date [last_updated_date],
isnull(bg_project,0) [project],
isnull(pj_name,'[no project]') [current_project],

isnull(bg_org,0) [organization],
isnull(bugorg.og_name,'') [og_name],

isnull(bg_category,0) [category],
isnull(ct_name,'') [category_name],

isnull(bg_priority,0) [priority],
isnull(pr_name,'') [priority_name],

isnull(bg_status,0) [status],
isnull(st_name,'') [status_name],

isnull(bg_user_defined_attribute,0) [udf],
isnull(udf_name,'') [udf_name],

isnull(bg_assigned_to_user,0) [assigned_to_user],
isnull(asg.us_username,'[not assigned]') [assigned_to_username],
case rtrim(asg.us_firstname)
when null then isnull(asg.us_lastname, '[not assigned]')
when '' then isnull(asg.us_lastname, '[not assigned]')
else isnull(asg.us_lastname + ', ' + asg.us_firstname,'[not assigned]')
end [assigned_to_fullname],

isnull(bs_user,0) [subscribed],

case
when
	1 <> bg_org
	and userorg.og_other_orgs_permission_level < 2
	and userorg.og_other_orgs_permission_level < isnull(pu_permission_level,2)
		then userorg.og_other_orgs_permission_level
else
	isnull(pu_permission_level,2)
end [pu_permission_level],

isnull(bg_project_custom_dropdown_value1,'') [bg_project_custom_dropdown_value1],
isnull(bg_project_custom_dropdown_value2,'') [bg_project_custom_dropdown_value2],
isnull(bg_project_custom_dropdown_value3,'') [bg_project_custom_dropdown_value3],
@related [relationship_cnt],
@svn_revisions [svn_revision_cnt],
@git_commits [git_commit_cnt],
@hg_revisions [hg_commit_cnt],
@tasks [task_cnt],
getdate() [snapshot_timestamp]
,[test],[drop1]
from bugs
inner join users this_user on us_id = 1
inner join orgs userorg on this_user.us_org = userorg.og_id
left outer join user_defined_attribute on bg_user_defined_attribute = udf_id
left outer join projects on bg_project = pj_id
left outer join orgs bugorg on bg_org = bugorg.og_id
left outer join categories on bg_category = ct_id
left outer join priorities on bg_priority = pr_id
left outer join statuses on bg_status = st_id
left outer join users asg on bg_assigned_to_user = asg.us_id
left outer join users ru on bg_reported_user = ru.us_id
left outer join users lu on bg_last_updated_user = lu.us_id
left outer join bug_subscriptions on bs_bug = bg_id and bs_user = 1
left outer join project_user_xref on pj_id = pu_project
and pu_user = 1
where bg_id = 3
2018-08-16 09:55:54 http://localhost:49412/edit_bug.aspx?id=3 elapsed milliseconds:0000
2018-08-16 09:55:54 http://localhost:49412/edit_bug.aspx?id=3 sql=
/* drop downs */ select pj_id, pj_name
		from projects
		left outer join project_user_xref on pj_id = pu_project
		and pu_user = 1
		where pj_active = 1
		and isnull(pu_permission_level,2) not in (0, 1)
		order by pj_name;
select og_id, og_name from orgs where og_active = 1 order by og_name;
select ct_id, ct_name from categories order by ct_sort_seq, ct_name;
select pr_id, pr_name from priorities order by pr_sort_seq, pr_name;
select st_id, st_name from statuses order by st_sort_seq, st_name;
select udf_id, udf_name from user_defined_attribute order by udf_sort_seq, udf_name;
2018-08-16 09:55:54 http://localhost:49412/edit_bug.aspx?id=3 elapsed milliseconds:0000
2018-08-16 09:55:55 http://localhost:49412/edit_bug.aspx?id=3 sql=

/* users this project */ select us_id, case when 0 = 1 then us_lastname + ', ' + us_firstname else us_username end us_username
from users
inner join orgs on us_org = og_id
where us_active = 1
and og_can_be_assigned_to = 1
and (2 <> 0 or 1 = og_id or (og_external_user = 0 and 1 = 1))
and us_id not in
	(select pu_user from project_user_xref
		where pu_project = 0
		and pu_permission_level = 0)
order by us_username; 
2018-08-16 09:55:55 http://localhost:49412/edit_bug.aspx?id=3 elapsed milliseconds:0000
2018-08-16 09:56:13 http://localhost:49412/edit_bug.aspx?id=3 sql=

/* get_bug_posts */
select
a.bp_bug,
a.bp_comment,
isnull(us_username,'') [us_username],
case rtrim(us_firstname)
	when null then isnull(us_lastname, '')
	when '' then isnull(us_lastname, '')
	else isnull(us_lastname + ', ' + us_firstname,'')
	end [us_fullname],
isnull(us_email,'') [us_email],
a.bp_date,
datediff(s,a.bp_date,getdate()) [seconds_ago],
a.bp_id,
a.bp_type,
isnull(a.bp_email_from,'') bp_email_from,
isnull(a.bp_email_to,'') bp_email_to,
isnull(a.bp_email_cc,'') bp_email_cc,
isnull(a.bp_file,'') bp_file,
isnull(a.bp_size,0) bp_size,
isnull(a.bp_content_type,'') bp_content_type,
a.bp_hidden_from_external_users,
isnull(ba.bp_file,'') ba_file,  -- intentionally ba
isnull(ba.bp_id,'') ba_id, -- intentionally ba
isnull(ba.bp_size,'') ba_size,  -- intentionally ba
isnull(ba.bp_content_type,'') ba_content_type -- intentionally ba
from bug_posts a
left outer join users on us_id = a.bp_user
left outer join bug_posts ba on ba.bp_parent = a.bp_id and ba.bp_bug = a.bp_bug
where a.bp_bug = 3
and a.bp_parent is null
 order by a.bp_id desc, ba.bp_parent, ba.bp_id
2018-08-16 09:56:13 http://localhost:49412/edit_bug.aspx?id=3 elapsed milliseconds:0000
2018-08-16 09:56:16 http://localhost:49412/admin.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '2f565d9f-4b8b-40c3-92b2-5aac9806d744';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '2f565d9f-4b8b-40c3-92b2-5aac9806d744'
and us_active = 1
2018-08-16 09:56:16 http://localhost:49412/admin.aspx elapsed milliseconds:0000
2018-08-16 09:56:18 http://localhost:49412/users.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '2f565d9f-4b8b-40c3-92b2-5aac9806d744';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '2f565d9f-4b8b-40c3-92b2-5aac9806d744'
and us_active = 1
2018-08-16 09:56:18 http://localhost:49412/users.aspx elapsed milliseconds:0000
2018-08-16 09:56:18 http://localhost:49412/users.aspx sql=

			select distinct pu_user
			into #t
			from
			project_user_xref
			where pu_admin = 1;

			select u.us_id [id],
			'<a href=edit_user.aspx?id=' + convert(varchar,u.us_id) + '>edit</a>' [$no_sort_edit],
			'<a href=edit_user.aspx?copy=y&id=' + convert(varchar,u.us_id) + '>copy</a>' [$no_sort_add<br>like<br>this],
			'<a href=delete_user.aspx?id=' + convert(varchar,u.us_id) + '>delete</a>' [$no_sort_delete],

			u.us_username [username],
			isnull(u.us_firstname,'') + ' ' + isnull(u.us_lastname,'') [name],
			'<a sort=''' + og_name + ''' href=edit_org.aspx?id=' + convert(varchar,og_id) + '>' + og_name + '</a>' [org],
            isnull(u.us_email,'') [email],
			case when u.us_admin = 1 then 'Y' else 'N' end [admin],
			case when pu_user is null then 'N' else 'Y' end [project<br>admin],
			case when u.us_active = 1 then 'Y' else 'N' end [active],
			case when og_external_user = 1 then 'Y' else 'N' end [external],
			isnull(pj_name,'') [forced<br>project],
			isnull(qu_desc,'') [default query],
			case when u.us_enable_notifications = 1 then 'Y' else 'N' end [notif-<br>ications],
			u.us_most_recent_login_datetime [most recent login],
			u2.us_username [created<br>by]

			from users u
			inner join orgs on u.us_org = og_id
			left outer join queries on u.us_default_query = qu_id
			left outer join projects on u.us_forced_project = pj_id
			left outer join users u2 on u.us_created_user = u2.us_id
			left outer join #t on u.us_id = pu_user
			where u.us_active in (1 ,0)
			
			order by u.us_username;

			drop table #t
2018-08-16 09:56:18 http://localhost:49412/users.aspx elapsed milliseconds:0009
2018-08-16 09:56:23 http://localhost:49412/edit_user.aspx?id=1 sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '2f565d9f-4b8b-40c3-92b2-5aac9806d744';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '2f565d9f-4b8b-40c3-92b2-5aac9806d744'
and us_active = 1
2018-08-16 09:56:23 http://localhost:49412/edit_user.aspx?id=1 elapsed milliseconds:0000
2018-08-16 09:56:23 http://localhost:49412/edit_user.aspx?id=1 sql=

				select pj_id, pj_name,
				isnull(pu_permission_level,2) [pu_permission_level],
				isnull(pu_auto_subscribe,0) [pu_auto_subscribe],
				isnull(pu_admin,0) [pu_admin]
				from projects
				left outer join project_user_xref on pj_id = pu_project
				and pu_user = 1
				order by pj_name;/* populate query dropdown */
		    declare @org int
		    set @org = null
		    select @org = us_org from users where us_id = 1

			select qu_id, qu_desc
			from queries
			where (isnull(qu_user,0) = 0 and isnull(qu_org,0) = 0)
			or isnull(qu_user,0) = 1
			or isnull(qu_org,0) = isnull(@org,-1)
			order by qu_desc;/* populate org dropdown 1 */
				select og_id, og_name
				from orgs
				order by og_name;
			select
				us_username,
				isnull(us_firstname,'') [us_firstname],
				isnull(us_lastname,'') [us_lastname],
				isnull(us_bugs_per_page,10) [us_bugs_per_page],
				us_use_fckeditor,
				us_enable_bug_list_popups,
				isnull(us_email,'') [us_email],
				us_active,
				us_admin,
				us_enable_notifications,
				us_send_notifications_to_self,
                us_reported_notifications,
                us_assigned_notifications,
                us_subscribed_notifications,
				us_auto_subscribe,
				us_auto_subscribe_own_bugs,
				us_auto_subscribe_reported_bugs,
				us_default_query,
				us_org,
				isnull(us_signature,'') [us_signature],
				isnull(us_forced_project,0) [us_forced_project],
				us_created_user
				from users
				where us_id = 1
2018-08-16 09:56:23 http://localhost:49412/edit_user.aspx?id=1 elapsed milliseconds:0000
2018-08-16 09:57:06  caught exception in util.set_context:Request is not available in this context
2018-08-16 09:57:06  threadproc_votes
2018-08-16 09:57:06  started creating Lucene index using folder F:\Synced\Visual Studio 2017\Projects\temp\btnetnew\btnetnew\App_Data\lucene_index
2018-08-16 09:57:06  sql=

if exists (select * from dbo.sysobjects where id = object_id(N'[votes_view]'))
drop view [votes_view]
2018-08-16 09:57:06  sql=

/* get searchable cols */					
select sc.name
from syscolumns sc
inner join systypes st on st.xusertype = sc.xusertype
inner join sysobjects so on sc.id = so.id
where so.name = 'bugs'
and st.[name] <> 'sysname'
and sc.name not in ('rowguid',
'bg_id',
'bg_short_desc',
'bg_reported_user',
'bg_reported_date',
'bg_project',
'bg_org',
'bg_category',
'bg_priority',
'bg_status',
'bg_assigned_to_user',
'bg_last_updated_user',
'bg_last_updated_date',
'bg_user_defined_attribute',
'bg_project_custom_dropdown_value1',
'bg_project_custom_dropdown_value2',
'bg_project_custom_dropdown_value3',
'bg_tags')
and st.[name] in ('nvarchar','varchar')
and sc.length > 30
2018-08-16 09:57:06  sql=

create view votes_view as
select bu_bug as vote_bug, sum(bu_vote) as vote_total
from bug_user
group by bu_bug
having sum(bu_vote) > 0
2018-08-16 09:57:06  sql=

select bu_bug, count(1)
from bug_user 
where bu_vote = 1
group by bu_bug
2018-08-16 09:57:06  elapsed milliseconds:0032
2018-08-16 09:57:06  elapsed milliseconds:0110
2018-08-16 09:57:06  sql=

select bg_id, 	

isnull(bg_tags,'') bg_tags,
bg_short_desc
from bugs
2018-08-16 09:57:06  elapsed milliseconds:0034
2018-08-16 09:57:07  sql=

select bp_bug, bp_id, 
isnull(bp_comment_search,bp_comment) [text] 
from bug_posts 
where bp_type <> 'update'
and bp_hidden_from_external_users = 0
2018-08-16 09:57:07  elapsed milliseconds:0000
2018-08-16 09:57:07  done creating Lucene index
2018-08-16 09:57:09 http://localhost:49412/default.aspx sql=
select count(1) from users
2018-08-16 09:57:10 http://localhost:49412/default.aspx sql=
select count(1) from users
2018-08-16 09:57:10 http://localhost:49412/default.aspx sql=

select us_username, us_id, us_password, isnull(us_salt,0) us_salt, us_active
from users
where us_username = N'admin'
2018-08-16 09:57:10 http://localhost:49412/default.aspx elapsed milliseconds:0000
2018-08-16 09:57:10 http://localhost:49412/default.aspx sql=
update users set us_most_recent_login_datetime = getdate() where us_id = 1
2018-08-16 09:57:10 http://localhost:49412/default.aspx sql=
select us_id from users where us_username = N'admin'
2018-08-16 09:57:10 http://localhost:49412/default.aspx elapsed milliseconds:0000
2018-08-16 09:57:10 http://localhost:49412/default.aspx guid=16217e1c-d43b-4661-981c-712404b5e4b8
2018-08-16 09:57:10 http://localhost:49412/default.aspx sql=
insert into sessions (se_id, se_user) values('16217e1c-d43b-4661-981c-712404b5e4b8', 1)
2018-08-16 09:57:10 http://localhost:49412/default.aspx AppPath:
2018-08-16 09:57:14 http://localhost:49412/bugs.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '16217e1c-d43b-4661-981c-712404b5e4b8';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '16217e1c-d43b-4661-981c-712404b5e4b8'
and us_active = 1
2018-08-16 09:57:14 http://localhost:49412/bugs.aspx elapsed milliseconds:0006
2018-08-16 09:57:14 http://localhost:49412/bugs.aspx sql=

/* custom columns */ select sc.name, st.[name] [datatype], 
case when st.[name] = 'nvarchar' or st.[name] = 'nchar' then sc.length/2 else sc.length end as [length], 
sc.xprec, sc.xscale, sc.isnullable,
mm.text [default value], 
dflts.name [default name], 
isnull(ccm_dropdown_type,'') [dropdown type],
isnull(ccm_dropdown_vals,'') [vals],
isnull(ccm_sort_seq, sc.colorder) [column order],
sc.colorder
from syscolumns sc
inner join systypes st on st.xusertype = sc.xusertype
inner join sysobjects so on sc.id = so.id
left outer join syscomments mm on sc.cdefault = mm.id
left outer join custom_col_metadata on ccm_colorder = sc.colorder
left outer join sysobjects dflts on dflts.id = mm.id
where so.name = 'bugs'
and st.[name] <> 'sysname'
and sc.name not in ('rowguid',
'bg_id',
'bg_short_desc',
'bg_reported_user',
'bg_reported_date',
'bg_project',
'bg_org',
'bg_category',
'bg_priority',
'bg_status',
'bg_assigned_to_user',
'bg_last_updated_user',
'bg_last_updated_date',
'bg_user_defined_attribute',
'bg_project_custom_dropdown_value1',
'bg_project_custom_dropdown_value2',
'bg_project_custom_dropdown_value3',
'bg_tags')
order by sc.id, isnull(ccm_sort_seq,sc.colorder)
2018-08-16 09:57:14 http://localhost:49412/bugs.aspx elapsed milliseconds:0004
2018-08-16 09:57:14 http://localhost:49412/bugs.aspx sql=
/* query dropdown */
select qu_id, qu_desc
from queries
where (isnull(qu_user,0) = 0 and isnull(qu_org,0) = 0)
or isnull(qu_user,0) = 1
or isnull(qu_org,0) = 1
order by qu_desc
2018-08-16 09:57:14 http://localhost:49412/bugs.aspx elapsed milliseconds:0000
2018-08-16 09:57:14 http://localhost:49412/bugs.aspx sql=
select qu_id, qu_sql from queries where qu_id in
			(select us_default_query from users where us_id = 1)
2018-08-16 09:57:14 http://localhost:49412/bugs.aspx elapsed milliseconds:0000
2018-08-16 09:57:15 http://localhost:49412/bugs.aspx sql=
select isnull(pr_background_color,'#ffffff'), bg_id [id], isnull(bu_flag,0) [$FLAG], 
 bg_short_desc [desc], isnull(pj_name,'') [project], isnull(og_name,'') [organization], isnull(ct_name,'') [category], rpt.us_username [reported by],
 bg_reported_date [reported on], isnull(pr_name,'') [priority], isnull(asg.us_username,'') [assigned to],
 isnull(st_name,'') [status], isnull(lu.us_username,'') [last updated by], bg_last_updated_date [last updated on]
 from bugs 
 left outer join bug_user on bu_bug = bg_id and bu_user = 1 
 left outer join users rpt on rpt.us_id = bg_reported_user
 left outer join users asg on asg.us_id = bg_assigned_to_user
 left outer join users lu on lu.us_id = bg_last_updated_user
 left outer join projects on pj_id = bg_project
 left outer join orgs on og_id = bg_org
 left outer join categories on ct_id = bg_category
 left outer join priorities on pr_id = bg_priority
 left outer join statuses on st_id = bg_status
  /* altered - just order by  */ WHERE  (bugs.bg_project not in (
					select pu_project
					from project_user_xref
					where pu_user = 1
					and pu_permission_level = 0)) order by bg_id desc
2018-08-16 09:57:15 http://localhost:49412/bugs.aspx elapsed milliseconds:0002
2018-08-16 09:57:18 http://localhost:49412/ajax.aspx?bugid=3 sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '16217e1c-d43b-4661-981c-712404b5e4b8';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '16217e1c-d43b-4661-981c-712404b5e4b8'
and us_active = 1
2018-08-16 09:57:18 http://localhost:49412/ajax.aspx?bugid=3 elapsed milliseconds:0000
2018-08-16 09:57:18 http://localhost:49412/ajax.aspx?bugid=3 sql=

declare @bg_org int

select isnull(pu_permission_level,2),
bg_org
from bugs
left outer join project_user_xref
on pu_project = bg_project
and pu_user = 1
where bg_id = 3
2018-08-16 09:57:18 http://localhost:49412/ajax.aspx?bugid=3 elapsed milliseconds:0000
2018-08-16 09:57:18 http://localhost:49412/ajax.aspx?bugid=3 sql=

/* get_bug_posts */
select
a.bp_bug,
a.bp_comment,
isnull(us_username,'') [us_username],
case rtrim(us_firstname)
	when null then isnull(us_lastname, '')
	when '' then isnull(us_lastname, '')
	else isnull(us_lastname + ', ' + us_firstname,'')
	end [us_fullname],
isnull(us_email,'') [us_email],
a.bp_date,
datediff(s,a.bp_date,getdate()) [seconds_ago],
a.bp_id,
a.bp_type,
isnull(a.bp_email_from,'') bp_email_from,
isnull(a.bp_email_to,'') bp_email_to,
isnull(a.bp_email_cc,'') bp_email_cc,
isnull(a.bp_file,'') bp_file,
isnull(a.bp_size,0) bp_size,
isnull(a.bp_content_type,'') bp_content_type,
a.bp_hidden_from_external_users,
isnull(ba.bp_file,'') ba_file,  -- intentionally ba
isnull(ba.bp_id,'') ba_id, -- intentionally ba
isnull(ba.bp_size,'') ba_size,  -- intentionally ba
isnull(ba.bp_content_type,'') ba_content_type -- intentionally ba
from bug_posts a
left outer join users on us_id = a.bp_user
left outer join bug_posts ba on ba.bp_parent = a.bp_id and ba.bp_bug = a.bp_bug
where a.bp_bug = 3
and a.bp_parent is null
 and a.bp_type <> 'update'
 order by a.bp_id desc, ba.bp_parent, ba.bp_id
2018-08-16 09:57:18 http://localhost:49412/ajax.aspx?bugid=3 elapsed milliseconds:0000
2018-08-16 09:57:19 http://localhost:49412/edit_bug.aspx?id=3 sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '16217e1c-d43b-4661-981c-712404b5e4b8';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '16217e1c-d43b-4661-981c-712404b5e4b8'
and us_active = 1
2018-08-16 09:57:19 http://localhost:49412/edit_bug.aspx?id=3 elapsed milliseconds:0000
2018-08-16 09:57:19 http://localhost:49412/edit_bug.aspx?id=3 sql=
 /* get_bug_datarow */
declare @svn_revisions int
declare @git_commits int
declare @hg_revisions int
declare @tasks int
declare @related int;
set @svn_revisions = 0
set @git_commits = 0
set @hg_revisions = 0
set @tasks = 0
set @related = 0
select @tasks = count(1)
from bug_tasks
where tsk_bug = 3;

select bg_id [id],
bg_short_desc [short_desc],
isnull(bg_tags,'') [bg_tags],
isnull(ru.us_username,'[deleted user]') [reporter],
isnull(ru.us_email,'') [reporter_email],
case rtrim(ru.us_firstname)
	when null then isnull(ru.us_lastname, '')
	when '' then isnull(ru.us_lastname, '')
	else isnull(ru.us_lastname + ', ' + ru.us_firstname,'')
	end [reporter_fullname],
bg_reported_date [reported_date],
datediff(s,bg_reported_date,getdate()) [seconds_ago],
isnull(lu.us_username,'') [last_updated_user],
case rtrim(lu.us_firstname)
	when null then isnull(lu.us_lastname, '')
	when '' then isnull(lu.us_lastname, '')
	else isnull(lu.us_lastname + ', ' + lu.us_firstname,'')
	end [last_updated_fullname],


bg_last_updated_date [last_updated_date],
isnull(bg_project,0) [project],
isnull(pj_name,'[no project]') [current_project],

isnull(bg_org,0) [organization],
isnull(bugorg.og_name,'') [og_name],

isnull(bg_category,0) [category],
isnull(ct_name,'') [category_name],

isnull(bg_priority,0) [priority],
isnull(pr_name,'') [priority_name],

isnull(bg_status,0) [status],
isnull(st_name,'') [status_name],

isnull(bg_user_defined_attribute,0) [udf],
isnull(udf_name,'') [udf_name],

isnull(bg_assigned_to_user,0) [assigned_to_user],
isnull(asg.us_username,'[not assigned]') [assigned_to_username],
case rtrim(asg.us_firstname)
when null then isnull(asg.us_lastname, '[not assigned]')
when '' then isnull(asg.us_lastname, '[not assigned]')
else isnull(asg.us_lastname + ', ' + asg.us_firstname,'[not assigned]')
end [assigned_to_fullname],

isnull(bs_user,0) [subscribed],

case
when
	1 <> bg_org
	and userorg.og_other_orgs_permission_level < 2
	and userorg.og_other_orgs_permission_level < isnull(pu_permission_level,2)
		then userorg.og_other_orgs_permission_level
else
	isnull(pu_permission_level,2)
end [pu_permission_level],

isnull(bg_project_custom_dropdown_value1,'') [bg_project_custom_dropdown_value1],
isnull(bg_project_custom_dropdown_value2,'') [bg_project_custom_dropdown_value2],
isnull(bg_project_custom_dropdown_value3,'') [bg_project_custom_dropdown_value3],
@related [relationship_cnt],
@svn_revisions [svn_revision_cnt],
@git_commits [git_commit_cnt],
@hg_revisions [hg_commit_cnt],
@tasks [task_cnt],
getdate() [snapshot_timestamp]
,[test],[drop1]
from bugs
inner join users this_user on us_id = 1
inner join orgs userorg on this_user.us_org = userorg.og_id
left outer join user_defined_attribute on bg_user_defined_attribute = udf_id
left outer join projects on bg_project = pj_id
left outer join orgs bugorg on bg_org = bugorg.og_id
left outer join categories on bg_category = ct_id
left outer join priorities on bg_priority = pr_id
left outer join statuses on bg_status = st_id
left outer join users asg on bg_assigned_to_user = asg.us_id
left outer join users ru on bg_reported_user = ru.us_id
left outer join users lu on bg_last_updated_user = lu.us_id
left outer join bug_subscriptions on bs_bug = bg_id and bs_user = 1
left outer join project_user_xref on pj_id = pu_project
and pu_user = 1
where bg_id = 3
2018-08-16 09:57:19 http://localhost:49412/edit_bug.aspx?id=3 elapsed milliseconds:0016
2018-08-16 09:57:19 http://localhost:49412/edit_bug.aspx?id=3 sql=
/* drop downs */ select pj_id, pj_name
		from projects
		left outer join project_user_xref on pj_id = pu_project
		and pu_user = 1
		where pj_active = 1
		and isnull(pu_permission_level,2) not in (0, 1)
		order by pj_name;
select og_id, og_name from orgs where og_active = 1 order by og_name;
select ct_id, ct_name from categories order by ct_sort_seq, ct_name;
select pr_id, pr_name from priorities order by pr_sort_seq, pr_name;
select st_id, st_name from statuses order by st_sort_seq, st_name;
select udf_id, udf_name from user_defined_attribute order by udf_sort_seq, udf_name;
2018-08-16 09:57:19 http://localhost:49412/edit_bug.aspx?id=3 elapsed milliseconds:0000
2018-08-16 09:57:19 http://localhost:49412/edit_bug.aspx?id=3 sql=

/* users this project */ select us_id, case when 0 = 1 then us_lastname + ', ' + us_firstname else us_username end us_username
from users
inner join orgs on us_org = og_id
where us_active = 1
and og_can_be_assigned_to = 1
and (2 <> 0 or 1 = og_id or (og_external_user = 0 and 1 = 1))
and us_id not in
	(select pu_user from project_user_xref
		where pu_project = 0
		and pu_permission_level = 0)
order by us_username; 
2018-08-16 09:57:19 http://localhost:49412/edit_bug.aspx?id=3 elapsed milliseconds:0000
2018-08-16 09:57:24 http://localhost:49412/edit_bug.aspx?id=3 sql=

/* get_bug_posts */
select
a.bp_bug,
a.bp_comment,
isnull(us_username,'') [us_username],
case rtrim(us_firstname)
	when null then isnull(us_lastname, '')
	when '' then isnull(us_lastname, '')
	else isnull(us_lastname + ', ' + us_firstname,'')
	end [us_fullname],
isnull(us_email,'') [us_email],
a.bp_date,
datediff(s,a.bp_date,getdate()) [seconds_ago],
a.bp_id,
a.bp_type,
isnull(a.bp_email_from,'') bp_email_from,
isnull(a.bp_email_to,'') bp_email_to,
isnull(a.bp_email_cc,'') bp_email_cc,
isnull(a.bp_file,'') bp_file,
isnull(a.bp_size,0) bp_size,
isnull(a.bp_content_type,'') bp_content_type,
a.bp_hidden_from_external_users,
isnull(ba.bp_file,'') ba_file,  -- intentionally ba
isnull(ba.bp_id,'') ba_id, -- intentionally ba
isnull(ba.bp_size,'') ba_size,  -- intentionally ba
isnull(ba.bp_content_type,'') ba_content_type -- intentionally ba
from bug_posts a
left outer join users on us_id = a.bp_user
left outer join bug_posts ba on ba.bp_parent = a.bp_id and ba.bp_bug = a.bp_bug
where a.bp_bug = 3
and a.bp_parent is null
 order by a.bp_id desc, ba.bp_parent, ba.bp_id
2018-08-16 09:57:24 http://localhost:49412/edit_bug.aspx?id=3 elapsed milliseconds:0000
2018-08-16 09:57:37 http://localhost:49412/tasks.aspx?bugid=3 sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '16217e1c-d43b-4661-981c-712404b5e4b8';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '16217e1c-d43b-4661-981c-712404b5e4b8'
and us_active = 1
2018-08-16 09:57:37 http://localhost:49412/tasks.aspx?bugid=3 elapsed milliseconds:0000
2018-08-16 09:57:37 http://localhost:49412/tasks.aspx?bugid=3 sql=

declare @bg_org int

select isnull(pu_permission_level,2),
bg_org
from bugs
left outer join project_user_xref
on pu_project = bg_project
and pu_user = 1
where bg_id = 3
2018-08-16 09:57:38 http://localhost:49412/tasks.aspx?bugid=3 elapsed milliseconds:0000
2018-08-16 09:57:38 http://localhost:49412/tasks.aspx?bugid=3 sql=
select tsk_id [id],
'<a   href=edit_task.aspx?bugid=3&id=' + convert(varchar,tsk_id) + '>edit</a>'   [$no_sort_edit],
'<a href=delete_task.aspx?ses=16217e1c-d43b-4661-981c-712404b5e4b8&bugid=3&id=' + convert(varchar,tsk_id) + '>delete</a>' [$no_sort_delete],tsk_description [description],us_username [assigned to], tsk_planned_start_date [planned start], tsk_actual_start_date [actual start], tsk_planned_end_date [planned end], tsk_actual_end_date [actual end], tsk_planned_duration [planned<br>duration], tsk_actual_duration  [actual<br>duration], tsk_duration_units [duration<br>units], tsk_percent_complete [percent<br>complete], st_name  [status], tsk_sort_sequence  [seq]
from bug_tasks 
left outer join statuses on tsk_status = st_id
left outer join users on tsk_assigned_to_user = us_id
where tsk_bug = 3 
order by tsk_sort_sequence, tsk_id
2018-08-16 09:57:38 http://localhost:49412/tasks.aspx?bugid=3 elapsed milliseconds:0003
2018-08-16 10:02:20 http://localhost:49412/tasks.aspx?bugid=3 sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '16217e1c-d43b-4661-981c-712404b5e4b8';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '16217e1c-d43b-4661-981c-712404b5e4b8'
and us_active = 1
2018-08-16 10:02:20 http://localhost:49412/tasks.aspx?bugid=3 elapsed milliseconds:0000
2018-08-16 10:02:20 http://localhost:49412/tasks.aspx?bugid=3 sql=

declare @bg_org int

select isnull(pu_permission_level,2),
bg_org
from bugs
left outer join project_user_xref
on pu_project = bg_project
and pu_user = 1
where bg_id = 3
2018-08-16 10:02:20 http://localhost:49412/tasks.aspx?bugid=3 elapsed milliseconds:0000
2018-08-16 10:02:20 http://localhost:49412/tasks.aspx?bugid=3 sql=
select tsk_id [id],
'<a   href=edit_task.aspx?bugid=3&id=' + convert(varchar,tsk_id) + '>edit</a>'   [$no_sort_edit],
'<a href=delete_task.aspx?ses=16217e1c-d43b-4661-981c-712404b5e4b8&bugid=3&id=' + convert(varchar,tsk_id) + '>delete</a>' [$no_sort_delete],tsk_description [description],us_username [assigned to], tsk_planned_start_date [planned start], tsk_actual_start_date [actual start], tsk_planned_end_date [planned end], tsk_actual_end_date [actual end], tsk_planned_duration [planned<br>duration], tsk_actual_duration  [actual<br>duration], tsk_duration_units [duration<br>units], tsk_percent_complete [percent<br>complete], st_name  [status], tsk_sort_sequence  [seq]
from bug_tasks 
left outer join statuses on tsk_status = st_id
left outer join users on tsk_assigned_to_user = us_id
where tsk_bug = 3 
order by tsk_sort_sequence, tsk_id
2018-08-16 10:02:20 http://localhost:49412/tasks.aspx?bugid=3 elapsed milliseconds:0000
2018-08-16 10:02:59 http://localhost:49412/tasks.aspx?bugid=3 sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '16217e1c-d43b-4661-981c-712404b5e4b8';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '16217e1c-d43b-4661-981c-712404b5e4b8'
and us_active = 1
2018-08-16 10:02:59 http://localhost:49412/tasks.aspx?bugid=3 elapsed milliseconds:0000
2018-08-16 10:02:59 http://localhost:49412/tasks.aspx?bugid=3 sql=

declare @bg_org int

select isnull(pu_permission_level,2),
bg_org
from bugs
left outer join project_user_xref
on pu_project = bg_project
and pu_user = 1
where bg_id = 3
2018-08-16 10:02:59 http://localhost:49412/tasks.aspx?bugid=3 elapsed milliseconds:0000
2018-08-16 10:02:59 http://localhost:49412/tasks.aspx?bugid=3 sql=
select tsk_id [id],
'<a   href=edit_task.aspx?bugid=3&id=' + convert(varchar,tsk_id) + '>edit</a>'   [$no_sort_edit],
'<a href=delete_task.aspx?ses=16217e1c-d43b-4661-981c-712404b5e4b8&bugid=3&id=' + convert(varchar,tsk_id) + '>delete</a>' [$no_sort_delete],tsk_description [description],us_username [assigned to], tsk_planned_start_date [planned start], tsk_actual_start_date [actual start], tsk_planned_end_date [planned end], tsk_actual_end_date [actual end], tsk_planned_duration [planned<br>duration], tsk_actual_duration  [actual<br>duration], tsk_duration_units [duration<br>units], tsk_percent_complete [percent<br>complete], st_name  [status], tsk_sort_sequence  [seq]
from bug_tasks 
left outer join statuses on tsk_status = st_id
left outer join users on tsk_assigned_to_user = us_id
where tsk_bug = 3 
order by tsk_sort_sequence, tsk_id
2018-08-16 10:02:59 http://localhost:49412/tasks.aspx?bugid=3 elapsed milliseconds:0000
2018-08-16 10:03:04 http://localhost:49412/edit_task.aspx?id=0&bugid=3 sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '16217e1c-d43b-4661-981c-712404b5e4b8';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '16217e1c-d43b-4661-981c-712404b5e4b8'
and us_active = 1
2018-08-16 10:03:04 http://localhost:49412/edit_task.aspx?id=0&bugid=3 elapsed milliseconds:0000
2018-08-16 10:03:04 http://localhost:49412/edit_task.aspx?id=0&bugid=3 sql=

declare @bg_org int

select isnull(pu_permission_level,2),
bg_org
from bugs
left outer join project_user_xref
on pu_project = bg_project
and pu_user = 1
where bg_id = 3
2018-08-16 10:03:04 http://localhost:49412/edit_task.aspx?id=0&bugid=3 elapsed milliseconds:0000
2018-08-16 10:03:04 http://localhost:49412/edit_task.aspx?id=0&bugid=3 sql=

declare @project int
declare @assigned_to int
select @project = bg_project, @assigned_to = bg_assigned_to_user from bugs where bg_id = 3
/* users this project */ select us_id, case when 0 = 1 then us_lastname + ', ' + us_firstname else us_username end us_username
from users
inner join orgs on us_org = og_id
where us_active = 1
and og_can_be_assigned_to = 1
and (2 <> 0 or 1 = og_id or og_external_user = 0)
and us_id not in
    (select pu_user from project_user_xref
	    where pu_project = @project
		and pu_permission_level = 0)
order by us_username; 
select st_id, st_name from statuses order by st_sort_seq, st_name
select isnull(@assigned_to,0) 
2018-08-16 10:03:04 http://localhost:49412/edit_task.aspx?id=0&bugid=3 elapsed milliseconds:0005
2018-08-16 10:03:04 http://localhost:49412/edit_task.aspx?id=0&bugid=3 sql=

declare @project int
declare @assigned_to int
select @project = bg_project, @assigned_to = bg_assigned_to_user from bugs where bg_id = 3
/* users this project */ select us_id, case when 0 = 1 then us_lastname + ', ' + us_firstname else us_username end us_username
from users
inner join orgs on us_org = og_id
where us_active = 1
and og_can_be_assigned_to = 1
and (2 <> 0 or 1 = og_id or og_external_user = 0)
and us_id not in
    (select pu_user from project_user_xref
	    where pu_project = @project
		and pu_permission_level = 0)
order by us_username; 
select st_id, st_name from statuses order by st_sort_seq, st_name
select isnull(@assigned_to,0) 
2018-08-16 10:03:04 http://localhost:49412/edit_task.aspx?id=0&bugid=3 elapsed milliseconds:0000
2018-08-16 10:03:04 http://localhost:49412/edit_task.aspx?id=0&bugid=3 sql=

declare @project int
declare @assigned_to int
select @project = bg_project, @assigned_to = bg_assigned_to_user from bugs where bg_id = 3
/* users this project */ select us_id, case when 0 = 1 then us_lastname + ', ' + us_firstname else us_username end us_username
from users
inner join orgs on us_org = og_id
where us_active = 1
and og_can_be_assigned_to = 1
and (2 <> 0 or 1 = og_id or og_external_user = 0)
and us_id not in
    (select pu_user from project_user_xref
	    where pu_project = @project
		and pu_permission_level = 0)
order by us_username; 
select st_id, st_name from statuses order by st_sort_seq, st_name
select isnull(@assigned_to,0) 
2018-08-16 10:03:05 http://localhost:49412/edit_task.aspx?id=0&bugid=3 elapsed milliseconds:0000
2018-08-16 10:03:24 http://localhost:49412/tasks.aspx?bugid=3 sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '16217e1c-d43b-4661-981c-712404b5e4b8';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '16217e1c-d43b-4661-981c-712404b5e4b8'
and us_active = 1
2018-08-16 10:03:24 http://localhost:49412/tasks.aspx?bugid=3 elapsed milliseconds:0000
2018-08-16 10:03:24 http://localhost:49412/tasks.aspx?bugid=3 sql=

declare @bg_org int

select isnull(pu_permission_level,2),
bg_org
from bugs
left outer join project_user_xref
on pu_project = bg_project
and pu_user = 1
where bg_id = 3
2018-08-16 10:03:24 http://localhost:49412/tasks.aspx?bugid=3 elapsed milliseconds:0000
2018-08-16 10:03:24 http://localhost:49412/tasks.aspx?bugid=3 sql=
select tsk_id [id],
'<a   href=edit_task.aspx?bugid=3&id=' + convert(varchar,tsk_id) + '>edit</a>'   [$no_sort_edit],
'<a href=delete_task.aspx?ses=16217e1c-d43b-4661-981c-712404b5e4b8&bugid=3&id=' + convert(varchar,tsk_id) + '>delete</a>' [$no_sort_delete],tsk_description [description],us_username [assigned to], tsk_planned_start_date [planned start], tsk_actual_start_date [actual start], tsk_planned_end_date [planned end], tsk_actual_end_date [actual end], tsk_planned_duration [planned<br>duration], tsk_actual_duration  [actual<br>duration], tsk_duration_units [duration<br>units], tsk_percent_complete [percent<br>complete], st_name  [status], tsk_sort_sequence  [seq]
from bug_tasks 
left outer join statuses on tsk_status = st_id
left outer join users on tsk_assigned_to_user = us_id
where tsk_bug = 3 
order by tsk_sort_sequence, tsk_id
2018-08-16 10:03:25 http://localhost:49412/tasks.aspx?bugid=3 elapsed milliseconds:0000
2018-08-16 10:03:26 http://localhost:49412/edit_task.aspx?id=0&bugid=3 sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '16217e1c-d43b-4661-981c-712404b5e4b8';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '16217e1c-d43b-4661-981c-712404b5e4b8'
and us_active = 1
2018-08-16 10:03:26 http://localhost:49412/edit_task.aspx?id=0&bugid=3 elapsed milliseconds:0000
2018-08-16 10:03:26 http://localhost:49412/edit_task.aspx?id=0&bugid=3 sql=

declare @bg_org int

select isnull(pu_permission_level,2),
bg_org
from bugs
left outer join project_user_xref
on pu_project = bg_project
and pu_user = 1
where bg_id = 3
2018-08-16 10:03:26 http://localhost:49412/edit_task.aspx?id=0&bugid=3 elapsed milliseconds:0000
2018-08-16 10:03:26 http://localhost:49412/edit_task.aspx?id=0&bugid=3 sql=

declare @project int
declare @assigned_to int
select @project = bg_project, @assigned_to = bg_assigned_to_user from bugs where bg_id = 3
/* users this project */ select us_id, case when 0 = 1 then us_lastname + ', ' + us_firstname else us_username end us_username
from users
inner join orgs on us_org = og_id
where us_active = 1
and og_can_be_assigned_to = 1
and (2 <> 0 or 1 = og_id or og_external_user = 0)
and us_id not in
    (select pu_user from project_user_xref
	    where pu_project = @project
		and pu_permission_level = 0)
order by us_username; 
select st_id, st_name from statuses order by st_sort_seq, st_name
select isnull(@assigned_to,0) 
2018-08-16 10:03:26 http://localhost:49412/edit_task.aspx?id=0&bugid=3 elapsed milliseconds:0000
2018-08-16 10:03:26 http://localhost:49412/edit_task.aspx?id=0&bugid=3 sql=

declare @project int
declare @assigned_to int
select @project = bg_project, @assigned_to = bg_assigned_to_user from bugs where bg_id = 3
/* users this project */ select us_id, case when 0 = 1 then us_lastname + ', ' + us_firstname else us_username end us_username
from users
inner join orgs on us_org = og_id
where us_active = 1
and og_can_be_assigned_to = 1
and (2 <> 0 or 1 = og_id or og_external_user = 0)
and us_id not in
    (select pu_user from project_user_xref
	    where pu_project = @project
		and pu_permission_level = 0)
order by us_username; 
select st_id, st_name from statuses order by st_sort_seq, st_name
select isnull(@assigned_to,0) 
2018-08-16 10:03:26 http://localhost:49412/edit_task.aspx?id=0&bugid=3 elapsed milliseconds:0000
2018-08-16 10:03:26 http://localhost:49412/edit_task.aspx?id=0&bugid=3 sql=

declare @project int
declare @assigned_to int
select @project = bg_project, @assigned_to = bg_assigned_to_user from bugs where bg_id = 3
/* users this project */ select us_id, case when 0 = 1 then us_lastname + ', ' + us_firstname else us_username end us_username
from users
inner join orgs on us_org = og_id
where us_active = 1
and og_can_be_assigned_to = 1
and (2 <> 0 or 1 = og_id or og_external_user = 0)
and us_id not in
    (select pu_user from project_user_xref
	    where pu_project = @project
		and pu_permission_level = 0)
order by us_username; 
select st_id, st_name from statuses order by st_sort_seq, st_name
select isnull(@assigned_to,0) 
2018-08-16 10:03:26 http://localhost:49412/edit_task.aspx?id=0&bugid=3 elapsed milliseconds:0000
2018-08-16 10:06:42 http://localhost:49412/tasks.aspx?bugid=3 sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '16217e1c-d43b-4661-981c-712404b5e4b8';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '16217e1c-d43b-4661-981c-712404b5e4b8'
and us_active = 1
2018-08-16 10:06:42 http://localhost:49412/tasks.aspx?bugid=3 elapsed milliseconds:0000
2018-08-16 10:06:42 http://localhost:49412/tasks.aspx?bugid=3 sql=

declare @bg_org int

select isnull(pu_permission_level,2),
bg_org
from bugs
left outer join project_user_xref
on pu_project = bg_project
and pu_user = 1
where bg_id = 3
2018-08-16 10:06:42 http://localhost:49412/tasks.aspx?bugid=3 elapsed milliseconds:0000
2018-08-16 10:06:42 http://localhost:49412/tasks.aspx?bugid=3 sql=
select tsk_id [id],
'<a   href=edit_task.aspx?bugid=3&id=' + convert(varchar,tsk_id) + '>edit</a>'   [$no_sort_edit],
'<a href=delete_task.aspx?ses=16217e1c-d43b-4661-981c-712404b5e4b8&bugid=3&id=' + convert(varchar,tsk_id) + '>delete</a>' [$no_sort_delete],tsk_description [description],us_username [assigned to], tsk_planned_start_date [planned start], tsk_actual_start_date [actual start], tsk_planned_end_date [planned end], tsk_actual_end_date [actual end], tsk_planned_duration [planned<br>duration], tsk_actual_duration  [actual<br>duration], tsk_duration_units [duration<br>units], tsk_percent_complete [percent<br>complete], st_name  [status], tsk_sort_sequence  [seq]
from bug_tasks 
left outer join statuses on tsk_status = st_id
left outer join users on tsk_assigned_to_user = us_id
where tsk_bug = 3 
order by tsk_sort_sequence, tsk_id
2018-08-16 10:06:42 http://localhost:49412/tasks.aspx?bugid=3 elapsed milliseconds:0000
2018-08-16 10:06:47 http://localhost:49412/edit_task.aspx?id=0&bugid=3 sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '16217e1c-d43b-4661-981c-712404b5e4b8';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '16217e1c-d43b-4661-981c-712404b5e4b8'
and us_active = 1
2018-08-16 10:06:47 http://localhost:49412/edit_task.aspx?id=0&bugid=3 elapsed milliseconds:0000
2018-08-16 10:06:47 http://localhost:49412/edit_task.aspx?id=0&bugid=3 sql=

declare @bg_org int

select isnull(pu_permission_level,2),
bg_org
from bugs
left outer join project_user_xref
on pu_project = bg_project
and pu_user = 1
where bg_id = 3
2018-08-16 10:06:47 http://localhost:49412/edit_task.aspx?id=0&bugid=3 elapsed milliseconds:0000
2018-08-16 10:06:47 http://localhost:49412/edit_task.aspx?id=0&bugid=3 sql=

declare @project int
declare @assigned_to int
select @project = bg_project, @assigned_to = bg_assigned_to_user from bugs where bg_id = 3
/* users this project */ select us_id, case when 0 = 1 then us_lastname + ', ' + us_firstname else us_username end us_username
from users
inner join orgs on us_org = og_id
where us_active = 1
and og_can_be_assigned_to = 1
and (2 <> 0 or 1 = og_id or og_external_user = 0)
and us_id not in
    (select pu_user from project_user_xref
	    where pu_project = @project
		and pu_permission_level = 0)
order by us_username; 
select st_id, st_name from statuses order by st_sort_seq, st_name
select isnull(@assigned_to,0) 
2018-08-16 10:06:47 http://localhost:49412/edit_task.aspx?id=0&bugid=3 elapsed milliseconds:0000
2018-08-16 10:06:47 http://localhost:49412/edit_task.aspx?id=0&bugid=3 sql=

declare @project int
declare @assigned_to int
select @project = bg_project, @assigned_to = bg_assigned_to_user from bugs where bg_id = 3
/* users this project */ select us_id, case when 0 = 1 then us_lastname + ', ' + us_firstname else us_username end us_username
from users
inner join orgs on us_org = og_id
where us_active = 1
and og_can_be_assigned_to = 1
and (2 <> 0 or 1 = og_id or og_external_user = 0)
and us_id not in
    (select pu_user from project_user_xref
	    where pu_project = @project
		and pu_permission_level = 0)
order by us_username; 
select st_id, st_name from statuses order by st_sort_seq, st_name
select isnull(@assigned_to,0) 
2018-08-16 10:06:47 http://localhost:49412/edit_task.aspx?id=0&bugid=3 elapsed milliseconds:0000
2018-08-16 10:06:47 http://localhost:49412/edit_task.aspx?id=0&bugid=3 sql=

declare @project int
declare @assigned_to int
select @project = bg_project, @assigned_to = bg_assigned_to_user from bugs where bg_id = 3
/* users this project */ select us_id, case when 0 = 1 then us_lastname + ', ' + us_firstname else us_username end us_username
from users
inner join orgs on us_org = og_id
where us_active = 1
and og_can_be_assigned_to = 1
and (2 <> 0 or 1 = og_id or og_external_user = 0)
and us_id not in
    (select pu_user from project_user_xref
	    where pu_project = @project
		and pu_permission_level = 0)
order by us_username; 
select st_id, st_name from statuses order by st_sort_seq, st_name
select isnull(@assigned_to,0) 
2018-08-16 10:06:47 http://localhost:49412/edit_task.aspx?id=0&bugid=3 elapsed milliseconds:0000
2018-08-16 10:06:47 http://localhost:49412/edit_task.aspx?id=0&bugid=3 sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '16217e1c-d43b-4661-981c-712404b5e4b8';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '16217e1c-d43b-4661-981c-712404b5e4b8'
and us_active = 1
2018-08-16 10:06:47 http://localhost:49412/edit_task.aspx?id=0&bugid=3 elapsed milliseconds:0000
2018-08-16 10:06:47 http://localhost:49412/edit_task.aspx?id=0&bugid=3 sql=

declare @bg_org int

select isnull(pu_permission_level,2),
bg_org
from bugs
left outer join project_user_xref
on pu_project = bg_project
and pu_user = 1
where bg_id = 3
2018-08-16 10:06:47 http://localhost:49412/edit_task.aspx?id=0&bugid=3 elapsed milliseconds:0000
2018-08-16 10:06:47 http://localhost:49412/edit_task.aspx?id=0&bugid=3 sql=

declare @project int
declare @assigned_to int
select @project = bg_project, @assigned_to = bg_assigned_to_user from bugs where bg_id = 3
/* users this project */ select us_id, case when 0 = 1 then us_lastname + ', ' + us_firstname else us_username end us_username
from users
inner join orgs on us_org = og_id
where us_active = 1
and og_can_be_assigned_to = 1
and (2 <> 0 or 1 = og_id or og_external_user = 0)
and us_id not in
    (select pu_user from project_user_xref
	    where pu_project = @project
		and pu_permission_level = 0)
order by us_username; 
select st_id, st_name from statuses order by st_sort_seq, st_name
select isnull(@assigned_to,0) 
2018-08-16 10:06:48 http://localhost:49412/edit_task.aspx?id=0&bugid=3 elapsed milliseconds:0000
2018-08-16 10:06:48 http://localhost:49412/edit_task.aspx?id=0&bugid=3 sql=

declare @project int
declare @assigned_to int
select @project = bg_project, @assigned_to = bg_assigned_to_user from bugs where bg_id = 3
/* users this project */ select us_id, case when 0 = 1 then us_lastname + ', ' + us_firstname else us_username end us_username
from users
inner join orgs on us_org = og_id
where us_active = 1
and og_can_be_assigned_to = 1
and (2 <> 0 or 1 = og_id or og_external_user = 0)
and us_id not in
    (select pu_user from project_user_xref
	    where pu_project = @project
		and pu_permission_level = 0)
order by us_username; 
select st_id, st_name from statuses order by st_sort_seq, st_name
select isnull(@assigned_to,0) 
2018-08-16 10:06:48 http://localhost:49412/edit_task.aspx?id=0&bugid=3 elapsed milliseconds:0000
2018-08-16 10:06:48 http://localhost:49412/edit_task.aspx?id=0&bugid=3 sql=

declare @project int
declare @assigned_to int
select @project = bg_project, @assigned_to = bg_assigned_to_user from bugs where bg_id = 3
/* users this project */ select us_id, case when 0 = 1 then us_lastname + ', ' + us_firstname else us_username end us_username
from users
inner join orgs on us_org = og_id
where us_active = 1
and og_can_be_assigned_to = 1
and (2 <> 0 or 1 = og_id or og_external_user = 0)
and us_id not in
    (select pu_user from project_user_xref
	    where pu_project = @project
		and pu_permission_level = 0)
order by us_username; 
select st_id, st_name from statuses order by st_sort_seq, st_name
select isnull(@assigned_to,0) 
2018-08-16 10:06:48 http://localhost:49412/edit_task.aspx?id=0&bugid=3 elapsed milliseconds:0000
2018-08-16 10:07:36 http://localhost:49412/tasks.aspx?bugid=3 sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '16217e1c-d43b-4661-981c-712404b5e4b8';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '16217e1c-d43b-4661-981c-712404b5e4b8'
and us_active = 1
2018-08-16 10:07:36 http://localhost:49412/tasks.aspx?bugid=3 elapsed milliseconds:0000
2018-08-16 10:07:36 http://localhost:49412/tasks.aspx?bugid=3 sql=

declare @bg_org int

select isnull(pu_permission_level,2),
bg_org
from bugs
left outer join project_user_xref
on pu_project = bg_project
and pu_user = 1
where bg_id = 3
2018-08-16 10:07:36 http://localhost:49412/tasks.aspx?bugid=3 elapsed milliseconds:0000
2018-08-16 10:07:36 http://localhost:49412/tasks.aspx?bugid=3 sql=
select tsk_id [id],
'<a   href=edit_task.aspx?bugid=3&id=' + convert(varchar,tsk_id) + '>edit</a>'   [$no_sort_edit],
'<a href=delete_task.aspx?ses=16217e1c-d43b-4661-981c-712404b5e4b8&bugid=3&id=' + convert(varchar,tsk_id) + '>delete</a>' [$no_sort_delete],tsk_description [description],us_username [assigned to], tsk_planned_start_date [planned start], tsk_actual_start_date [actual start], tsk_planned_end_date [planned end], tsk_actual_end_date [actual end], tsk_planned_duration [planned<br>duration], tsk_actual_duration  [actual<br>duration], tsk_duration_units [duration<br>units], tsk_percent_complete [percent<br>complete], st_name  [status], tsk_sort_sequence  [seq]
from bug_tasks 
left outer join statuses on tsk_status = st_id
left outer join users on tsk_assigned_to_user = us_id
where tsk_bug = 3 
order by tsk_sort_sequence, tsk_id
2018-08-16 10:07:36 http://localhost:49412/tasks.aspx?bugid=3 elapsed milliseconds:0000
2018-08-16 10:07:38 http://localhost:49412/edit_task.aspx?id=0&bugid=3 sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '16217e1c-d43b-4661-981c-712404b5e4b8';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '16217e1c-d43b-4661-981c-712404b5e4b8'
and us_active = 1
2018-08-16 10:07:38 http://localhost:49412/edit_task.aspx?id=0&bugid=3 elapsed milliseconds:0000
2018-08-16 10:07:38 http://localhost:49412/edit_task.aspx?id=0&bugid=3 sql=

declare @bg_org int

select isnull(pu_permission_level,2),
bg_org
from bugs
left outer join project_user_xref
on pu_project = bg_project
and pu_user = 1
where bg_id = 3
2018-08-16 10:07:38 http://localhost:49412/edit_task.aspx?id=0&bugid=3 elapsed milliseconds:0000
2018-08-16 10:07:38 http://localhost:49412/edit_task.aspx?id=0&bugid=3 sql=

declare @project int
declare @assigned_to int
select @project = bg_project, @assigned_to = bg_assigned_to_user from bugs where bg_id = 3
/* users this project */ select us_id, case when 0 = 1 then us_lastname + ', ' + us_firstname else us_username end us_username
from users
inner join orgs on us_org = og_id
where us_active = 1
and og_can_be_assigned_to = 1
and (2 <> 0 or 1 = og_id or og_external_user = 0)
and us_id not in
    (select pu_user from project_user_xref
	    where pu_project = @project
		and pu_permission_level = 0)
order by us_username; 
select st_id, st_name from statuses order by st_sort_seq, st_name
select isnull(@assigned_to,0) 
2018-08-16 10:07:38 http://localhost:49412/edit_task.aspx?id=0&bugid=3 elapsed milliseconds:0000
2018-08-16 10:07:38 http://localhost:49412/edit_task.aspx?id=0&bugid=3 sql=

declare @project int
declare @assigned_to int
select @project = bg_project, @assigned_to = bg_assigned_to_user from bugs where bg_id = 3
/* users this project */ select us_id, case when 0 = 1 then us_lastname + ', ' + us_firstname else us_username end us_username
from users
inner join orgs on us_org = og_id
where us_active = 1
and og_can_be_assigned_to = 1
and (2 <> 0 or 1 = og_id or og_external_user = 0)
and us_id not in
    (select pu_user from project_user_xref
	    where pu_project = @project
		and pu_permission_level = 0)
order by us_username; 
select st_id, st_name from statuses order by st_sort_seq, st_name
select isnull(@assigned_to,0) 
2018-08-16 10:07:38 http://localhost:49412/edit_task.aspx?id=0&bugid=3 elapsed milliseconds:0000
2018-08-16 10:07:38 http://localhost:49412/edit_task.aspx?id=0&bugid=3 sql=

declare @project int
declare @assigned_to int
select @project = bg_project, @assigned_to = bg_assigned_to_user from bugs where bg_id = 3
/* users this project */ select us_id, case when 0 = 1 then us_lastname + ', ' + us_firstname else us_username end us_username
from users
inner join orgs on us_org = og_id
where us_active = 1
and og_can_be_assigned_to = 1
and (2 <> 0 or 1 = og_id or og_external_user = 0)
and us_id not in
    (select pu_user from project_user_xref
	    where pu_project = @project
		and pu_permission_level = 0)
order by us_username; 
select st_id, st_name from statuses order by st_sort_seq, st_name
select isnull(@assigned_to,0) 
2018-08-16 10:07:38 http://localhost:49412/edit_task.aspx?id=0&bugid=3 elapsed milliseconds:0000
2018-08-16 10:07:57 http://localhost:49412/tasks.aspx?bugid=3 sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '16217e1c-d43b-4661-981c-712404b5e4b8';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '16217e1c-d43b-4661-981c-712404b5e4b8'
and us_active = 1
2018-08-16 10:07:57 http://localhost:49412/tasks.aspx?bugid=3 elapsed milliseconds:0000
2018-08-16 10:07:57 http://localhost:49412/tasks.aspx?bugid=3 sql=

declare @bg_org int

select isnull(pu_permission_level,2),
bg_org
from bugs
left outer join project_user_xref
on pu_project = bg_project
and pu_user = 1
where bg_id = 3
2018-08-16 10:07:57 http://localhost:49412/tasks.aspx?bugid=3 elapsed milliseconds:0000
2018-08-16 10:07:57 http://localhost:49412/tasks.aspx?bugid=3 sql=
select tsk_id [id],
'<a   href=edit_task.aspx?bugid=3&id=' + convert(varchar,tsk_id) + '>edit</a>'   [$no_sort_edit],
'<a href=delete_task.aspx?ses=16217e1c-d43b-4661-981c-712404b5e4b8&bugid=3&id=' + convert(varchar,tsk_id) + '>delete</a>' [$no_sort_delete],tsk_description [description],us_username [assigned to], tsk_planned_start_date [planned start], tsk_actual_start_date [actual start], tsk_planned_end_date [planned end], tsk_actual_end_date [actual end], tsk_planned_duration [planned<br>duration], tsk_actual_duration  [actual<br>duration], tsk_duration_units [duration<br>units], tsk_percent_complete [percent<br>complete], st_name  [status], tsk_sort_sequence  [seq]
from bug_tasks 
left outer join statuses on tsk_status = st_id
left outer join users on tsk_assigned_to_user = us_id
where tsk_bug = 3 
order by tsk_sort_sequence, tsk_id
2018-08-16 10:07:57 http://localhost:49412/tasks.aspx?bugid=3 elapsed milliseconds:0000
2018-08-16 10:08:00 http://localhost:49412/edit_task.aspx?id=0&bugid=3 sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '16217e1c-d43b-4661-981c-712404b5e4b8';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '16217e1c-d43b-4661-981c-712404b5e4b8'
and us_active = 1
2018-08-16 10:08:00 http://localhost:49412/edit_task.aspx?id=0&bugid=3 elapsed milliseconds:0000
2018-08-16 10:08:00 http://localhost:49412/edit_task.aspx?id=0&bugid=3 sql=

declare @bg_org int

select isnull(pu_permission_level,2),
bg_org
from bugs
left outer join project_user_xref
on pu_project = bg_project
and pu_user = 1
where bg_id = 3
2018-08-16 10:08:00 http://localhost:49412/edit_task.aspx?id=0&bugid=3 elapsed milliseconds:0000
2018-08-16 10:08:00 http://localhost:49412/edit_task.aspx?id=0&bugid=3 sql=

declare @project int
declare @assigned_to int
select @project = bg_project, @assigned_to = bg_assigned_to_user from bugs where bg_id = 3
/* users this project */ select us_id, case when 0 = 1 then us_lastname + ', ' + us_firstname else us_username end us_username
from users
inner join orgs on us_org = og_id
where us_active = 1
and og_can_be_assigned_to = 1
and (2 <> 0 or 1 = og_id or og_external_user = 0)
and us_id not in
    (select pu_user from project_user_xref
	    where pu_project = @project
		and pu_permission_level = 0)
order by us_username; 
select st_id, st_name from statuses order by st_sort_seq, st_name
select isnull(@assigned_to,0) 
2018-08-16 10:08:00 http://localhost:49412/edit_task.aspx?id=0&bugid=3 elapsed milliseconds:0000
2018-08-16 10:08:00 http://localhost:49412/edit_task.aspx?id=0&bugid=3 sql=

declare @project int
declare @assigned_to int
select @project = bg_project, @assigned_to = bg_assigned_to_user from bugs where bg_id = 3
/* users this project */ select us_id, case when 0 = 1 then us_lastname + ', ' + us_firstname else us_username end us_username
from users
inner join orgs on us_org = og_id
where us_active = 1
and og_can_be_assigned_to = 1
and (2 <> 0 or 1 = og_id or og_external_user = 0)
and us_id not in
    (select pu_user from project_user_xref
	    where pu_project = @project
		and pu_permission_level = 0)
order by us_username; 
select st_id, st_name from statuses order by st_sort_seq, st_name
select isnull(@assigned_to,0) 
2018-08-16 10:08:00 http://localhost:49412/edit_task.aspx?id=0&bugid=3 elapsed milliseconds:0000
2018-08-16 10:08:00 http://localhost:49412/edit_task.aspx?id=0&bugid=3 sql=

declare @project int
declare @assigned_to int
select @project = bg_project, @assigned_to = bg_assigned_to_user from bugs where bg_id = 3
/* users this project */ select us_id, case when 0 = 1 then us_lastname + ', ' + us_firstname else us_username end us_username
from users
inner join orgs on us_org = og_id
where us_active = 1
and og_can_be_assigned_to = 1
and (2 <> 0 or 1 = og_id or og_external_user = 0)
and us_id not in
    (select pu_user from project_user_xref
	    where pu_project = @project
		and pu_permission_level = 0)
order by us_username; 
select st_id, st_name from statuses order by st_sort_seq, st_name
select isnull(@assigned_to,0) 
2018-08-16 10:08:00 http://localhost:49412/edit_task.aspx?id=0&bugid=3 elapsed milliseconds:0000
2018-08-16 10:08:33 http://localhost:49412/tasks.aspx?bugid=3 sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '16217e1c-d43b-4661-981c-712404b5e4b8';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '16217e1c-d43b-4661-981c-712404b5e4b8'
and us_active = 1
2018-08-16 10:08:33 http://localhost:49412/tasks.aspx?bugid=3 elapsed milliseconds:0000
2018-08-16 10:08:33 http://localhost:49412/tasks.aspx?bugid=3 sql=

declare @bg_org int

select isnull(pu_permission_level,2),
bg_org
from bugs
left outer join project_user_xref
on pu_project = bg_project
and pu_user = 1
where bg_id = 3
2018-08-16 10:08:33 http://localhost:49412/tasks.aspx?bugid=3 elapsed milliseconds:0000
2018-08-16 10:08:33 http://localhost:49412/tasks.aspx?bugid=3 sql=
select tsk_id [id],
'<a   href=edit_task.aspx?bugid=3&id=' + convert(varchar,tsk_id) + '>edit</a>'   [$no_sort_edit],
'<a href=delete_task.aspx?ses=16217e1c-d43b-4661-981c-712404b5e4b8&bugid=3&id=' + convert(varchar,tsk_id) + '>delete</a>' [$no_sort_delete],tsk_description [description],us_username [assigned to], tsk_planned_start_date [planned start], tsk_actual_start_date [actual start], tsk_planned_end_date [planned end], tsk_actual_end_date [actual end], tsk_planned_duration [planned<br>duration], tsk_actual_duration  [actual<br>duration], tsk_duration_units [duration<br>units], tsk_percent_complete [percent<br>complete], st_name  [status], tsk_sort_sequence  [seq]
from bug_tasks 
left outer join statuses on tsk_status = st_id
left outer join users on tsk_assigned_to_user = us_id
where tsk_bug = 3 
order by tsk_sort_sequence, tsk_id
2018-08-16 10:08:34 http://localhost:49412/tasks.aspx?bugid=3 elapsed milliseconds:0000
2018-08-16 10:08:36 http://localhost:49412/edit_task.aspx?id=0&bugid=3 sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '16217e1c-d43b-4661-981c-712404b5e4b8';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '16217e1c-d43b-4661-981c-712404b5e4b8'
and us_active = 1
2018-08-16 10:08:36 http://localhost:49412/edit_task.aspx?id=0&bugid=3 elapsed milliseconds:0000
2018-08-16 10:08:36 http://localhost:49412/edit_task.aspx?id=0&bugid=3 sql=

declare @bg_org int

select isnull(pu_permission_level,2),
bg_org
from bugs
left outer join project_user_xref
on pu_project = bg_project
and pu_user = 1
where bg_id = 3
2018-08-16 10:08:36 http://localhost:49412/edit_task.aspx?id=0&bugid=3 elapsed milliseconds:0000
2018-08-16 10:08:36 http://localhost:49412/edit_task.aspx?id=0&bugid=3 sql=

declare @project int
declare @assigned_to int
select @project = bg_project, @assigned_to = bg_assigned_to_user from bugs where bg_id = 3
/* users this project */ select us_id, case when 0 = 1 then us_lastname + ', ' + us_firstname else us_username end us_username
from users
inner join orgs on us_org = og_id
where us_active = 1
and og_can_be_assigned_to = 1
and (2 <> 0 or 1 = og_id or og_external_user = 0)
and us_id not in
    (select pu_user from project_user_xref
	    where pu_project = @project
		and pu_permission_level = 0)
order by us_username; 
select st_id, st_name from statuses order by st_sort_seq, st_name
select isnull(@assigned_to,0) 
2018-08-16 10:08:36 http://localhost:49412/edit_task.aspx?id=0&bugid=3 elapsed milliseconds:0000
2018-08-16 10:08:36 http://localhost:49412/edit_task.aspx?id=0&bugid=3 sql=

declare @project int
declare @assigned_to int
select @project = bg_project, @assigned_to = bg_assigned_to_user from bugs where bg_id = 3
/* users this project */ select us_id, case when 0 = 1 then us_lastname + ', ' + us_firstname else us_username end us_username
from users
inner join orgs on us_org = og_id
where us_active = 1
and og_can_be_assigned_to = 1
and (2 <> 0 or 1 = og_id or og_external_user = 0)
and us_id not in
    (select pu_user from project_user_xref
	    where pu_project = @project
		and pu_permission_level = 0)
order by us_username; 
select st_id, st_name from statuses order by st_sort_seq, st_name
select isnull(@assigned_to,0) 
2018-08-16 10:08:36 http://localhost:49412/edit_task.aspx?id=0&bugid=3 elapsed milliseconds:0000
2018-08-16 10:08:36 http://localhost:49412/edit_task.aspx?id=0&bugid=3 sql=

declare @project int
declare @assigned_to int
select @project = bg_project, @assigned_to = bg_assigned_to_user from bugs where bg_id = 3
/* users this project */ select us_id, case when 0 = 1 then us_lastname + ', ' + us_firstname else us_username end us_username
from users
inner join orgs on us_org = og_id
where us_active = 1
and og_can_be_assigned_to = 1
and (2 <> 0 or 1 = og_id or og_external_user = 0)
and us_id not in
    (select pu_user from project_user_xref
	    where pu_project = @project
		and pu_permission_level = 0)
order by us_username; 
select st_id, st_name from statuses order by st_sort_seq, st_name
select isnull(@assigned_to,0) 
2018-08-16 10:08:36 http://localhost:49412/edit_task.aspx?id=0&bugid=3 elapsed milliseconds:0000
2018-08-16 10:12:48 http://localhost:49412/tasks.aspx?bugid=3 sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '16217e1c-d43b-4661-981c-712404b5e4b8';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '16217e1c-d43b-4661-981c-712404b5e4b8'
and us_active = 1
2018-08-16 10:12:48 http://localhost:49412/tasks.aspx?bugid=3 elapsed milliseconds:0000
2018-08-16 10:12:48 http://localhost:49412/tasks.aspx?bugid=3 sql=

declare @bg_org int

select isnull(pu_permission_level,2),
bg_org
from bugs
left outer join project_user_xref
on pu_project = bg_project
and pu_user = 1
where bg_id = 3
2018-08-16 10:12:48 http://localhost:49412/tasks.aspx?bugid=3 elapsed milliseconds:0000
2018-08-16 10:12:48 http://localhost:49412/tasks.aspx?bugid=3 sql=
select tsk_id [id],
'<a   href=edit_task.aspx?bugid=3&id=' + convert(varchar,tsk_id) + '>edit</a>'   [$no_sort_edit],
'<a href=delete_task.aspx?ses=16217e1c-d43b-4661-981c-712404b5e4b8&bugid=3&id=' + convert(varchar,tsk_id) + '>delete</a>' [$no_sort_delete],tsk_description [description],us_username [assigned to], tsk_planned_start_date [planned start], tsk_actual_start_date [actual start], tsk_planned_end_date [planned end], tsk_actual_end_date [actual end], tsk_planned_duration [planned<br>duration], tsk_actual_duration  [actual<br>duration], tsk_duration_units [duration<br>units], tsk_percent_complete [percent<br>complete], st_name  [status], tsk_sort_sequence  [seq]
from bug_tasks 
left outer join statuses on tsk_status = st_id
left outer join users on tsk_assigned_to_user = us_id
where tsk_bug = 3 
order by tsk_sort_sequence, tsk_id
2018-08-16 10:12:48 http://localhost:49412/tasks.aspx?bugid=3 elapsed milliseconds:0000
2018-08-16 10:12:51 http://localhost:49412/edit_task.aspx?id=0&bugid=3 sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '16217e1c-d43b-4661-981c-712404b5e4b8';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '16217e1c-d43b-4661-981c-712404b5e4b8'
and us_active = 1
2018-08-16 10:12:51 http://localhost:49412/edit_task.aspx?id=0&bugid=3 elapsed milliseconds:0000
2018-08-16 10:12:51 http://localhost:49412/edit_task.aspx?id=0&bugid=3 sql=

declare @bg_org int

select isnull(pu_permission_level,2),
bg_org
from bugs
left outer join project_user_xref
on pu_project = bg_project
and pu_user = 1
where bg_id = 3
2018-08-16 10:12:51 http://localhost:49412/edit_task.aspx?id=0&bugid=3 elapsed milliseconds:0000
2018-08-16 10:12:51 http://localhost:49412/edit_task.aspx?id=0&bugid=3 sql=

declare @project int
declare @assigned_to int
select @project = bg_project, @assigned_to = bg_assigned_to_user from bugs where bg_id = 3
/* users this project */ select us_id, case when 0 = 1 then us_lastname + ', ' + us_firstname else us_username end us_username
from users
inner join orgs on us_org = og_id
where us_active = 1
and og_can_be_assigned_to = 1
and (2 <> 0 or 1 = og_id or og_external_user = 0)
and us_id not in
    (select pu_user from project_user_xref
	    where pu_project = @project
		and pu_permission_level = 0)
order by us_username; 
select st_id, st_name from statuses order by st_sort_seq, st_name
select isnull(@assigned_to,0) 
2018-08-16 10:12:51 http://localhost:49412/edit_task.aspx?id=0&bugid=3 elapsed milliseconds:0000
2018-08-16 10:12:51 http://localhost:49412/edit_task.aspx?id=0&bugid=3 sql=

declare @project int
declare @assigned_to int
select @project = bg_project, @assigned_to = bg_assigned_to_user from bugs where bg_id = 3
/* users this project */ select us_id, case when 0 = 1 then us_lastname + ', ' + us_firstname else us_username end us_username
from users
inner join orgs on us_org = og_id
where us_active = 1
and og_can_be_assigned_to = 1
and (2 <> 0 or 1 = og_id or og_external_user = 0)
and us_id not in
    (select pu_user from project_user_xref
	    where pu_project = @project
		and pu_permission_level = 0)
order by us_username; 
select st_id, st_name from statuses order by st_sort_seq, st_name
select isnull(@assigned_to,0) 
2018-08-16 10:12:51 http://localhost:49412/edit_task.aspx?id=0&bugid=3 elapsed milliseconds:0000
2018-08-16 10:12:51 http://localhost:49412/edit_task.aspx?id=0&bugid=3 sql=

declare @project int
declare @assigned_to int
select @project = bg_project, @assigned_to = bg_assigned_to_user from bugs where bg_id = 3
/* users this project */ select us_id, case when 0 = 1 then us_lastname + ', ' + us_firstname else us_username end us_username
from users
inner join orgs on us_org = og_id
where us_active = 1
and og_can_be_assigned_to = 1
and (2 <> 0 or 1 = og_id or og_external_user = 0)
and us_id not in
    (select pu_user from project_user_xref
	    where pu_project = @project
		and pu_permission_level = 0)
order by us_username; 
select st_id, st_name from statuses order by st_sort_seq, st_name
select isnull(@assigned_to,0) 
2018-08-16 10:12:51 http://localhost:49412/edit_task.aspx?id=0&bugid=3 elapsed milliseconds:0000
2018-08-16 10:13:15 http://localhost:49412/tasks.aspx?bugid=3 sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '16217e1c-d43b-4661-981c-712404b5e4b8';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '16217e1c-d43b-4661-981c-712404b5e4b8'
and us_active = 1
2018-08-16 10:13:15 http://localhost:49412/tasks.aspx?bugid=3 elapsed milliseconds:0000
2018-08-16 10:13:15 http://localhost:49412/tasks.aspx?bugid=3 sql=

declare @bg_org int

select isnull(pu_permission_level,2),
bg_org
from bugs
left outer join project_user_xref
on pu_project = bg_project
and pu_user = 1
where bg_id = 3
2018-08-16 10:13:15 http://localhost:49412/tasks.aspx?bugid=3 elapsed milliseconds:0000
2018-08-16 10:13:15 http://localhost:49412/tasks.aspx?bugid=3 sql=
select tsk_id [id],
'<a   href=edit_task.aspx?bugid=3&id=' + convert(varchar,tsk_id) + '>edit</a>'   [$no_sort_edit],
'<a href=delete_task.aspx?ses=16217e1c-d43b-4661-981c-712404b5e4b8&bugid=3&id=' + convert(varchar,tsk_id) + '>delete</a>' [$no_sort_delete],tsk_description [description],us_username [assigned to], tsk_planned_start_date [planned start], tsk_actual_start_date [actual start], tsk_planned_end_date [planned end], tsk_actual_end_date [actual end], tsk_planned_duration [planned<br>duration], tsk_actual_duration  [actual<br>duration], tsk_duration_units [duration<br>units], tsk_percent_complete [percent<br>complete], st_name  [status], tsk_sort_sequence  [seq]
from bug_tasks 
left outer join statuses on tsk_status = st_id
left outer join users on tsk_assigned_to_user = us_id
where tsk_bug = 3 
order by tsk_sort_sequence, tsk_id
2018-08-16 10:13:15 http://localhost:49412/tasks.aspx?bugid=3 elapsed milliseconds:0000
2018-08-16 10:13:18 http://localhost:49412/edit_task.aspx?id=0&bugid=3 sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '16217e1c-d43b-4661-981c-712404b5e4b8';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '16217e1c-d43b-4661-981c-712404b5e4b8'
and us_active = 1
2018-08-16 10:13:18 http://localhost:49412/edit_task.aspx?id=0&bugid=3 elapsed milliseconds:0000
2018-08-16 10:13:18 http://localhost:49412/edit_task.aspx?id=0&bugid=3 sql=

declare @bg_org int

select isnull(pu_permission_level,2),
bg_org
from bugs
left outer join project_user_xref
on pu_project = bg_project
and pu_user = 1
where bg_id = 3
2018-08-16 10:13:18 http://localhost:49412/edit_task.aspx?id=0&bugid=3 elapsed milliseconds:0000
2018-08-16 10:13:18 http://localhost:49412/edit_task.aspx?id=0&bugid=3 sql=

declare @project int
declare @assigned_to int
select @project = bg_project, @assigned_to = bg_assigned_to_user from bugs where bg_id = 3
/* users this project */ select us_id, case when 0 = 1 then us_lastname + ', ' + us_firstname else us_username end us_username
from users
inner join orgs on us_org = og_id
where us_active = 1
and og_can_be_assigned_to = 1
and (2 <> 0 or 1 = og_id or og_external_user = 0)
and us_id not in
    (select pu_user from project_user_xref
	    where pu_project = @project
		and pu_permission_level = 0)
order by us_username; 
select st_id, st_name from statuses order by st_sort_seq, st_name
select isnull(@assigned_to,0) 
2018-08-16 10:13:18 http://localhost:49412/edit_task.aspx?id=0&bugid=3 elapsed milliseconds:0000
2018-08-16 10:13:18 http://localhost:49412/edit_task.aspx?id=0&bugid=3 sql=

declare @project int
declare @assigned_to int
select @project = bg_project, @assigned_to = bg_assigned_to_user from bugs where bg_id = 3
/* users this project */ select us_id, case when 0 = 1 then us_lastname + ', ' + us_firstname else us_username end us_username
from users
inner join orgs on us_org = og_id
where us_active = 1
and og_can_be_assigned_to = 1
and (2 <> 0 or 1 = og_id or og_external_user = 0)
and us_id not in
    (select pu_user from project_user_xref
	    where pu_project = @project
		and pu_permission_level = 0)
order by us_username; 
select st_id, st_name from statuses order by st_sort_seq, st_name
select isnull(@assigned_to,0) 
2018-08-16 10:13:18 http://localhost:49412/edit_task.aspx?id=0&bugid=3 elapsed milliseconds:0000
2018-08-16 10:13:18 http://localhost:49412/edit_task.aspx?id=0&bugid=3 sql=

declare @project int
declare @assigned_to int
select @project = bg_project, @assigned_to = bg_assigned_to_user from bugs where bg_id = 3
/* users this project */ select us_id, case when 0 = 1 then us_lastname + ', ' + us_firstname else us_username end us_username
from users
inner join orgs on us_org = og_id
where us_active = 1
and og_can_be_assigned_to = 1
and (2 <> 0 or 1 = og_id or og_external_user = 0)
and us_id not in
    (select pu_user from project_user_xref
	    where pu_project = @project
		and pu_permission_level = 0)
order by us_username; 
select st_id, st_name from statuses order by st_sort_seq, st_name
select isnull(@assigned_to,0) 
2018-08-16 10:13:18 http://localhost:49412/edit_task.aspx?id=0&bugid=3 elapsed milliseconds:0000
2018-08-16 10:14:25 http://localhost:49412/tasks.aspx?bugid=3 sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '16217e1c-d43b-4661-981c-712404b5e4b8';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '16217e1c-d43b-4661-981c-712404b5e4b8'
and us_active = 1
2018-08-16 10:14:25 http://localhost:49412/tasks.aspx?bugid=3 elapsed milliseconds:0000
2018-08-16 10:14:25 http://localhost:49412/tasks.aspx?bugid=3 sql=

declare @bg_org int

select isnull(pu_permission_level,2),
bg_org
from bugs
left outer join project_user_xref
on pu_project = bg_project
and pu_user = 1
where bg_id = 3
2018-08-16 10:14:25 http://localhost:49412/tasks.aspx?bugid=3 elapsed milliseconds:0000
2018-08-16 10:14:25 http://localhost:49412/tasks.aspx?bugid=3 sql=
select tsk_id [id],
'<a   href=edit_task.aspx?bugid=3&id=' + convert(varchar,tsk_id) + '>edit</a>'   [$no_sort_edit],
'<a href=delete_task.aspx?ses=16217e1c-d43b-4661-981c-712404b5e4b8&bugid=3&id=' + convert(varchar,tsk_id) + '>delete</a>' [$no_sort_delete],tsk_description [description],us_username [assigned to], tsk_planned_start_date [planned start], tsk_actual_start_date [actual start], tsk_planned_end_date [planned end], tsk_actual_end_date [actual end], tsk_planned_duration [planned<br>duration], tsk_actual_duration  [actual<br>duration], tsk_duration_units [duration<br>units], tsk_percent_complete [percent<br>complete], st_name  [status], tsk_sort_sequence  [seq]
from bug_tasks 
left outer join statuses on tsk_status = st_id
left outer join users on tsk_assigned_to_user = us_id
where tsk_bug = 3 
order by tsk_sort_sequence, tsk_id
2018-08-16 10:14:25 http://localhost:49412/tasks.aspx?bugid=3 elapsed milliseconds:0000
2018-08-16 10:14:28 http://localhost:49412/edit_task.aspx?id=0&bugid=3 sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '16217e1c-d43b-4661-981c-712404b5e4b8';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '16217e1c-d43b-4661-981c-712404b5e4b8'
and us_active = 1
2018-08-16 10:14:28 http://localhost:49412/edit_task.aspx?id=0&bugid=3 elapsed milliseconds:0000
2018-08-16 10:14:28 http://localhost:49412/edit_task.aspx?id=0&bugid=3 sql=

declare @bg_org int

select isnull(pu_permission_level,2),
bg_org
from bugs
left outer join project_user_xref
on pu_project = bg_project
and pu_user = 1
where bg_id = 3
2018-08-16 10:14:28 http://localhost:49412/edit_task.aspx?id=0&bugid=3 elapsed milliseconds:0000
2018-08-16 10:14:28 http://localhost:49412/edit_task.aspx?id=0&bugid=3 sql=

declare @project int
declare @assigned_to int
select @project = bg_project, @assigned_to = bg_assigned_to_user from bugs where bg_id = 3
/* users this project */ select us_id, case when 0 = 1 then us_lastname + ', ' + us_firstname else us_username end us_username
from users
inner join orgs on us_org = og_id
where us_active = 1
and og_can_be_assigned_to = 1
and (2 <> 0 or 1 = og_id or og_external_user = 0)
and us_id not in
    (select pu_user from project_user_xref
	    where pu_project = @project
		and pu_permission_level = 0)
order by us_username; 
select st_id, st_name from statuses order by st_sort_seq, st_name
select isnull(@assigned_to,0) 
2018-08-16 10:14:28 http://localhost:49412/edit_task.aspx?id=0&bugid=3 elapsed milliseconds:0000
2018-08-16 10:14:28 http://localhost:49412/edit_task.aspx?id=0&bugid=3 sql=

declare @project int
declare @assigned_to int
select @project = bg_project, @assigned_to = bg_assigned_to_user from bugs where bg_id = 3
/* users this project */ select us_id, case when 0 = 1 then us_lastname + ', ' + us_firstname else us_username end us_username
from users
inner join orgs on us_org = og_id
where us_active = 1
and og_can_be_assigned_to = 1
and (2 <> 0 or 1 = og_id or og_external_user = 0)
and us_id not in
    (select pu_user from project_user_xref
	    where pu_project = @project
		and pu_permission_level = 0)
order by us_username; 
select st_id, st_name from statuses order by st_sort_seq, st_name
select isnull(@assigned_to,0) 
2018-08-16 10:14:28 http://localhost:49412/edit_task.aspx?id=0&bugid=3 elapsed milliseconds:0000
2018-08-16 10:14:29 http://localhost:49412/edit_task.aspx?id=0&bugid=3 sql=

declare @project int
declare @assigned_to int
select @project = bg_project, @assigned_to = bg_assigned_to_user from bugs where bg_id = 3
/* users this project */ select us_id, case when 0 = 1 then us_lastname + ', ' + us_firstname else us_username end us_username
from users
inner join orgs on us_org = og_id
where us_active = 1
and og_can_be_assigned_to = 1
and (2 <> 0 or 1 = og_id or og_external_user = 0)
and us_id not in
    (select pu_user from project_user_xref
	    where pu_project = @project
		and pu_permission_level = 0)
order by us_username; 
select st_id, st_name from statuses order by st_sort_seq, st_name
select isnull(@assigned_to,0) 
2018-08-16 10:14:29 http://localhost:49412/edit_task.aspx?id=0&bugid=3 elapsed milliseconds:0000
2018-08-16 10:15:12 http://localhost:49412/tasks.aspx?bugid=3 sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '16217e1c-d43b-4661-981c-712404b5e4b8';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '16217e1c-d43b-4661-981c-712404b5e4b8'
and us_active = 1
2018-08-16 10:15:12 http://localhost:49412/tasks.aspx?bugid=3 elapsed milliseconds:0000
2018-08-16 10:15:12 http://localhost:49412/tasks.aspx?bugid=3 sql=

declare @bg_org int

select isnull(pu_permission_level,2),
bg_org
from bugs
left outer join project_user_xref
on pu_project = bg_project
and pu_user = 1
where bg_id = 3
2018-08-16 10:15:12 http://localhost:49412/tasks.aspx?bugid=3 elapsed milliseconds:0000
2018-08-16 10:15:12 http://localhost:49412/tasks.aspx?bugid=3 sql=
select tsk_id [id],
'<a   href=edit_task.aspx?bugid=3&id=' + convert(varchar,tsk_id) + '>edit</a>'   [$no_sort_edit],
'<a href=delete_task.aspx?ses=16217e1c-d43b-4661-981c-712404b5e4b8&bugid=3&id=' + convert(varchar,tsk_id) + '>delete</a>' [$no_sort_delete],tsk_description [description],us_username [assigned to], tsk_planned_start_date [planned start], tsk_actual_start_date [actual start], tsk_planned_end_date [planned end], tsk_actual_end_date [actual end], tsk_planned_duration [planned<br>duration], tsk_actual_duration  [actual<br>duration], tsk_duration_units [duration<br>units], tsk_percent_complete [percent<br>complete], st_name  [status], tsk_sort_sequence  [seq]
from bug_tasks 
left outer join statuses on tsk_status = st_id
left outer join users on tsk_assigned_to_user = us_id
where tsk_bug = 3 
order by tsk_sort_sequence, tsk_id
2018-08-16 10:15:12 http://localhost:49412/tasks.aspx?bugid=3 elapsed milliseconds:0000
2018-08-16 10:15:14 http://localhost:49412/edit_task.aspx?id=0&bugid=3 sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '16217e1c-d43b-4661-981c-712404b5e4b8';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '16217e1c-d43b-4661-981c-712404b5e4b8'
and us_active = 1
2018-08-16 10:15:14 http://localhost:49412/edit_task.aspx?id=0&bugid=3 elapsed milliseconds:0000
2018-08-16 10:15:14 http://localhost:49412/edit_task.aspx?id=0&bugid=3 sql=

declare @bg_org int

select isnull(pu_permission_level,2),
bg_org
from bugs
left outer join project_user_xref
on pu_project = bg_project
and pu_user = 1
where bg_id = 3
2018-08-16 10:15:14 http://localhost:49412/edit_task.aspx?id=0&bugid=3 elapsed milliseconds:0000
2018-08-16 10:15:14 http://localhost:49412/edit_task.aspx?id=0&bugid=3 sql=

declare @project int
declare @assigned_to int
select @project = bg_project, @assigned_to = bg_assigned_to_user from bugs where bg_id = 3
/* users this project */ select us_id, case when 0 = 1 then us_lastname + ', ' + us_firstname else us_username end us_username
from users
inner join orgs on us_org = og_id
where us_active = 1
and og_can_be_assigned_to = 1
and (2 <> 0 or 1 = og_id or og_external_user = 0)
and us_id not in
    (select pu_user from project_user_xref
	    where pu_project = @project
		and pu_permission_level = 0)
order by us_username; 
select st_id, st_name from statuses order by st_sort_seq, st_name
select isnull(@assigned_to,0) 
2018-08-16 10:15:14 http://localhost:49412/edit_task.aspx?id=0&bugid=3 elapsed milliseconds:0000
2018-08-16 10:15:14 http://localhost:49412/edit_task.aspx?id=0&bugid=3 sql=

declare @project int
declare @assigned_to int
select @project = bg_project, @assigned_to = bg_assigned_to_user from bugs where bg_id = 3
/* users this project */ select us_id, case when 0 = 1 then us_lastname + ', ' + us_firstname else us_username end us_username
from users
inner join orgs on us_org = og_id
where us_active = 1
and og_can_be_assigned_to = 1
and (2 <> 0 or 1 = og_id or og_external_user = 0)
and us_id not in
    (select pu_user from project_user_xref
	    where pu_project = @project
		and pu_permission_level = 0)
order by us_username; 
select st_id, st_name from statuses order by st_sort_seq, st_name
select isnull(@assigned_to,0) 
2018-08-16 10:15:14 http://localhost:49412/edit_task.aspx?id=0&bugid=3 elapsed milliseconds:0000
2018-08-16 10:15:14 http://localhost:49412/edit_task.aspx?id=0&bugid=3 sql=

declare @project int
declare @assigned_to int
select @project = bg_project, @assigned_to = bg_assigned_to_user from bugs where bg_id = 3
/* users this project */ select us_id, case when 0 = 1 then us_lastname + ', ' + us_firstname else us_username end us_username
from users
inner join orgs on us_org = og_id
where us_active = 1
and og_can_be_assigned_to = 1
and (2 <> 0 or 1 = og_id or og_external_user = 0)
and us_id not in
    (select pu_user from project_user_xref
	    where pu_project = @project
		and pu_permission_level = 0)
order by us_username; 
select st_id, st_name from statuses order by st_sort_seq, st_name
select isnull(@assigned_to,0) 
2018-08-16 10:15:14 http://localhost:49412/edit_task.aspx?id=0&bugid=3 elapsed milliseconds:0000
2018-08-16 10:15:19 http://localhost:49412/edit_task.aspx?id=0&bugid=3 sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '16217e1c-d43b-4661-981c-712404b5e4b8';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '16217e1c-d43b-4661-981c-712404b5e4b8'
and us_active = 1
2018-08-16 10:15:19 http://localhost:49412/edit_task.aspx?id=0&bugid=3 elapsed milliseconds:0000
2018-08-16 10:15:19 http://localhost:49412/edit_task.aspx?id=0&bugid=3 sql=

declare @bg_org int

select isnull(pu_permission_level,2),
bg_org
from bugs
left outer join project_user_xref
on pu_project = bg_project
and pu_user = 1
where bg_id = 3
2018-08-16 10:15:19 http://localhost:49412/edit_task.aspx?id=0&bugid=3 elapsed milliseconds:0000
2018-08-16 10:15:19 http://localhost:49412/edit_task.aspx?id=0&bugid=3 sql=

insert into bug_tasks (
tsk_bug,
tsk_created_user,
tsk_created_date,
tsk_last_updated_user,
tsk_last_updated_date,
tsk_assigned_to_user,
tsk_planned_start_date,
tsk_actual_start_date,
tsk_planned_end_date,
tsk_actual_end_date,
tsk_planned_duration,
tsk_actual_duration,
tsk_duration_units,
tsk_percent_complete,
tsk_status,
tsk_sort_sequence,
tsk_description
)
values (
3,
1,
getdate(),
1,
getdate(),
1,
'',
'',
'',
'',
null,
null,
N'hours',
null,
0,
null,
N''
)

declare @tsk_id int
select @tsk_id = scope_identity()

insert into bug_posts
(bp_bug, bp_user, bp_date, bp_comment, bp_type)
values(3, 1, getdate(), N'added task ' + convert(varchar, @tsk_id), 'update')
2018-08-16 10:15:19 http://localhost:49412/edit_task.aspx?id=0&bugid=3 sql=

/* get notification emails for all subscribers */
select us_email, us_id, us_admin, og.*
from bug_subscriptions
inner join users on bs_user = us_id
inner join orgs og on us_org = og_id
inner join bugs on bg_id = bs_bug
left outer join project_user_xref on pu_user = us_id and pu_project = bg_project
where us_email is not null
and us_enable_notifications = 1
-- $status_change
and us_active = 1
and us_email <> ''
and (   (4 <= us_reported_notifications and bg_reported_user = bs_user)
or (4 <= us_assigned_notifications and bg_assigned_to_user = bs_user)
or (4 <= us_assigned_notifications and 0 = bs_user)
or (4 <= us_subscribed_notifications))
and
case
when
us_org <> bg_org
and og_other_orgs_permission_level < 2
and og_other_orgs_permission_level < isnull(pu_permission_level,2)
	then og_other_orgs_permission_level
else
isnull(pu_permission_level,2)
end <> 0
and bs_bug = 3
and (us_id <> 1 or isnull(us_send_notifications_to_self,0) = 1)
2018-08-16 10:15:19  started updating Lucene index using folder F:\Synced\Visual Studio 2017\Projects\temp\btnetnew\btnetnew\App_Data\lucene_index
2018-08-16 10:15:19 http://localhost:49412/edit_task.aspx?id=0&bugid=3 elapsed milliseconds:0008
2018-08-16 10:15:19  sql=

/* get searchable cols */					
select sc.name
from syscolumns sc
inner join systypes st on st.xusertype = sc.xusertype
inner join sysobjects so on sc.id = so.id
where so.name = 'bugs'
and st.[name] <> 'sysname'
and sc.name not in ('rowguid',
'bg_id',
'bg_short_desc',
'bg_reported_user',
'bg_reported_date',
'bg_project',
'bg_org',
'bg_category',
'bg_priority',
'bg_status',
'bg_assigned_to_user',
'bg_last_updated_user',
'bg_last_updated_date',
'bg_user_defined_attribute',
'bg_project_custom_dropdown_value1',
'bg_project_custom_dropdown_value2',
'bg_project_custom_dropdown_value3',
'bg_tags')
and st.[name] in ('nvarchar','varchar')
and sc.length > 30
2018-08-16 10:15:19 http://localhost:49412/tasks.aspx?bugid=3 sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '16217e1c-d43b-4661-981c-712404b5e4b8';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '16217e1c-d43b-4661-981c-712404b5e4b8'
and us_active = 1
2018-08-16 10:15:19  elapsed milliseconds:0000
2018-08-16 10:15:19 http://localhost:49412/tasks.aspx?bugid=3 elapsed milliseconds:0000
2018-08-16 10:15:19  sql=

select bg_id, 

isnull(bg_tags,'') bg_tags,
bg_short_desc    
from bugs where bg_id = 3
2018-08-16 10:15:19 http://localhost:49412/tasks.aspx?bugid=3 sql=

declare @bg_org int

select isnull(pu_permission_level,2),
bg_org
from bugs
left outer join project_user_xref
on pu_project = bg_project
and pu_user = 1
where bg_id = 3
2018-08-16 10:15:19  elapsed milliseconds:0001
2018-08-16 10:15:19 http://localhost:49412/tasks.aspx?bugid=3 elapsed milliseconds:0000
2018-08-16 10:15:19 http://localhost:49412/tasks.aspx?bugid=3 sql=
select tsk_id [id],
'<a   href=edit_task.aspx?bugid=3&id=' + convert(varchar,tsk_id) + '>edit</a>'   [$no_sort_edit],
'<a href=delete_task.aspx?ses=16217e1c-d43b-4661-981c-712404b5e4b8&bugid=3&id=' + convert(varchar,tsk_id) + '>delete</a>' [$no_sort_delete],tsk_description [description],us_username [assigned to], tsk_planned_start_date [planned start], tsk_actual_start_date [actual start], tsk_planned_end_date [planned end], tsk_actual_end_date [actual end], tsk_planned_duration [planned<br>duration], tsk_actual_duration  [actual<br>duration], tsk_duration_units [duration<br>units], tsk_percent_complete [percent<br>complete], st_name  [status], tsk_sort_sequence  [seq]
from bug_tasks 
left outer join statuses on tsk_status = st_id
left outer join users on tsk_assigned_to_user = us_id
where tsk_bug = 3 
order by tsk_sort_sequence, tsk_id
2018-08-16 10:15:19  sql=

select bp_bug, bp_id, 
isnull(bp_comment_search,bp_comment) [text] 
from bug_posts 
where bp_type <> 'update'
and bp_hidden_from_external_users = 0
and bp_bug = 3
2018-08-16 10:15:19 http://localhost:49412/tasks.aspx?bugid=3 elapsed milliseconds:0009
2018-08-16 10:15:19  elapsed milliseconds:0002
2018-08-16 10:15:19  done updating Lucene index
2018-08-16 10:15:22 http://localhost:49412/edit_task.aspx?bugid=3&id=1 sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '16217e1c-d43b-4661-981c-712404b5e4b8';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '16217e1c-d43b-4661-981c-712404b5e4b8'
and us_active = 1
2018-08-16 10:15:22 http://localhost:49412/edit_task.aspx?bugid=3&id=1 elapsed milliseconds:0000
2018-08-16 10:15:22 http://localhost:49412/edit_task.aspx?bugid=3&id=1 sql=

declare @bg_org int

select isnull(pu_permission_level,2),
bg_org
from bugs
left outer join project_user_xref
on pu_project = bg_project
and pu_user = 1
where bg_id = 3
2018-08-16 10:15:22 http://localhost:49412/edit_task.aspx?bugid=3&id=1 elapsed milliseconds:0000
2018-08-16 10:15:22 http://localhost:49412/edit_task.aspx?bugid=3&id=1 sql=

declare @project int
declare @assigned_to int
select @project = bg_project, @assigned_to = bg_assigned_to_user from bugs where bg_id = 3
/* users this project */ select us_id, case when 0 = 1 then us_lastname + ', ' + us_firstname else us_username end us_username
from users
inner join orgs on us_org = og_id
where us_active = 1
and og_can_be_assigned_to = 1
and (2 <> 0 or 1 = og_id or og_external_user = 0)
and us_id not in
    (select pu_user from project_user_xref
	    where pu_project = @project
		and pu_permission_level = 0)
order by us_username; 
select st_id, st_name from statuses order by st_sort_seq, st_name
select isnull(@assigned_to,0) 
2018-08-16 10:15:22 http://localhost:49412/edit_task.aspx?bugid=3&id=1 elapsed milliseconds:0000
2018-08-16 10:15:22 http://localhost:49412/edit_task.aspx?bugid=3&id=1 sql=

declare @project int
declare @assigned_to int
select @project = bg_project, @assigned_to = bg_assigned_to_user from bugs where bg_id = 3
/* users this project */ select us_id, case when 0 = 1 then us_lastname + ', ' + us_firstname else us_username end us_username
from users
inner join orgs on us_org = og_id
where us_active = 1
and og_can_be_assigned_to = 1
and (2 <> 0 or 1 = og_id or og_external_user = 0)
and us_id not in
    (select pu_user from project_user_xref
	    where pu_project = @project
		and pu_permission_level = 0)
order by us_username; 
select st_id, st_name from statuses order by st_sort_seq, st_name
select isnull(@assigned_to,0) 
2018-08-16 10:15:22 http://localhost:49412/edit_task.aspx?bugid=3&id=1 elapsed milliseconds:0000
2018-08-16 10:15:22 http://localhost:49412/edit_task.aspx?bugid=3&id=1 sql=
select * from bug_tasks where tsk_id = 1 and tsk_bug = 3
2018-08-16 10:15:22 http://localhost:49412/edit_task.aspx?bugid=3&id=1 elapsed milliseconds:0001
2018-08-16 10:15:44 http://localhost:49412/edit_task.aspx?bugid=3&id=1 sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '16217e1c-d43b-4661-981c-712404b5e4b8';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '16217e1c-d43b-4661-981c-712404b5e4b8'
and us_active = 1
2018-08-16 10:15:45 http://localhost:49412/edit_task.aspx?bugid=3&id=1 elapsed milliseconds:0001
2018-08-16 10:15:45 http://localhost:49412/edit_task.aspx?bugid=3&id=1 sql=

declare @bg_org int

select isnull(pu_permission_level,2),
bg_org
from bugs
left outer join project_user_xref
on pu_project = bg_project
and pu_user = 1
where bg_id = 3
2018-08-16 10:15:45 http://localhost:49412/edit_task.aspx?bugid=3&id=1 elapsed milliseconds:0000
2018-08-16 10:15:45 http://localhost:49412/edit_task.aspx?bugid=3&id=1 sql=

update bug_tasks set
tsk_last_updated_user = 1,
tsk_last_updated_date = getdate(),
tsk_assigned_to_user = 1,
tsk_planned_start_date = '20180816 09:00:00',
tsk_actual_start_date = '',
tsk_planned_end_date = '',
tsk_actual_end_date = '',
tsk_planned_duration = null,
tsk_actual_duration = null,
tsk_duration_units = N'hours',
tsk_percent_complete = null,
tsk_status = 0,
tsk_sort_sequence = null,
tsk_description = N''
where tsk_id = 1
                
insert into bug_posts
(bp_bug, bp_user, bp_date, bp_comment, bp_type)
values(3, 1, getdate(), N'updated task 1', 'update')
2018-08-16 10:15:45 http://localhost:49412/edit_task.aspx?bugid=3&id=1 sql=

/* get notification emails for all subscribers */
select us_email, us_id, us_admin, og.*
from bug_subscriptions
inner join users on bs_user = us_id
inner join orgs og on us_org = og_id
inner join bugs on bg_id = bs_bug
left outer join project_user_xref on pu_user = us_id and pu_project = bg_project
where us_email is not null
and us_enable_notifications = 1
-- $status_change
and us_active = 1
and us_email <> ''
and (   (4 <= us_reported_notifications and bg_reported_user = bs_user)
or (4 <= us_assigned_notifications and bg_assigned_to_user = bs_user)
or (4 <= us_assigned_notifications and 0 = bs_user)
or (4 <= us_subscribed_notifications))
and
case
when
us_org <> bg_org
and og_other_orgs_permission_level < 2
and og_other_orgs_permission_level < isnull(pu_permission_level,2)
	then og_other_orgs_permission_level
else
isnull(pu_permission_level,2)
end <> 0
and bs_bug = 3
and (us_id <> 1 or isnull(us_send_notifications_to_self,0) = 1)
2018-08-16 10:15:45  started updating Lucene index using folder F:\Synced\Visual Studio 2017\Projects\temp\btnetnew\btnetnew\App_Data\lucene_index
2018-08-16 10:15:45 http://localhost:49412/edit_task.aspx?bugid=3&id=1 elapsed milliseconds:0000
2018-08-16 10:15:45  sql=

/* get searchable cols */					
select sc.name
from syscolumns sc
inner join systypes st on st.xusertype = sc.xusertype
inner join sysobjects so on sc.id = so.id
where so.name = 'bugs'
and st.[name] <> 'sysname'
and sc.name not in ('rowguid',
'bg_id',
'bg_short_desc',
'bg_reported_user',
'bg_reported_date',
'bg_project',
'bg_org',
'bg_category',
'bg_priority',
'bg_status',
'bg_assigned_to_user',
'bg_last_updated_user',
'bg_last_updated_date',
'bg_user_defined_attribute',
'bg_project_custom_dropdown_value1',
'bg_project_custom_dropdown_value2',
'bg_project_custom_dropdown_value3',
'bg_tags')
and st.[name] in ('nvarchar','varchar')
and sc.length > 30
2018-08-16 10:15:45  elapsed milliseconds:0000
2018-08-16 10:15:45 http://localhost:49412/tasks.aspx?bugid=3 sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '16217e1c-d43b-4661-981c-712404b5e4b8';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '16217e1c-d43b-4661-981c-712404b5e4b8'
and us_active = 1
2018-08-16 10:15:45  sql=

select bg_id, 

isnull(bg_tags,'') bg_tags,
bg_short_desc    
from bugs where bg_id = 3
2018-08-16 10:15:45 http://localhost:49412/tasks.aspx?bugid=3 elapsed milliseconds:0000
2018-08-16 10:15:45  elapsed milliseconds:0000
2018-08-16 10:15:45 http://localhost:49412/tasks.aspx?bugid=3 sql=

declare @bg_org int

select isnull(pu_permission_level,2),
bg_org
from bugs
left outer join project_user_xref
on pu_project = bg_project
and pu_user = 1
where bg_id = 3
2018-08-16 10:15:45 http://localhost:49412/tasks.aspx?bugid=3 elapsed milliseconds:0000
2018-08-16 10:15:45 http://localhost:49412/tasks.aspx?bugid=3 sql=
select tsk_id [id],
'<a   href=edit_task.aspx?bugid=3&id=' + convert(varchar,tsk_id) + '>edit</a>'   [$no_sort_edit],
'<a href=delete_task.aspx?ses=16217e1c-d43b-4661-981c-712404b5e4b8&bugid=3&id=' + convert(varchar,tsk_id) + '>delete</a>' [$no_sort_delete],tsk_description [description],us_username [assigned to], tsk_planned_start_date [planned start], tsk_actual_start_date [actual start], tsk_planned_end_date [planned end], tsk_actual_end_date [actual end], tsk_planned_duration [planned<br>duration], tsk_actual_duration  [actual<br>duration], tsk_duration_units [duration<br>units], tsk_percent_complete [percent<br>complete], st_name  [status], tsk_sort_sequence  [seq]
from bug_tasks 
left outer join statuses on tsk_status = st_id
left outer join users on tsk_assigned_to_user = us_id
where tsk_bug = 3 
order by tsk_sort_sequence, tsk_id
2018-08-16 10:15:45  sql=

select bp_bug, bp_id, 
isnull(bp_comment_search,bp_comment) [text] 
from bug_posts 
where bp_type <> 'update'
and bp_hidden_from_external_users = 0
and bp_bug = 3
2018-08-16 10:15:45 http://localhost:49412/tasks.aspx?bugid=3 elapsed milliseconds:0000
2018-08-16 10:15:45  elapsed milliseconds:0000
2018-08-16 10:15:45  done updating Lucene index
2018-08-16 10:15:50 http://localhost:49412/delete_task.aspx?ses=16217e1c-d43b-4661-981c-712404b5e4b8&bugid=3&id=1 sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '16217e1c-d43b-4661-981c-712404b5e4b8';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '16217e1c-d43b-4661-981c-712404b5e4b8'
and us_active = 1
2018-08-16 10:15:51 http://localhost:49412/delete_task.aspx?ses=16217e1c-d43b-4661-981c-712404b5e4b8&bugid=3&id=1 elapsed milliseconds:0000
2018-08-16 10:15:51 http://localhost:49412/delete_task.aspx?ses=16217e1c-d43b-4661-981c-712404b5e4b8&bugid=3&id=1 sql=

declare @bg_org int

select isnull(pu_permission_level,2),
bg_org
from bugs
left outer join project_user_xref
on pu_project = bg_project
and pu_user = 1
where bg_id = 3
2018-08-16 10:15:51 http://localhost:49412/delete_task.aspx?ses=16217e1c-d43b-4661-981c-712404b5e4b8&bugid=3&id=1 elapsed milliseconds:0000
2018-08-16 10:15:51 http://localhost:49412/delete_task.aspx?ses=16217e1c-d43b-4661-981c-712404b5e4b8&bugid=3&id=1 sql=
select tsk_description from bug_tasks where tsk_id = 1 and tsk_bug = 3
2018-08-16 10:15:51 http://localhost:49412/delete_task.aspx?ses=16217e1c-d43b-4661-981c-712404b5e4b8&bugid=3&id=1 elapsed milliseconds:0001
2018-08-16 10:16:59 http://localhost:49412/tasks.aspx?bugid=3 sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '16217e1c-d43b-4661-981c-712404b5e4b8';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '16217e1c-d43b-4661-981c-712404b5e4b8'
and us_active = 1
2018-08-16 10:16:59 http://localhost:49412/tasks.aspx?bugid=3 elapsed milliseconds:0000
2018-08-16 10:16:59 http://localhost:49412/tasks.aspx?bugid=3 sql=

declare @bg_org int

select isnull(pu_permission_level,2),
bg_org
from bugs
left outer join project_user_xref
on pu_project = bg_project
and pu_user = 1
where bg_id = 3
2018-08-16 10:16:59 http://localhost:49412/tasks.aspx?bugid=3 elapsed milliseconds:0000
2018-08-16 10:16:59 http://localhost:49412/tasks.aspx?bugid=3 sql=
select tsk_id [id],
'<a   href=edit_task.aspx?bugid=3&id=' + convert(varchar,tsk_id) + '>edit</a>'   [$no_sort_edit],
'<a href=delete_task.aspx?ses=16217e1c-d43b-4661-981c-712404b5e4b8&bugid=3&id=' + convert(varchar,tsk_id) + '>delete</a>' [$no_sort_delete],tsk_description [description],us_username [assigned to], tsk_planned_start_date [planned start], tsk_actual_start_date [actual start], tsk_planned_end_date [planned end], tsk_actual_end_date [actual end], tsk_planned_duration [planned<br>duration], tsk_actual_duration  [actual<br>duration], tsk_duration_units [duration<br>units], tsk_percent_complete [percent<br>complete], st_name  [status], tsk_sort_sequence  [seq]
from bug_tasks 
left outer join statuses on tsk_status = st_id
left outer join users on tsk_assigned_to_user = us_id
where tsk_bug = 3 
order by tsk_sort_sequence, tsk_id
2018-08-16 10:16:59 http://localhost:49412/tasks.aspx?bugid=3 elapsed milliseconds:0000
2018-08-16 10:17:01 http://localhost:49412/delete_task.aspx?ses=16217e1c-d43b-4661-981c-712404b5e4b8&bugid=3&id=1 sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '16217e1c-d43b-4661-981c-712404b5e4b8';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '16217e1c-d43b-4661-981c-712404b5e4b8'
and us_active = 1
2018-08-16 10:17:01 http://localhost:49412/delete_task.aspx?ses=16217e1c-d43b-4661-981c-712404b5e4b8&bugid=3&id=1 elapsed milliseconds:0000
2018-08-16 10:17:01 http://localhost:49412/delete_task.aspx?ses=16217e1c-d43b-4661-981c-712404b5e4b8&bugid=3&id=1 sql=

declare @bg_org int

select isnull(pu_permission_level,2),
bg_org
from bugs
left outer join project_user_xref
on pu_project = bg_project
and pu_user = 1
where bg_id = 3
2018-08-16 10:17:01 http://localhost:49412/delete_task.aspx?ses=16217e1c-d43b-4661-981c-712404b5e4b8&bugid=3&id=1 elapsed milliseconds:0000
2018-08-16 10:17:01 http://localhost:49412/delete_task.aspx?ses=16217e1c-d43b-4661-981c-712404b5e4b8&bugid=3&id=1 sql=
select tsk_description from bug_tasks where tsk_id = 1 and tsk_bug = 3
2018-08-16 10:17:01 http://localhost:49412/delete_task.aspx?ses=16217e1c-d43b-4661-981c-712404b5e4b8&bugid=3&id=1 elapsed milliseconds:0000
2018-08-16 10:17:03 http://localhost:49412/delete_task.aspx?ses=16217e1c-d43b-4661-981c-712404b5e4b8&bugid=3&id=1 sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '16217e1c-d43b-4661-981c-712404b5e4b8';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '16217e1c-d43b-4661-981c-712404b5e4b8'
and us_active = 1
2018-08-16 10:17:03 http://localhost:49412/delete_task.aspx?ses=16217e1c-d43b-4661-981c-712404b5e4b8&bugid=3&id=1 elapsed milliseconds:0000
2018-08-16 10:17:03 http://localhost:49412/delete_task.aspx?ses=16217e1c-d43b-4661-981c-712404b5e4b8&bugid=3&id=1 sql=

declare @bg_org int

select isnull(pu_permission_level,2),
bg_org
from bugs
left outer join project_user_xref
on pu_project = bg_project
and pu_user = 1
where bg_id = 3
2018-08-16 10:17:03 http://localhost:49412/delete_task.aspx?ses=16217e1c-d43b-4661-981c-712404b5e4b8&bugid=3&id=1 elapsed milliseconds:0000
2018-08-16 10:17:03 http://localhost:49412/delete_task.aspx?ses=16217e1c-d43b-4661-981c-712404b5e4b8&bugid=3&id=1 sql=
delete bug_tasks where tsk_id = 1 and tsk_bug = 3
2018-08-16 10:17:03 http://localhost:49412/tasks.aspx?bugid=3 sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '16217e1c-d43b-4661-981c-712404b5e4b8';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '16217e1c-d43b-4661-981c-712404b5e4b8'
and us_active = 1
2018-08-16 10:17:03 http://localhost:49412/tasks.aspx?bugid=3 elapsed milliseconds:0000
2018-08-16 10:17:03 http://localhost:49412/tasks.aspx?bugid=3 sql=

declare @bg_org int

select isnull(pu_permission_level,2),
bg_org
from bugs
left outer join project_user_xref
on pu_project = bg_project
and pu_user = 1
where bg_id = 3
2018-08-16 10:17:03 http://localhost:49412/tasks.aspx?bugid=3 elapsed milliseconds:0000
2018-08-16 10:17:03 http://localhost:49412/tasks.aspx?bugid=3 sql=
select tsk_id [id],
'<a   href=edit_task.aspx?bugid=3&id=' + convert(varchar,tsk_id) + '>edit</a>'   [$no_sort_edit],
'<a href=delete_task.aspx?ses=16217e1c-d43b-4661-981c-712404b5e4b8&bugid=3&id=' + convert(varchar,tsk_id) + '>delete</a>' [$no_sort_delete],tsk_description [description],us_username [assigned to], tsk_planned_start_date [planned start], tsk_actual_start_date [actual start], tsk_planned_end_date [planned end], tsk_actual_end_date [actual end], tsk_planned_duration [planned<br>duration], tsk_actual_duration  [actual<br>duration], tsk_duration_units [duration<br>units], tsk_percent_complete [percent<br>complete], st_name  [status], tsk_sort_sequence  [seq]
from bug_tasks 
left outer join statuses on tsk_status = st_id
left outer join users on tsk_assigned_to_user = us_id
where tsk_bug = 3 
order by tsk_sort_sequence, tsk_id
2018-08-16 10:17:03 http://localhost:49412/tasks.aspx?bugid=3 elapsed milliseconds:0000
2018-08-16 10:17:05 http://localhost:49412/edit_task.aspx?id=0&bugid=3 sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '16217e1c-d43b-4661-981c-712404b5e4b8';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '16217e1c-d43b-4661-981c-712404b5e4b8'
and us_active = 1
2018-08-16 10:17:05 http://localhost:49412/edit_task.aspx?id=0&bugid=3 elapsed milliseconds:0000
2018-08-16 10:17:05 http://localhost:49412/edit_task.aspx?id=0&bugid=3 sql=

declare @bg_org int

select isnull(pu_permission_level,2),
bg_org
from bugs
left outer join project_user_xref
on pu_project = bg_project
and pu_user = 1
where bg_id = 3
2018-08-16 10:17:05 http://localhost:49412/edit_task.aspx?id=0&bugid=3 elapsed milliseconds:0000
2018-08-16 10:17:05 http://localhost:49412/edit_task.aspx?id=0&bugid=3 sql=

declare @project int
declare @assigned_to int
select @project = bg_project, @assigned_to = bg_assigned_to_user from bugs where bg_id = 3
/* users this project */ select us_id, case when 0 = 1 then us_lastname + ', ' + us_firstname else us_username end us_username
from users
inner join orgs on us_org = og_id
where us_active = 1
and og_can_be_assigned_to = 1
and (2 <> 0 or 1 = og_id or og_external_user = 0)
and us_id not in
    (select pu_user from project_user_xref
	    where pu_project = @project
		and pu_permission_level = 0)
order by us_username; 
select st_id, st_name from statuses order by st_sort_seq, st_name
select isnull(@assigned_to,0) 
2018-08-16 10:17:06 http://localhost:49412/edit_task.aspx?id=0&bugid=3 elapsed milliseconds:0000
2018-08-16 10:17:06 http://localhost:49412/edit_task.aspx?id=0&bugid=3 sql=

declare @project int
declare @assigned_to int
select @project = bg_project, @assigned_to = bg_assigned_to_user from bugs where bg_id = 3
/* users this project */ select us_id, case when 0 = 1 then us_lastname + ', ' + us_firstname else us_username end us_username
from users
inner join orgs on us_org = og_id
where us_active = 1
and og_can_be_assigned_to = 1
and (2 <> 0 or 1 = og_id or og_external_user = 0)
and us_id not in
    (select pu_user from project_user_xref
	    where pu_project = @project
		and pu_permission_level = 0)
order by us_username; 
select st_id, st_name from statuses order by st_sort_seq, st_name
select isnull(@assigned_to,0) 
2018-08-16 10:17:06 http://localhost:49412/edit_task.aspx?id=0&bugid=3 elapsed milliseconds:0000
2018-08-16 10:17:06 http://localhost:49412/edit_task.aspx?id=0&bugid=3 sql=

declare @project int
declare @assigned_to int
select @project = bg_project, @assigned_to = bg_assigned_to_user from bugs where bg_id = 3
/* users this project */ select us_id, case when 0 = 1 then us_lastname + ', ' + us_firstname else us_username end us_username
from users
inner join orgs on us_org = og_id
where us_active = 1
and og_can_be_assigned_to = 1
and (2 <> 0 or 1 = og_id or og_external_user = 0)
and us_id not in
    (select pu_user from project_user_xref
	    where pu_project = @project
		and pu_permission_level = 0)
order by us_username; 
select st_id, st_name from statuses order by st_sort_seq, st_name
select isnull(@assigned_to,0) 
2018-08-16 10:17:06 http://localhost:49412/edit_task.aspx?id=0&bugid=3 elapsed milliseconds:0000
2018-08-16 10:17:31 http://localhost:49412/edit_task.aspx?id=0&bugid=3 sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '16217e1c-d43b-4661-981c-712404b5e4b8';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '16217e1c-d43b-4661-981c-712404b5e4b8'
and us_active = 1
2018-08-16 10:17:32 http://localhost:49412/edit_task.aspx?id=0&bugid=3 elapsed milliseconds:0000
2018-08-16 10:17:32 http://localhost:49412/edit_task.aspx?id=0&bugid=3 sql=

declare @bg_org int

select isnull(pu_permission_level,2),
bg_org
from bugs
left outer join project_user_xref
on pu_project = bg_project
and pu_user = 1
where bg_id = 3
2018-08-16 10:17:32 http://localhost:49412/edit_task.aspx?id=0&bugid=3 elapsed milliseconds:0000
2018-08-16 10:17:32 http://localhost:49412/edit_task.aspx?id=0&bugid=3 sql=

insert into bug_tasks (
tsk_bug,
tsk_created_user,
tsk_created_date,
tsk_last_updated_user,
tsk_last_updated_date,
tsk_assigned_to_user,
tsk_planned_start_date,
tsk_actual_start_date,
tsk_planned_end_date,
tsk_actual_end_date,
tsk_planned_duration,
tsk_actual_duration,
tsk_duration_units,
tsk_percent_complete,
tsk_status,
tsk_sort_sequence,
tsk_description
)
values (
3,
1,
getdate(),
1,
getdate(),
1,
'20180816 09:00:00',
'',
'20180817 09:00:00',
'',
1,
null,
N'hours',
null,
2,
null,
N'complete all'
)

declare @tsk_id int
select @tsk_id = scope_identity()

insert into bug_posts
(bp_bug, bp_user, bp_date, bp_comment, bp_type)
values(3, 1, getdate(), N'added task ' + convert(varchar, @tsk_id), 'update')
2018-08-16 10:17:32 http://localhost:49412/edit_task.aspx?id=0&bugid=3 sql=

/* get notification emails for all subscribers */
select us_email, us_id, us_admin, og.*
from bug_subscriptions
inner join users on bs_user = us_id
inner join orgs og on us_org = og_id
inner join bugs on bg_id = bs_bug
left outer join project_user_xref on pu_user = us_id and pu_project = bg_project
where us_email is not null
and us_enable_notifications = 1
-- $status_change
and us_active = 1
and us_email <> ''
and (   (4 <= us_reported_notifications and bg_reported_user = bs_user)
or (4 <= us_assigned_notifications and bg_assigned_to_user = bs_user)
or (4 <= us_assigned_notifications and 0 = bs_user)
or (4 <= us_subscribed_notifications))
and
case
when
us_org <> bg_org
and og_other_orgs_permission_level < 2
and og_other_orgs_permission_level < isnull(pu_permission_level,2)
	then og_other_orgs_permission_level
else
isnull(pu_permission_level,2)
end <> 0
and bs_bug = 3
and (us_id <> 1 or isnull(us_send_notifications_to_self,0) = 1)
2018-08-16 10:17:32  started updating Lucene index using folder F:\Synced\Visual Studio 2017\Projects\temp\btnetnew\btnetnew\App_Data\lucene_index
2018-08-16 10:17:32 http://localhost:49412/edit_task.aspx?id=0&bugid=3 elapsed milliseconds:0000
2018-08-16 10:17:32  sql=

/* get searchable cols */					
select sc.name
from syscolumns sc
inner join systypes st on st.xusertype = sc.xusertype
inner join sysobjects so on sc.id = so.id
where so.name = 'bugs'
and st.[name] <> 'sysname'
and sc.name not in ('rowguid',
'bg_id',
'bg_short_desc',
'bg_reported_user',
'bg_reported_date',
'bg_project',
'bg_org',
'bg_category',
'bg_priority',
'bg_status',
'bg_assigned_to_user',
'bg_last_updated_user',
'bg_last_updated_date',
'bg_user_defined_attribute',
'bg_project_custom_dropdown_value1',
'bg_project_custom_dropdown_value2',
'bg_project_custom_dropdown_value3',
'bg_tags')
and st.[name] in ('nvarchar','varchar')
and sc.length > 30
2018-08-16 10:17:32 http://localhost:49412/tasks.aspx?bugid=3 sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '16217e1c-d43b-4661-981c-712404b5e4b8';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '16217e1c-d43b-4661-981c-712404b5e4b8'
and us_active = 1
2018-08-16 10:17:32  elapsed milliseconds:0000
2018-08-16 10:17:32 http://localhost:49412/tasks.aspx?bugid=3 elapsed milliseconds:0000
2018-08-16 10:17:32  sql=

select bg_id, 

isnull(bg_tags,'') bg_tags,
bg_short_desc    
from bugs where bg_id = 3
2018-08-16 10:17:32 http://localhost:49412/tasks.aspx?bugid=3 sql=

declare @bg_org int

select isnull(pu_permission_level,2),
bg_org
from bugs
left outer join project_user_xref
on pu_project = bg_project
and pu_user = 1
where bg_id = 3
2018-08-16 10:17:32  elapsed milliseconds:0000
2018-08-16 10:17:32 http://localhost:49412/tasks.aspx?bugid=3 elapsed milliseconds:0000
2018-08-16 10:17:32 http://localhost:49412/tasks.aspx?bugid=3 sql=
select tsk_id [id],
'<a   href=edit_task.aspx?bugid=3&id=' + convert(varchar,tsk_id) + '>edit</a>'   [$no_sort_edit],
'<a href=delete_task.aspx?ses=16217e1c-d43b-4661-981c-712404b5e4b8&bugid=3&id=' + convert(varchar,tsk_id) + '>delete</a>' [$no_sort_delete],tsk_description [description],us_username [assigned to], tsk_planned_start_date [planned start], tsk_actual_start_date [actual start], tsk_planned_end_date [planned end], tsk_actual_end_date [actual end], tsk_planned_duration [planned<br>duration], tsk_actual_duration  [actual<br>duration], tsk_duration_units [duration<br>units], tsk_percent_complete [percent<br>complete], st_name  [status], tsk_sort_sequence  [seq]
from bug_tasks 
left outer join statuses on tsk_status = st_id
left outer join users on tsk_assigned_to_user = us_id
where tsk_bug = 3 
order by tsk_sort_sequence, tsk_id
2018-08-16 10:17:32  sql=

select bp_bug, bp_id, 
isnull(bp_comment_search,bp_comment) [text] 
from bug_posts 
where bp_type <> 'update'
and bp_hidden_from_external_users = 0
and bp_bug = 3
2018-08-16 10:17:32 http://localhost:49412/tasks.aspx?bugid=3 elapsed milliseconds:0001
2018-08-16 10:17:32  elapsed milliseconds:0000
2018-08-16 10:17:32  done updating Lucene index
2018-08-16 10:17:36 http://localhost:49412/tasks_all.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '16217e1c-d43b-4661-981c-712404b5e4b8';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '16217e1c-d43b-4661-981c-712404b5e4b8'
and us_active = 1
2018-08-16 10:17:36 http://localhost:49412/tasks_all.aspx elapsed milliseconds:0000
2018-08-16 10:17:36 http://localhost:49412/tasks_all.aspx sql=
select 
bg_id as [id], 
bg_short_desc as [description], 
pj_name as [project], 
ct_name as [category], 
bug_statuses.st_name as [status],  
bug_users.us_username as [assigned to],tsk_id [task<br>id], tsk_description [task<br>description] , task_users.us_username [task<br>assigned to], tsk_planned_start_date [planned start], tsk_actual_start_date [actual start], tsk_planned_end_date [planned end], tsk_actual_end_date [actual end], tsk_planned_duration [planned<br>duration], tsk_actual_duration  [actual<br>duration], tsk_duration_units [duration<br>units], tsk_percent_complete [percent<br>complete], task_statuses.st_name  [task<br>status], tsk_sort_sequence  [seq]
from bug_tasks 
inner join bugs on tsk_bug = bg_id
left outer join projects on bg_project = pj_id
left outer join categories on bg_category = ct_id
left outer join statuses bug_statuses on bg_status = bug_statuses.st_id
left outer join statuses task_statuses on tsk_status = task_statuses.st_id
left outer join users bug_users on bg_assigned_to_user = bug_users.us_id
left outer join users task_users on tsk_assigned_to_user = task_users.us_id
where tsk_bug in 
(select bg_id from bugs /* altered - neither */ WHERE  (bugs.bg_project not in (
					select pu_project
					from project_user_xref
					where pu_user = 1
					and pu_permission_level = 0)) 
)
order by tsk_sort_sequence, tsk_id
2018-08-16 10:17:36 http://localhost:49412/tasks_all.aspx elapsed milliseconds:0011
2018-08-16 10:18:52 http://localhost:49412/tasks_all.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '16217e1c-d43b-4661-981c-712404b5e4b8';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '16217e1c-d43b-4661-981c-712404b5e4b8'
and us_active = 1
2018-08-16 10:18:52 http://localhost:49412/tasks_all.aspx elapsed milliseconds:0000
2018-08-16 10:18:52 http://localhost:49412/tasks_all.aspx sql=
select 
bg_id as [id], 
bg_short_desc as [description], 
pj_name as [project], 
ct_name as [category], 
bug_statuses.st_name as [status],  
bug_users.us_username as [assigned to],tsk_id [task<br>id], tsk_description [task<br>description] , task_users.us_username [task<br>assigned to], tsk_planned_start_date [planned start], tsk_actual_start_date [actual start], tsk_planned_end_date [planned end], tsk_actual_end_date [actual end], tsk_planned_duration [planned<br>duration], tsk_actual_duration  [actual<br>duration], tsk_duration_units [duration<br>units], tsk_percent_complete [percent<br>complete], task_statuses.st_name  [task<br>status], tsk_sort_sequence  [seq]
from bug_tasks 
inner join bugs on tsk_bug = bg_id
left outer join projects on bg_project = pj_id
left outer join categories on bg_category = ct_id
left outer join statuses bug_statuses on bg_status = bug_statuses.st_id
left outer join statuses task_statuses on tsk_status = task_statuses.st_id
left outer join users bug_users on bg_assigned_to_user = bug_users.us_id
left outer join users task_users on tsk_assigned_to_user = task_users.us_id
where tsk_bug in 
(select bg_id from bugs /* altered - neither */ WHERE  (bugs.bg_project not in (
					select pu_project
					from project_user_xref
					where pu_user = 1
					and pu_permission_level = 0)) 
)
order by tsk_sort_sequence, tsk_id
2018-08-16 10:18:52 http://localhost:49412/tasks_all.aspx elapsed milliseconds:0000
2018-08-16 10:19:08 http://localhost:49412/tasks_all_excel.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '16217e1c-d43b-4661-981c-712404b5e4b8';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '16217e1c-d43b-4661-981c-712404b5e4b8'
and us_active = 1
2018-08-16 10:19:08 http://localhost:49412/tasks_all_excel.aspx elapsed milliseconds:0000
2018-08-16 10:19:08 http://localhost:49412/tasks_all_excel.aspx sql=
select 
bg_id as [id], 
bg_short_desc as [description], 
pj_name as [project], 
ct_name as [category], 
bug_statuses.st_name as [status],  
bug_users.us_username as [assigned to],tsk_id [task<br>id], tsk_description [task<br>description] , task_users.us_username [task<br>assigned to], tsk_planned_start_date [planned start], tsk_actual_start_date [actual start], tsk_planned_end_date [planned end], tsk_actual_end_date [actual end], tsk_planned_duration [planned<br>duration], tsk_actual_duration  [actual<br>duration], tsk_duration_units [duration<br>units], tsk_percent_complete [percent<br>complete], task_statuses.st_name  [task<br>status], tsk_sort_sequence  [seq]
from bug_tasks 
inner join bugs on tsk_bug = bg_id
left outer join projects on bg_project = pj_id
left outer join categories on bg_category = ct_id
left outer join statuses bug_statuses on bg_status = bug_statuses.st_id
left outer join statuses task_statuses on tsk_status = task_statuses.st_id
left outer join users bug_users on bg_assigned_to_user = bug_users.us_id
left outer join users task_users on tsk_assigned_to_user = task_users.us_id
where tsk_bug in 
(select bg_id from bugs /* altered - neither */ WHERE  (bugs.bg_project not in (
					select pu_project
					from project_user_xref
					where pu_user = 1
					and pu_permission_level = 0)) 
)
order by tsk_sort_sequence, tsk_id
2018-08-16 10:19:08 http://localhost:49412/tasks_all_excel.aspx elapsed milliseconds:0000
2018-08-16 10:19:20 http://localhost:49412/edit_task.aspx?id=0&bugid=3 sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '16217e1c-d43b-4661-981c-712404b5e4b8';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '16217e1c-d43b-4661-981c-712404b5e4b8'
and us_active = 1
2018-08-16 10:19:20 http://localhost:49412/edit_task.aspx?id=0&bugid=3 elapsed milliseconds:0000
2018-08-16 10:19:20 http://localhost:49412/edit_task.aspx?id=0&bugid=3 sql=

declare @bg_org int

select isnull(pu_permission_level,2),
bg_org
from bugs
left outer join project_user_xref
on pu_project = bg_project
and pu_user = 1
where bg_id = 3
2018-08-16 10:19:20 http://localhost:49412/edit_task.aspx?id=0&bugid=3 elapsed milliseconds:0000
2018-08-16 10:19:20 http://localhost:49412/edit_task.aspx?id=0&bugid=3 sql=

declare @project int
declare @assigned_to int
select @project = bg_project, @assigned_to = bg_assigned_to_user from bugs where bg_id = 3
/* users this project */ select us_id, case when 0 = 1 then us_lastname + ', ' + us_firstname else us_username end us_username
from users
inner join orgs on us_org = og_id
where us_active = 1
and og_can_be_assigned_to = 1
and (2 <> 0 or 1 = og_id or og_external_user = 0)
and us_id not in
    (select pu_user from project_user_xref
	    where pu_project = @project
		and pu_permission_level = 0)
order by us_username; 
select st_id, st_name from statuses order by st_sort_seq, st_name
select isnull(@assigned_to,0) 
2018-08-16 10:19:20 http://localhost:49412/edit_task.aspx?id=0&bugid=3 elapsed milliseconds:0000
2018-08-16 10:19:20 http://localhost:49412/edit_task.aspx?id=0&bugid=3 sql=

declare @project int
declare @assigned_to int
select @project = bg_project, @assigned_to = bg_assigned_to_user from bugs where bg_id = 3
/* users this project */ select us_id, case when 0 = 1 then us_lastname + ', ' + us_firstname else us_username end us_username
from users
inner join orgs on us_org = og_id
where us_active = 1
and og_can_be_assigned_to = 1
and (2 <> 0 or 1 = og_id or og_external_user = 0)
and us_id not in
    (select pu_user from project_user_xref
	    where pu_project = @project
		and pu_permission_level = 0)
order by us_username; 
select st_id, st_name from statuses order by st_sort_seq, st_name
select isnull(@assigned_to,0) 
2018-08-16 10:19:20 http://localhost:49412/edit_task.aspx?id=0&bugid=3 elapsed milliseconds:0000
2018-08-16 10:19:20 http://localhost:49412/edit_task.aspx?id=0&bugid=3 sql=

declare @project int
declare @assigned_to int
select @project = bg_project, @assigned_to = bg_assigned_to_user from bugs where bg_id = 3
/* users this project */ select us_id, case when 0 = 1 then us_lastname + ', ' + us_firstname else us_username end us_username
from users
inner join orgs on us_org = og_id
where us_active = 1
and og_can_be_assigned_to = 1
and (2 <> 0 or 1 = og_id or og_external_user = 0)
and us_id not in
    (select pu_user from project_user_xref
	    where pu_project = @project
		and pu_permission_level = 0)
order by us_username; 
select st_id, st_name from statuses order by st_sort_seq, st_name
select isnull(@assigned_to,0) 
2018-08-16 10:19:20 http://localhost:49412/edit_task.aspx?id=0&bugid=3 elapsed milliseconds:0000
2018-08-16 10:19:40 http://localhost:49412/tasks.aspx?bugid=3 sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '16217e1c-d43b-4661-981c-712404b5e4b8';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '16217e1c-d43b-4661-981c-712404b5e4b8'
and us_active = 1
2018-08-16 10:19:40 http://localhost:49412/tasks.aspx?bugid=3 elapsed milliseconds:0000
2018-08-16 10:19:40 http://localhost:49412/tasks.aspx?bugid=3 sql=

declare @bg_org int

select isnull(pu_permission_level,2),
bg_org
from bugs
left outer join project_user_xref
on pu_project = bg_project
and pu_user = 1
where bg_id = 3
2018-08-16 10:19:40 http://localhost:49412/tasks.aspx?bugid=3 elapsed milliseconds:0000
2018-08-16 10:19:40 http://localhost:49412/tasks.aspx?bugid=3 sql=
select tsk_id [id],
'<a   href=edit_task.aspx?bugid=3&id=' + convert(varchar,tsk_id) + '>edit</a>'   [$no_sort_edit],
'<a href=delete_task.aspx?ses=16217e1c-d43b-4661-981c-712404b5e4b8&bugid=3&id=' + convert(varchar,tsk_id) + '>delete</a>' [$no_sort_delete],tsk_description [description],us_username [assigned to], tsk_planned_start_date [planned start], tsk_actual_start_date [actual start], tsk_planned_end_date [planned end], tsk_actual_end_date [actual end], tsk_planned_duration [planned<br>duration], tsk_actual_duration  [actual<br>duration], tsk_duration_units [duration<br>units], tsk_percent_complete [percent<br>complete], st_name  [status], tsk_sort_sequence  [seq]
from bug_tasks 
left outer join statuses on tsk_status = st_id
left outer join users on tsk_assigned_to_user = us_id
where tsk_bug = 3 
order by tsk_sort_sequence, tsk_id
2018-08-16 10:19:40 http://localhost:49412/tasks.aspx?bugid=3 elapsed milliseconds:0000
2018-08-16 10:19:46 http://localhost:49412/edit_bug.aspx?id=3 sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '16217e1c-d43b-4661-981c-712404b5e4b8';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '16217e1c-d43b-4661-981c-712404b5e4b8'
and us_active = 1
2018-08-16 10:19:46 http://localhost:49412/edit_bug.aspx?id=3 elapsed milliseconds:0000
2018-08-16 10:19:46 http://localhost:49412/edit_bug.aspx?id=3 sql=
 /* get_bug_datarow */
declare @svn_revisions int
declare @git_commits int
declare @hg_revisions int
declare @tasks int
declare @related int;
set @svn_revisions = 0
set @git_commits = 0
set @hg_revisions = 0
set @tasks = 0
set @related = 0
select @tasks = count(1)
from bug_tasks
where tsk_bug = 3;

select bg_id [id],
bg_short_desc [short_desc],
isnull(bg_tags,'') [bg_tags],
isnull(ru.us_username,'[deleted user]') [reporter],
isnull(ru.us_email,'') [reporter_email],
case rtrim(ru.us_firstname)
	when null then isnull(ru.us_lastname, '')
	when '' then isnull(ru.us_lastname, '')
	else isnull(ru.us_lastname + ', ' + ru.us_firstname,'')
	end [reporter_fullname],
bg_reported_date [reported_date],
datediff(s,bg_reported_date,getdate()) [seconds_ago],
isnull(lu.us_username,'') [last_updated_user],
case rtrim(lu.us_firstname)
	when null then isnull(lu.us_lastname, '')
	when '' then isnull(lu.us_lastname, '')
	else isnull(lu.us_lastname + ', ' + lu.us_firstname,'')
	end [last_updated_fullname],


bg_last_updated_date [last_updated_date],
isnull(bg_project,0) [project],
isnull(pj_name,'[no project]') [current_project],

isnull(bg_org,0) [organization],
isnull(bugorg.og_name,'') [og_name],

isnull(bg_category,0) [category],
isnull(ct_name,'') [category_name],

isnull(bg_priority,0) [priority],
isnull(pr_name,'') [priority_name],

isnull(bg_status,0) [status],
isnull(st_name,'') [status_name],

isnull(bg_user_defined_attribute,0) [udf],
isnull(udf_name,'') [udf_name],

isnull(bg_assigned_to_user,0) [assigned_to_user],
isnull(asg.us_username,'[not assigned]') [assigned_to_username],
case rtrim(asg.us_firstname)
when null then isnull(asg.us_lastname, '[not assigned]')
when '' then isnull(asg.us_lastname, '[not assigned]')
else isnull(asg.us_lastname + ', ' + asg.us_firstname,'[not assigned]')
end [assigned_to_fullname],

isnull(bs_user,0) [subscribed],

case
when
	1 <> bg_org
	and userorg.og_other_orgs_permission_level < 2
	and userorg.og_other_orgs_permission_level < isnull(pu_permission_level,2)
		then userorg.og_other_orgs_permission_level
else
	isnull(pu_permission_level,2)
end [pu_permission_level],

isnull(bg_project_custom_dropdown_value1,'') [bg_project_custom_dropdown_value1],
isnull(bg_project_custom_dropdown_value2,'') [bg_project_custom_dropdown_value2],
isnull(bg_project_custom_dropdown_value3,'') [bg_project_custom_dropdown_value3],
@related [relationship_cnt],
@svn_revisions [svn_revision_cnt],
@git_commits [git_commit_cnt],
@hg_revisions [hg_commit_cnt],
@tasks [task_cnt],
getdate() [snapshot_timestamp]
,[test],[drop1]
from bugs
inner join users this_user on us_id = 1
inner join orgs userorg on this_user.us_org = userorg.og_id
left outer join user_defined_attribute on bg_user_defined_attribute = udf_id
left outer join projects on bg_project = pj_id
left outer join orgs bugorg on bg_org = bugorg.og_id
left outer join categories on bg_category = ct_id
left outer join priorities on bg_priority = pr_id
left outer join statuses on bg_status = st_id
left outer join users asg on bg_assigned_to_user = asg.us_id
left outer join users ru on bg_reported_user = ru.us_id
left outer join users lu on bg_last_updated_user = lu.us_id
left outer join bug_subscriptions on bs_bug = bg_id and bs_user = 1
left outer join project_user_xref on pj_id = pu_project
and pu_user = 1
where bg_id = 3
2018-08-16 10:19:46 http://localhost:49412/edit_bug.aspx?id=3 elapsed milliseconds:0000
2018-08-16 10:19:46 http://localhost:49412/edit_bug.aspx?id=3 sql=
/* drop downs */ select pj_id, pj_name
		from projects
		left outer join project_user_xref on pj_id = pu_project
		and pu_user = 1
		where pj_active = 1
		and isnull(pu_permission_level,2) not in (0, 1)
		order by pj_name;
select og_id, og_name from orgs where og_active = 1 order by og_name;
select ct_id, ct_name from categories order by ct_sort_seq, ct_name;
select pr_id, pr_name from priorities order by pr_sort_seq, pr_name;
select st_id, st_name from statuses order by st_sort_seq, st_name;
select udf_id, udf_name from user_defined_attribute order by udf_sort_seq, udf_name;
2018-08-16 10:19:46 http://localhost:49412/edit_bug.aspx?id=3 elapsed milliseconds:0000
2018-08-16 10:19:46 http://localhost:49412/edit_bug.aspx?id=3 sql=

/* users this project */ select us_id, case when 0 = 1 then us_lastname + ', ' + us_firstname else us_username end us_username
from users
inner join orgs on us_org = og_id
where us_active = 1
and og_can_be_assigned_to = 1
and (2 <> 0 or 1 = og_id or (og_external_user = 0 and 1 = 1))
and us_id not in
	(select pu_user from project_user_xref
		where pu_project = 0
		and pu_permission_level = 0)
order by us_username; 
2018-08-16 10:19:46 http://localhost:49412/edit_bug.aspx?id=3 elapsed milliseconds:0000
2018-08-16 10:19:46 http://localhost:49412/edit_bug.aspx?id=3 sql=

/* get_bug_posts */
select
a.bp_bug,
a.bp_comment,
isnull(us_username,'') [us_username],
case rtrim(us_firstname)
	when null then isnull(us_lastname, '')
	when '' then isnull(us_lastname, '')
	else isnull(us_lastname + ', ' + us_firstname,'')
	end [us_fullname],
isnull(us_email,'') [us_email],
a.bp_date,
datediff(s,a.bp_date,getdate()) [seconds_ago],
a.bp_id,
a.bp_type,
isnull(a.bp_email_from,'') bp_email_from,
isnull(a.bp_email_to,'') bp_email_to,
isnull(a.bp_email_cc,'') bp_email_cc,
isnull(a.bp_file,'') bp_file,
isnull(a.bp_size,0) bp_size,
isnull(a.bp_content_type,'') bp_content_type,
a.bp_hidden_from_external_users,
isnull(ba.bp_file,'') ba_file,  -- intentionally ba
isnull(ba.bp_id,'') ba_id, -- intentionally ba
isnull(ba.bp_size,'') ba_size,  -- intentionally ba
isnull(ba.bp_content_type,'') ba_content_type -- intentionally ba
from bug_posts a
left outer join users on us_id = a.bp_user
left outer join bug_posts ba on ba.bp_parent = a.bp_id and ba.bp_bug = a.bp_bug
where a.bp_bug = 3
and a.bp_parent is null
 order by a.bp_id desc, ba.bp_parent, ba.bp_id
2018-08-16 10:19:46 http://localhost:49412/edit_bug.aspx?id=3 elapsed milliseconds:0000
2018-08-16 10:19:51 http://localhost:49412/tasks.aspx?bugid=3 sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '16217e1c-d43b-4661-981c-712404b5e4b8';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '16217e1c-d43b-4661-981c-712404b5e4b8'
and us_active = 1
2018-08-16 10:19:51 http://localhost:49412/tasks.aspx?bugid=3 elapsed milliseconds:0000
2018-08-16 10:19:51 http://localhost:49412/tasks.aspx?bugid=3 sql=

declare @bg_org int

select isnull(pu_permission_level,2),
bg_org
from bugs
left outer join project_user_xref
on pu_project = bg_project
and pu_user = 1
where bg_id = 3
2018-08-16 10:19:51 http://localhost:49412/tasks.aspx?bugid=3 elapsed milliseconds:0000
2018-08-16 10:19:51 http://localhost:49412/tasks.aspx?bugid=3 sql=
select tsk_id [id],
'<a   href=edit_task.aspx?bugid=3&id=' + convert(varchar,tsk_id) + '>edit</a>'   [$no_sort_edit],
'<a href=delete_task.aspx?ses=16217e1c-d43b-4661-981c-712404b5e4b8&bugid=3&id=' + convert(varchar,tsk_id) + '>delete</a>' [$no_sort_delete],tsk_description [description],us_username [assigned to], tsk_planned_start_date [planned start], tsk_actual_start_date [actual start], tsk_planned_end_date [planned end], tsk_actual_end_date [actual end], tsk_planned_duration [planned<br>duration], tsk_actual_duration  [actual<br>duration], tsk_duration_units [duration<br>units], tsk_percent_complete [percent<br>complete], st_name  [status], tsk_sort_sequence  [seq]
from bug_tasks 
left outer join statuses on tsk_status = st_id
left outer join users on tsk_assigned_to_user = us_id
where tsk_bug = 3 
order by tsk_sort_sequence, tsk_id
2018-08-16 10:19:51 http://localhost:49412/tasks.aspx?bugid=3 elapsed milliseconds:0000
2018-08-16 10:20:40 http://localhost:49412/edit_bug.aspx?id=2 sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '16217e1c-d43b-4661-981c-712404b5e4b8';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '16217e1c-d43b-4661-981c-712404b5e4b8'
and us_active = 1
2018-08-16 10:20:40 http://localhost:49412/edit_bug.aspx?id=2 elapsed milliseconds:0000
2018-08-16 10:20:40 http://localhost:49412/edit_bug.aspx?id=2 sql=
 /* get_bug_datarow */
declare @svn_revisions int
declare @git_commits int
declare @hg_revisions int
declare @tasks int
declare @related int;
set @svn_revisions = 0
set @git_commits = 0
set @hg_revisions = 0
set @tasks = 0
set @related = 0
select @tasks = count(1)
from bug_tasks
where tsk_bug = 2;

select bg_id [id],
bg_short_desc [short_desc],
isnull(bg_tags,'') [bg_tags],
isnull(ru.us_username,'[deleted user]') [reporter],
isnull(ru.us_email,'') [reporter_email],
case rtrim(ru.us_firstname)
	when null then isnull(ru.us_lastname, '')
	when '' then isnull(ru.us_lastname, '')
	else isnull(ru.us_lastname + ', ' + ru.us_firstname,'')
	end [reporter_fullname],
bg_reported_date [reported_date],
datediff(s,bg_reported_date,getdate()) [seconds_ago],
isnull(lu.us_username,'') [last_updated_user],
case rtrim(lu.us_firstname)
	when null then isnull(lu.us_lastname, '')
	when '' then isnull(lu.us_lastname, '')
	else isnull(lu.us_lastname + ', ' + lu.us_firstname,'')
	end [last_updated_fullname],


bg_last_updated_date [last_updated_date],
isnull(bg_project,0) [project],
isnull(pj_name,'[no project]') [current_project],

isnull(bg_org,0) [organization],
isnull(bugorg.og_name,'') [og_name],

isnull(bg_category,0) [category],
isnull(ct_name,'') [category_name],

isnull(bg_priority,0) [priority],
isnull(pr_name,'') [priority_name],

isnull(bg_status,0) [status],
isnull(st_name,'') [status_name],

isnull(bg_user_defined_attribute,0) [udf],
isnull(udf_name,'') [udf_name],

isnull(bg_assigned_to_user,0) [assigned_to_user],
isnull(asg.us_username,'[not assigned]') [assigned_to_username],
case rtrim(asg.us_firstname)
when null then isnull(asg.us_lastname, '[not assigned]')
when '' then isnull(asg.us_lastname, '[not assigned]')
else isnull(asg.us_lastname + ', ' + asg.us_firstname,'[not assigned]')
end [assigned_to_fullname],

isnull(bs_user,0) [subscribed],

case
when
	1 <> bg_org
	and userorg.og_other_orgs_permission_level < 2
	and userorg.og_other_orgs_permission_level < isnull(pu_permission_level,2)
		then userorg.og_other_orgs_permission_level
else
	isnull(pu_permission_level,2)
end [pu_permission_level],

isnull(bg_project_custom_dropdown_value1,'') [bg_project_custom_dropdown_value1],
isnull(bg_project_custom_dropdown_value2,'') [bg_project_custom_dropdown_value2],
isnull(bg_project_custom_dropdown_value3,'') [bg_project_custom_dropdown_value3],
@related [relationship_cnt],
@svn_revisions [svn_revision_cnt],
@git_commits [git_commit_cnt],
@hg_revisions [hg_commit_cnt],
@tasks [task_cnt],
getdate() [snapshot_timestamp]
,[test],[drop1]
from bugs
inner join users this_user on us_id = 1
inner join orgs userorg on this_user.us_org = userorg.og_id
left outer join user_defined_attribute on bg_user_defined_attribute = udf_id
left outer join projects on bg_project = pj_id
left outer join orgs bugorg on bg_org = bugorg.og_id
left outer join categories on bg_category = ct_id
left outer join priorities on bg_priority = pr_id
left outer join statuses on bg_status = st_id
left outer join users asg on bg_assigned_to_user = asg.us_id
left outer join users ru on bg_reported_user = ru.us_id
left outer join users lu on bg_last_updated_user = lu.us_id
left outer join bug_subscriptions on bs_bug = bg_id and bs_user = 1
left outer join project_user_xref on pj_id = pu_project
and pu_user = 1
where bg_id = 2
2018-08-16 10:20:40 http://localhost:49412/edit_bug.aspx?id=2 elapsed milliseconds:0015
2018-08-16 10:20:40 http://localhost:49412/edit_bug.aspx?id=2 sql=
/* drop downs */ select pj_id, pj_name
		from projects
		left outer join project_user_xref on pj_id = pu_project
		and pu_user = 1
		where pj_active = 1
		and isnull(pu_permission_level,2) not in (0, 1)
		order by pj_name;
select og_id, og_name from orgs where og_active = 1 order by og_name;
select ct_id, ct_name from categories order by ct_sort_seq, ct_name;
select pr_id, pr_name from priorities order by pr_sort_seq, pr_name;
select st_id, st_name from statuses order by st_sort_seq, st_name;
select udf_id, udf_name from user_defined_attribute order by udf_sort_seq, udf_name;
2018-08-16 10:20:40 http://localhost:49412/edit_bug.aspx?id=2 elapsed milliseconds:0000
2018-08-16 10:20:40 http://localhost:49412/edit_bug.aspx?id=2 sql=

/* users this project */ select us_id, case when 0 = 1 then us_lastname + ', ' + us_firstname else us_username end us_username
from users
inner join orgs on us_org = og_id
where us_active = 1
and og_can_be_assigned_to = 1
and (2 <> 0 or 1 = og_id or (og_external_user = 0 and 1 = 1))
and us_id not in
	(select pu_user from project_user_xref
		where pu_project = 2
		and pu_permission_level = 0)
order by us_username; 
2018-08-16 10:20:40 http://localhost:49412/edit_bug.aspx?id=2 elapsed milliseconds:0004
2018-08-16 10:20:40 http://localhost:49412/edit_bug.aspx?id=2 sql=
select
			isnull(pj_enable_custom_dropdown1,0) [pj_enable_custom_dropdown1],
			isnull(pj_enable_custom_dropdown2,0) [pj_enable_custom_dropdown2],
			isnull(pj_enable_custom_dropdown3,0) [pj_enable_custom_dropdown3],
			isnull(pj_custom_dropdown_label1,'') [pj_custom_dropdown_label1],
			isnull(pj_custom_dropdown_label2,'') [pj_custom_dropdown_label2],
			isnull(pj_custom_dropdown_label3,'') [pj_custom_dropdown_label3],
			isnull(pj_custom_dropdown_values1,'') [pj_custom_dropdown_values1],
			isnull(pj_custom_dropdown_values2,'') [pj_custom_dropdown_values2],
			isnull(pj_custom_dropdown_values3,'') [pj_custom_dropdown_values3]
			from projects where pj_id = 2
2018-08-16 10:20:40 http://localhost:49412/edit_bug.aspx?id=2 elapsed milliseconds:0001
2018-08-16 10:20:40 http://localhost:49412/edit_bug.aspx?id=2 sql=

/* get_bug_posts */
select
a.bp_bug,
a.bp_comment,
isnull(us_username,'') [us_username],
case rtrim(us_firstname)
	when null then isnull(us_lastname, '')
	when '' then isnull(us_lastname, '')
	else isnull(us_lastname + ', ' + us_firstname,'')
	end [us_fullname],
isnull(us_email,'') [us_email],
a.bp_date,
datediff(s,a.bp_date,getdate()) [seconds_ago],
a.bp_id,
a.bp_type,
isnull(a.bp_email_from,'') bp_email_from,
isnull(a.bp_email_to,'') bp_email_to,
isnull(a.bp_email_cc,'') bp_email_cc,
isnull(a.bp_file,'') bp_file,
isnull(a.bp_size,0) bp_size,
isnull(a.bp_content_type,'') bp_content_type,
a.bp_hidden_from_external_users,
isnull(ba.bp_file,'') ba_file,  -- intentionally ba
isnull(ba.bp_id,'') ba_id, -- intentionally ba
isnull(ba.bp_size,'') ba_size,  -- intentionally ba
isnull(ba.bp_content_type,'') ba_content_type -- intentionally ba
from bug_posts a
left outer join users on us_id = a.bp_user
left outer join bug_posts ba on ba.bp_parent = a.bp_id and ba.bp_bug = a.bp_bug
where a.bp_bug = 2
and a.bp_parent is null
 order by a.bp_id desc, ba.bp_parent, ba.bp_id
2018-08-16 10:20:40 http://localhost:49412/edit_bug.aspx?id=2 elapsed milliseconds:0000
2018-08-16 10:20:46 http://localhost:49412/bugs.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '16217e1c-d43b-4661-981c-712404b5e4b8';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '16217e1c-d43b-4661-981c-712404b5e4b8'
and us_active = 1
2018-08-16 10:20:46 http://localhost:49412/bugs.aspx elapsed milliseconds:0000
2018-08-16 10:20:46 http://localhost:49412/bugs.aspx sql=
/* query dropdown */
select qu_id, qu_desc
from queries
where (isnull(qu_user,0) = 0 and isnull(qu_org,0) = 0)
or isnull(qu_user,0) = 1
or isnull(qu_org,0) = 1
order by qu_desc
2018-08-16 10:20:46 http://localhost:49412/bugs.aspx elapsed milliseconds:0000
2018-08-16 10:20:46 http://localhost:49412/bugs.aspx sql=
select qu_sql from queries where qu_id = 1
2018-08-16 10:20:46 http://localhost:49412/bugs.aspx sql=
select isnull(pr_background_color,'#ffffff'), bg_id [id], isnull(bu_flag,0) [$FLAG], 
 bg_short_desc [desc], isnull(pj_name,'') [project], isnull(og_name,'') [organization], isnull(ct_name,'') [category], rpt.us_username [reported by],
 bg_reported_date [reported on], isnull(pr_name,'') [priority], isnull(asg.us_username,'') [assigned to],
 isnull(st_name,'') [status], isnull(lu.us_username,'') [last updated by], bg_last_updated_date [last updated on]
 from bugs 
 left outer join bug_user on bu_bug = bg_id and bu_user = 1 
 left outer join users rpt on rpt.us_id = bg_reported_user
 left outer join users asg on asg.us_id = bg_assigned_to_user
 left outer join users lu on lu.us_id = bg_last_updated_user
 left outer join projects on pj_id = bg_project
 left outer join orgs on og_id = bg_org
 left outer join categories on ct_id = bg_category
 left outer join priorities on pr_id = bg_priority
 left outer join statuses on st_id = bg_status
  /* altered - just order by  */ WHERE  (bugs.bg_project not in (
					select pu_project
					from project_user_xref
					where pu_user = 1
					and pu_permission_level = 0)) order by bg_id desc
2018-08-16 10:20:46 http://localhost:49412/bugs.aspx elapsed milliseconds:0000
2018-08-16 10:20:53 http://localhost:49412/ajax.aspx?bugid=3 sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '16217e1c-d43b-4661-981c-712404b5e4b8';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '16217e1c-d43b-4661-981c-712404b5e4b8'
and us_active = 1
2018-08-16 10:20:53 http://localhost:49412/ajax.aspx?bugid=3 elapsed milliseconds:0000
2018-08-16 10:20:53 http://localhost:49412/ajax.aspx?bugid=3 sql=

declare @bg_org int

select isnull(pu_permission_level,2),
bg_org
from bugs
left outer join project_user_xref
on pu_project = bg_project
and pu_user = 1
where bg_id = 3
2018-08-16 10:20:53 http://localhost:49412/ajax.aspx?bugid=3 elapsed milliseconds:0000
2018-08-16 10:20:53 http://localhost:49412/ajax.aspx?bugid=3 sql=

/* get_bug_posts */
select
a.bp_bug,
a.bp_comment,
isnull(us_username,'') [us_username],
case rtrim(us_firstname)
	when null then isnull(us_lastname, '')
	when '' then isnull(us_lastname, '')
	else isnull(us_lastname + ', ' + us_firstname,'')
	end [us_fullname],
isnull(us_email,'') [us_email],
a.bp_date,
datediff(s,a.bp_date,getdate()) [seconds_ago],
a.bp_id,
a.bp_type,
isnull(a.bp_email_from,'') bp_email_from,
isnull(a.bp_email_to,'') bp_email_to,
isnull(a.bp_email_cc,'') bp_email_cc,
isnull(a.bp_file,'') bp_file,
isnull(a.bp_size,0) bp_size,
isnull(a.bp_content_type,'') bp_content_type,
a.bp_hidden_from_external_users,
isnull(ba.bp_file,'') ba_file,  -- intentionally ba
isnull(ba.bp_id,'') ba_id, -- intentionally ba
isnull(ba.bp_size,'') ba_size,  -- intentionally ba
isnull(ba.bp_content_type,'') ba_content_type -- intentionally ba
from bug_posts a
left outer join users on us_id = a.bp_user
left outer join bug_posts ba on ba.bp_parent = a.bp_id and ba.bp_bug = a.bp_bug
where a.bp_bug = 3
and a.bp_parent is null
 and a.bp_type <> 'update'
 order by a.bp_id desc, ba.bp_parent, ba.bp_id
2018-08-16 10:20:53 http://localhost:49412/ajax.aspx?bugid=3 elapsed milliseconds:0000
2018-08-16 10:21:01 http://localhost:49412/bugs.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '16217e1c-d43b-4661-981c-712404b5e4b8';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '16217e1c-d43b-4661-981c-712404b5e4b8'
and us_active = 1
2018-08-16 10:21:01 http://localhost:49412/bugs.aspx elapsed milliseconds:0000
2018-08-16 10:21:01 http://localhost:49412/bugs.aspx sql=
select qu_sql from queries where qu_id = 2
2018-08-16 10:21:01 http://localhost:49412/bugs.aspx sql=
select isnull(pr_background_color,'#ffffff'), bg_id [id], isnull(bu_flag,0) [$FLAG], 
 bg_short_desc [desc], isnull(pj_name,'') [project], isnull(og_name,'') [organization], isnull(ct_name,'') [category], rpt.us_username [reported by],
 bg_reported_date [reported on], isnull(pr_name,'') [priority], isnull(asg.us_username,'') [assigned to],
 isnull(st_name,'') [status], isnull(lu.us_username,'') [last updated by], bg_last_updated_date [last updated on]
 from bugs 
 left outer join bug_user on bu_bug = bg_id and bu_user = 1 
 left outer join users rpt on rpt.us_id = bg_reported_user
 left outer join users asg on asg.us_id = bg_assigned_to_user
 left outer join users lu on lu.us_id = bg_last_updated_user
 left outer join projects on pj_id = bg_project
 left outer join orgs on og_id = bg_org
 left outer join categories on ct_id = bg_category
 left outer join priorities on pr_id = bg_priority
 left outer join statuses on st_id = bg_status
 where /* altered - both  */ (  bg_status <> 5  ) AND (  (bugs.bg_project not in (
					select pu_project
					from project_user_xref
					where pu_user = 1
					and pu_permission_level = 0))  ) order by bg_id desc
2018-08-16 10:21:01 http://localhost:49412/bugs.aspx elapsed milliseconds:0011

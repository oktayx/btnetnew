2018-08-14 14:43:29  caught exception in util.set_context:Request is not available in this context
2018-08-14 14:43:29  threadproc_votes
2018-08-14 14:43:29  sql=

if exists (select * from dbo.sysobjects where id = object_id(N'[votes_view]'))
drop view [votes_view]
2018-08-14 14:43:29  started creating Lucene index using folder F:\Synced\Visual Studio 2017\Projects\temp\btnetnew\btnetnew\App_Data\lucene_index
2018-08-14 14:43:29  sql=

create view votes_view as
select bu_bug as vote_bug, sum(bu_vote) as vote_total
from bug_user
group by bu_bug
having sum(bu_vote) > 0
2018-08-14 14:43:29  sql=

select bu_bug, count(1)
from bug_user 
where bu_vote = 1
group by bu_bug
2018-08-14 14:43:29  elapsed milliseconds:0006
2018-08-14 14:43:29  sql=

/* get searchable cols */					
select sc.name
from syscolumns sc
inner join systypes st on st.xusertype = sc.xusertype
inner join sysobjects so on sc.id = so.id
where so.name = 'bugs'
and st.[name] <> 'sysname'
and sc.name not in ('rowguid',
'bg_id',
'bg_short_desc',
'bg_reported_user',
'bg_reported_date',
'bg_project',
'bg_org',
'bg_category',
'bg_priority',
'bg_status',
'bg_assigned_to_user',
'bg_last_updated_user',
'bg_last_updated_date',
'bg_user_defined_attribute',
'bg_project_custom_dropdown_value1',
'bg_project_custom_dropdown_value2',
'bg_project_custom_dropdown_value3',
'bg_tags')
and st.[name] in ('nvarchar','varchar')
and sc.length > 30
2018-08-14 14:43:29  elapsed milliseconds:0077
2018-08-14 14:43:29  sql=

select bg_id, 	

isnull(bg_tags,'') bg_tags,
bg_short_desc
from bugs
2018-08-14 14:43:29  elapsed milliseconds:0000
2018-08-14 14:43:29  sql=

select bp_bug, bp_id, 
isnull(bp_comment_search,bp_comment) [text] 
from bug_posts 
where bp_type <> 'update'
and bp_hidden_from_external_users = 0
2018-08-14 14:43:29  elapsed milliseconds:0001
2018-08-14 14:43:29  done creating Lucene index
2018-08-14 14:43:33 http://localhost:49412/default.aspx sql=
select count(1) from users
2018-08-14 14:44:23 http://localhost:49412/default.aspx sql=
select count(1) from users
2018-08-14 14:44:23 http://localhost:49412/default.aspx sql=

select us_username, us_id, us_password, isnull(us_salt,0) us_salt, us_active
from users
where us_username = N'admin'
2018-08-14 14:44:23 http://localhost:49412/default.aspx elapsed milliseconds:0001
2018-08-14 14:44:23 http://localhost:49412/default.aspx sql=
update users set us_password = N'FE9A7CD04E5530345E9AE60D19A0BB51', us_salt = 80563 where us_id = 1
2018-08-14 14:44:23 http://localhost:49412/default.aspx sql=
update users set us_most_recent_login_datetime = getdate() where us_id = 1
2018-08-14 14:44:23 http://localhost:49412/default.aspx sql=
select us_id from users where us_username = N'admin'
2018-08-14 14:44:23 http://localhost:49412/default.aspx elapsed milliseconds:0001
2018-08-14 14:44:23 http://localhost:49412/default.aspx guid=9636512c-b739-4726-8364-9b892bea15b4
2018-08-14 14:44:23 http://localhost:49412/default.aspx sql=
insert into sessions (se_id, se_user) values('9636512c-b739-4726-8364-9b892bea15b4', 1)
2018-08-14 14:44:23 http://localhost:49412/default.aspx AppPath:
2018-08-14 14:44:25 http://localhost:49412/bugs.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '9636512c-b739-4726-8364-9b892bea15b4';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '9636512c-b739-4726-8364-9b892bea15b4'
and us_active = 1
2018-08-14 14:44:25 http://localhost:49412/bugs.aspx elapsed milliseconds:0015
2018-08-14 14:44:25 http://localhost:49412/bugs.aspx sql=

/* custom columns */ select sc.name, st.[name] [datatype], 
case when st.[name] = 'nvarchar' or st.[name] = 'nchar' then sc.length/2 else sc.length end as [length], 
sc.xprec, sc.xscale, sc.isnullable,
mm.text [default value], 
dflts.name [default name], 
isnull(ccm_dropdown_type,'') [dropdown type],
isnull(ccm_dropdown_vals,'') [vals],
isnull(ccm_sort_seq, sc.colorder) [column order],
sc.colorder
from syscolumns sc
inner join systypes st on st.xusertype = sc.xusertype
inner join sysobjects so on sc.id = so.id
left outer join syscomments mm on sc.cdefault = mm.id
left outer join custom_col_metadata on ccm_colorder = sc.colorder
left outer join sysobjects dflts on dflts.id = mm.id
where so.name = 'bugs'
and st.[name] <> 'sysname'
and sc.name not in ('rowguid',
'bg_id',
'bg_short_desc',
'bg_reported_user',
'bg_reported_date',
'bg_project',
'bg_org',
'bg_category',
'bg_priority',
'bg_status',
'bg_assigned_to_user',
'bg_last_updated_user',
'bg_last_updated_date',
'bg_user_defined_attribute',
'bg_project_custom_dropdown_value1',
'bg_project_custom_dropdown_value2',
'bg_project_custom_dropdown_value3',
'bg_tags')
order by sc.id, isnull(ccm_sort_seq,sc.colorder)
2018-08-14 14:44:25 http://localhost:49412/bugs.aspx elapsed milliseconds:0097
2018-08-14 14:44:25 http://localhost:49412/bugs.aspx sql=
/* query dropdown */
select qu_id, qu_desc
from queries
where (isnull(qu_user,0) = 0 and isnull(qu_org,0) = 0)
or isnull(qu_user,0) = 1
or isnull(qu_org,0) = 1
order by qu_desc
2018-08-14 14:44:25 http://localhost:49412/bugs.aspx elapsed milliseconds:0006
2018-08-14 14:44:25 http://localhost:49412/bugs.aspx sql=
select qu_id, qu_sql from queries where qu_id in
			(select us_default_query from users where us_id = 1)
2018-08-14 14:44:25 http://localhost:49412/bugs.aspx elapsed milliseconds:0004
2018-08-14 14:44:25 http://localhost:49412/bugs.aspx sql=
select isnull(pr_background_color,'#ffffff'), bg_id [id], isnull(bu_flag,0) [$FLAG], 
 bg_short_desc [desc], isnull(pj_name,'') [project], isnull(og_name,'') [organization], isnull(ct_name,'') [category], rpt.us_username [reported by],
 bg_reported_date [reported on], isnull(pr_name,'') [priority], isnull(asg.us_username,'') [assigned to],
 isnull(st_name,'') [status], isnull(lu.us_username,'') [last updated by], bg_last_updated_date [last updated on]
 from bugs 
 left outer join bug_user on bu_bug = bg_id and bu_user = 1 
 left outer join users rpt on rpt.us_id = bg_reported_user
 left outer join users asg on asg.us_id = bg_assigned_to_user
 left outer join users lu on lu.us_id = bg_last_updated_user
 left outer join projects on pj_id = bg_project
 left outer join orgs on og_id = bg_org
 left outer join categories on ct_id = bg_category
 left outer join priorities on pr_id = bg_priority
 left outer join statuses on st_id = bg_status
  /* altered - just order by  */ WHERE  (bugs.bg_project not in (
					select pu_project
					from project_user_xref
					where pu_user = 1
					and pu_permission_level = 0)) order by bg_id desc
2018-08-14 14:44:25 http://localhost:49412/bugs.aspx elapsed milliseconds:0011
2018-08-14 14:45:12 http://localhost:49412/default.aspx sql=
select count(1) from users
2018-08-14 14:49:04  caught exception in util.set_context:Request is not available in this context
2018-08-14 14:49:04  threadproc_votes
2018-08-14 14:49:04  sql=

if exists (select * from dbo.sysobjects where id = object_id(N'[votes_view]'))
drop view [votes_view]
2018-08-14 14:49:04  started creating Lucene index using folder F:\Synced\Visual Studio 2017\Projects\temp\btnetnew\btnetnew\App_Data\lucene_index
2018-08-14 14:49:04  sql=

create view votes_view as
select bu_bug as vote_bug, sum(bu_vote) as vote_total
from bug_user
group by bu_bug
having sum(bu_vote) > 0
2018-08-14 14:49:04  sql=

select bu_bug, count(1)
from bug_user 
where bu_vote = 1
group by bu_bug
2018-08-14 14:49:04  elapsed milliseconds:0005
2018-08-14 14:49:04  sql=

/* get searchable cols */					
select sc.name
from syscolumns sc
inner join systypes st on st.xusertype = sc.xusertype
inner join sysobjects so on sc.id = so.id
where so.name = 'bugs'
and st.[name] <> 'sysname'
and sc.name not in ('rowguid',
'bg_id',
'bg_short_desc',
'bg_reported_user',
'bg_reported_date',
'bg_project',
'bg_org',
'bg_category',
'bg_priority',
'bg_status',
'bg_assigned_to_user',
'bg_last_updated_user',
'bg_last_updated_date',
'bg_user_defined_attribute',
'bg_project_custom_dropdown_value1',
'bg_project_custom_dropdown_value2',
'bg_project_custom_dropdown_value3',
'bg_tags')
and st.[name] in ('nvarchar','varchar')
and sc.length > 30
2018-08-14 14:49:04  elapsed milliseconds:0000
2018-08-14 14:49:04  sql=

select bg_id, 	

isnull(bg_tags,'') bg_tags,
bg_short_desc
from bugs
2018-08-14 14:49:04  elapsed milliseconds:0000
2018-08-14 14:49:04  sql=

select bp_bug, bp_id, 
isnull(bp_comment_search,bp_comment) [text] 
from bug_posts 
where bp_type <> 'update'
and bp_hidden_from_external_users = 0
2018-08-14 14:49:04  elapsed milliseconds:0000
2018-08-14 14:49:04  done creating Lucene index
2018-08-14 14:49:05 http://localhost:49412/default.aspx sql=
select count(1) from users
2018-08-14 14:49:11 http://localhost:49412/default.aspx sql=
select count(1) from users
2018-08-14 14:49:11 http://localhost:49412/default.aspx sql=

select us_username, us_id, us_password, isnull(us_salt,0) us_salt, us_active
from users
where us_username = N'admin'
2018-08-14 14:49:11 http://localhost:49412/default.aspx elapsed milliseconds:0000
2018-08-14 14:49:11 http://localhost:49412/default.aspx sql=
update users set us_most_recent_login_datetime = getdate() where us_id = 1
2018-08-14 14:49:11 http://localhost:49412/default.aspx sql=
select us_id from users where us_username = N'admin'
2018-08-14 14:49:11 http://localhost:49412/default.aspx elapsed milliseconds:0000
2018-08-14 14:49:11 http://localhost:49412/default.aspx guid=44147f75-8a64-4e64-943d-4e5bfc93917e
2018-08-14 14:49:11 http://localhost:49412/default.aspx sql=
insert into sessions (se_id, se_user) values('44147f75-8a64-4e64-943d-4e5bfc93917e', 1)
2018-08-14 14:49:11 http://localhost:49412/default.aspx AppPath:
2018-08-14 14:49:13 http://localhost:49412/bugs.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '44147f75-8a64-4e64-943d-4e5bfc93917e';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '44147f75-8a64-4e64-943d-4e5bfc93917e'
and us_active = 1
2018-08-14 14:49:13 http://localhost:49412/bugs.aspx elapsed milliseconds:0006
2018-08-14 14:49:13 http://localhost:49412/bugs.aspx sql=

/* custom columns */ select sc.name, st.[name] [datatype], 
case when st.[name] = 'nvarchar' or st.[name] = 'nchar' then sc.length/2 else sc.length end as [length], 
sc.xprec, sc.xscale, sc.isnullable,
mm.text [default value], 
dflts.name [default name], 
isnull(ccm_dropdown_type,'') [dropdown type],
isnull(ccm_dropdown_vals,'') [vals],
isnull(ccm_sort_seq, sc.colorder) [column order],
sc.colorder
from syscolumns sc
inner join systypes st on st.xusertype = sc.xusertype
inner join sysobjects so on sc.id = so.id
left outer join syscomments mm on sc.cdefault = mm.id
left outer join custom_col_metadata on ccm_colorder = sc.colorder
left outer join sysobjects dflts on dflts.id = mm.id
where so.name = 'bugs'
and st.[name] <> 'sysname'
and sc.name not in ('rowguid',
'bg_id',
'bg_short_desc',
'bg_reported_user',
'bg_reported_date',
'bg_project',
'bg_org',
'bg_category',
'bg_priority',
'bg_status',
'bg_assigned_to_user',
'bg_last_updated_user',
'bg_last_updated_date',
'bg_user_defined_attribute',
'bg_project_custom_dropdown_value1',
'bg_project_custom_dropdown_value2',
'bg_project_custom_dropdown_value3',
'bg_tags')
order by sc.id, isnull(ccm_sort_seq,sc.colorder)
2018-08-14 14:49:13 http://localhost:49412/bugs.aspx elapsed milliseconds:0000
2018-08-14 14:49:13 http://localhost:49412/bugs.aspx sql=
/* query dropdown */
select qu_id, qu_desc
from queries
where (isnull(qu_user,0) = 0 and isnull(qu_org,0) = 0)
or isnull(qu_user,0) = 1
or isnull(qu_org,0) = 1
order by qu_desc
2018-08-14 14:49:13 http://localhost:49412/bugs.aspx elapsed milliseconds:0000
2018-08-14 14:49:13 http://localhost:49412/bugs.aspx sql=
select qu_id, qu_sql from queries where qu_id in
			(select us_default_query from users where us_id = 1)
2018-08-14 14:49:13 http://localhost:49412/bugs.aspx elapsed milliseconds:0000
2018-08-14 14:49:13 http://localhost:49412/bugs.aspx sql=
select isnull(pr_background_color,'#ffffff'), bg_id [id], isnull(bu_flag,0) [$FLAG], 
 bg_short_desc [desc], isnull(pj_name,'') [project], isnull(og_name,'') [organization], isnull(ct_name,'') [category], rpt.us_username [reported by],
 bg_reported_date [reported on], isnull(pr_name,'') [priority], isnull(asg.us_username,'') [assigned to],
 isnull(st_name,'') [status], isnull(lu.us_username,'') [last updated by], bg_last_updated_date [last updated on]
 from bugs 
 left outer join bug_user on bu_bug = bg_id and bu_user = 1 
 left outer join users rpt on rpt.us_id = bg_reported_user
 left outer join users asg on asg.us_id = bg_assigned_to_user
 left outer join users lu on lu.us_id = bg_last_updated_user
 left outer join projects on pj_id = bg_project
 left outer join orgs on og_id = bg_org
 left outer join categories on ct_id = bg_category
 left outer join priorities on pr_id = bg_priority
 left outer join statuses on st_id = bg_status
  /* altered - just order by  */ WHERE  (bugs.bg_project not in (
					select pu_project
					from project_user_xref
					where pu_user = 1
					and pu_permission_level = 0)) order by bg_id desc
2018-08-14 14:49:13 http://localhost:49412/bugs.aspx elapsed milliseconds:0000
2018-08-14 14:51:07 http://localhost:49412/bugs.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '44147f75-8a64-4e64-943d-4e5bfc93917e';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '44147f75-8a64-4e64-943d-4e5bfc93917e'
and us_active = 1
2018-08-14 14:51:07 http://localhost:49412/bugs.aspx elapsed milliseconds:0000
2018-08-14 14:51:07 http://localhost:49412/bugs.aspx sql=
/* query dropdown */
select qu_id, qu_desc
from queries
where (isnull(qu_user,0) = 0 and isnull(qu_org,0) = 0)
or isnull(qu_user,0) = 1
or isnull(qu_org,0) = 1
order by qu_desc
2018-08-14 14:51:07 http://localhost:49412/bugs.aspx elapsed milliseconds:0000
2018-08-14 14:51:07 http://localhost:49412/bugs.aspx sql=
select qu_sql from queries where qu_id = 1
2018-08-14 14:51:07 http://localhost:49412/bugs.aspx sql=
select isnull(pr_background_color,'#ffffff'), bg_id [id], isnull(bu_flag,0) [$FLAG], 
 bg_short_desc [desc], isnull(pj_name,'') [project], isnull(og_name,'') [organization], isnull(ct_name,'') [category], rpt.us_username [reported by],
 bg_reported_date [reported on], isnull(pr_name,'') [priority], isnull(asg.us_username,'') [assigned to],
 isnull(st_name,'') [status], isnull(lu.us_username,'') [last updated by], bg_last_updated_date [last updated on]
 from bugs 
 left outer join bug_user on bu_bug = bg_id and bu_user = 1 
 left outer join users rpt on rpt.us_id = bg_reported_user
 left outer join users asg on asg.us_id = bg_assigned_to_user
 left outer join users lu on lu.us_id = bg_last_updated_user
 left outer join projects on pj_id = bg_project
 left outer join orgs on og_id = bg_org
 left outer join categories on ct_id = bg_category
 left outer join priorities on pr_id = bg_priority
 left outer join statuses on st_id = bg_status
  /* altered - just order by  */ WHERE  (bugs.bg_project not in (
					select pu_project
					from project_user_xref
					where pu_user = 1
					and pu_permission_level = 0)) order by bg_id desc
2018-08-14 14:51:07 http://localhost:49412/bugs.aspx elapsed milliseconds:0000
2018-08-14 14:51:51 http://localhost:49412/bugs.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '44147f75-8a64-4e64-943d-4e5bfc93917e';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '44147f75-8a64-4e64-943d-4e5bfc93917e'
and us_active = 1
2018-08-14 14:51:51 http://localhost:49412/bugs.aspx elapsed milliseconds:0000
2018-08-14 14:51:51 http://localhost:49412/bugs.aspx sql=
/* query dropdown */
select qu_id, qu_desc
from queries
where (isnull(qu_user,0) = 0 and isnull(qu_org,0) = 0)
or isnull(qu_user,0) = 1
or isnull(qu_org,0) = 1
order by qu_desc
2018-08-14 14:51:51 http://localhost:49412/bugs.aspx elapsed milliseconds:0000
2018-08-14 14:51:51 http://localhost:49412/bugs.aspx sql=
select qu_sql from queries where qu_id = 1
2018-08-14 14:51:51 http://localhost:49412/bugs.aspx sql=
select isnull(pr_background_color,'#ffffff'), bg_id [id], isnull(bu_flag,0) [$FLAG], 
 bg_short_desc [desc], isnull(pj_name,'') [project], isnull(og_name,'') [organization], isnull(ct_name,'') [category], rpt.us_username [reported by],
 bg_reported_date [reported on], isnull(pr_name,'') [priority], isnull(asg.us_username,'') [assigned to],
 isnull(st_name,'') [status], isnull(lu.us_username,'') [last updated by], bg_last_updated_date [last updated on]
 from bugs 
 left outer join bug_user on bu_bug = bg_id and bu_user = 1 
 left outer join users rpt on rpt.us_id = bg_reported_user
 left outer join users asg on asg.us_id = bg_assigned_to_user
 left outer join users lu on lu.us_id = bg_last_updated_user
 left outer join projects on pj_id = bg_project
 left outer join orgs on og_id = bg_org
 left outer join categories on ct_id = bg_category
 left outer join priorities on pr_id = bg_priority
 left outer join statuses on st_id = bg_status
  /* altered - just order by  */ WHERE  (bugs.bg_project not in (
					select pu_project
					from project_user_xref
					where pu_user = 1
					and pu_permission_level = 0)) order by bg_id desc
2018-08-14 14:51:51 http://localhost:49412/bugs.aspx elapsed milliseconds:0000
2018-08-14 14:52:04 http://localhost:49412/bugs.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '44147f75-8a64-4e64-943d-4e5bfc93917e';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '44147f75-8a64-4e64-943d-4e5bfc93917e'
and us_active = 1
2018-08-14 14:52:04 http://localhost:49412/bugs.aspx elapsed milliseconds:0000
2018-08-14 14:52:04 http://localhost:49412/bugs.aspx sql=
/* query dropdown */
select qu_id, qu_desc
from queries
where (isnull(qu_user,0) = 0 and isnull(qu_org,0) = 0)
or isnull(qu_user,0) = 1
or isnull(qu_org,0) = 1
order by qu_desc
2018-08-14 14:52:04 http://localhost:49412/bugs.aspx elapsed milliseconds:0000
2018-08-14 14:52:04 http://localhost:49412/bugs.aspx sql=
select qu_sql from queries where qu_id = 1
2018-08-14 14:52:04 http://localhost:49412/bugs.aspx sql=
select isnull(pr_background_color,'#ffffff'), bg_id [id], isnull(bu_flag,0) [$FLAG], 
 bg_short_desc [desc], isnull(pj_name,'') [project], isnull(og_name,'') [organization], isnull(ct_name,'') [category], rpt.us_username [reported by],
 bg_reported_date [reported on], isnull(pr_name,'') [priority], isnull(asg.us_username,'') [assigned to],
 isnull(st_name,'') [status], isnull(lu.us_username,'') [last updated by], bg_last_updated_date [last updated on]
 from bugs 
 left outer join bug_user on bu_bug = bg_id and bu_user = 1 
 left outer join users rpt on rpt.us_id = bg_reported_user
 left outer join users asg on asg.us_id = bg_assigned_to_user
 left outer join users lu on lu.us_id = bg_last_updated_user
 left outer join projects on pj_id = bg_project
 left outer join orgs on og_id = bg_org
 left outer join categories on ct_id = bg_category
 left outer join priorities on pr_id = bg_priority
 left outer join statuses on st_id = bg_status
  /* altered - just order by  */ WHERE  (bugs.bg_project not in (
					select pu_project
					from project_user_xref
					where pu_user = 1
					and pu_permission_level = 0)) order by bg_id desc
2018-08-14 14:52:04 http://localhost:49412/bugs.aspx elapsed milliseconds:0000
2018-08-14 14:52:09 http://localhost:49412/search.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '44147f75-8a64-4e64-943d-4e5bfc93917e';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '44147f75-8a64-4e64-943d-4e5bfc93917e'
and us_active = 1
2018-08-14 14:52:09 http://localhost:49412/search.aspx elapsed milliseconds:0000
2018-08-14 14:52:09 http://localhost:49412/search.aspx sql=

/* get related users 2 */
select  pj_id, us_id,
case when 0 = 1 then
    case when len(isnull(us_firstname,'') + ' ' + isnull(us_lastname,'')) > 1
	then isnull(us_firstname,'') + ' ' + isnull(us_lastname,'')
    else us_username end
else us_username end us_username,
isnull(us_email,'') us_email
into #temp
from projects, users
where pj_id not in
(
	select pu_project from project_user_xref
	where pu_permission_level = 0 and pu_user = 1
)





if 0 = 1 -- external
and 2 = 0 -- other orgs
begin
	select distinct a.us_id, a.us_username, a.us_email
	from #temp a
	inner join users b on a.us_id = b.us_id
	inner join orgs on b.us_org = og_id
	where og_external_user = 0 or b.us_org = 1
	order by a.us_username
end
else
begin

	select distinct us_id, us_username, us_email
		from #temp
		left outer join project_user_xref on pj_id = pu_project
		and us_id = pu_user
		where isnull(pu_permission_level,2) <> 0
		order by us_username
end

drop table #temp
2018-08-14 14:52:09 http://localhost:49412/search.aspx elapsed milliseconds:0016
2018-08-14 14:52:09 http://localhost:49412/search.aspx sql=
/* drop downs */ select pj_id, pj_name from projects order by pj_name; select og_id, og_name from orgs order by og_name;
	select ct_id, ct_name from categories order by ct_sort_seq, ct_name;
	select pr_id, pr_name from priorities order by pr_sort_seq, pr_name;
	select st_id, st_name from statuses order by st_sort_seq, st_name;
	select udf_id, udf_name from user_defined_attribute order by udf_sort_seq, udf_name
2018-08-14 14:52:09 http://localhost:49412/search.aspx elapsed milliseconds:0002
2018-08-14 14:52:09 http://localhost:49412/search.aspx sql=

select count(1)
from projects
where isnull(pj_enable_custom_dropdown1,0) = 1
or isnull(pj_enable_custom_dropdown2,0) = 1
or isnull(pj_enable_custom_dropdown3,0) = 1
2018-08-14 14:52:22 http://localhost:49412/queries.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '44147f75-8a64-4e64-943d-4e5bfc93917e';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '44147f75-8a64-4e64-943d-4e5bfc93917e'
and us_active = 1
2018-08-14 14:52:22 http://localhost:49412/queries.aspx elapsed milliseconds:0000
2018-08-14 14:52:22 http://localhost:49412/queries.aspx sql=
select
			qu_desc [query],
			case
				when isnull(qu_user,0) = 0 and isnull(qu_org,0) is null then 'everybody'
				when isnull(qu_user,0) <> 0 then 'user:' + us_username
				when isnull(qu_org,0) <> 0 then 'org:' + og_name
				else ' '
				end [visibility],
			'<a href=bugs.aspx?qu_id=' + convert(varchar,qu_id) + '>view list</a>' [view list],
			'<a target=_blank href=print_bugs.aspx?qu_id=' + convert(varchar,qu_id) + '>print list</a>' [print list],
			'<a target=_blank href=print_bugs.aspx?format=excel&qu_id=' + convert(varchar,qu_id) + '>export as excel</a>' [export as excel],
			'<a target=_blank href=print_bugs2.aspx?qu_id=' + convert(varchar,qu_id) + '>print detail</a>' [print list<br>with detail],
			'<a href=edit_query.aspx?id=' + convert(varchar,qu_id) + '>edit</a>' [edit],
			'<a href=delete_query.aspx?id=' + convert(varchar,qu_id) + '>delete</a>' [delete],
			replace(convert(nvarchar(4000),qu_sql), char(10),'<br>') [sql]
			from queries
			left outer join users on qu_user = us_id
			left outer join orgs on qu_org = og_id
			where 1 = 0 /* all */
			or isnull(qu_user,0) = 1
			or isnull(qu_user,0) = 0
			order by qu_desc
2018-08-14 14:52:22 http://localhost:49412/queries.aspx elapsed milliseconds:0014
2018-08-14 14:52:32 http://localhost:49412/reports.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '44147f75-8a64-4e64-943d-4e5bfc93917e';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '44147f75-8a64-4e64-943d-4e5bfc93917e'
and us_active = 1
2018-08-14 14:52:32 http://localhost:49412/reports.aspx elapsed milliseconds:0000
2018-08-14 14:52:32 http://localhost:49412/reports.aspx sql=

select
rp_desc [report],
case
	when rp_chart_type = 'pie' then
		'<a target=''_blank'' href=''view_report.aspx?view=chart&id=' + convert(varchar, rp_id) + '''>pie</a>'
	when rp_chart_type = 'line' then
		'<a target=''_blank'' href=''view_report.aspx?view=chart&id=' + convert(varchar, rp_id) + '''>line</a>'
	when rp_chart_type = 'bar' then
		'<a target=''_blank'' href=''view_report.aspx?view=chart&id=' + convert(varchar, rp_id) + '''>bar</a>'
	else
		'&nbsp;' end [view<br>chart],
'<a target=''_blank'' href=''view_report.aspx?view=data&id=' + convert(varchar, rp_id) + '''>data</a>' [view<br>data]
, '<a href=''edit_report.aspx?id=' + convert(varchar, rp_id) + '''>edit</a>' [edit], '<a href=''delete_report.aspx?id=' + convert(varchar, rp_id) + '''>delete</a>' [delete] 
from reports order by rp_desc
2018-08-14 14:52:32 http://localhost:49412/reports.aspx elapsed milliseconds:0002
2018-08-14 14:52:35 http://localhost:49412/view_report.aspx?view=chart&id=3 sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '44147f75-8a64-4e64-943d-4e5bfc93917e';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '44147f75-8a64-4e64-943d-4e5bfc93917e'
and us_active = 1
2018-08-14 14:52:35 http://localhost:49412/view_report.aspx?view=chart&id=3 elapsed milliseconds:0000
2018-08-14 14:52:35 http://localhost:49412/view_report.aspx?view=chart&id=3 sql=
select rp_desc, rp_sql, rp_chart_type
		from reports
		where rp_id = 3
2018-08-14 14:52:35 http://localhost:49412/view_report.aspx?view=chart&id=3 elapsed milliseconds:0001
2018-08-14 14:52:35 http://localhost:49412/view_report.aspx?view=chart&id=3 sql=
select ct_name [category], count(1) [count] 
 from bugs 
 inner join categories on bg_category = ct_id 
 group by ct_name 
 order by ct_name
2018-08-14 14:52:35 http://localhost:49412/view_report.aspx?view=chart&id=3 elapsed milliseconds:0001
2018-08-14 14:52:40 http://localhost:49412/edit_report.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '44147f75-8a64-4e64-943d-4e5bfc93917e';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '44147f75-8a64-4e64-943d-4e5bfc93917e'
and us_active = 1
2018-08-14 14:52:40 http://localhost:49412/edit_report.aspx elapsed milliseconds:0000
2018-08-14 14:53:15 http://localhost:49412/reports.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '44147f75-8a64-4e64-943d-4e5bfc93917e';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '44147f75-8a64-4e64-943d-4e5bfc93917e'
and us_active = 1
2018-08-14 14:53:15 http://localhost:49412/reports.aspx elapsed milliseconds:0000
2018-08-14 14:53:15 http://localhost:49412/reports.aspx sql=

select
rp_desc [report],
case
	when rp_chart_type = 'pie' then
		'<a target=''_blank'' href=''view_report.aspx?view=chart&id=' + convert(varchar, rp_id) + '''>pie</a>'
	when rp_chart_type = 'line' then
		'<a target=''_blank'' href=''view_report.aspx?view=chart&id=' + convert(varchar, rp_id) + '''>line</a>'
	when rp_chart_type = 'bar' then
		'<a target=''_blank'' href=''view_report.aspx?view=chart&id=' + convert(varchar, rp_id) + '''>bar</a>'
	else
		'&nbsp;' end [view<br>chart],
'<a target=''_blank'' href=''view_report.aspx?view=data&id=' + convert(varchar, rp_id) + '''>data</a>' [view<br>data]
, '<a href=''edit_report.aspx?id=' + convert(varchar, rp_id) + '''>edit</a>' [edit], '<a href=''delete_report.aspx?id=' + convert(varchar, rp_id) + '''>delete</a>' [delete] 
from reports order by rp_desc
2018-08-14 14:53:15 http://localhost:49412/reports.aspx elapsed milliseconds:0000
2018-08-14 14:53:56 http://localhost:49412/edit_report.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '44147f75-8a64-4e64-943d-4e5bfc93917e';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '44147f75-8a64-4e64-943d-4e5bfc93917e'
and us_active = 1
2018-08-14 14:53:57 http://localhost:49412/edit_report.aspx elapsed milliseconds:0000
2018-08-14 14:55:20 http://localhost:49412/reports.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '44147f75-8a64-4e64-943d-4e5bfc93917e';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '44147f75-8a64-4e64-943d-4e5bfc93917e'
and us_active = 1
2018-08-14 14:55:20 http://localhost:49412/reports.aspx elapsed milliseconds:0000
2018-08-14 14:55:20 http://localhost:49412/reports.aspx sql=

select
rp_desc [report],
case
	when rp_chart_type = 'pie' then
		'<a target=''_blank'' href=''view_report.aspx?view=chart&id=' + convert(varchar, rp_id) + '''>pie</a>'
	when rp_chart_type = 'line' then
		'<a target=''_blank'' href=''view_report.aspx?view=chart&id=' + convert(varchar, rp_id) + '''>line</a>'
	when rp_chart_type = 'bar' then
		'<a target=''_blank'' href=''view_report.aspx?view=chart&id=' + convert(varchar, rp_id) + '''>bar</a>'
	else
		'&nbsp;' end [view<br>chart],
'<a target=''_blank'' href=''view_report.aspx?view=data&id=' + convert(varchar, rp_id) + '''>data</a>' [view<br>data]
, '<a href=''edit_report.aspx?id=' + convert(varchar, rp_id) + '''>edit</a>' [edit], '<a href=''delete_report.aspx?id=' + convert(varchar, rp_id) + '''>delete</a>' [delete] 
from reports order by rp_desc
2018-08-14 14:55:20 http://localhost:49412/reports.aspx elapsed milliseconds:0000
2018-08-14 14:55:25 http://localhost:49412/dashboard.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '44147f75-8a64-4e64-943d-4e5bfc93917e';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '44147f75-8a64-4e64-943d-4e5bfc93917e'
and us_active = 1
2018-08-14 14:55:25 http://localhost:49412/dashboard.aspx elapsed milliseconds:0000
2018-08-14 14:55:25 http://localhost:49412/dashboard.aspx sql=

select ds.*, rp_desc
from dashboard_items ds
inner join reports on rp_id = ds_report
where ds_user = 1
order by ds_col, ds_row
2018-08-14 14:55:25 http://localhost:49412/dashboard.aspx elapsed milliseconds:0001
2018-08-14 14:55:30 http://localhost:49412/edit_report.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '44147f75-8a64-4e64-943d-4e5bfc93917e';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '44147f75-8a64-4e64-943d-4e5bfc93917e'
and us_active = 1
2018-08-14 14:55:30 http://localhost:49412/edit_report.aspx elapsed milliseconds:0000
2018-08-14 14:55:56 http://localhost:49412/edit_report.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '44147f75-8a64-4e64-943d-4e5bfc93917e';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '44147f75-8a64-4e64-943d-4e5bfc93917e'
and us_active = 1
2018-08-14 14:55:56 http://localhost:49412/edit_report.aspx elapsed milliseconds:0000
2018-08-14 14:57:34 http://localhost:49412/edit_report.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '44147f75-8a64-4e64-943d-4e5bfc93917e';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '44147f75-8a64-4e64-943d-4e5bfc93917e'
and us_active = 1
2018-08-14 14:57:34 http://localhost:49412/edit_report.aspx elapsed milliseconds:0000
2018-08-14 14:57:46 http://localhost:49412/edit_report.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '44147f75-8a64-4e64-943d-4e5bfc93917e';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '44147f75-8a64-4e64-943d-4e5bfc93917e'
and us_active = 1
2018-08-14 14:57:46 http://localhost:49412/edit_report.aspx elapsed milliseconds:0000
2018-08-14 14:58:08 http://localhost:49412/edit_report.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '44147f75-8a64-4e64-943d-4e5bfc93917e';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '44147f75-8a64-4e64-943d-4e5bfc93917e'
and us_active = 1
2018-08-14 14:58:08 http://localhost:49412/edit_report.aspx elapsed milliseconds:0000
2018-08-14 14:59:28 http://localhost:49412/reports.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '44147f75-8a64-4e64-943d-4e5bfc93917e';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '44147f75-8a64-4e64-943d-4e5bfc93917e'
and us_active = 1
2018-08-14 14:59:28 http://localhost:49412/reports.aspx elapsed milliseconds:0000
2018-08-14 14:59:28 http://localhost:49412/reports.aspx sql=

select
rp_desc [report],
case
	when rp_chart_type = 'pie' then
		'<a target=''_blank'' href=''view_report.aspx?view=chart&id=' + convert(varchar, rp_id) + '''>pie</a>'
	when rp_chart_type = 'line' then
		'<a target=''_blank'' href=''view_report.aspx?view=chart&id=' + convert(varchar, rp_id) + '''>line</a>'
	when rp_chart_type = 'bar' then
		'<a target=''_blank'' href=''view_report.aspx?view=chart&id=' + convert(varchar, rp_id) + '''>bar</a>'
	else
		'&nbsp;' end [view<br>chart],
'<a target=''_blank'' href=''view_report.aspx?view=data&id=' + convert(varchar, rp_id) + '''>data</a>' [view<br>data]
, '<a href=''edit_report.aspx?id=' + convert(varchar, rp_id) + '''>edit</a>' [edit], '<a href=''delete_report.aspx?id=' + convert(varchar, rp_id) + '''>delete</a>' [delete] 
from reports order by rp_desc
2018-08-14 14:59:28 http://localhost:49412/reports.aspx elapsed milliseconds:0000
2018-08-14 14:59:32 http://localhost:49412/edit_report.aspx?id=3 sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '44147f75-8a64-4e64-943d-4e5bfc93917e';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '44147f75-8a64-4e64-943d-4e5bfc93917e'
and us_active = 1
2018-08-14 14:59:32 http://localhost:49412/edit_report.aspx?id=3 elapsed milliseconds:0000
2018-08-14 14:59:32 http://localhost:49412/edit_report.aspx?id=3 sql=
select
				rp_desc, rp_sql, rp_chart_type
				from reports where rp_id = 3
2018-08-14 14:59:32 http://localhost:49412/edit_report.aspx?id=3 elapsed milliseconds:0000
2018-08-14 14:59:42 http://localhost:49412/bugs.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '44147f75-8a64-4e64-943d-4e5bfc93917e';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '44147f75-8a64-4e64-943d-4e5bfc93917e'
and us_active = 1
2018-08-14 14:59:42 http://localhost:49412/bugs.aspx elapsed milliseconds:0000
2018-08-14 14:59:42 http://localhost:49412/bugs.aspx sql=
/* query dropdown */
select qu_id, qu_desc
from queries
where (isnull(qu_user,0) = 0 and isnull(qu_org,0) = 0)
or isnull(qu_user,0) = 1
or isnull(qu_org,0) = 1
order by qu_desc
2018-08-14 14:59:42 http://localhost:49412/bugs.aspx elapsed milliseconds:0000
2018-08-14 14:59:42 http://localhost:49412/bugs.aspx sql=
select qu_sql from queries where qu_id = 1
2018-08-14 14:59:42 http://localhost:49412/bugs.aspx sql=
select isnull(pr_background_color,'#ffffff'), bg_id [id], isnull(bu_flag,0) [$FLAG], 
 bg_short_desc [desc], isnull(pj_name,'') [project], isnull(og_name,'') [organization], isnull(ct_name,'') [category], rpt.us_username [reported by],
 bg_reported_date [reported on], isnull(pr_name,'') [priority], isnull(asg.us_username,'') [assigned to],
 isnull(st_name,'') [status], isnull(lu.us_username,'') [last updated by], bg_last_updated_date [last updated on]
 from bugs 
 left outer join bug_user on bu_bug = bg_id and bu_user = 1 
 left outer join users rpt on rpt.us_id = bg_reported_user
 left outer join users asg on asg.us_id = bg_assigned_to_user
 left outer join users lu on lu.us_id = bg_last_updated_user
 left outer join projects on pj_id = bg_project
 left outer join orgs on og_id = bg_org
 left outer join categories on ct_id = bg_category
 left outer join priorities on pr_id = bg_priority
 left outer join statuses on st_id = bg_status
  /* altered - just order by  */ WHERE  (bugs.bg_project not in (
					select pu_project
					from project_user_xref
					where pu_user = 1
					and pu_permission_level = 0)) order by bg_id desc
2018-08-14 14:59:42 http://localhost:49412/bugs.aspx elapsed milliseconds:0000
2018-08-14 14:59:47 http://localhost:49412/queries.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '44147f75-8a64-4e64-943d-4e5bfc93917e';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '44147f75-8a64-4e64-943d-4e5bfc93917e'
and us_active = 1
2018-08-14 14:59:47 http://localhost:49412/queries.aspx elapsed milliseconds:0000
2018-08-14 14:59:47 http://localhost:49412/queries.aspx sql=
select
			qu_desc [query],
			case
				when isnull(qu_user,0) = 0 and isnull(qu_org,0) is null then 'everybody'
				when isnull(qu_user,0) <> 0 then 'user:' + us_username
				when isnull(qu_org,0) <> 0 then 'org:' + og_name
				else ' '
				end [visibility],
			'<a href=bugs.aspx?qu_id=' + convert(varchar,qu_id) + '>view list</a>' [view list],
			'<a target=_blank href=print_bugs.aspx?qu_id=' + convert(varchar,qu_id) + '>print list</a>' [print list],
			'<a target=_blank href=print_bugs.aspx?format=excel&qu_id=' + convert(varchar,qu_id) + '>export as excel</a>' [export as excel],
			'<a target=_blank href=print_bugs2.aspx?qu_id=' + convert(varchar,qu_id) + '>print detail</a>' [print list<br>with detail],
			'<a href=edit_query.aspx?id=' + convert(varchar,qu_id) + '>edit</a>' [edit],
			'<a href=delete_query.aspx?id=' + convert(varchar,qu_id) + '>delete</a>' [delete],
			replace(convert(nvarchar(4000),qu_sql), char(10),'<br>') [sql]
			from queries
			left outer join users on qu_user = us_id
			left outer join orgs on qu_org = og_id
			where 1 = 0 /* all */
			or isnull(qu_user,0) = 1
			or isnull(qu_user,0) = 0
			order by qu_desc
2018-08-14 14:59:47 http://localhost:49412/queries.aspx elapsed milliseconds:0001
2018-08-14 14:59:50 http://localhost:49412/edit_query.aspx?id=1 sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '44147f75-8a64-4e64-943d-4e5bfc93917e';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '44147f75-8a64-4e64-943d-4e5bfc93917e'
and us_active = 1
2018-08-14 14:59:50 http://localhost:49412/edit_query.aspx?id=1 elapsed milliseconds:0000
2018-08-14 14:59:50 http://localhost:49412/edit_query.aspx?id=1 sql=
/* populate org/user dropdowns */
select og_id, og_name from orgs order by og_name;
select us_id, us_username from users order by us_username
2018-08-14 14:59:50 http://localhost:49412/edit_query.aspx?id=1 elapsed milliseconds:0002
2018-08-14 14:59:50 http://localhost:49412/edit_query.aspx?id=1 sql=
select
				qu_desc, qu_sql, isnull(qu_user,0) [qu_user], isnull(qu_org,0) [qu_org]
				from queries where qu_id = 1
2018-08-14 14:59:50 http://localhost:49412/edit_query.aspx?id=1 elapsed milliseconds:0001
2018-08-14 15:07:29 http://localhost:49412/edit_query.aspx?id=1 sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '44147f75-8a64-4e64-943d-4e5bfc93917e';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '44147f75-8a64-4e64-943d-4e5bfc93917e'
and us_active = 1
2018-08-14 15:07:29 http://localhost:49412/edit_query.aspx?id=1 elapsed milliseconds:0000
2018-08-14 15:07:29 http://localhost:49412/edit_query.aspx?id=1 sql=
/* populate org/user dropdowns */
select og_id, og_name from orgs order by og_name;
select us_id, us_username from users order by us_username
2018-08-14 15:07:29 http://localhost:49412/edit_query.aspx?id=1 elapsed milliseconds:0000
2018-08-14 15:07:29 http://localhost:49412/edit_query.aspx?id=1 sql=
select
				qu_desc, qu_sql, isnull(qu_user,0) [qu_user], isnull(qu_org,0) [qu_org]
				from queries where qu_id = 1
2018-08-14 15:07:29 http://localhost:49412/edit_query.aspx?id=1 elapsed milliseconds:0000
2018-08-14 15:15:20 http://localhost:49412/edit_query.aspx?id=1 sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '44147f75-8a64-4e64-943d-4e5bfc93917e';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '44147f75-8a64-4e64-943d-4e5bfc93917e'
and us_active = 1
2018-08-14 15:15:20 http://localhost:49412/edit_query.aspx?id=1 elapsed milliseconds:0015
2018-08-14 15:15:20 http://localhost:49412/edit_query.aspx?id=1 sql=
/* populate org/user dropdowns */
select og_id, og_name from orgs order by og_name;
select us_id, us_username from users order by us_username
2018-08-14 15:15:21 http://localhost:49412/edit_query.aspx?id=1 elapsed milliseconds:0001
2018-08-14 15:15:21 http://localhost:49412/edit_query.aspx?id=1 sql=
select
				qu_desc, qu_sql, isnull(qu_user,0) [qu_user], isnull(qu_org,0) [qu_org]
				from queries where qu_id = 1
2018-08-14 15:15:21 http://localhost:49412/edit_query.aspx?id=1 elapsed milliseconds:0001
2018-08-14 15:16:32 http://localhost:49412/edit_query.aspx?id=1 sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '44147f75-8a64-4e64-943d-4e5bfc93917e';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '44147f75-8a64-4e64-943d-4e5bfc93917e'
and us_active = 1
2018-08-14 15:16:32 http://localhost:49412/edit_query.aspx?id=1 elapsed milliseconds:0007
2018-08-14 15:16:32 http://localhost:49412/edit_query.aspx?id=1 sql=
/* populate org/user dropdowns */
select og_id, og_name from orgs order by og_name;
select us_id, us_username from users order by us_username
2018-08-14 15:16:32 http://localhost:49412/edit_query.aspx?id=1 elapsed milliseconds:0001
2018-08-14 15:16:32 http://localhost:49412/edit_query.aspx?id=1 sql=
select
				qu_desc, qu_sql, isnull(qu_user,0) [qu_user], isnull(qu_org,0) [qu_org]
				from queries where qu_id = 1
2018-08-14 15:16:32 http://localhost:49412/edit_query.aspx?id=1 elapsed milliseconds:0001
2018-08-14 15:19:05 http://localhost:49412/edit_query.aspx?id=1 sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '44147f75-8a64-4e64-943d-4e5bfc93917e';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '44147f75-8a64-4e64-943d-4e5bfc93917e'
and us_active = 1
2018-08-14 15:19:05 http://localhost:49412/edit_query.aspx?id=1 elapsed milliseconds:0007
2018-08-14 15:19:05 http://localhost:49412/edit_query.aspx?id=1 sql=
/* populate org/user dropdowns */
select og_id, og_name from orgs order by og_name;
select us_id, us_username from users order by us_username
2018-08-14 15:19:06 http://localhost:49412/edit_query.aspx?id=1 elapsed milliseconds:0001
2018-08-14 15:19:06 http://localhost:49412/edit_query.aspx?id=1 sql=
select
				qu_desc, qu_sql, isnull(qu_user,0) [qu_user], isnull(qu_org,0) [qu_org]
				from queries where qu_id = 1
2018-08-14 15:19:06 http://localhost:49412/edit_query.aspx?id=1 elapsed milliseconds:0001
2018-08-14 15:22:12 http://localhost:49412/edit_query.aspx?id=1 sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '44147f75-8a64-4e64-943d-4e5bfc93917e';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '44147f75-8a64-4e64-943d-4e5bfc93917e'
and us_active = 1
2018-08-14 15:22:12 http://localhost:49412/edit_query.aspx?id=1 elapsed milliseconds:0007
2018-08-14 15:22:12 http://localhost:49412/edit_query.aspx?id=1 sql=
/* populate org/user dropdowns */
select og_id, og_name from orgs order by og_name;
select us_id, us_username from users order by us_username
2018-08-14 15:22:12 http://localhost:49412/edit_query.aspx?id=1 elapsed milliseconds:0002
2018-08-14 15:22:12 http://localhost:49412/edit_query.aspx?id=1 sql=
select
				qu_desc, qu_sql, isnull(qu_user,0) [qu_user], isnull(qu_org,0) [qu_org]
				from queries where qu_id = 1
2018-08-14 15:22:12 http://localhost:49412/edit_query.aspx?id=1 elapsed milliseconds:0001
2018-08-14 15:31:06 http://localhost:49412/edit_query.aspx?id=1 sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '44147f75-8a64-4e64-943d-4e5bfc93917e';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '44147f75-8a64-4e64-943d-4e5bfc93917e'
and us_active = 1
2018-08-14 15:31:06 http://localhost:49412/edit_query.aspx?id=1 elapsed milliseconds:0007
2018-08-14 15:31:06 http://localhost:49412/edit_query.aspx?id=1 sql=
/* populate org/user dropdowns */
select og_id, og_name from orgs order by og_name;
select us_id, us_username from users order by us_username
2018-08-14 15:31:06 http://localhost:49412/edit_query.aspx?id=1 elapsed milliseconds:0001
2018-08-14 15:31:06 http://localhost:49412/edit_query.aspx?id=1 sql=
select
				qu_desc, qu_sql, isnull(qu_user,0) [qu_user], isnull(qu_org,0) [qu_org]
				from queries where qu_id = 1
2018-08-14 15:31:06 http://localhost:49412/edit_query.aspx?id=1 elapsed milliseconds:0001
2018-08-14 15:32:47 http://localhost:49412/edit_query.aspx?id=1 sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '44147f75-8a64-4e64-943d-4e5bfc93917e';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '44147f75-8a64-4e64-943d-4e5bfc93917e'
and us_active = 1
2018-08-14 15:32:47 http://localhost:49412/edit_query.aspx?id=1 elapsed milliseconds:0007
2018-08-14 15:32:47 http://localhost:49412/edit_query.aspx?id=1 sql=
/* populate org/user dropdowns */
select og_id, og_name from orgs order by og_name;
select us_id, us_username from users order by us_username
2018-08-14 15:32:47 http://localhost:49412/edit_query.aspx?id=1 elapsed milliseconds:0002
2018-08-14 15:32:47 http://localhost:49412/edit_query.aspx?id=1 sql=
select
				qu_desc, qu_sql, isnull(qu_user,0) [qu_user], isnull(qu_org,0) [qu_org]
				from queries where qu_id = 1
2018-08-14 15:32:47 http://localhost:49412/edit_query.aspx?id=1 elapsed milliseconds:0002
2018-08-14 15:33:34  caught exception in util.set_context:Request is not available in this context
2018-08-14 15:33:34  threadproc_votes
2018-08-14 15:33:34  started creating Lucene index using folder F:\Synced\Visual Studio 2017\Projects\temp\btnetnew\btnetnew\App_Data\lucene_index
2018-08-14 15:33:34  sql=

if exists (select * from dbo.sysobjects where id = object_id(N'[votes_view]'))
drop view [votes_view]
2018-08-14 15:33:34  sql=

create view votes_view as
select bu_bug as vote_bug, sum(bu_vote) as vote_total
from bug_user
group by bu_bug
having sum(bu_vote) > 0
2018-08-14 15:33:34  sql=

select bu_bug, count(1)
from bug_user 
where bu_vote = 1
group by bu_bug
2018-08-14 15:33:34  elapsed milliseconds:0001
2018-08-14 15:33:34  sql=

/* get searchable cols */					
select sc.name
from syscolumns sc
inner join systypes st on st.xusertype = sc.xusertype
inner join sysobjects so on sc.id = so.id
where so.name = 'bugs'
and st.[name] <> 'sysname'
and sc.name not in ('rowguid',
'bg_id',
'bg_short_desc',
'bg_reported_user',
'bg_reported_date',
'bg_project',
'bg_org',
'bg_category',
'bg_priority',
'bg_status',
'bg_assigned_to_user',
'bg_last_updated_user',
'bg_last_updated_date',
'bg_user_defined_attribute',
'bg_project_custom_dropdown_value1',
'bg_project_custom_dropdown_value2',
'bg_project_custom_dropdown_value3',
'bg_tags')
and st.[name] in ('nvarchar','varchar')
and sc.length > 30
2018-08-14 15:33:34  elapsed milliseconds:0065
2018-08-14 15:33:34  sql=

select bg_id, 	

isnull(bg_tags,'') bg_tags,
bg_short_desc
from bugs
2018-08-14 15:33:34  elapsed milliseconds:0001
2018-08-14 15:33:34  sql=

select bp_bug, bp_id, 
isnull(bp_comment_search,bp_comment) [text] 
from bug_posts 
where bp_type <> 'update'
and bp_hidden_from_external_users = 0
2018-08-14 15:33:34  elapsed milliseconds:0001
2018-08-14 15:33:34  done creating Lucene index
2018-08-14 15:33:36 http://localhost:49412/edit_query.aspx?id=1 sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '44147f75-8a64-4e64-943d-4e5bfc93917e';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '44147f75-8a64-4e64-943d-4e5bfc93917e'
and us_active = 1
2018-08-14 15:33:36 http://localhost:49412/edit_query.aspx?id=1 elapsed milliseconds:0010
2018-08-14 15:33:36 http://localhost:49412/edit_query.aspx?id=1 sql=

/* custom columns */ select sc.name, st.[name] [datatype], 
case when st.[name] = 'nvarchar' or st.[name] = 'nchar' then sc.length/2 else sc.length end as [length], 
sc.xprec, sc.xscale, sc.isnullable,
mm.text [default value], 
dflts.name [default name], 
isnull(ccm_dropdown_type,'') [dropdown type],
isnull(ccm_dropdown_vals,'') [vals],
isnull(ccm_sort_seq, sc.colorder) [column order],
sc.colorder
from syscolumns sc
inner join systypes st on st.xusertype = sc.xusertype
inner join sysobjects so on sc.id = so.id
left outer join syscomments mm on sc.cdefault = mm.id
left outer join custom_col_metadata on ccm_colorder = sc.colorder
left outer join sysobjects dflts on dflts.id = mm.id
where so.name = 'bugs'
and st.[name] <> 'sysname'
and sc.name not in ('rowguid',
'bg_id',
'bg_short_desc',
'bg_reported_user',
'bg_reported_date',
'bg_project',
'bg_org',
'bg_category',
'bg_priority',
'bg_status',
'bg_assigned_to_user',
'bg_last_updated_user',
'bg_last_updated_date',
'bg_user_defined_attribute',
'bg_project_custom_dropdown_value1',
'bg_project_custom_dropdown_value2',
'bg_project_custom_dropdown_value3',
'bg_tags')
order by sc.id, isnull(ccm_sort_seq,sc.colorder)
2018-08-14 15:33:36 http://localhost:49412/edit_query.aspx?id=1 elapsed milliseconds:0085
2018-08-14 15:33:36 http://localhost:49412/edit_query.aspx?id=1 sql=
/* populate org/user dropdowns */
select og_id, og_name from orgs order by og_name;
select us_id, us_username from users order by us_username
2018-08-14 15:33:36 http://localhost:49412/edit_query.aspx?id=1 elapsed milliseconds:0001
2018-08-14 15:33:36 http://localhost:49412/edit_query.aspx?id=1 sql=
select
				qu_desc, qu_sql, isnull(qu_user,0) [qu_user], isnull(qu_org,0) [qu_org]
				from queries where qu_id = 1
2018-08-14 15:33:36 http://localhost:49412/edit_query.aspx?id=1 elapsed milliseconds:0001
2018-08-14 15:36:09 http://localhost:49412/bugs.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '44147f75-8a64-4e64-943d-4e5bfc93917e';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '44147f75-8a64-4e64-943d-4e5bfc93917e'
and us_active = 1
2018-08-14 15:36:10 http://localhost:49412/bugs.aspx elapsed milliseconds:0016
2018-08-14 15:36:10 http://localhost:49412/bugs.aspx sql=
/* query dropdown */
select qu_id, qu_desc
from queries
where (isnull(qu_user,0) = 0 and isnull(qu_org,0) = 0)
or isnull(qu_user,0) = 1
or isnull(qu_org,0) = 1
order by qu_desc
2018-08-14 15:36:10 http://localhost:49412/bugs.aspx elapsed milliseconds:0002
2018-08-14 15:36:10 http://localhost:49412/bugs.aspx sql=
select qu_id, qu_sql from queries where qu_id in
			(select us_default_query from users where us_id = 1)
2018-08-14 15:36:10 http://localhost:49412/bugs.aspx elapsed milliseconds:0002
2018-08-14 15:36:10 http://localhost:49412/bugs.aspx sql=
select isnull(pr_background_color,'#ffffff'), bg_id [id], isnull(bu_flag,0) [$FLAG], 
 bg_short_desc [desc], isnull(pj_name,'') [project], isnull(og_name,'') [organization], isnull(ct_name,'') [category], rpt.us_username [reported by],
 bg_reported_date [reported on], isnull(pr_name,'') [priority], isnull(asg.us_username,'') [assigned to],
 isnull(st_name,'') [status], isnull(lu.us_username,'') [last updated by], bg_last_updated_date [last updated on]
 from bugs 
 left outer join bug_user on bu_bug = bg_id and bu_user = 1 
 left outer join users rpt on rpt.us_id = bg_reported_user
 left outer join users asg on asg.us_id = bg_assigned_to_user
 left outer join users lu on lu.us_id = bg_last_updated_user
 left outer join projects on pj_id = bg_project
 left outer join orgs on og_id = bg_org
 left outer join categories on ct_id = bg_category
 left outer join priorities on pr_id = bg_priority
 left outer join statuses on st_id = bg_status
  /* altered - just order by  */ WHERE  (bugs.bg_project not in (
					select pu_project
					from project_user_xref
					where pu_user = 1
					and pu_permission_level = 0)) order by bg_id desc
2018-08-14 15:36:10 http://localhost:49412/bugs.aspx elapsed milliseconds:0015
2018-08-14 15:36:13 http://localhost:49412/edit_bug.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '44147f75-8a64-4e64-943d-4e5bfc93917e';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '44147f75-8a64-4e64-943d-4e5bfc93917e'
and us_active = 1
2018-08-14 15:36:13 http://localhost:49412/edit_bug.aspx elapsed milliseconds:0000
2018-08-14 15:36:13 http://localhost:49412/edit_bug.aspx sql=
/* drop downs */ select pj_id, pj_name
		from projects
		left outer join project_user_xref on pj_id = pu_project
		and pu_user = 1
		where pj_active = 1
		and isnull(pu_permission_level,2) not in (0, 1)
		order by pj_name;
select og_id, og_name from orgs where og_active = 1 order by og_name;
select ct_id, ct_name from categories order by ct_sort_seq, ct_name;
select pr_id, pr_name from priorities order by pr_sort_seq, pr_name;
select st_id, st_name from statuses order by st_sort_seq, st_name;
select udf_id, udf_name from user_defined_attribute order by udf_sort_seq, udf_name;
2018-08-14 15:36:13 http://localhost:49412/edit_bug.aspx elapsed milliseconds:0011
2018-08-14 15:36:13 http://localhost:49412/edit_bug.aspx sql=

select top 1 pj_id from projects where pj_default = 1 order by pj_name;
select top 1 ct_id from categories where ct_default = 1 order by ct_name;
select top 1 pr_id from priorities where pr_default = 1 order by pr_name;
select top 1 st_id from statuses where st_default = 1 order by st_name;
select top 1 udf_id from user_defined_attribute where udf_default = 1 order by udf_name;
2018-08-14 15:36:13 http://localhost:49412/edit_bug.aspx elapsed milliseconds:0010
2018-08-14 15:36:13 http://localhost:49412/edit_bug.aspx sql=

/* users this project */ select us_id, case when 0 = 1 then us_lastname + ', ' + us_firstname else us_username end us_username
from users
inner join orgs on us_org = og_id
where us_active = 1
and og_can_be_assigned_to = 1
and (2 <> 0 or 1 = og_id or (og_external_user = 0 and 0 = 1))
and us_id not in
	(select pu_user from project_user_xref
		where pu_project = 0
		and pu_permission_level = 0)
order by us_username; 
2018-08-14 15:36:13 http://localhost:49412/edit_bug.aspx elapsed milliseconds:0007
2018-08-14 15:36:37 http://localhost:49412/edit_bug.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '44147f75-8a64-4e64-943d-4e5bfc93917e';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '44147f75-8a64-4e64-943d-4e5bfc93917e'
and us_active = 1
2018-08-14 15:36:37 http://localhost:49412/edit_bug.aspx elapsed milliseconds:0009
2018-08-14 15:36:37 http://localhost:49412/edit_bug.aspx sql=

/* users this project */ select us_id, case when 0 = 1 then us_lastname + ', ' + us_firstname else us_username end us_username
from users
inner join orgs on us_org = og_id
where us_active = 1
and og_can_be_assigned_to = 1
and (2 <> 0 or 1 = og_id or (og_external_user = 0 and 0 = 1))
and us_id not in
	(select pu_user from project_user_xref
		where pu_project = 1
		and pu_permission_level = 0)
order by us_username; 
2018-08-14 15:36:37 http://localhost:49412/edit_bug.aspx elapsed milliseconds:0005
2018-08-14 15:36:37 http://localhost:49412/edit_bug.aspx sql=
select isnull(pj_default_user,0)
					from projects
					where pj_id = 1
2018-08-14 15:36:37 http://localhost:49412/edit_bug.aspx sql=
select
			isnull(pj_enable_custom_dropdown1,0) [pj_enable_custom_dropdown1],
			isnull(pj_enable_custom_dropdown2,0) [pj_enable_custom_dropdown2],
			isnull(pj_enable_custom_dropdown3,0) [pj_enable_custom_dropdown3],
			isnull(pj_custom_dropdown_label1,'') [pj_custom_dropdown_label1],
			isnull(pj_custom_dropdown_label2,'') [pj_custom_dropdown_label2],
			isnull(pj_custom_dropdown_label3,'') [pj_custom_dropdown_label3],
			isnull(pj_custom_dropdown_values1,'') [pj_custom_dropdown_values1],
			isnull(pj_custom_dropdown_values2,'') [pj_custom_dropdown_values2],
			isnull(pj_custom_dropdown_values3,'') [pj_custom_dropdown_values3]
			from projects where pj_id = 1
2018-08-14 15:36:37 http://localhost:49412/edit_bug.aspx elapsed milliseconds:0001
2018-08-14 15:37:06 http://localhost:49412/edit_bug.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '44147f75-8a64-4e64-943d-4e5bfc93917e';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '44147f75-8a64-4e64-943d-4e5bfc93917e'
and us_active = 1
2018-08-14 15:37:07 http://localhost:49412/edit_bug.aspx elapsed milliseconds:0000
2018-08-14 15:37:07 http://localhost:49412/edit_bug.aspx sql=
 /* get_bug_datarow */
declare @svn_revisions int
declare @git_commits int
declare @hg_revisions int
declare @tasks int
declare @related int;
set @svn_revisions = 0
set @git_commits = 0
set @hg_revisions = 0
set @tasks = 0
set @related = 0

select bg_id [id],
bg_short_desc [short_desc],
isnull(bg_tags,'') [bg_tags],
isnull(ru.us_username,'[deleted user]') [reporter],
isnull(ru.us_email,'') [reporter_email],
case rtrim(ru.us_firstname)
	when null then isnull(ru.us_lastname, '')
	when '' then isnull(ru.us_lastname, '')
	else isnull(ru.us_lastname + ', ' + ru.us_firstname,'')
	end [reporter_fullname],
bg_reported_date [reported_date],
datediff(s,bg_reported_date,getdate()) [seconds_ago],
isnull(lu.us_username,'') [last_updated_user],
case rtrim(lu.us_firstname)
	when null then isnull(lu.us_lastname, '')
	when '' then isnull(lu.us_lastname, '')
	else isnull(lu.us_lastname + ', ' + lu.us_firstname,'')
	end [last_updated_fullname],


bg_last_updated_date [last_updated_date],
isnull(bg_project,0) [project],
isnull(pj_name,'[no project]') [current_project],

isnull(bg_org,0) [organization],
isnull(bugorg.og_name,'') [og_name],

isnull(bg_category,0) [category],
isnull(ct_name,'') [category_name],

isnull(bg_priority,0) [priority],
isnull(pr_name,'') [priority_name],

isnull(bg_status,0) [status],
isnull(st_name,'') [status_name],

isnull(bg_user_defined_attribute,0) [udf],
isnull(udf_name,'') [udf_name],

isnull(bg_assigned_to_user,0) [assigned_to_user],
isnull(asg.us_username,'[not assigned]') [assigned_to_username],
case rtrim(asg.us_firstname)
when null then isnull(asg.us_lastname, '[not assigned]')
when '' then isnull(asg.us_lastname, '[not assigned]')
else isnull(asg.us_lastname + ', ' + asg.us_firstname,'[not assigned]')
end [assigned_to_fullname],

isnull(bs_user,0) [subscribed],

case
when
	1 <> bg_org
	and userorg.og_other_orgs_permission_level < 2
	and userorg.og_other_orgs_permission_level < isnull(pu_permission_level,2)
		then userorg.og_other_orgs_permission_level
else
	isnull(pu_permission_level,2)
end [pu_permission_level],

isnull(bg_project_custom_dropdown_value1,'') [bg_project_custom_dropdown_value1],
isnull(bg_project_custom_dropdown_value2,'') [bg_project_custom_dropdown_value2],
isnull(bg_project_custom_dropdown_value3,'') [bg_project_custom_dropdown_value3],
@related [relationship_cnt],
@svn_revisions [svn_revision_cnt],
@git_commits [git_commit_cnt],
@hg_revisions [hg_commit_cnt],
@tasks [task_cnt],
getdate() [snapshot_timestamp]

from bugs
inner join users this_user on us_id = 1
inner join orgs userorg on this_user.us_org = userorg.og_id
left outer join user_defined_attribute on bg_user_defined_attribute = udf_id
left outer join projects on bg_project = pj_id
left outer join orgs bugorg on bg_org = bugorg.og_id
left outer join categories on bg_category = ct_id
left outer join priorities on bg_priority = pr_id
left outer join statuses on bg_status = st_id
left outer join users asg on bg_assigned_to_user = asg.us_id
left outer join users ru on bg_reported_user = ru.us_id
left outer join users lu on bg_last_updated_user = lu.us_id
left outer join bug_subscriptions on bs_bug = bg_id and bs_user = 1
left outer join project_user_xref on pj_id = pu_project
and pu_user = 1
where bg_id = 0
2018-08-14 15:37:07 http://localhost:49412/edit_bug.aspx elapsed milliseconds:0016
2018-08-14 15:37:07 http://localhost:49412/edit_bug.aspx sql=

/* validate org versus assigned_to */
select case when og_other_orgs_permission_level <> 0
or 1 = og_id then 1
else 0 end as [answer]
from users
inner join orgs on us_org = og_id
where us_id = 1
2018-08-14 15:37:07 http://localhost:49412/edit_bug.aspx sql=
insert into bugs
					(bg_short_desc,
					bg_tags,
					bg_reported_user,
					bg_last_updated_user,
					bg_reported_date,
					bg_last_updated_date,
					bg_project,
					bg_org,
					bg_category,
					bg_priority,
					bg_status,
					bg_assigned_to_user,
					bg_user_defined_attribute,
					bg_project_custom_dropdown_value1,
					bg_project_custom_dropdown_value2,
					bg_project_custom_dropdown_value3
					)
					values (N'AFIS Upgrade', N'', 1,  1, getdate(), getdate(),
					1, 1,
					3, 1, 2, 1, 0,
					N'',N'',N'' )
select scope_identity()
2018-08-14 15:37:07 http://localhost:49412/edit_bug.aspx sql=

declare @pj int
select @pj = bg_project from bugs where bg_id = 1

delete from bug_subscriptions
where bs_bug = 1
and bs_user in
(select x.pu_user
from projects
left outer join project_user_xref x on pu_project = pj_id
where pu_project = @pj
and isnull(pu_permission_level,2) = 0)

delete from bug_subscriptions
where bs_bug = 1
and bs_user in
(select us_id from users
 inner join orgs on us_org = og_id
 inner join bugs on bg_id = 1
 where og_other_orgs_permission_level = 0
 and bg_org <> og_id)

insert into bug_subscriptions (bs_bug, bs_user)
select 1, us_id
from users
inner join orgs on us_org = og_id
inner join bugs on bg_id = 1
left outer join project_user_xref on pu_project = @pj and pu_user = us_id
where us_auto_subscribe = 1
and
case
	when
		us_org <> bg_org
		and og_other_orgs_permission_level < 2
		and og_other_orgs_permission_level < isnull(pu_permission_level,2)
			then og_other_orgs_permission_level
	else
		isnull(pu_permission_level,2)
end <> 0
and us_active = 1
and us_id not in
(select bs_user from bug_subscriptions
where bs_bug = 1)

insert into bug_subscriptions (bs_bug, bs_user)
select 1, pj_default_user
from projects
inner join users on pj_default_user = us_id
where pj_id = @pj
and pj_default_user <> 0
and pj_auto_subscribe_default_user = 1
and us_active = 1
and pj_default_user not in
(select bs_user from bug_subscriptions
where bs_bug = 1)

insert into bug_subscriptions (bs_bug, bs_user)
select 1, pu_user from project_user_xref
inner join users on pu_user = us_id
inner join orgs on us_org = og_id
inner join bugs on bg_id = 1
where pu_auto_subscribe = 1
and
case
	when
		us_org <> bg_org
		and og_other_orgs_permission_level < 2
		and og_other_orgs_permission_level < isnull(pu_permission_level,2)
			then og_other_orgs_permission_level
	else
		isnull(pu_permission_level,2)
end <> 0
and us_active = 1
and pu_project = @pj
and pu_user not in
(select bs_user from bug_subscriptions
where bs_bug = 1)

insert into bug_subscriptions (bs_bug, bs_user)
select 1, us_id
from users
inner join bugs on bg_id = 1
inner join orgs on us_org = og_id
left outer join project_user_xref on pu_project = @pj and pu_user = us_id
where ((us_auto_subscribe_own_bugs = 1 and bg_assigned_to_user = us_id)
or
(us_auto_subscribe_reported_bugs = 1 and bg_reported_user = us_id))
and
case
	when
		us_org <> bg_org
		and og_other_orgs_permission_level < 2
		and og_other_orgs_permission_level < isnull(pu_permission_level,2)
			then og_other_orgs_permission_level
	else
		isnull(pu_permission_level,2)
end <> 0
and us_active = 1
and us_id not in
(select bs_user from bug_subscriptions
where bs_bug = 1)
2018-08-14 15:37:07 http://localhost:49412/edit_bug.aspx sql=

/* get notification emails for all subscribers */
select us_email, us_id, us_admin, og.*
from bug_subscriptions
inner join users on bs_user = us_id
inner join orgs og on us_org = og_id
inner join bugs on bg_id = bs_bug
left outer join project_user_xref on pu_user = us_id and pu_project = bg_project
where us_email is not null
and us_enable_notifications = 1
-- $status_change
and us_active = 1
and us_email <> ''
and (   (1 <= us_reported_notifications and bg_reported_user = bs_user)
or (1 <= us_assigned_notifications and bg_assigned_to_user = bs_user)
or (1 <= us_assigned_notifications and 0 = bs_user)
or (1 <= us_subscribed_notifications))
and
case
when
us_org <> bg_org
and og_other_orgs_permission_level < 2
and og_other_orgs_permission_level < isnull(pu_permission_level,2)
	then og_other_orgs_permission_level
else
isnull(pu_permission_level,2)
end <> 0
and bs_bug = 1
and (us_id <> 1 or isnull(us_send_notifications_to_self,0) = 1)
2018-08-14 15:37:07  started updating Lucene index using folder F:\Synced\Visual Studio 2017\Projects\temp\btnetnew\btnetnew\App_Data\lucene_index
2018-08-14 15:37:07 http://localhost:49412/edit_bug.aspx elapsed milliseconds:0020
2018-08-14 15:37:07  sql=

/* get searchable cols */					
select sc.name
from syscolumns sc
inner join systypes st on st.xusertype = sc.xusertype
inner join sysobjects so on sc.id = so.id
where so.name = 'bugs'
and st.[name] <> 'sysname'
and sc.name not in ('rowguid',
'bg_id',
'bg_short_desc',
'bg_reported_user',
'bg_reported_date',
'bg_project',
'bg_org',
'bg_category',
'bg_priority',
'bg_status',
'bg_assigned_to_user',
'bg_last_updated_user',
'bg_last_updated_date',
'bg_user_defined_attribute',
'bg_project_custom_dropdown_value1',
'bg_project_custom_dropdown_value2',
'bg_project_custom_dropdown_value3',
'bg_tags')
and st.[name] in ('nvarchar','varchar')
and sc.length > 30
2018-08-14 15:37:07 http://localhost:49412/edit_bug.aspx?id=1 sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '44147f75-8a64-4e64-943d-4e5bfc93917e';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '44147f75-8a64-4e64-943d-4e5bfc93917e'
and us_active = 1
2018-08-14 15:37:07 http://localhost:49412/edit_bug.aspx?id=1 elapsed milliseconds:0000
2018-08-14 15:37:07 http://localhost:49412/edit_bug.aspx?id=1 sql=
 /* get_bug_datarow */
declare @svn_revisions int
declare @git_commits int
declare @hg_revisions int
declare @tasks int
declare @related int;
set @svn_revisions = 0
set @git_commits = 0
set @hg_revisions = 0
set @tasks = 0
set @related = 0

select bg_id [id],
bg_short_desc [short_desc],
isnull(bg_tags,'') [bg_tags],
isnull(ru.us_username,'[deleted user]') [reporter],
isnull(ru.us_email,'') [reporter_email],
case rtrim(ru.us_firstname)
	when null then isnull(ru.us_lastname, '')
	when '' then isnull(ru.us_lastname, '')
	else isnull(ru.us_lastname + ', ' + ru.us_firstname,'')
	end [reporter_fullname],
bg_reported_date [reported_date],
datediff(s,bg_reported_date,getdate()) [seconds_ago],
isnull(lu.us_username,'') [last_updated_user],
case rtrim(lu.us_firstname)
	when null then isnull(lu.us_lastname, '')
	when '' then isnull(lu.us_lastname, '')
	else isnull(lu.us_lastname + ', ' + lu.us_firstname,'')
	end [last_updated_fullname],


bg_last_updated_date [last_updated_date],
isnull(bg_project,0) [project],
isnull(pj_name,'[no project]') [current_project],

isnull(bg_org,0) [organization],
isnull(bugorg.og_name,'') [og_name],

isnull(bg_category,0) [category],
isnull(ct_name,'') [category_name],

isnull(bg_priority,0) [priority],
isnull(pr_name,'') [priority_name],

isnull(bg_status,0) [status],
isnull(st_name,'') [status_name],

isnull(bg_user_defined_attribute,0) [udf],
isnull(udf_name,'') [udf_name],

isnull(bg_assigned_to_user,0) [assigned_to_user],
isnull(asg.us_username,'[not assigned]') [assigned_to_username],
case rtrim(asg.us_firstname)
when null then isnull(asg.us_lastname, '[not assigned]')
when '' then isnull(asg.us_lastname, '[not assigned]')
else isnull(asg.us_lastname + ', ' + asg.us_firstname,'[not assigned]')
end [assigned_to_fullname],

isnull(bs_user,0) [subscribed],

case
when
	1 <> bg_org
	and userorg.og_other_orgs_permission_level < 2
	and userorg.og_other_orgs_permission_level < isnull(pu_permission_level,2)
		then userorg.og_other_orgs_permission_level
else
	isnull(pu_permission_level,2)
end [pu_permission_level],

isnull(bg_project_custom_dropdown_value1,'') [bg_project_custom_dropdown_value1],
isnull(bg_project_custom_dropdown_value2,'') [bg_project_custom_dropdown_value2],
isnull(bg_project_custom_dropdown_value3,'') [bg_project_custom_dropdown_value3],
@related [relationship_cnt],
@svn_revisions [svn_revision_cnt],
@git_commits [git_commit_cnt],
@hg_revisions [hg_commit_cnt],
@tasks [task_cnt],
getdate() [snapshot_timestamp]

from bugs
inner join users this_user on us_id = 1
inner join orgs userorg on this_user.us_org = userorg.og_id
left outer join user_defined_attribute on bg_user_defined_attribute = udf_id
left outer join projects on bg_project = pj_id
left outer join orgs bugorg on bg_org = bugorg.og_id
left outer join categories on bg_category = ct_id
left outer join priorities on bg_priority = pr_id
left outer join statuses on bg_status = st_id
left outer join users asg on bg_assigned_to_user = asg.us_id
left outer join users ru on bg_reported_user = ru.us_id
left outer join users lu on bg_last_updated_user = lu.us_id
left outer join bug_subscriptions on bs_bug = bg_id and bs_user = 1
left outer join project_user_xref on pj_id = pu_project
and pu_user = 1
where bg_id = 1
2018-08-14 15:37:07  elapsed milliseconds:0072
2018-08-14 15:37:07  sql=

select bg_id, 

isnull(bg_tags,'') bg_tags,
bg_short_desc    
from bugs where bg_id = 1
2018-08-14 15:37:07 http://localhost:49412/edit_bug.aspx?id=1 elapsed milliseconds:0026
2018-08-14 15:37:07  elapsed milliseconds:0001
2018-08-14 15:37:07 http://localhost:49412/edit_bug.aspx?id=1 sql=
/* drop downs */ select pj_id, pj_name
		from projects
		left outer join project_user_xref on pj_id = pu_project
		and pu_user = 1
		where pj_active = 1
		and isnull(pu_permission_level,2) not in (0, 1)
		order by pj_name;
select og_id, og_name from orgs where og_active = 1 order by og_name;
select ct_id, ct_name from categories order by ct_sort_seq, ct_name;
select pr_id, pr_name from priorities order by pr_sort_seq, pr_name;
select st_id, st_name from statuses order by st_sort_seq, st_name;
select udf_id, udf_name from user_defined_attribute order by udf_sort_seq, udf_name;
2018-08-14 15:37:07 http://localhost:49412/edit_bug.aspx?id=1 elapsed milliseconds:0006
2018-08-14 15:37:07 http://localhost:49412/edit_bug.aspx?id=1 sql=

/* users this project */ select us_id, case when 0 = 1 then us_lastname + ', ' + us_firstname else us_username end us_username
from users
inner join orgs on us_org = og_id
where us_active = 1
and og_can_be_assigned_to = 1
and (2 <> 0 or 1 = og_id or (og_external_user = 0 and 0 = 1))
and us_id not in
	(select pu_user from project_user_xref
		where pu_project = 1
		and pu_permission_level = 0)
order by us_username; 
2018-08-14 15:37:07 http://localhost:49412/edit_bug.aspx?id=1 elapsed milliseconds:0000
2018-08-14 15:37:07  sql=

select bp_bug, bp_id, 
isnull(bp_comment_search,bp_comment) [text] 
from bug_posts 
where bp_type <> 'update'
and bp_hidden_from_external_users = 0
and bp_bug = 1
2018-08-14 15:37:07 http://localhost:49412/edit_bug.aspx?id=1 sql=
select
			isnull(pj_enable_custom_dropdown1,0) [pj_enable_custom_dropdown1],
			isnull(pj_enable_custom_dropdown2,0) [pj_enable_custom_dropdown2],
			isnull(pj_enable_custom_dropdown3,0) [pj_enable_custom_dropdown3],
			isnull(pj_custom_dropdown_label1,'') [pj_custom_dropdown_label1],
			isnull(pj_custom_dropdown_label2,'') [pj_custom_dropdown_label2],
			isnull(pj_custom_dropdown_label3,'') [pj_custom_dropdown_label3],
			isnull(pj_custom_dropdown_values1,'') [pj_custom_dropdown_values1],
			isnull(pj_custom_dropdown_values2,'') [pj_custom_dropdown_values2],
			isnull(pj_custom_dropdown_values3,'') [pj_custom_dropdown_values3]
			from projects where pj_id = 1
2018-08-14 15:37:07  elapsed milliseconds:0002
2018-08-14 15:37:07 http://localhost:49412/edit_bug.aspx?id=1 elapsed milliseconds:0000
2018-08-14 15:37:07 http://localhost:49412/edit_bug.aspx?id=1 sql=

/* get_bug_posts */
select
a.bp_bug,
a.bp_comment,
isnull(us_username,'') [us_username],
case rtrim(us_firstname)
	when null then isnull(us_lastname, '')
	when '' then isnull(us_lastname, '')
	else isnull(us_lastname + ', ' + us_firstname,'')
	end [us_fullname],
isnull(us_email,'') [us_email],
a.bp_date,
datediff(s,a.bp_date,getdate()) [seconds_ago],
a.bp_id,
a.bp_type,
isnull(a.bp_email_from,'') bp_email_from,
isnull(a.bp_email_to,'') bp_email_to,
isnull(a.bp_email_cc,'') bp_email_cc,
isnull(a.bp_file,'') bp_file,
isnull(a.bp_size,0) bp_size,
isnull(a.bp_content_type,'') bp_content_type,
a.bp_hidden_from_external_users,
isnull(ba.bp_file,'') ba_file,  -- intentionally ba
isnull(ba.bp_id,'') ba_id, -- intentionally ba
isnull(ba.bp_size,'') ba_size,  -- intentionally ba
isnull(ba.bp_content_type,'') ba_content_type -- intentionally ba
from bug_posts a
left outer join users on us_id = a.bp_user
left outer join bug_posts ba on ba.bp_parent = a.bp_id and ba.bp_bug = a.bp_bug
where a.bp_bug = 1
and a.bp_parent is null
 and a.bp_type <> 'update'
 order by a.bp_id desc, ba.bp_parent, ba.bp_id
2018-08-14 15:37:07 http://localhost:49412/edit_bug.aspx?id=1 elapsed milliseconds:0005
2018-08-14 15:37:07  done updating Lucene index
2018-08-14 15:40:44 http://localhost:49412/print_bug.aspx?id=1 sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '44147f75-8a64-4e64-943d-4e5bfc93917e';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '44147f75-8a64-4e64-943d-4e5bfc93917e'
and us_active = 1
2018-08-14 15:40:45 http://localhost:49412/print_bug.aspx?id=1 elapsed milliseconds:0010
2018-08-14 15:40:45 http://localhost:49412/print_bug.aspx?id=1 sql=
 /* get_bug_datarow */
declare @svn_revisions int
declare @git_commits int
declare @hg_revisions int
declare @tasks int
declare @related int;
set @svn_revisions = 0
set @git_commits = 0
set @hg_revisions = 0
set @tasks = 0
set @related = 0

select bg_id [id],
bg_short_desc [short_desc],
isnull(bg_tags,'') [bg_tags],
isnull(ru.us_username,'[deleted user]') [reporter],
isnull(ru.us_email,'') [reporter_email],
case rtrim(ru.us_firstname)
	when null then isnull(ru.us_lastname, '')
	when '' then isnull(ru.us_lastname, '')
	else isnull(ru.us_lastname + ', ' + ru.us_firstname,'')
	end [reporter_fullname],
bg_reported_date [reported_date],
datediff(s,bg_reported_date,getdate()) [seconds_ago],
isnull(lu.us_username,'') [last_updated_user],
case rtrim(lu.us_firstname)
	when null then isnull(lu.us_lastname, '')
	when '' then isnull(lu.us_lastname, '')
	else isnull(lu.us_lastname + ', ' + lu.us_firstname,'')
	end [last_updated_fullname],


bg_last_updated_date [last_updated_date],
isnull(bg_project,0) [project],
isnull(pj_name,'[no project]') [current_project],

isnull(bg_org,0) [organization],
isnull(bugorg.og_name,'') [og_name],

isnull(bg_category,0) [category],
isnull(ct_name,'') [category_name],

isnull(bg_priority,0) [priority],
isnull(pr_name,'') [priority_name],

isnull(bg_status,0) [status],
isnull(st_name,'') [status_name],

isnull(bg_user_defined_attribute,0) [udf],
isnull(udf_name,'') [udf_name],

isnull(bg_assigned_to_user,0) [assigned_to_user],
isnull(asg.us_username,'[not assigned]') [assigned_to_username],
case rtrim(asg.us_firstname)
when null then isnull(asg.us_lastname, '[not assigned]')
when '' then isnull(asg.us_lastname, '[not assigned]')
else isnull(asg.us_lastname + ', ' + asg.us_firstname,'[not assigned]')
end [assigned_to_fullname],

isnull(bs_user,0) [subscribed],

case
when
	1 <> bg_org
	and userorg.og_other_orgs_permission_level < 2
	and userorg.og_other_orgs_permission_level < isnull(pu_permission_level,2)
		then userorg.og_other_orgs_permission_level
else
	isnull(pu_permission_level,2)
end [pu_permission_level],

isnull(bg_project_custom_dropdown_value1,'') [bg_project_custom_dropdown_value1],
isnull(bg_project_custom_dropdown_value2,'') [bg_project_custom_dropdown_value2],
isnull(bg_project_custom_dropdown_value3,'') [bg_project_custom_dropdown_value3],
@related [relationship_cnt],
@svn_revisions [svn_revision_cnt],
@git_commits [git_commit_cnt],
@hg_revisions [hg_commit_cnt],
@tasks [task_cnt],
getdate() [snapshot_timestamp]

from bugs
inner join users this_user on us_id = 1
inner join orgs userorg on this_user.us_org = userorg.og_id
left outer join user_defined_attribute on bg_user_defined_attribute = udf_id
left outer join projects on bg_project = pj_id
left outer join orgs bugorg on bg_org = bugorg.og_id
left outer join categories on bg_category = ct_id
left outer join priorities on bg_priority = pr_id
left outer join statuses on bg_status = st_id
left outer join users asg on bg_assigned_to_user = asg.us_id
left outer join users ru on bg_reported_user = ru.us_id
left outer join users lu on bg_last_updated_user = lu.us_id
left outer join bug_subscriptions on bs_bug = bg_id and bs_user = 1
left outer join project_user_xref on pj_id = pu_project
and pu_user = 1
where bg_id = 1
2018-08-14 15:40:45 http://localhost:49412/print_bug.aspx?id=1 elapsed milliseconds:0027
2018-08-14 15:40:45 http://localhost:49412/print_bug.aspx?id=1 sql=
select
					isnull(pj_enable_custom_dropdown1,0) [pj_enable_custom_dropdown1],
					isnull(pj_enable_custom_dropdown2,0) [pj_enable_custom_dropdown2],
					isnull(pj_enable_custom_dropdown3,0) [pj_enable_custom_dropdown3],
					isnull(pj_custom_dropdown_label1,'') [pj_custom_dropdown_label1],
					isnull(pj_custom_dropdown_label2,'') [pj_custom_dropdown_label2],
					isnull(pj_custom_dropdown_label3,'') [pj_custom_dropdown_label3]
					from projects where pj_id = 1
2018-08-14 15:40:45 http://localhost:49412/print_bug.aspx?id=1 elapsed milliseconds:0001
2018-08-14 15:40:45 http://localhost:49412/print_bug.aspx?id=1 sql=

/* get_bug_posts */
select
a.bp_bug,
a.bp_comment,
isnull(us_username,'') [us_username],
case rtrim(us_firstname)
	when null then isnull(us_lastname, '')
	when '' then isnull(us_lastname, '')
	else isnull(us_lastname + ', ' + us_firstname,'')
	end [us_fullname],
isnull(us_email,'') [us_email],
a.bp_date,
datediff(s,a.bp_date,getdate()) [seconds_ago],
a.bp_id,
a.bp_type,
isnull(a.bp_email_from,'') bp_email_from,
isnull(a.bp_email_to,'') bp_email_to,
isnull(a.bp_email_cc,'') bp_email_cc,
isnull(a.bp_file,'') bp_file,
isnull(a.bp_size,0) bp_size,
isnull(a.bp_content_type,'') bp_content_type,
a.bp_hidden_from_external_users,
isnull(ba.bp_file,'') ba_file,  -- intentionally ba
isnull(ba.bp_id,'') ba_id, -- intentionally ba
isnull(ba.bp_size,'') ba_size,  -- intentionally ba
isnull(ba.bp_content_type,'') ba_content_type -- intentionally ba
from bug_posts a
left outer join users on us_id = a.bp_user
left outer join bug_posts ba on ba.bp_parent = a.bp_id and ba.bp_bug = a.bp_bug
where a.bp_bug = 1
and a.bp_parent is null
 and a.bp_type <> 'update'
 order by a.bp_id desc, ba.bp_parent, ba.bp_id
2018-08-14 15:40:45 http://localhost:49412/print_bug.aspx?id=1 elapsed milliseconds:0007
2018-08-14 15:42:41 http://localhost:49412/print_bug.aspx?id=1 sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '44147f75-8a64-4e64-943d-4e5bfc93917e';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '44147f75-8a64-4e64-943d-4e5bfc93917e'
and us_active = 1
2018-08-14 15:42:41 http://localhost:49412/print_bug.aspx?id=1 elapsed milliseconds:0007
2018-08-14 15:42:41 http://localhost:49412/print_bug.aspx?id=1 sql=
 /* get_bug_datarow */
declare @svn_revisions int
declare @git_commits int
declare @hg_revisions int
declare @tasks int
declare @related int;
set @svn_revisions = 0
set @git_commits = 0
set @hg_revisions = 0
set @tasks = 0
set @related = 0

select bg_id [id],
bg_short_desc [short_desc],
isnull(bg_tags,'') [bg_tags],
isnull(ru.us_username,'[deleted user]') [reporter],
isnull(ru.us_email,'') [reporter_email],
case rtrim(ru.us_firstname)
	when null then isnull(ru.us_lastname, '')
	when '' then isnull(ru.us_lastname, '')
	else isnull(ru.us_lastname + ', ' + ru.us_firstname,'')
	end [reporter_fullname],
bg_reported_date [reported_date],
datediff(s,bg_reported_date,getdate()) [seconds_ago],
isnull(lu.us_username,'') [last_updated_user],
case rtrim(lu.us_firstname)
	when null then isnull(lu.us_lastname, '')
	when '' then isnull(lu.us_lastname, '')
	else isnull(lu.us_lastname + ', ' + lu.us_firstname,'')
	end [last_updated_fullname],


bg_last_updated_date [last_updated_date],
isnull(bg_project,0) [project],
isnull(pj_name,'[no project]') [current_project],

isnull(bg_org,0) [organization],
isnull(bugorg.og_name,'') [og_name],

isnull(bg_category,0) [category],
isnull(ct_name,'') [category_name],

isnull(bg_priority,0) [priority],
isnull(pr_name,'') [priority_name],

isnull(bg_status,0) [status],
isnull(st_name,'') [status_name],

isnull(bg_user_defined_attribute,0) [udf],
isnull(udf_name,'') [udf_name],

isnull(bg_assigned_to_user,0) [assigned_to_user],
isnull(asg.us_username,'[not assigned]') [assigned_to_username],
case rtrim(asg.us_firstname)
when null then isnull(asg.us_lastname, '[not assigned]')
when '' then isnull(asg.us_lastname, '[not assigned]')
else isnull(asg.us_lastname + ', ' + asg.us_firstname,'[not assigned]')
end [assigned_to_fullname],

isnull(bs_user,0) [subscribed],

case
when
	1 <> bg_org
	and userorg.og_other_orgs_permission_level < 2
	and userorg.og_other_orgs_permission_level < isnull(pu_permission_level,2)
		then userorg.og_other_orgs_permission_level
else
	isnull(pu_permission_level,2)
end [pu_permission_level],

isnull(bg_project_custom_dropdown_value1,'') [bg_project_custom_dropdown_value1],
isnull(bg_project_custom_dropdown_value2,'') [bg_project_custom_dropdown_value2],
isnull(bg_project_custom_dropdown_value3,'') [bg_project_custom_dropdown_value3],
@related [relationship_cnt],
@svn_revisions [svn_revision_cnt],
@git_commits [git_commit_cnt],
@hg_revisions [hg_commit_cnt],
@tasks [task_cnt],
getdate() [snapshot_timestamp]

from bugs
inner join users this_user on us_id = 1
inner join orgs userorg on this_user.us_org = userorg.og_id
left outer join user_defined_attribute on bg_user_defined_attribute = udf_id
left outer join projects on bg_project = pj_id
left outer join orgs bugorg on bg_org = bugorg.og_id
left outer join categories on bg_category = ct_id
left outer join priorities on bg_priority = pr_id
left outer join statuses on bg_status = st_id
left outer join users asg on bg_assigned_to_user = asg.us_id
left outer join users ru on bg_reported_user = ru.us_id
left outer join users lu on bg_last_updated_user = lu.us_id
left outer join bug_subscriptions on bs_bug = bg_id and bs_user = 1
left outer join project_user_xref on pj_id = pu_project
and pu_user = 1
where bg_id = 1
2018-08-14 15:42:41 http://localhost:49412/print_bug.aspx?id=1 elapsed milliseconds:0027
2018-08-14 15:42:41 http://localhost:49412/print_bug.aspx?id=1 sql=
select
					isnull(pj_enable_custom_dropdown1,0) [pj_enable_custom_dropdown1],
					isnull(pj_enable_custom_dropdown2,0) [pj_enable_custom_dropdown2],
					isnull(pj_enable_custom_dropdown3,0) [pj_enable_custom_dropdown3],
					isnull(pj_custom_dropdown_label1,'') [pj_custom_dropdown_label1],
					isnull(pj_custom_dropdown_label2,'') [pj_custom_dropdown_label2],
					isnull(pj_custom_dropdown_label3,'') [pj_custom_dropdown_label3]
					from projects where pj_id = 1
2018-08-14 15:42:41 http://localhost:49412/print_bug.aspx?id=1 elapsed milliseconds:0001
2018-08-14 15:42:41 http://localhost:49412/print_bug.aspx?id=1 sql=

/* get_bug_posts */
select
a.bp_bug,
a.bp_comment,
isnull(us_username,'') [us_username],
case rtrim(us_firstname)
	when null then isnull(us_lastname, '')
	when '' then isnull(us_lastname, '')
	else isnull(us_lastname + ', ' + us_firstname,'')
	end [us_fullname],
isnull(us_email,'') [us_email],
a.bp_date,
datediff(s,a.bp_date,getdate()) [seconds_ago],
a.bp_id,
a.bp_type,
isnull(a.bp_email_from,'') bp_email_from,
isnull(a.bp_email_to,'') bp_email_to,
isnull(a.bp_email_cc,'') bp_email_cc,
isnull(a.bp_file,'') bp_file,
isnull(a.bp_size,0) bp_size,
isnull(a.bp_content_type,'') bp_content_type,
a.bp_hidden_from_external_users,
isnull(ba.bp_file,'') ba_file,  -- intentionally ba
isnull(ba.bp_id,'') ba_id, -- intentionally ba
isnull(ba.bp_size,'') ba_size,  -- intentionally ba
isnull(ba.bp_content_type,'') ba_content_type -- intentionally ba
from bug_posts a
left outer join users on us_id = a.bp_user
left outer join bug_posts ba on ba.bp_parent = a.bp_id and ba.bp_bug = a.bp_bug
where a.bp_bug = 1
and a.bp_parent is null
 and a.bp_type <> 'update'
 order by a.bp_id desc, ba.bp_parent, ba.bp_id
2018-08-14 15:42:41 http://localhost:49412/print_bug.aspx?id=1 elapsed milliseconds:0012
2018-08-14 15:46:00  caught exception in util.set_context:Request is not available in this context
2018-08-14 15:46:00  threadproc_votes
2018-08-14 15:46:00  started creating Lucene index using folder F:\Synced\Visual Studio 2017\Projects\temp\btnetnew\btnetnew\App_Data\lucene_index
2018-08-14 15:46:00  sql=

if exists (select * from dbo.sysobjects where id = object_id(N'[votes_view]'))
drop view [votes_view]
2018-08-14 15:46:00  sql=

create view votes_view as
select bu_bug as vote_bug, sum(bu_vote) as vote_total
from bug_user
group by bu_bug
having sum(bu_vote) > 0
2018-08-14 15:46:00  sql=

select bu_bug, count(1)
from bug_user 
where bu_vote = 1
group by bu_bug
2018-08-14 15:46:00  sql=

/* get searchable cols */					
select sc.name
from syscolumns sc
inner join systypes st on st.xusertype = sc.xusertype
inner join sysobjects so on sc.id = so.id
where so.name = 'bugs'
and st.[name] <> 'sysname'
and sc.name not in ('rowguid',
'bg_id',
'bg_short_desc',
'bg_reported_user',
'bg_reported_date',
'bg_project',
'bg_org',
'bg_category',
'bg_priority',
'bg_status',
'bg_assigned_to_user',
'bg_last_updated_user',
'bg_last_updated_date',
'bg_user_defined_attribute',
'bg_project_custom_dropdown_value1',
'bg_project_custom_dropdown_value2',
'bg_project_custom_dropdown_value3',
'bg_tags')
and st.[name] in ('nvarchar','varchar')
and sc.length > 30
2018-08-14 15:46:00  elapsed milliseconds:0008
2018-08-14 15:46:00  elapsed milliseconds:0065
2018-08-14 15:46:00  sql=

select bg_id, 	

isnull(bg_tags,'') bg_tags,
bg_short_desc
from bugs
2018-08-14 15:46:00  elapsed milliseconds:0001
2018-08-14 15:46:00  sql=

select bp_bug, bp_id, 
isnull(bp_comment_search,bp_comment) [text] 
from bug_posts 
where bp_type <> 'update'
and bp_hidden_from_external_users = 0
2018-08-14 15:46:00  elapsed milliseconds:0001
2018-08-14 15:46:00  done creating Lucene index
2018-08-14 15:46:02 http://localhost:49412/default.aspx sql=
select count(1) from users
2018-08-14 15:46:05 http://localhost:49412/default.aspx sql=
select count(1) from users
2018-08-14 15:46:05 http://localhost:49412/default.aspx sql=

select us_username, us_id, us_password, isnull(us_salt,0) us_salt, us_active
from users
where us_username = N'admin'
2018-08-14 15:46:05 http://localhost:49412/default.aspx elapsed milliseconds:0001
2018-08-14 15:46:05 http://localhost:49412/default.aspx sql=
update users set us_most_recent_login_datetime = getdate() where us_id = 1
2018-08-14 15:46:05 http://localhost:49412/default.aspx sql=
select us_id from users where us_username = N'admin'
2018-08-14 15:46:05 http://localhost:49412/default.aspx elapsed milliseconds:0001
2018-08-14 15:46:05 http://localhost:49412/default.aspx guid=917f8fdb-056d-4cc4-b716-a6dfb02607c5
2018-08-14 15:46:05 http://localhost:49412/default.aspx sql=
insert into sessions (se_id, se_user) values('917f8fdb-056d-4cc4-b716-a6dfb02607c5', 1)
2018-08-14 15:46:05 http://localhost:49412/default.aspx AppPath:
2018-08-14 15:46:08 http://localhost:49412/bugs.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '917f8fdb-056d-4cc4-b716-a6dfb02607c5';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '917f8fdb-056d-4cc4-b716-a6dfb02607c5'
and us_active = 1
2018-08-14 15:46:08 http://localhost:49412/bugs.aspx elapsed milliseconds:0007
2018-08-14 15:46:08 http://localhost:49412/bugs.aspx sql=

/* custom columns */ select sc.name, st.[name] [datatype], 
case when st.[name] = 'nvarchar' or st.[name] = 'nchar' then sc.length/2 else sc.length end as [length], 
sc.xprec, sc.xscale, sc.isnullable,
mm.text [default value], 
dflts.name [default name], 
isnull(ccm_dropdown_type,'') [dropdown type],
isnull(ccm_dropdown_vals,'') [vals],
isnull(ccm_sort_seq, sc.colorder) [column order],
sc.colorder
from syscolumns sc
inner join systypes st on st.xusertype = sc.xusertype
inner join sysobjects so on sc.id = so.id
left outer join syscomments mm on sc.cdefault = mm.id
left outer join custom_col_metadata on ccm_colorder = sc.colorder
left outer join sysobjects dflts on dflts.id = mm.id
where so.name = 'bugs'
and st.[name] <> 'sysname'
and sc.name not in ('rowguid',
'bg_id',
'bg_short_desc',
'bg_reported_user',
'bg_reported_date',
'bg_project',
'bg_org',
'bg_category',
'bg_priority',
'bg_status',
'bg_assigned_to_user',
'bg_last_updated_user',
'bg_last_updated_date',
'bg_user_defined_attribute',
'bg_project_custom_dropdown_value1',
'bg_project_custom_dropdown_value2',
'bg_project_custom_dropdown_value3',
'bg_tags')
order by sc.id, isnull(ccm_sort_seq,sc.colorder)
2018-08-14 15:46:08 http://localhost:49412/bugs.aspx elapsed milliseconds:0092
2018-08-14 15:46:08 http://localhost:49412/bugs.aspx sql=
/* query dropdown */
select qu_id, qu_desc
from queries
where (isnull(qu_user,0) = 0 and isnull(qu_org,0) = 0)
or isnull(qu_user,0) = 1
or isnull(qu_org,0) = 1
order by qu_desc
2018-08-14 15:46:08 http://localhost:49412/bugs.aspx elapsed milliseconds:0002
2018-08-14 15:46:08 http://localhost:49412/bugs.aspx sql=
select qu_id, qu_sql from queries where qu_id in
			(select us_default_query from users where us_id = 1)
2018-08-14 15:46:08 http://localhost:49412/bugs.aspx elapsed milliseconds:0002
2018-08-14 15:46:08 http://localhost:49412/bugs.aspx sql=
select isnull(pr_background_color,'#ffffff'), bg_id [id], isnull(bu_flag,0) [$FLAG], 
 bg_short_desc [desc], isnull(pj_name,'') [project], isnull(og_name,'') [organization], isnull(ct_name,'') [category], rpt.us_username [reported by],
 bg_reported_date [reported on], isnull(pr_name,'') [priority], isnull(asg.us_username,'') [assigned to],
 isnull(st_name,'') [status], isnull(lu.us_username,'') [last updated by], bg_last_updated_date [last updated on]
 from bugs 
 left outer join bug_user on bu_bug = bg_id and bu_user = 1 
 left outer join users rpt on rpt.us_id = bg_reported_user
 left outer join users asg on asg.us_id = bg_assigned_to_user
 left outer join users lu on lu.us_id = bg_last_updated_user
 left outer join projects on pj_id = bg_project
 left outer join orgs on og_id = bg_org
 left outer join categories on ct_id = bg_category
 left outer join priorities on pr_id = bg_priority
 left outer join statuses on st_id = bg_status
  /* altered - just order by  */ WHERE  (bugs.bg_project not in (
					select pu_project
					from project_user_xref
					where pu_user = 1
					and pu_permission_level = 0)) order by bg_id desc
2018-08-14 15:46:08 http://localhost:49412/bugs.aspx elapsed milliseconds:0011
2018-08-14 15:46:55 http://localhost:49412/bugs.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '917f8fdb-056d-4cc4-b716-a6dfb02607c5';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '917f8fdb-056d-4cc4-b716-a6dfb02607c5'
and us_active = 1
2018-08-14 15:46:55 http://localhost:49412/bugs.aspx elapsed milliseconds:0008
2018-08-14 15:46:55 http://localhost:49412/bugs.aspx sql=
/* query dropdown */
select qu_id, qu_desc
from queries
where (isnull(qu_user,0) = 0 and isnull(qu_org,0) = 0)
or isnull(qu_user,0) = 1
or isnull(qu_org,0) = 1
order by qu_desc
2018-08-14 15:46:55 http://localhost:49412/bugs.aspx elapsed milliseconds:0001
2018-08-14 15:46:55 http://localhost:49412/bugs.aspx sql=
select qu_sql from queries where qu_id = 1
2018-08-14 15:46:55 http://localhost:49412/bugs.aspx sql=
select isnull(pr_background_color,'#ffffff'), bg_id [id], isnull(bu_flag,0) [$FLAG], 
 bg_short_desc [desc], isnull(pj_name,'') [project], isnull(og_name,'') [organization], isnull(ct_name,'') [category], rpt.us_username [reported by],
 bg_reported_date [reported on], isnull(pr_name,'') [priority], isnull(asg.us_username,'') [assigned to],
 isnull(st_name,'') [status], isnull(lu.us_username,'') [last updated by], bg_last_updated_date [last updated on]
 from bugs 
 left outer join bug_user on bu_bug = bg_id and bu_user = 1 
 left outer join users rpt on rpt.us_id = bg_reported_user
 left outer join users asg on asg.us_id = bg_assigned_to_user
 left outer join users lu on lu.us_id = bg_last_updated_user
 left outer join projects on pj_id = bg_project
 left outer join orgs on og_id = bg_org
 left outer join categories on ct_id = bg_category
 left outer join priorities on pr_id = bg_priority
 left outer join statuses on st_id = bg_status
  /* altered - just order by  */ WHERE  (bugs.bg_project not in (
					select pu_project
					from project_user_xref
					where pu_user = 1
					and pu_permission_level = 0)) order by bg_id desc
2018-08-14 15:46:55 http://localhost:49412/bugs.aspx elapsed milliseconds:0011
2018-08-14 15:52:03  caught exception in util.set_context:Request is not available in this context
2018-08-14 15:52:03  threadproc_votes
2018-08-14 15:52:03  started creating Lucene index using folder F:\Synced\Visual Studio 2017\Projects\temp\btnetnew\btnetnew\App_Data\lucene_index
2018-08-14 15:52:03  sql=

if exists (select * from dbo.sysobjects where id = object_id(N'[votes_view]'))
drop view [votes_view]
2018-08-14 15:52:03  sql=

create view votes_view as
select bu_bug as vote_bug, sum(bu_vote) as vote_total
from bug_user
group by bu_bug
having sum(bu_vote) > 0
2018-08-14 15:52:03  sql=

select bu_bug, count(1)
from bug_user 
where bu_vote = 1
group by bu_bug
2018-08-14 15:52:03  sql=

/* get searchable cols */					
select sc.name
from syscolumns sc
inner join systypes st on st.xusertype = sc.xusertype
inner join sysobjects so on sc.id = so.id
where so.name = 'bugs'
and st.[name] <> 'sysname'
and sc.name not in ('rowguid',
'bg_id',
'bg_short_desc',
'bg_reported_user',
'bg_reported_date',
'bg_project',
'bg_org',
'bg_category',
'bg_priority',
'bg_status',
'bg_assigned_to_user',
'bg_last_updated_user',
'bg_last_updated_date',
'bg_user_defined_attribute',
'bg_project_custom_dropdown_value1',
'bg_project_custom_dropdown_value2',
'bg_project_custom_dropdown_value3',
'bg_tags')
and st.[name] in ('nvarchar','varchar')
and sc.length > 30
2018-08-14 15:52:03  elapsed milliseconds:0006
2018-08-14 15:52:03  elapsed milliseconds:0063
2018-08-14 15:52:03  sql=

select bg_id, 	

isnull(bg_tags,'') bg_tags,
bg_short_desc
from bugs
2018-08-14 15:52:03  elapsed milliseconds:0001
2018-08-14 15:52:03  sql=

select bp_bug, bp_id, 
isnull(bp_comment_search,bp_comment) [text] 
from bug_posts 
where bp_type <> 'update'
and bp_hidden_from_external_users = 0
2018-08-14 15:52:03  elapsed milliseconds:0007
2018-08-14 15:52:03  done creating Lucene index
2018-08-14 15:52:04 http://localhost:49412/default.aspx sql=
select count(1) from users
2018-08-14 15:52:08 http://localhost:49412/default.aspx sql=
select count(1) from users
2018-08-14 15:52:08 http://localhost:49412/default.aspx sql=

select us_username, us_id, us_password, isnull(us_salt,0) us_salt, us_active
from users
where us_username = N'admin'
2018-08-14 15:52:08 http://localhost:49412/default.aspx elapsed milliseconds:0001
2018-08-14 15:52:08 http://localhost:49412/default.aspx sql=
update users set us_most_recent_login_datetime = getdate() where us_id = 1
2018-08-14 15:52:08 http://localhost:49412/default.aspx sql=
select us_id from users where us_username = N'admin'
2018-08-14 15:52:08 http://localhost:49412/default.aspx elapsed milliseconds:0001
2018-08-14 15:52:08 http://localhost:49412/default.aspx guid=55a0303c-0b37-4984-9d9b-e7f55810e7f2
2018-08-14 15:52:08 http://localhost:49412/default.aspx sql=
insert into sessions (se_id, se_user) values('55a0303c-0b37-4984-9d9b-e7f55810e7f2', 1)
2018-08-14 15:52:08 http://localhost:49412/default.aspx AppPath:
2018-08-14 15:52:10 http://localhost:49412/bugs.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '55a0303c-0b37-4984-9d9b-e7f55810e7f2';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '55a0303c-0b37-4984-9d9b-e7f55810e7f2'
and us_active = 1
2018-08-14 15:52:10 http://localhost:49412/bugs.aspx elapsed milliseconds:0007
2018-08-14 15:52:10 http://localhost:49412/bugs.aspx sql=

/* custom columns */ select sc.name, st.[name] [datatype], 
case when st.[name] = 'nvarchar' or st.[name] = 'nchar' then sc.length/2 else sc.length end as [length], 
sc.xprec, sc.xscale, sc.isnullable,
mm.text [default value], 
dflts.name [default name], 
isnull(ccm_dropdown_type,'') [dropdown type],
isnull(ccm_dropdown_vals,'') [vals],
isnull(ccm_sort_seq, sc.colorder) [column order],
sc.colorder
from syscolumns sc
inner join systypes st on st.xusertype = sc.xusertype
inner join sysobjects so on sc.id = so.id
left outer join syscomments mm on sc.cdefault = mm.id
left outer join custom_col_metadata on ccm_colorder = sc.colorder
left outer join sysobjects dflts on dflts.id = mm.id
where so.name = 'bugs'
and st.[name] <> 'sysname'
and sc.name not in ('rowguid',
'bg_id',
'bg_short_desc',
'bg_reported_user',
'bg_reported_date',
'bg_project',
'bg_org',
'bg_category',
'bg_priority',
'bg_status',
'bg_assigned_to_user',
'bg_last_updated_user',
'bg_last_updated_date',
'bg_user_defined_attribute',
'bg_project_custom_dropdown_value1',
'bg_project_custom_dropdown_value2',
'bg_project_custom_dropdown_value3',
'bg_tags')
order by sc.id, isnull(ccm_sort_seq,sc.colorder)
2018-08-14 15:52:10 http://localhost:49412/bugs.aspx elapsed milliseconds:0070
2018-08-14 15:52:10 http://localhost:49412/bugs.aspx sql=
/* query dropdown */
select qu_id, qu_desc
from queries
where (isnull(qu_user,0) = 0 and isnull(qu_org,0) = 0)
or isnull(qu_user,0) = 1
or isnull(qu_org,0) = 1
order by qu_desc
2018-08-14 15:52:10 http://localhost:49412/bugs.aspx elapsed milliseconds:0001
2018-08-14 15:52:10 http://localhost:49412/bugs.aspx sql=
select qu_id, qu_sql from queries where qu_id in
			(select us_default_query from users where us_id = 1)
2018-08-14 15:52:10 http://localhost:49412/bugs.aspx elapsed milliseconds:0002
2018-08-14 15:52:10 http://localhost:49412/bugs.aspx sql=
select isnull(pr_background_color,'#ffffff'), bg_id [id], isnull(bu_flag,0) [$FLAG], 
 bg_short_desc [desc], isnull(pj_name,'') [project], isnull(og_name,'') [organization], isnull(ct_name,'') [category], rpt.us_username [reported by],
 bg_reported_date [reported on], isnull(pr_name,'') [priority], isnull(asg.us_username,'') [assigned to],
 isnull(st_name,'') [status], isnull(lu.us_username,'') [last updated by], bg_last_updated_date [last updated on]
 from bugs 
 left outer join bug_user on bu_bug = bg_id and bu_user = 1 
 left outer join users rpt on rpt.us_id = bg_reported_user
 left outer join users asg on asg.us_id = bg_assigned_to_user
 left outer join users lu on lu.us_id = bg_last_updated_user
 left outer join projects on pj_id = bg_project
 left outer join orgs on og_id = bg_org
 left outer join categories on ct_id = bg_category
 left outer join priorities on pr_id = bg_priority
 left outer join statuses on st_id = bg_status
  /* altered - just order by  */ WHERE  (bugs.bg_project not in (
					select pu_project
					from project_user_xref
					where pu_user = 1
					and pu_permission_level = 0)) order by bg_id desc
2018-08-14 15:52:10 http://localhost:49412/bugs.aspx elapsed milliseconds:0010
2018-08-14 15:52:41 http://localhost:49412/bugs.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '55a0303c-0b37-4984-9d9b-e7f55810e7f2';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '55a0303c-0b37-4984-9d9b-e7f55810e7f2'
and us_active = 1
2018-08-14 15:52:41 http://localhost:49412/bugs.aspx elapsed milliseconds:0000
2018-08-14 15:52:41 http://localhost:49412/bugs.aspx sql=
/* query dropdown */
select qu_id, qu_desc
from queries
where (isnull(qu_user,0) = 0 and isnull(qu_org,0) = 0)
or isnull(qu_user,0) = 1
or isnull(qu_org,0) = 1
order by qu_desc
2018-08-14 15:52:41 http://localhost:49412/bugs.aspx elapsed milliseconds:0000
2018-08-14 15:52:41 http://localhost:49412/bugs.aspx sql=
select qu_sql from queries where qu_id = 1
2018-08-14 15:52:41 http://localhost:49412/bugs.aspx sql=
select isnull(pr_background_color,'#ffffff'), bg_id [id], isnull(bu_flag,0) [$FLAG], 
 bg_short_desc [desc], isnull(pj_name,'') [project], isnull(og_name,'') [organization], isnull(ct_name,'') [category], rpt.us_username [reported by],
 bg_reported_date [reported on], isnull(pr_name,'') [priority], isnull(asg.us_username,'') [assigned to],
 isnull(st_name,'') [status], isnull(lu.us_username,'') [last updated by], bg_last_updated_date [last updated on]
 from bugs 
 left outer join bug_user on bu_bug = bg_id and bu_user = 1 
 left outer join users rpt on rpt.us_id = bg_reported_user
 left outer join users asg on asg.us_id = bg_assigned_to_user
 left outer join users lu on lu.us_id = bg_last_updated_user
 left outer join projects on pj_id = bg_project
 left outer join orgs on og_id = bg_org
 left outer join categories on ct_id = bg_category
 left outer join priorities on pr_id = bg_priority
 left outer join statuses on st_id = bg_status
  /* altered - just order by  */ WHERE  (bugs.bg_project not in (
					select pu_project
					from project_user_xref
					where pu_user = 1
					and pu_permission_level = 0)) order by bg_id desc
2018-08-14 15:52:41 http://localhost:49412/bugs.aspx elapsed milliseconds:0000
2018-08-14 15:54:28  caught exception in util.set_context:Request is not available in this context
2018-08-14 15:54:28  threadproc_votes
2018-08-14 15:54:28  started creating Lucene index using folder F:\Synced\Visual Studio 2017\Projects\temp\btnetnew\btnetnew\App_Data\lucene_index
2018-08-14 15:54:28  sql=

if exists (select * from dbo.sysobjects where id = object_id(N'[votes_view]'))
drop view [votes_view]
2018-08-14 15:54:28  sql=

create view votes_view as
select bu_bug as vote_bug, sum(bu_vote) as vote_total
from bug_user
group by bu_bug
having sum(bu_vote) > 0
2018-08-14 15:54:28  sql=

select bu_bug, count(1)
from bug_user 
where bu_vote = 1
group by bu_bug
2018-08-14 15:54:28  sql=

/* get searchable cols */					
select sc.name
from syscolumns sc
inner join systypes st on st.xusertype = sc.xusertype
inner join sysobjects so on sc.id = so.id
where so.name = 'bugs'
and st.[name] <> 'sysname'
and sc.name not in ('rowguid',
'bg_id',
'bg_short_desc',
'bg_reported_user',
'bg_reported_date',
'bg_project',
'bg_org',
'bg_category',
'bg_priority',
'bg_status',
'bg_assigned_to_user',
'bg_last_updated_user',
'bg_last_updated_date',
'bg_user_defined_attribute',
'bg_project_custom_dropdown_value1',
'bg_project_custom_dropdown_value2',
'bg_project_custom_dropdown_value3',
'bg_tags')
and st.[name] in ('nvarchar','varchar')
and sc.length > 30
2018-08-14 15:54:28  elapsed milliseconds:0012
2018-08-14 15:54:28  elapsed milliseconds:0067
2018-08-14 15:54:28  sql=

select bg_id, 	

isnull(bg_tags,'') bg_tags,
bg_short_desc
from bugs
2018-08-14 15:54:28  elapsed milliseconds:0001
2018-08-14 15:54:28  sql=

select bp_bug, bp_id, 
isnull(bp_comment_search,bp_comment) [text] 
from bug_posts 
where bp_type <> 'update'
and bp_hidden_from_external_users = 0
2018-08-14 15:54:28  elapsed milliseconds:0001
2018-08-14 15:54:28  done creating Lucene index
2018-08-14 15:54:29 http://localhost:49412/default.aspx sql=
select count(1) from users
2018-08-14 15:54:30 http://localhost:49412/default.aspx sql=
select count(1) from users
2018-08-14 15:54:30 http://localhost:49412/default.aspx sql=

select us_username, us_id, us_password, isnull(us_salt,0) us_salt, us_active
from users
where us_username = N'admin'
2018-08-14 15:54:30 http://localhost:49412/default.aspx elapsed milliseconds:0001
2018-08-14 15:54:30 http://localhost:49412/default.aspx sql=
update users set us_most_recent_login_datetime = getdate() where us_id = 1
2018-08-14 15:54:30 http://localhost:49412/default.aspx sql=
select us_id from users where us_username = N'admin'
2018-08-14 15:54:30 http://localhost:49412/default.aspx elapsed milliseconds:0001
2018-08-14 15:54:30 http://localhost:49412/default.aspx guid=54c2e533-8ae3-4cc9-bb74-b742ededa5fc
2018-08-14 15:54:30 http://localhost:49412/default.aspx sql=
insert into sessions (se_id, se_user) values('54c2e533-8ae3-4cc9-bb74-b742ededa5fc', 1)
2018-08-14 15:54:30 http://localhost:49412/default.aspx AppPath:
2018-08-14 15:54:32 http://localhost:49412/bugs.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '54c2e533-8ae3-4cc9-bb74-b742ededa5fc';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '54c2e533-8ae3-4cc9-bb74-b742ededa5fc'
and us_active = 1
2018-08-14 15:54:32 http://localhost:49412/bugs.aspx elapsed milliseconds:0007
2018-08-14 15:54:32 http://localhost:49412/bugs.aspx sql=

/* custom columns */ select sc.name, st.[name] [datatype], 
case when st.[name] = 'nvarchar' or st.[name] = 'nchar' then sc.length/2 else sc.length end as [length], 
sc.xprec, sc.xscale, sc.isnullable,
mm.text [default value], 
dflts.name [default name], 
isnull(ccm_dropdown_type,'') [dropdown type],
isnull(ccm_dropdown_vals,'') [vals],
isnull(ccm_sort_seq, sc.colorder) [column order],
sc.colorder
from syscolumns sc
inner join systypes st on st.xusertype = sc.xusertype
inner join sysobjects so on sc.id = so.id
left outer join syscomments mm on sc.cdefault = mm.id
left outer join custom_col_metadata on ccm_colorder = sc.colorder
left outer join sysobjects dflts on dflts.id = mm.id
where so.name = 'bugs'
and st.[name] <> 'sysname'
and sc.name not in ('rowguid',
'bg_id',
'bg_short_desc',
'bg_reported_user',
'bg_reported_date',
'bg_project',
'bg_org',
'bg_category',
'bg_priority',
'bg_status',
'bg_assigned_to_user',
'bg_last_updated_user',
'bg_last_updated_date',
'bg_user_defined_attribute',
'bg_project_custom_dropdown_value1',
'bg_project_custom_dropdown_value2',
'bg_project_custom_dropdown_value3',
'bg_tags')
order by sc.id, isnull(ccm_sort_seq,sc.colorder)
2018-08-14 15:54:33 http://localhost:49412/bugs.aspx elapsed milliseconds:0069
2018-08-14 15:54:33 http://localhost:49412/bugs.aspx sql=
/* query dropdown */
select qu_id, qu_desc
from queries
where (isnull(qu_user,0) = 0 and isnull(qu_org,0) = 0)
or isnull(qu_user,0) = 1
or isnull(qu_org,0) = 1
order by qu_desc
2018-08-14 15:54:33 http://localhost:49412/bugs.aspx elapsed milliseconds:0001
2018-08-14 15:54:33 http://localhost:49412/bugs.aspx sql=
select qu_id, qu_sql from queries where qu_id in
			(select us_default_query from users where us_id = 1)
2018-08-14 15:54:33 http://localhost:49412/bugs.aspx elapsed milliseconds:0002
2018-08-14 15:54:33 http://localhost:49412/bugs.aspx sql=
select isnull(pr_background_color,'#ffffff'), bg_id [id], isnull(bu_flag,0) [$FLAG], 
 bg_short_desc [desc], isnull(pj_name,'') [project], isnull(og_name,'') [organization], isnull(ct_name,'') [category], rpt.us_username [reported by],
 bg_reported_date [reported on], isnull(pr_name,'') [priority], isnull(asg.us_username,'') [assigned to],
 isnull(st_name,'') [status], isnull(lu.us_username,'') [last updated by], bg_last_updated_date [last updated on]
 from bugs 
 left outer join bug_user on bu_bug = bg_id and bu_user = 1 
 left outer join users rpt on rpt.us_id = bg_reported_user
 left outer join users asg on asg.us_id = bg_assigned_to_user
 left outer join users lu on lu.us_id = bg_last_updated_user
 left outer join projects on pj_id = bg_project
 left outer join orgs on og_id = bg_org
 left outer join categories on ct_id = bg_category
 left outer join priorities on pr_id = bg_priority
 left outer join statuses on st_id = bg_status
  /* altered - just order by  */ WHERE  (bugs.bg_project not in (
					select pu_project
					from project_user_xref
					where pu_user = 1
					and pu_permission_level = 0)) order by bg_id desc
2018-08-14 15:54:33 http://localhost:49412/bugs.aspx elapsed milliseconds:0011
2018-08-14 15:57:33  caught exception in util.set_context:Request is not available in this context
2018-08-14 15:57:33  threadproc_votes
2018-08-14 15:57:33  sql=

if exists (select * from dbo.sysobjects where id = object_id(N'[votes_view]'))
drop view [votes_view]
2018-08-14 15:57:33  started creating Lucene index using folder F:\Synced\Visual Studio 2017\Projects\temp\btnetnew\btnetnew\App_Data\lucene_index
2018-08-14 15:57:33  sql=

create view votes_view as
select bu_bug as vote_bug, sum(bu_vote) as vote_total
from bug_user
group by bu_bug
having sum(bu_vote) > 0
2018-08-14 15:57:33  sql=

select bu_bug, count(1)
from bug_user 
where bu_vote = 1
group by bu_bug
2018-08-14 15:57:33  elapsed milliseconds:0006
2018-08-14 15:57:33  sql=

/* get searchable cols */					
select sc.name
from syscolumns sc
inner join systypes st on st.xusertype = sc.xusertype
inner join sysobjects so on sc.id = so.id
where so.name = 'bugs'
and st.[name] <> 'sysname'
and sc.name not in ('rowguid',
'bg_id',
'bg_short_desc',
'bg_reported_user',
'bg_reported_date',
'bg_project',
'bg_org',
'bg_category',
'bg_priority',
'bg_status',
'bg_assigned_to_user',
'bg_last_updated_user',
'bg_last_updated_date',
'bg_user_defined_attribute',
'bg_project_custom_dropdown_value1',
'bg_project_custom_dropdown_value2',
'bg_project_custom_dropdown_value3',
'bg_tags')
and st.[name] in ('nvarchar','varchar')
and sc.length > 30
2018-08-14 15:57:33  elapsed milliseconds:0063
2018-08-14 15:57:33  sql=

select bg_id, 	

isnull(bg_tags,'') bg_tags,
bg_short_desc
from bugs
2018-08-14 15:57:33  elapsed milliseconds:0001
2018-08-14 15:57:33  sql=

select bp_bug, bp_id, 
isnull(bp_comment_search,bp_comment) [text] 
from bug_posts 
where bp_type <> 'update'
and bp_hidden_from_external_users = 0
2018-08-14 15:57:33  elapsed milliseconds:0001
2018-08-14 15:57:34  done creating Lucene index
2018-08-14 15:57:35 http://localhost:49412/default.aspx sql=
select count(1) from users
2018-08-14 15:57:36 http://localhost:49412/default.aspx sql=
select count(1) from users
2018-08-14 15:57:36 http://localhost:49412/default.aspx sql=

select us_username, us_id, us_password, isnull(us_salt,0) us_salt, us_active
from users
where us_username = N'admin'
2018-08-14 15:57:36 http://localhost:49412/default.aspx elapsed milliseconds:0001
2018-08-14 15:57:36 http://localhost:49412/default.aspx sql=
update users set us_most_recent_login_datetime = getdate() where us_id = 1
2018-08-14 15:57:36 http://localhost:49412/default.aspx sql=
select us_id from users where us_username = N'admin'
2018-08-14 15:57:36 http://localhost:49412/default.aspx elapsed milliseconds:0001
2018-08-14 15:57:36 http://localhost:49412/default.aspx guid=35331cbe-1cd7-4a3d-ae5d-18563865bc9a
2018-08-14 15:57:36 http://localhost:49412/default.aspx sql=
insert into sessions (se_id, se_user) values('35331cbe-1cd7-4a3d-ae5d-18563865bc9a', 1)
2018-08-14 15:57:36 http://localhost:49412/default.aspx AppPath:
2018-08-14 15:57:38 http://localhost:49412/bugs.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '35331cbe-1cd7-4a3d-ae5d-18563865bc9a';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '35331cbe-1cd7-4a3d-ae5d-18563865bc9a'
and us_active = 1
2018-08-14 15:57:38 http://localhost:49412/bugs.aspx elapsed milliseconds:0007
2018-08-14 15:57:38 http://localhost:49412/bugs.aspx sql=

/* custom columns */ select sc.name, st.[name] [datatype], 
case when st.[name] = 'nvarchar' or st.[name] = 'nchar' then sc.length/2 else sc.length end as [length], 
sc.xprec, sc.xscale, sc.isnullable,
mm.text [default value], 
dflts.name [default name], 
isnull(ccm_dropdown_type,'') [dropdown type],
isnull(ccm_dropdown_vals,'') [vals],
isnull(ccm_sort_seq, sc.colorder) [column order],
sc.colorder
from syscolumns sc
inner join systypes st on st.xusertype = sc.xusertype
inner join sysobjects so on sc.id = so.id
left outer join syscomments mm on sc.cdefault = mm.id
left outer join custom_col_metadata on ccm_colorder = sc.colorder
left outer join sysobjects dflts on dflts.id = mm.id
where so.name = 'bugs'
and st.[name] <> 'sysname'
and sc.name not in ('rowguid',
'bg_id',
'bg_short_desc',
'bg_reported_user',
'bg_reported_date',
'bg_project',
'bg_org',
'bg_category',
'bg_priority',
'bg_status',
'bg_assigned_to_user',
'bg_last_updated_user',
'bg_last_updated_date',
'bg_user_defined_attribute',
'bg_project_custom_dropdown_value1',
'bg_project_custom_dropdown_value2',
'bg_project_custom_dropdown_value3',
'bg_tags')
order by sc.id, isnull(ccm_sort_seq,sc.colorder)
2018-08-14 15:57:38 http://localhost:49412/bugs.aspx elapsed milliseconds:0081
2018-08-14 15:57:38 http://localhost:49412/bugs.aspx sql=
/* query dropdown */
select qu_id, qu_desc
from queries
where (isnull(qu_user,0) = 0 and isnull(qu_org,0) = 0)
or isnull(qu_user,0) = 1
or isnull(qu_org,0) = 1
order by qu_desc
2018-08-14 15:57:38 http://localhost:49412/bugs.aspx elapsed milliseconds:0002
2018-08-14 15:57:38 http://localhost:49412/bugs.aspx sql=
select qu_id, qu_sql from queries where qu_id in
			(select us_default_query from users where us_id = 1)
2018-08-14 15:57:39 http://localhost:49412/bugs.aspx elapsed milliseconds:0002
2018-08-14 15:57:39 http://localhost:49412/bugs.aspx sql=
select isnull(pr_background_color,'#ffffff'), bg_id [id], isnull(bu_flag,0) [$FLAG], 
 bg_short_desc [desc], isnull(pj_name,'') [project], isnull(og_name,'') [organization], isnull(ct_name,'') [category], rpt.us_username [reported by],
 bg_reported_date [reported on], isnull(pr_name,'') [priority], isnull(asg.us_username,'') [assigned to],
 isnull(st_name,'') [status], isnull(lu.us_username,'') [last updated by], bg_last_updated_date [last updated on]
 from bugs 
 left outer join bug_user on bu_bug = bg_id and bu_user = 1 
 left outer join users rpt on rpt.us_id = bg_reported_user
 left outer join users asg on asg.us_id = bg_assigned_to_user
 left outer join users lu on lu.us_id = bg_last_updated_user
 left outer join projects on pj_id = bg_project
 left outer join orgs on og_id = bg_org
 left outer join categories on ct_id = bg_category
 left outer join priorities on pr_id = bg_priority
 left outer join statuses on st_id = bg_status
  /* altered - just order by  */ WHERE  (bugs.bg_project not in (
					select pu_project
					from project_user_xref
					where pu_user = 1
					and pu_permission_level = 0)) order by bg_id desc
2018-08-14 15:57:39 http://localhost:49412/bugs.aspx elapsed milliseconds:0011
2018-08-14 15:57:52 http://localhost:49412/ajax.aspx?bugid=1 sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '35331cbe-1cd7-4a3d-ae5d-18563865bc9a';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '35331cbe-1cd7-4a3d-ae5d-18563865bc9a'
and us_active = 1
2018-08-14 15:57:52 http://localhost:49412/ajax.aspx?bugid=1 elapsed milliseconds:0000
2018-08-14 15:57:52 http://localhost:49412/ajax.aspx?bugid=1 sql=

declare @bg_org int

select isnull(pu_permission_level,2),
bg_org
from bugs
left outer join project_user_xref
on pu_project = bg_project
and pu_user = 1
where bg_id = 1
2018-08-14 15:57:52 http://localhost:49412/ajax.aspx?bugid=1 elapsed milliseconds:0002
2018-08-14 15:57:52 http://localhost:49412/ajax.aspx?bugid=1 sql=

/* get_bug_posts */
select
a.bp_bug,
a.bp_comment,
isnull(us_username,'') [us_username],
case rtrim(us_firstname)
	when null then isnull(us_lastname, '')
	when '' then isnull(us_lastname, '')
	else isnull(us_lastname + ', ' + us_firstname,'')
	end [us_fullname],
isnull(us_email,'') [us_email],
a.bp_date,
datediff(s,a.bp_date,getdate()) [seconds_ago],
a.bp_id,
a.bp_type,
isnull(a.bp_email_from,'') bp_email_from,
isnull(a.bp_email_to,'') bp_email_to,
isnull(a.bp_email_cc,'') bp_email_cc,
isnull(a.bp_file,'') bp_file,
isnull(a.bp_size,0) bp_size,
isnull(a.bp_content_type,'') bp_content_type,
a.bp_hidden_from_external_users,
isnull(ba.bp_file,'') ba_file,  -- intentionally ba
isnull(ba.bp_id,'') ba_id, -- intentionally ba
isnull(ba.bp_size,'') ba_size,  -- intentionally ba
isnull(ba.bp_content_type,'') ba_content_type -- intentionally ba
from bug_posts a
left outer join users on us_id = a.bp_user
left outer join bug_posts ba on ba.bp_parent = a.bp_id and ba.bp_bug = a.bp_bug
where a.bp_bug = 1
and a.bp_parent is null
 and a.bp_type <> 'update'
 order by a.bp_id desc, ba.bp_parent, ba.bp_id
2018-08-14 15:57:52 http://localhost:49412/ajax.aspx?bugid=1 elapsed milliseconds:0011
2018-08-14 15:58:36 http://localhost:49412/ajax.aspx?bugid=1 sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '35331cbe-1cd7-4a3d-ae5d-18563865bc9a';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '35331cbe-1cd7-4a3d-ae5d-18563865bc9a'
and us_active = 1
2018-08-14 15:58:37 http://localhost:49412/ajax.aspx?bugid=1 elapsed milliseconds:0015
2018-08-14 15:58:37 http://localhost:49412/ajax.aspx?bugid=1 sql=

declare @bg_org int

select isnull(pu_permission_level,2),
bg_org
from bugs
left outer join project_user_xref
on pu_project = bg_project
and pu_user = 1
where bg_id = 1
2018-08-14 15:58:37 http://localhost:49412/ajax.aspx?bugid=1 elapsed milliseconds:0002
2018-08-14 15:58:37 http://localhost:49412/ajax.aspx?bugid=1 sql=

/* get_bug_posts */
select
a.bp_bug,
a.bp_comment,
isnull(us_username,'') [us_username],
case rtrim(us_firstname)
	when null then isnull(us_lastname, '')
	when '' then isnull(us_lastname, '')
	else isnull(us_lastname + ', ' + us_firstname,'')
	end [us_fullname],
isnull(us_email,'') [us_email],
a.bp_date,
datediff(s,a.bp_date,getdate()) [seconds_ago],
a.bp_id,
a.bp_type,
isnull(a.bp_email_from,'') bp_email_from,
isnull(a.bp_email_to,'') bp_email_to,
isnull(a.bp_email_cc,'') bp_email_cc,
isnull(a.bp_file,'') bp_file,
isnull(a.bp_size,0) bp_size,
isnull(a.bp_content_type,'') bp_content_type,
a.bp_hidden_from_external_users,
isnull(ba.bp_file,'') ba_file,  -- intentionally ba
isnull(ba.bp_id,'') ba_id, -- intentionally ba
isnull(ba.bp_size,'') ba_size,  -- intentionally ba
isnull(ba.bp_content_type,'') ba_content_type -- intentionally ba
from bug_posts a
left outer join users on us_id = a.bp_user
left outer join bug_posts ba on ba.bp_parent = a.bp_id and ba.bp_bug = a.bp_bug
where a.bp_bug = 1
and a.bp_parent is null
 and a.bp_type <> 'update'
 order by a.bp_id desc, ba.bp_parent, ba.bp_id
2018-08-14 15:58:37 http://localhost:49412/ajax.aspx?bugid=1 elapsed milliseconds:0006
2018-08-14 15:58:40 http://localhost:49412/ajax.aspx?bugid=1 sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '35331cbe-1cd7-4a3d-ae5d-18563865bc9a';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '35331cbe-1cd7-4a3d-ae5d-18563865bc9a'
and us_active = 1
2018-08-14 15:58:40 http://localhost:49412/ajax.aspx?bugid=1 elapsed milliseconds:0000
2018-08-14 15:58:40 http://localhost:49412/ajax.aspx?bugid=1 sql=

declare @bg_org int

select isnull(pu_permission_level,2),
bg_org
from bugs
left outer join project_user_xref
on pu_project = bg_project
and pu_user = 1
where bg_id = 1
2018-08-14 15:58:40 http://localhost:49412/ajax.aspx?bugid=1 elapsed milliseconds:0000
2018-08-14 15:58:40 http://localhost:49412/ajax.aspx?bugid=1 sql=

/* get_bug_posts */
select
a.bp_bug,
a.bp_comment,
isnull(us_username,'') [us_username],
case rtrim(us_firstname)
	when null then isnull(us_lastname, '')
	when '' then isnull(us_lastname, '')
	else isnull(us_lastname + ', ' + us_firstname,'')
	end [us_fullname],
isnull(us_email,'') [us_email],
a.bp_date,
datediff(s,a.bp_date,getdate()) [seconds_ago],
a.bp_id,
a.bp_type,
isnull(a.bp_email_from,'') bp_email_from,
isnull(a.bp_email_to,'') bp_email_to,
isnull(a.bp_email_cc,'') bp_email_cc,
isnull(a.bp_file,'') bp_file,
isnull(a.bp_size,0) bp_size,
isnull(a.bp_content_type,'') bp_content_type,
a.bp_hidden_from_external_users,
isnull(ba.bp_file,'') ba_file,  -- intentionally ba
isnull(ba.bp_id,'') ba_id, -- intentionally ba
isnull(ba.bp_size,'') ba_size,  -- intentionally ba
isnull(ba.bp_content_type,'') ba_content_type -- intentionally ba
from bug_posts a
left outer join users on us_id = a.bp_user
left outer join bug_posts ba on ba.bp_parent = a.bp_id and ba.bp_bug = a.bp_bug
where a.bp_bug = 1
and a.bp_parent is null
 and a.bp_type <> 'update'
 order by a.bp_id desc, ba.bp_parent, ba.bp_id
2018-08-14 15:58:40 http://localhost:49412/ajax.aspx?bugid=1 elapsed milliseconds:0000
2018-08-14 15:58:40 http://localhost:49412/ajax.aspx?bugid=1 sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '35331cbe-1cd7-4a3d-ae5d-18563865bc9a';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '35331cbe-1cd7-4a3d-ae5d-18563865bc9a'
and us_active = 1
2018-08-14 15:58:40 http://localhost:49412/ajax.aspx?bugid=1 elapsed milliseconds:0000
2018-08-14 15:58:40 http://localhost:49412/ajax.aspx?bugid=1 sql=

declare @bg_org int

select isnull(pu_permission_level,2),
bg_org
from bugs
left outer join project_user_xref
on pu_project = bg_project
and pu_user = 1
where bg_id = 1
2018-08-14 15:58:40 http://localhost:49412/ajax.aspx?bugid=1 elapsed milliseconds:0000
2018-08-14 15:58:40 http://localhost:49412/ajax.aspx?bugid=1 sql=

/* get_bug_posts */
select
a.bp_bug,
a.bp_comment,
isnull(us_username,'') [us_username],
case rtrim(us_firstname)
	when null then isnull(us_lastname, '')
	when '' then isnull(us_lastname, '')
	else isnull(us_lastname + ', ' + us_firstname,'')
	end [us_fullname],
isnull(us_email,'') [us_email],
a.bp_date,
datediff(s,a.bp_date,getdate()) [seconds_ago],
a.bp_id,
a.bp_type,
isnull(a.bp_email_from,'') bp_email_from,
isnull(a.bp_email_to,'') bp_email_to,
isnull(a.bp_email_cc,'') bp_email_cc,
isnull(a.bp_file,'') bp_file,
isnull(a.bp_size,0) bp_size,
isnull(a.bp_content_type,'') bp_content_type,
a.bp_hidden_from_external_users,
isnull(ba.bp_file,'') ba_file,  -- intentionally ba
isnull(ba.bp_id,'') ba_id, -- intentionally ba
isnull(ba.bp_size,'') ba_size,  -- intentionally ba
isnull(ba.bp_content_type,'') ba_content_type -- intentionally ba
from bug_posts a
left outer join users on us_id = a.bp_user
left outer join bug_posts ba on ba.bp_parent = a.bp_id and ba.bp_bug = a.bp_bug
where a.bp_bug = 1
and a.bp_parent is null
 and a.bp_type <> 'update'
 order by a.bp_id desc, ba.bp_parent, ba.bp_id
2018-08-14 15:58:40 http://localhost:49412/ajax.aspx?bugid=1 elapsed milliseconds:0000
2018-08-14 15:58:41 http://localhost:49412/flag.aspx?ses=35331cbe-1cd7-4a3d-ae5d-18563865bc9a&bugid=1&flag=1 sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '35331cbe-1cd7-4a3d-ae5d-18563865bc9a';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '35331cbe-1cd7-4a3d-ae5d-18563865bc9a'
and us_active = 1
2018-08-14 15:58:41 http://localhost:49412/flag.aspx?ses=35331cbe-1cd7-4a3d-ae5d-18563865bc9a&bugid=1&flag=1 elapsed milliseconds:0000
2018-08-14 15:58:41 http://localhost:49412/flag.aspx?ses=35331cbe-1cd7-4a3d-ae5d-18563865bc9a&bugid=1&flag=1 sql=

declare @bg_org int

select isnull(pu_permission_level,2),
bg_org
from bugs
left outer join project_user_xref
on pu_project = bg_project
and pu_user = 1
where bg_id = 1
2018-08-14 15:58:41 http://localhost:49412/flag.aspx?ses=35331cbe-1cd7-4a3d-ae5d-18563865bc9a&bugid=1&flag=1 elapsed milliseconds:0000
2018-08-14 15:58:41 http://localhost:49412/flag.aspx?ses=35331cbe-1cd7-4a3d-ae5d-18563865bc9a&bugid=1&flag=1 sql=

if not exists (select bu_bug from bug_user where bu_bug = 1 and bu_user = 1)
	insert into bug_user (bu_bug, bu_user, bu_flag, bu_seen, bu_vote) values(1, 1, 1, 0, 0) 
update bug_user set bu_flag = 1, bu_flag_datetime = getdate() where bu_bug = 1 and bu_user = 1 and bu_flag <> 1
2018-08-14 15:58:42 http://localhost:49412/flag.aspx?ses=35331cbe-1cd7-4a3d-ae5d-18563865bc9a&bugid=1&flag=2 sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '35331cbe-1cd7-4a3d-ae5d-18563865bc9a';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '35331cbe-1cd7-4a3d-ae5d-18563865bc9a'
and us_active = 1
2018-08-14 15:58:42 http://localhost:49412/flag.aspx?ses=35331cbe-1cd7-4a3d-ae5d-18563865bc9a&bugid=1&flag=2 elapsed milliseconds:0000
2018-08-14 15:58:42 http://localhost:49412/flag.aspx?ses=35331cbe-1cd7-4a3d-ae5d-18563865bc9a&bugid=1&flag=2 sql=

declare @bg_org int

select isnull(pu_permission_level,2),
bg_org
from bugs
left outer join project_user_xref
on pu_project = bg_project
and pu_user = 1
where bg_id = 1
2018-08-14 15:58:42 http://localhost:49412/flag.aspx?ses=35331cbe-1cd7-4a3d-ae5d-18563865bc9a&bugid=1&flag=2 elapsed milliseconds:0000
2018-08-14 15:58:42 http://localhost:49412/flag.aspx?ses=35331cbe-1cd7-4a3d-ae5d-18563865bc9a&bugid=1&flag=2 sql=

if not exists (select bu_bug from bug_user where bu_bug = 1 and bu_user = 1)
	insert into bug_user (bu_bug, bu_user, bu_flag, bu_seen, bu_vote) values(1, 1, 1, 0, 0) 
update bug_user set bu_flag = 2, bu_flag_datetime = getdate() where bu_bug = 1 and bu_user = 1 and bu_flag <> 2
2018-08-14 15:58:42 http://localhost:49412/flag.aspx?ses=35331cbe-1cd7-4a3d-ae5d-18563865bc9a&bugid=1&flag=0 sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '35331cbe-1cd7-4a3d-ae5d-18563865bc9a';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '35331cbe-1cd7-4a3d-ae5d-18563865bc9a'
and us_active = 1
2018-08-14 15:58:42 http://localhost:49412/flag.aspx?ses=35331cbe-1cd7-4a3d-ae5d-18563865bc9a&bugid=1&flag=0 elapsed milliseconds:0000
2018-08-14 15:58:42 http://localhost:49412/flag.aspx?ses=35331cbe-1cd7-4a3d-ae5d-18563865bc9a&bugid=1&flag=0 sql=

declare @bg_org int

select isnull(pu_permission_level,2),
bg_org
from bugs
left outer join project_user_xref
on pu_project = bg_project
and pu_user = 1
where bg_id = 1
2018-08-14 15:58:42 http://localhost:49412/flag.aspx?ses=35331cbe-1cd7-4a3d-ae5d-18563865bc9a&bugid=1&flag=0 elapsed milliseconds:0000
2018-08-14 15:58:42 http://localhost:49412/flag.aspx?ses=35331cbe-1cd7-4a3d-ae5d-18563865bc9a&bugid=1&flag=0 sql=

if not exists (select bu_bug from bug_user where bu_bug = 1 and bu_user = 1)
	insert into bug_user (bu_bug, bu_user, bu_flag, bu_seen, bu_vote) values(1, 1, 1, 0, 0) 
update bug_user set bu_flag = 0, bu_flag_datetime = getdate() where bu_bug = 1 and bu_user = 1 and bu_flag <> 0
2018-08-14 15:59:53 http://localhost:49412/print_bugs.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '35331cbe-1cd7-4a3d-ae5d-18563865bc9a';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '35331cbe-1cd7-4a3d-ae5d-18563865bc9a'
and us_active = 1
2018-08-14 15:59:53 http://localhost:49412/print_bugs.aspx elapsed milliseconds:0007
2018-08-14 16:00:02 http://localhost:49412/print_bugs2.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '35331cbe-1cd7-4a3d-ae5d-18563865bc9a';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '35331cbe-1cd7-4a3d-ae5d-18563865bc9a'
and us_active = 1
2018-08-14 16:00:02 http://localhost:49412/print_bugs2.aspx elapsed milliseconds:0000
2018-08-14 16:00:02 http://localhost:49412/print_bugs2.aspx sql=
 /* get_bug_datarow */
declare @svn_revisions int
declare @git_commits int
declare @hg_revisions int
declare @tasks int
declare @related int;
set @svn_revisions = 0
set @git_commits = 0
set @hg_revisions = 0
set @tasks = 0
set @related = 0

select bg_id [id],
bg_short_desc [short_desc],
isnull(bg_tags,'') [bg_tags],
isnull(ru.us_username,'[deleted user]') [reporter],
isnull(ru.us_email,'') [reporter_email],
case rtrim(ru.us_firstname)
	when null then isnull(ru.us_lastname, '')
	when '' then isnull(ru.us_lastname, '')
	else isnull(ru.us_lastname + ', ' + ru.us_firstname,'')
	end [reporter_fullname],
bg_reported_date [reported_date],
datediff(s,bg_reported_date,getdate()) [seconds_ago],
isnull(lu.us_username,'') [last_updated_user],
case rtrim(lu.us_firstname)
	when null then isnull(lu.us_lastname, '')
	when '' then isnull(lu.us_lastname, '')
	else isnull(lu.us_lastname + ', ' + lu.us_firstname,'')
	end [last_updated_fullname],


bg_last_updated_date [last_updated_date],
isnull(bg_project,0) [project],
isnull(pj_name,'[no project]') [current_project],

isnull(bg_org,0) [organization],
isnull(bugorg.og_name,'') [og_name],

isnull(bg_category,0) [category],
isnull(ct_name,'') [category_name],

isnull(bg_priority,0) [priority],
isnull(pr_name,'') [priority_name],

isnull(bg_status,0) [status],
isnull(st_name,'') [status_name],

isnull(bg_user_defined_attribute,0) [udf],
isnull(udf_name,'') [udf_name],

isnull(bg_assigned_to_user,0) [assigned_to_user],
isnull(asg.us_username,'[not assigned]') [assigned_to_username],
case rtrim(asg.us_firstname)
when null then isnull(asg.us_lastname, '[not assigned]')
when '' then isnull(asg.us_lastname, '[not assigned]')
else isnull(asg.us_lastname + ', ' + asg.us_firstname,'[not assigned]')
end [assigned_to_fullname],

isnull(bs_user,0) [subscribed],

case
when
	1 <> bg_org
	and userorg.og_other_orgs_permission_level < 2
	and userorg.og_other_orgs_permission_level < isnull(pu_permission_level,2)
		then userorg.og_other_orgs_permission_level
else
	isnull(pu_permission_level,2)
end [pu_permission_level],

isnull(bg_project_custom_dropdown_value1,'') [bg_project_custom_dropdown_value1],
isnull(bg_project_custom_dropdown_value2,'') [bg_project_custom_dropdown_value2],
isnull(bg_project_custom_dropdown_value3,'') [bg_project_custom_dropdown_value3],
@related [relationship_cnt],
@svn_revisions [svn_revision_cnt],
@git_commits [git_commit_cnt],
@hg_revisions [hg_commit_cnt],
@tasks [task_cnt],
getdate() [snapshot_timestamp]

from bugs
inner join users this_user on us_id = 1
inner join orgs userorg on this_user.us_org = userorg.og_id
left outer join user_defined_attribute on bg_user_defined_attribute = udf_id
left outer join projects on bg_project = pj_id
left outer join orgs bugorg on bg_org = bugorg.og_id
left outer join categories on bg_category = ct_id
left outer join priorities on bg_priority = pr_id
left outer join statuses on bg_status = st_id
left outer join users asg on bg_assigned_to_user = asg.us_id
left outer join users ru on bg_reported_user = ru.us_id
left outer join users lu on bg_last_updated_user = lu.us_id
left outer join bug_subscriptions on bs_bug = bg_id and bs_user = 1
left outer join project_user_xref on pj_id = pu_project
and pu_user = 1
where bg_id = 1
2018-08-14 16:00:02 http://localhost:49412/print_bugs2.aspx elapsed milliseconds:0015
2018-08-14 16:00:02 http://localhost:49412/print_bugs2.aspx sql=
select
					isnull(pj_enable_custom_dropdown1,0) [pj_enable_custom_dropdown1],
					isnull(pj_enable_custom_dropdown2,0) [pj_enable_custom_dropdown2],
					isnull(pj_enable_custom_dropdown3,0) [pj_enable_custom_dropdown3],
					isnull(pj_custom_dropdown_label1,'') [pj_custom_dropdown_label1],
					isnull(pj_custom_dropdown_label2,'') [pj_custom_dropdown_label2],
					isnull(pj_custom_dropdown_label3,'') [pj_custom_dropdown_label3]
					from projects where pj_id = 1
2018-08-14 16:00:02 http://localhost:49412/print_bugs2.aspx elapsed milliseconds:0001
2018-08-14 16:00:02 http://localhost:49412/print_bugs2.aspx sql=

/* get_bug_posts */
select
a.bp_bug,
a.bp_comment,
isnull(us_username,'') [us_username],
case rtrim(us_firstname)
	when null then isnull(us_lastname, '')
	when '' then isnull(us_lastname, '')
	else isnull(us_lastname + ', ' + us_firstname,'')
	end [us_fullname],
isnull(us_email,'') [us_email],
a.bp_date,
datediff(s,a.bp_date,getdate()) [seconds_ago],
a.bp_id,
a.bp_type,
isnull(a.bp_email_from,'') bp_email_from,
isnull(a.bp_email_to,'') bp_email_to,
isnull(a.bp_email_cc,'') bp_email_cc,
isnull(a.bp_file,'') bp_file,
isnull(a.bp_size,0) bp_size,
isnull(a.bp_content_type,'') bp_content_type,
a.bp_hidden_from_external_users,
isnull(ba.bp_file,'') ba_file,  -- intentionally ba
isnull(ba.bp_id,'') ba_id, -- intentionally ba
isnull(ba.bp_size,'') ba_size,  -- intentionally ba
isnull(ba.bp_content_type,'') ba_content_type -- intentionally ba
from bug_posts a
left outer join users on us_id = a.bp_user
left outer join bug_posts ba on ba.bp_parent = a.bp_id and ba.bp_bug = a.bp_bug
where a.bp_bug = 1
and a.bp_parent is null
 and a.bp_type <> 'update'
 order by a.bp_id desc, ba.bp_parent, ba.bp_id
2018-08-14 16:00:02 http://localhost:49412/print_bugs2.aspx elapsed milliseconds:0011
2018-08-14 16:01:30 http://localhost:49412/print_bugs2.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '35331cbe-1cd7-4a3d-ae5d-18563865bc9a';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '35331cbe-1cd7-4a3d-ae5d-18563865bc9a'
and us_active = 1
2018-08-14 16:01:31 http://localhost:49412/print_bugs2.aspx elapsed milliseconds:0015
2018-08-14 16:01:31 http://localhost:49412/print_bugs2.aspx sql=
 /* get_bug_datarow */
declare @svn_revisions int
declare @git_commits int
declare @hg_revisions int
declare @tasks int
declare @related int;
set @svn_revisions = 0
set @git_commits = 0
set @hg_revisions = 0
set @tasks = 0
set @related = 0

select bg_id [id],
bg_short_desc [short_desc],
isnull(bg_tags,'') [bg_tags],
isnull(ru.us_username,'[deleted user]') [reporter],
isnull(ru.us_email,'') [reporter_email],
case rtrim(ru.us_firstname)
	when null then isnull(ru.us_lastname, '')
	when '' then isnull(ru.us_lastname, '')
	else isnull(ru.us_lastname + ', ' + ru.us_firstname,'')
	end [reporter_fullname],
bg_reported_date [reported_date],
datediff(s,bg_reported_date,getdate()) [seconds_ago],
isnull(lu.us_username,'') [last_updated_user],
case rtrim(lu.us_firstname)
	when null then isnull(lu.us_lastname, '')
	when '' then isnull(lu.us_lastname, '')
	else isnull(lu.us_lastname + ', ' + lu.us_firstname,'')
	end [last_updated_fullname],


bg_last_updated_date [last_updated_date],
isnull(bg_project,0) [project],
isnull(pj_name,'[no project]') [current_project],

isnull(bg_org,0) [organization],
isnull(bugorg.og_name,'') [og_name],

isnull(bg_category,0) [category],
isnull(ct_name,'') [category_name],

isnull(bg_priority,0) [priority],
isnull(pr_name,'') [priority_name],

isnull(bg_status,0) [status],
isnull(st_name,'') [status_name],

isnull(bg_user_defined_attribute,0) [udf],
isnull(udf_name,'') [udf_name],

isnull(bg_assigned_to_user,0) [assigned_to_user],
isnull(asg.us_username,'[not assigned]') [assigned_to_username],
case rtrim(asg.us_firstname)
when null then isnull(asg.us_lastname, '[not assigned]')
when '' then isnull(asg.us_lastname, '[not assigned]')
else isnull(asg.us_lastname + ', ' + asg.us_firstname,'[not assigned]')
end [assigned_to_fullname],

isnull(bs_user,0) [subscribed],

case
when
	1 <> bg_org
	and userorg.og_other_orgs_permission_level < 2
	and userorg.og_other_orgs_permission_level < isnull(pu_permission_level,2)
		then userorg.og_other_orgs_permission_level
else
	isnull(pu_permission_level,2)
end [pu_permission_level],

isnull(bg_project_custom_dropdown_value1,'') [bg_project_custom_dropdown_value1],
isnull(bg_project_custom_dropdown_value2,'') [bg_project_custom_dropdown_value2],
isnull(bg_project_custom_dropdown_value3,'') [bg_project_custom_dropdown_value3],
@related [relationship_cnt],
@svn_revisions [svn_revision_cnt],
@git_commits [git_commit_cnt],
@hg_revisions [hg_commit_cnt],
@tasks [task_cnt],
getdate() [snapshot_timestamp]

from bugs
inner join users this_user on us_id = 1
inner join orgs userorg on this_user.us_org = userorg.og_id
left outer join user_defined_attribute on bg_user_defined_attribute = udf_id
left outer join projects on bg_project = pj_id
left outer join orgs bugorg on bg_org = bugorg.og_id
left outer join categories on bg_category = ct_id
left outer join priorities on bg_priority = pr_id
left outer join statuses on bg_status = st_id
left outer join users asg on bg_assigned_to_user = asg.us_id
left outer join users ru on bg_reported_user = ru.us_id
left outer join users lu on bg_last_updated_user = lu.us_id
left outer join bug_subscriptions on bs_bug = bg_id and bs_user = 1
left outer join project_user_xref on pj_id = pu_project
and pu_user = 1
where bg_id = 1
2018-08-14 16:01:31 http://localhost:49412/print_bugs2.aspx elapsed milliseconds:0015
2018-08-14 16:01:31 http://localhost:49412/print_bugs2.aspx sql=
select
					isnull(pj_enable_custom_dropdown1,0) [pj_enable_custom_dropdown1],
					isnull(pj_enable_custom_dropdown2,0) [pj_enable_custom_dropdown2],
					isnull(pj_enable_custom_dropdown3,0) [pj_enable_custom_dropdown3],
					isnull(pj_custom_dropdown_label1,'') [pj_custom_dropdown_label1],
					isnull(pj_custom_dropdown_label2,'') [pj_custom_dropdown_label2],
					isnull(pj_custom_dropdown_label3,'') [pj_custom_dropdown_label3]
					from projects where pj_id = 1
2018-08-14 16:01:31 http://localhost:49412/print_bugs2.aspx elapsed milliseconds:0002
2018-08-14 16:01:31 http://localhost:49412/print_bugs2.aspx sql=

/* get_bug_posts */
select
a.bp_bug,
a.bp_comment,
isnull(us_username,'') [us_username],
case rtrim(us_firstname)
	when null then isnull(us_lastname, '')
	when '' then isnull(us_lastname, '')
	else isnull(us_lastname + ', ' + us_firstname,'')
	end [us_fullname],
isnull(us_email,'') [us_email],
a.bp_date,
datediff(s,a.bp_date,getdate()) [seconds_ago],
a.bp_id,
a.bp_type,
isnull(a.bp_email_from,'') bp_email_from,
isnull(a.bp_email_to,'') bp_email_to,
isnull(a.bp_email_cc,'') bp_email_cc,
isnull(a.bp_file,'') bp_file,
isnull(a.bp_size,0) bp_size,
isnull(a.bp_content_type,'') bp_content_type,
a.bp_hidden_from_external_users,
isnull(ba.bp_file,'') ba_file,  -- intentionally ba
isnull(ba.bp_id,'') ba_id, -- intentionally ba
isnull(ba.bp_size,'') ba_size,  -- intentionally ba
isnull(ba.bp_content_type,'') ba_content_type -- intentionally ba
from bug_posts a
left outer join users on us_id = a.bp_user
left outer join bug_posts ba on ba.bp_parent = a.bp_id and ba.bp_bug = a.bp_bug
where a.bp_bug = 1
and a.bp_parent is null
 and a.bp_type <> 'update'
 order by a.bp_id desc, ba.bp_parent, ba.bp_id
2018-08-14 16:01:31 http://localhost:49412/print_bugs2.aspx elapsed milliseconds:0013
2018-08-14 16:01:38 http://localhost:49412/print_bugs2.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '35331cbe-1cd7-4a3d-ae5d-18563865bc9a';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '35331cbe-1cd7-4a3d-ae5d-18563865bc9a'
and us_active = 1
2018-08-14 16:01:38 http://localhost:49412/print_bugs2.aspx elapsed milliseconds:0000
2018-08-14 16:01:38 http://localhost:49412/print_bugs2.aspx sql=
 /* get_bug_datarow */
declare @svn_revisions int
declare @git_commits int
declare @hg_revisions int
declare @tasks int
declare @related int;
set @svn_revisions = 0
set @git_commits = 0
set @hg_revisions = 0
set @tasks = 0
set @related = 0

select bg_id [id],
bg_short_desc [short_desc],
isnull(bg_tags,'') [bg_tags],
isnull(ru.us_username,'[deleted user]') [reporter],
isnull(ru.us_email,'') [reporter_email],
case rtrim(ru.us_firstname)
	when null then isnull(ru.us_lastname, '')
	when '' then isnull(ru.us_lastname, '')
	else isnull(ru.us_lastname + ', ' + ru.us_firstname,'')
	end [reporter_fullname],
bg_reported_date [reported_date],
datediff(s,bg_reported_date,getdate()) [seconds_ago],
isnull(lu.us_username,'') [last_updated_user],
case rtrim(lu.us_firstname)
	when null then isnull(lu.us_lastname, '')
	when '' then isnull(lu.us_lastname, '')
	else isnull(lu.us_lastname + ', ' + lu.us_firstname,'')
	end [last_updated_fullname],


bg_last_updated_date [last_updated_date],
isnull(bg_project,0) [project],
isnull(pj_name,'[no project]') [current_project],

isnull(bg_org,0) [organization],
isnull(bugorg.og_name,'') [og_name],

isnull(bg_category,0) [category],
isnull(ct_name,'') [category_name],

isnull(bg_priority,0) [priority],
isnull(pr_name,'') [priority_name],

isnull(bg_status,0) [status],
isnull(st_name,'') [status_name],

isnull(bg_user_defined_attribute,0) [udf],
isnull(udf_name,'') [udf_name],

isnull(bg_assigned_to_user,0) [assigned_to_user],
isnull(asg.us_username,'[not assigned]') [assigned_to_username],
case rtrim(asg.us_firstname)
when null then isnull(asg.us_lastname, '[not assigned]')
when '' then isnull(asg.us_lastname, '[not assigned]')
else isnull(asg.us_lastname + ', ' + asg.us_firstname,'[not assigned]')
end [assigned_to_fullname],

isnull(bs_user,0) [subscribed],

case
when
	1 <> bg_org
	and userorg.og_other_orgs_permission_level < 2
	and userorg.og_other_orgs_permission_level < isnull(pu_permission_level,2)
		then userorg.og_other_orgs_permission_level
else
	isnull(pu_permission_level,2)
end [pu_permission_level],

isnull(bg_project_custom_dropdown_value1,'') [bg_project_custom_dropdown_value1],
isnull(bg_project_custom_dropdown_value2,'') [bg_project_custom_dropdown_value2],
isnull(bg_project_custom_dropdown_value3,'') [bg_project_custom_dropdown_value3],
@related [relationship_cnt],
@svn_revisions [svn_revision_cnt],
@git_commits [git_commit_cnt],
@hg_revisions [hg_commit_cnt],
@tasks [task_cnt],
getdate() [snapshot_timestamp]

from bugs
inner join users this_user on us_id = 1
inner join orgs userorg on this_user.us_org = userorg.og_id
left outer join user_defined_attribute on bg_user_defined_attribute = udf_id
left outer join projects on bg_project = pj_id
left outer join orgs bugorg on bg_org = bugorg.og_id
left outer join categories on bg_category = ct_id
left outer join priorities on bg_priority = pr_id
left outer join statuses on bg_status = st_id
left outer join users asg on bg_assigned_to_user = asg.us_id
left outer join users ru on bg_reported_user = ru.us_id
left outer join users lu on bg_last_updated_user = lu.us_id
left outer join bug_subscriptions on bs_bug = bg_id and bs_user = 1
left outer join project_user_xref on pj_id = pu_project
and pu_user = 1
where bg_id = 1
2018-08-14 16:01:38 http://localhost:49412/print_bugs2.aspx elapsed milliseconds:0000
2018-08-14 16:01:38 http://localhost:49412/print_bugs2.aspx sql=
select
					isnull(pj_enable_custom_dropdown1,0) [pj_enable_custom_dropdown1],
					isnull(pj_enable_custom_dropdown2,0) [pj_enable_custom_dropdown2],
					isnull(pj_enable_custom_dropdown3,0) [pj_enable_custom_dropdown3],
					isnull(pj_custom_dropdown_label1,'') [pj_custom_dropdown_label1],
					isnull(pj_custom_dropdown_label2,'') [pj_custom_dropdown_label2],
					isnull(pj_custom_dropdown_label3,'') [pj_custom_dropdown_label3]
					from projects where pj_id = 1
2018-08-14 16:01:38 http://localhost:49412/print_bugs2.aspx elapsed milliseconds:0000
2018-08-14 16:01:38 http://localhost:49412/print_bugs2.aspx sql=

/* get_bug_posts */
select
a.bp_bug,
a.bp_comment,
isnull(us_username,'') [us_username],
case rtrim(us_firstname)
	when null then isnull(us_lastname, '')
	when '' then isnull(us_lastname, '')
	else isnull(us_lastname + ', ' + us_firstname,'')
	end [us_fullname],
isnull(us_email,'') [us_email],
a.bp_date,
datediff(s,a.bp_date,getdate()) [seconds_ago],
a.bp_id,
a.bp_type,
isnull(a.bp_email_from,'') bp_email_from,
isnull(a.bp_email_to,'') bp_email_to,
isnull(a.bp_email_cc,'') bp_email_cc,
isnull(a.bp_file,'') bp_file,
isnull(a.bp_size,0) bp_size,
isnull(a.bp_content_type,'') bp_content_type,
a.bp_hidden_from_external_users,
isnull(ba.bp_file,'') ba_file,  -- intentionally ba
isnull(ba.bp_id,'') ba_id, -- intentionally ba
isnull(ba.bp_size,'') ba_size,  -- intentionally ba
isnull(ba.bp_content_type,'') ba_content_type -- intentionally ba
from bug_posts a
left outer join users on us_id = a.bp_user
left outer join bug_posts ba on ba.bp_parent = a.bp_id and ba.bp_bug = a.bp_bug
where a.bp_bug = 1
and a.bp_parent is null
 and a.bp_type <> 'update'
 order by a.bp_id desc, ba.bp_parent, ba.bp_id
2018-08-14 16:01:38 http://localhost:49412/print_bugs2.aspx elapsed milliseconds:0000
2018-08-14 16:01:50 http://localhost:49412/print_bugs.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '35331cbe-1cd7-4a3d-ae5d-18563865bc9a';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '35331cbe-1cd7-4a3d-ae5d-18563865bc9a'
and us_active = 1
2018-08-14 16:01:50 http://localhost:49412/print_bugs.aspx elapsed milliseconds:0008
2018-08-14 16:02:07 http://localhost:49412/print_bugs.aspx?format=excel sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '35331cbe-1cd7-4a3d-ae5d-18563865bc9a';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '35331cbe-1cd7-4a3d-ae5d-18563865bc9a'
and us_active = 1
2018-08-14 16:02:07 http://localhost:49412/print_bugs.aspx?format=excel elapsed milliseconds:0000
2018-08-14 16:02:29 http://localhost:49412/queries.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '35331cbe-1cd7-4a3d-ae5d-18563865bc9a';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '35331cbe-1cd7-4a3d-ae5d-18563865bc9a'
and us_active = 1
2018-08-14 16:02:30 http://localhost:49412/queries.aspx elapsed milliseconds:0000
2018-08-14 16:02:30 http://localhost:49412/queries.aspx sql=
select
			qu_desc [query],
			case
				when isnull(qu_user,0) = 0 and isnull(qu_org,0) is null then 'everybody'
				when isnull(qu_user,0) <> 0 then 'user:' + us_username
				when isnull(qu_org,0) <> 0 then 'org:' + og_name
				else ' '
				end [visibility],
			'<a href=bugs.aspx?qu_id=' + convert(varchar,qu_id) + '>view list</a>' [view list],
			'<a target=_blank href=print_bugs.aspx?qu_id=' + convert(varchar,qu_id) + '>print list</a>' [print list],
			'<a target=_blank href=print_bugs.aspx?format=excel&qu_id=' + convert(varchar,qu_id) + '>export as excel</a>' [export as excel],
			'<a target=_blank href=print_bugs2.aspx?qu_id=' + convert(varchar,qu_id) + '>print detail</a>' [print list<br>with detail],
			'<a href=edit_query.aspx?id=' + convert(varchar,qu_id) + '>edit</a>' [edit],
			'<a href=delete_query.aspx?id=' + convert(varchar,qu_id) + '>delete</a>' [delete],
			replace(convert(nvarchar(4000),qu_sql), char(10),'<br>') [sql]
			from queries
			left outer join users on qu_user = us_id
			left outer join orgs on qu_org = og_id
			where 1 = 0 /* all */
			or isnull(qu_user,0) = 1
			or isnull(qu_user,0) = 0
			order by qu_desc
2018-08-14 16:02:30 http://localhost:49412/queries.aspx elapsed milliseconds:0005
2018-08-14 16:08:50 http://localhost:49412/bugs.aspx?qu_id=1 sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '35331cbe-1cd7-4a3d-ae5d-18563865bc9a';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '35331cbe-1cd7-4a3d-ae5d-18563865bc9a'
and us_active = 1
2018-08-14 16:08:50 http://localhost:49412/bugs.aspx?qu_id=1 elapsed milliseconds:0015
2018-08-14 16:08:50 http://localhost:49412/bugs.aspx?qu_id=1 sql=
/* query dropdown */
select qu_id, qu_desc
from queries
where (isnull(qu_user,0) = 0 and isnull(qu_org,0) = 0)
or isnull(qu_user,0) = 1
or isnull(qu_org,0) = 1
order by qu_desc
2018-08-14 16:08:50 http://localhost:49412/bugs.aspx?qu_id=1 elapsed milliseconds:0002
2018-08-14 16:08:50 http://localhost:49412/bugs.aspx?qu_id=1 sql=
select qu_sql from queries where qu_id = 1
2018-08-14 16:08:50 http://localhost:49412/bugs.aspx?qu_id=1 sql=
select isnull(pr_background_color,'#ffffff'), bg_id [id], isnull(bu_flag,0) [$FLAG], 
 bg_short_desc [desc], isnull(pj_name,'') [project], isnull(og_name,'') [organization], isnull(ct_name,'') [category], rpt.us_username [reported by],
 bg_reported_date [reported on], isnull(pr_name,'') [priority], isnull(asg.us_username,'') [assigned to],
 isnull(st_name,'') [status], isnull(lu.us_username,'') [last updated by], bg_last_updated_date [last updated on]
 from bugs 
 left outer join bug_user on bu_bug = bg_id and bu_user = 1 
 left outer join users rpt on rpt.us_id = bg_reported_user
 left outer join users asg on asg.us_id = bg_assigned_to_user
 left outer join users lu on lu.us_id = bg_last_updated_user
 left outer join projects on pj_id = bg_project
 left outer join orgs on og_id = bg_org
 left outer join categories on ct_id = bg_category
 left outer join priorities on pr_id = bg_priority
 left outer join statuses on st_id = bg_status
  /* altered - just order by  */ WHERE  (bugs.bg_project not in (
					select pu_project
					from project_user_xref
					where pu_user = 1
					and pu_permission_level = 0)) order by bg_id desc
2018-08-14 16:08:50 http://localhost:49412/bugs.aspx?qu_id=1 elapsed milliseconds:0023
2018-08-14 16:08:54 http://localhost:49412/ajax.aspx?bugid=1 sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '35331cbe-1cd7-4a3d-ae5d-18563865bc9a';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '35331cbe-1cd7-4a3d-ae5d-18563865bc9a'
and us_active = 1
2018-08-14 16:08:54 http://localhost:49412/ajax.aspx?bugid=1 elapsed milliseconds:0000
2018-08-14 16:08:54 http://localhost:49412/ajax.aspx?bugid=1 sql=

declare @bg_org int

select isnull(pu_permission_level,2),
bg_org
from bugs
left outer join project_user_xref
on pu_project = bg_project
and pu_user = 1
where bg_id = 1
2018-08-14 16:08:54 http://localhost:49412/ajax.aspx?bugid=1 elapsed milliseconds:0002
2018-08-14 16:08:54 http://localhost:49412/ajax.aspx?bugid=1 sql=

/* get_bug_posts */
select
a.bp_bug,
a.bp_comment,
isnull(us_username,'') [us_username],
case rtrim(us_firstname)
	when null then isnull(us_lastname, '')
	when '' then isnull(us_lastname, '')
	else isnull(us_lastname + ', ' + us_firstname,'')
	end [us_fullname],
isnull(us_email,'') [us_email],
a.bp_date,
datediff(s,a.bp_date,getdate()) [seconds_ago],
a.bp_id,
a.bp_type,
isnull(a.bp_email_from,'') bp_email_from,
isnull(a.bp_email_to,'') bp_email_to,
isnull(a.bp_email_cc,'') bp_email_cc,
isnull(a.bp_file,'') bp_file,
isnull(a.bp_size,0) bp_size,
isnull(a.bp_content_type,'') bp_content_type,
a.bp_hidden_from_external_users,
isnull(ba.bp_file,'') ba_file,  -- intentionally ba
isnull(ba.bp_id,'') ba_id, -- intentionally ba
isnull(ba.bp_size,'') ba_size,  -- intentionally ba
isnull(ba.bp_content_type,'') ba_content_type -- intentionally ba
from bug_posts a
left outer join users on us_id = a.bp_user
left outer join bug_posts ba on ba.bp_parent = a.bp_id and ba.bp_bug = a.bp_bug
where a.bp_bug = 1
and a.bp_parent is null
 and a.bp_type <> 'update'
 order by a.bp_id desc, ba.bp_parent, ba.bp_id
2018-08-14 16:08:54 http://localhost:49412/ajax.aspx?bugid=1 elapsed milliseconds:0006
2018-08-14 16:08:56 http://localhost:49412/print_bugs.aspx?qu_id=1 sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '35331cbe-1cd7-4a3d-ae5d-18563865bc9a';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '35331cbe-1cd7-4a3d-ae5d-18563865bc9a'
and us_active = 1
2018-08-14 16:08:56 http://localhost:49412/print_bugs.aspx?qu_id=1 elapsed milliseconds:0000
2018-08-14 16:08:56 http://localhost:49412/print_bugs.aspx?qu_id=1 sql=
select qu_sql from queries where qu_id = 1
2018-08-14 16:08:56 http://localhost:49412/print_bugs.aspx?qu_id=1 sql=
select isnull(pr_background_color,'#ffffff'), bg_id [id], isnull(bu_flag,0) [$FLAG], 
 bg_short_desc [desc], isnull(pj_name,'') [project], isnull(og_name,'') [organization], isnull(ct_name,'') [category], rpt.us_username [reported by],
 bg_reported_date [reported on], isnull(pr_name,'') [priority], isnull(asg.us_username,'') [assigned to],
 isnull(st_name,'') [status], isnull(lu.us_username,'') [last updated by], bg_last_updated_date [last updated on]
 from bugs 
 left outer join bug_user on bu_bug = bg_id and bu_user = 1 
 left outer join users rpt on rpt.us_id = bg_reported_user
 left outer join users asg on asg.us_id = bg_assigned_to_user
 left outer join users lu on lu.us_id = bg_last_updated_user
 left outer join projects on pj_id = bg_project
 left outer join orgs on og_id = bg_org
 left outer join categories on ct_id = bg_category
 left outer join priorities on pr_id = bg_priority
 left outer join statuses on st_id = bg_status
  /* altered - just order by  */ WHERE  (bugs.bg_project not in (
					select pu_project
					from project_user_xref
					where pu_user = 1
					and pu_permission_level = 0)) order by bg_id desc
2018-08-14 16:08:56 http://localhost:49412/print_bugs.aspx?qu_id=1 elapsed milliseconds:0000
2018-08-14 16:09:01 http://localhost:49412/print_bugs2.aspx?qu_id=1 sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '35331cbe-1cd7-4a3d-ae5d-18563865bc9a';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '35331cbe-1cd7-4a3d-ae5d-18563865bc9a'
and us_active = 1
2018-08-14 16:09:01 http://localhost:49412/print_bugs2.aspx?qu_id=1 elapsed milliseconds:0000
2018-08-14 16:09:01 http://localhost:49412/print_bugs2.aspx?qu_id=1 sql=
select qu_sql from queries where qu_id = 1
2018-08-14 16:09:01 http://localhost:49412/print_bugs2.aspx?qu_id=1 sql=
select isnull(pr_background_color,'#ffffff'), bg_id [id], isnull(bu_flag,0) [$FLAG], 
 bg_short_desc [desc], isnull(pj_name,'') [project], isnull(og_name,'') [organization], isnull(ct_name,'') [category], rpt.us_username [reported by],
 bg_reported_date [reported on], isnull(pr_name,'') [priority], isnull(asg.us_username,'') [assigned to],
 isnull(st_name,'') [status], isnull(lu.us_username,'') [last updated by], bg_last_updated_date [last updated on]
 from bugs 
 left outer join bug_user on bu_bug = bg_id and bu_user = 1 
 left outer join users rpt on rpt.us_id = bg_reported_user
 left outer join users asg on asg.us_id = bg_assigned_to_user
 left outer join users lu on lu.us_id = bg_last_updated_user
 left outer join projects on pj_id = bg_project
 left outer join orgs on og_id = bg_org
 left outer join categories on ct_id = bg_category
 left outer join priorities on pr_id = bg_priority
 left outer join statuses on st_id = bg_status
  /* altered - just order by  */ WHERE  (bugs.bg_project not in (
					select pu_project
					from project_user_xref
					where pu_user = 1
					and pu_permission_level = 0)) order by bg_id desc
2018-08-14 16:09:01 http://localhost:49412/print_bugs2.aspx?qu_id=1 elapsed milliseconds:0000
2018-08-14 16:09:01 http://localhost:49412/print_bugs2.aspx?qu_id=1 sql=
 /* get_bug_datarow */
declare @svn_revisions int
declare @git_commits int
declare @hg_revisions int
declare @tasks int
declare @related int;
set @svn_revisions = 0
set @git_commits = 0
set @hg_revisions = 0
set @tasks = 0
set @related = 0

select bg_id [id],
bg_short_desc [short_desc],
isnull(bg_tags,'') [bg_tags],
isnull(ru.us_username,'[deleted user]') [reporter],
isnull(ru.us_email,'') [reporter_email],
case rtrim(ru.us_firstname)
	when null then isnull(ru.us_lastname, '')
	when '' then isnull(ru.us_lastname, '')
	else isnull(ru.us_lastname + ', ' + ru.us_firstname,'')
	end [reporter_fullname],
bg_reported_date [reported_date],
datediff(s,bg_reported_date,getdate()) [seconds_ago],
isnull(lu.us_username,'') [last_updated_user],
case rtrim(lu.us_firstname)
	when null then isnull(lu.us_lastname, '')
	when '' then isnull(lu.us_lastname, '')
	else isnull(lu.us_lastname + ', ' + lu.us_firstname,'')
	end [last_updated_fullname],


bg_last_updated_date [last_updated_date],
isnull(bg_project,0) [project],
isnull(pj_name,'[no project]') [current_project],

isnull(bg_org,0) [organization],
isnull(bugorg.og_name,'') [og_name],

isnull(bg_category,0) [category],
isnull(ct_name,'') [category_name],

isnull(bg_priority,0) [priority],
isnull(pr_name,'') [priority_name],

isnull(bg_status,0) [status],
isnull(st_name,'') [status_name],

isnull(bg_user_defined_attribute,0) [udf],
isnull(udf_name,'') [udf_name],

isnull(bg_assigned_to_user,0) [assigned_to_user],
isnull(asg.us_username,'[not assigned]') [assigned_to_username],
case rtrim(asg.us_firstname)
when null then isnull(asg.us_lastname, '[not assigned]')
when '' then isnull(asg.us_lastname, '[not assigned]')
else isnull(asg.us_lastname + ', ' + asg.us_firstname,'[not assigned]')
end [assigned_to_fullname],

isnull(bs_user,0) [subscribed],

case
when
	1 <> bg_org
	and userorg.og_other_orgs_permission_level < 2
	and userorg.og_other_orgs_permission_level < isnull(pu_permission_level,2)
		then userorg.og_other_orgs_permission_level
else
	isnull(pu_permission_level,2)
end [pu_permission_level],

isnull(bg_project_custom_dropdown_value1,'') [bg_project_custom_dropdown_value1],
isnull(bg_project_custom_dropdown_value2,'') [bg_project_custom_dropdown_value2],
isnull(bg_project_custom_dropdown_value3,'') [bg_project_custom_dropdown_value3],
@related [relationship_cnt],
@svn_revisions [svn_revision_cnt],
@git_commits [git_commit_cnt],
@hg_revisions [hg_commit_cnt],
@tasks [task_cnt],
getdate() [snapshot_timestamp]

from bugs
inner join users this_user on us_id = 1
inner join orgs userorg on this_user.us_org = userorg.og_id
left outer join user_defined_attribute on bg_user_defined_attribute = udf_id
left outer join projects on bg_project = pj_id
left outer join orgs bugorg on bg_org = bugorg.og_id
left outer join categories on bg_category = ct_id
left outer join priorities on bg_priority = pr_id
left outer join statuses on bg_status = st_id
left outer join users asg on bg_assigned_to_user = asg.us_id
left outer join users ru on bg_reported_user = ru.us_id
left outer join users lu on bg_last_updated_user = lu.us_id
left outer join bug_subscriptions on bs_bug = bg_id and bs_user = 1
left outer join project_user_xref on pj_id = pu_project
and pu_user = 1
where bg_id = 1
2018-08-14 16:09:01 http://localhost:49412/print_bugs2.aspx?qu_id=1 elapsed milliseconds:0016
2018-08-14 16:09:01 http://localhost:49412/print_bugs2.aspx?qu_id=1 sql=
select
					isnull(pj_enable_custom_dropdown1,0) [pj_enable_custom_dropdown1],
					isnull(pj_enable_custom_dropdown2,0) [pj_enable_custom_dropdown2],
					isnull(pj_enable_custom_dropdown3,0) [pj_enable_custom_dropdown3],
					isnull(pj_custom_dropdown_label1,'') [pj_custom_dropdown_label1],
					isnull(pj_custom_dropdown_label2,'') [pj_custom_dropdown_label2],
					isnull(pj_custom_dropdown_label3,'') [pj_custom_dropdown_label3]
					from projects where pj_id = 1
2018-08-14 16:09:01 http://localhost:49412/print_bugs2.aspx?qu_id=1 elapsed milliseconds:0001
2018-08-14 16:09:01 http://localhost:49412/print_bugs2.aspx?qu_id=1 sql=

/* get_bug_posts */
select
a.bp_bug,
a.bp_comment,
isnull(us_username,'') [us_username],
case rtrim(us_firstname)
	when null then isnull(us_lastname, '')
	when '' then isnull(us_lastname, '')
	else isnull(us_lastname + ', ' + us_firstname,'')
	end [us_fullname],
isnull(us_email,'') [us_email],
a.bp_date,
datediff(s,a.bp_date,getdate()) [seconds_ago],
a.bp_id,
a.bp_type,
isnull(a.bp_email_from,'') bp_email_from,
isnull(a.bp_email_to,'') bp_email_to,
isnull(a.bp_email_cc,'') bp_email_cc,
isnull(a.bp_file,'') bp_file,
isnull(a.bp_size,0) bp_size,
isnull(a.bp_content_type,'') bp_content_type,
a.bp_hidden_from_external_users,
isnull(ba.bp_file,'') ba_file,  -- intentionally ba
isnull(ba.bp_id,'') ba_id, -- intentionally ba
isnull(ba.bp_size,'') ba_size,  -- intentionally ba
isnull(ba.bp_content_type,'') ba_content_type -- intentionally ba
from bug_posts a
left outer join users on us_id = a.bp_user
left outer join bug_posts ba on ba.bp_parent = a.bp_id and ba.bp_bug = a.bp_bug
where a.bp_bug = 1
and a.bp_parent is null
 and a.bp_type <> 'update'
 order by a.bp_id desc, ba.bp_parent, ba.bp_id
2018-08-14 16:09:01 http://localhost:49412/print_bugs2.aspx?qu_id=1 elapsed milliseconds:0000
2018-08-14 16:09:06 http://localhost:49412/edit_query.aspx?id=1 sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '35331cbe-1cd7-4a3d-ae5d-18563865bc9a';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '35331cbe-1cd7-4a3d-ae5d-18563865bc9a'
and us_active = 1
2018-08-14 16:09:06 http://localhost:49412/edit_query.aspx?id=1 elapsed milliseconds:0000
2018-08-14 16:09:06 http://localhost:49412/edit_query.aspx?id=1 sql=
/* populate org/user dropdowns */
select og_id, og_name from orgs order by og_name;
select us_id, us_username from users order by us_username
2018-08-14 16:09:06 http://localhost:49412/edit_query.aspx?id=1 elapsed milliseconds:0002
2018-08-14 16:09:06 http://localhost:49412/edit_query.aspx?id=1 sql=
select
				qu_desc, qu_sql, isnull(qu_user,0) [qu_user], isnull(qu_org,0) [qu_org]
				from queries where qu_id = 1
2018-08-14 16:09:06 http://localhost:49412/edit_query.aspx?id=1 elapsed milliseconds:0001
2018-08-14 16:09:19 http://localhost:49412/reports.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '35331cbe-1cd7-4a3d-ae5d-18563865bc9a';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '35331cbe-1cd7-4a3d-ae5d-18563865bc9a'
and us_active = 1
2018-08-14 16:09:19 http://localhost:49412/reports.aspx elapsed milliseconds:0000
2018-08-14 16:09:19 http://localhost:49412/reports.aspx sql=

select
rp_desc [report],
case
	when rp_chart_type = 'pie' then
		'<a target=''_blank'' href=''view_report.aspx?view=chart&id=' + convert(varchar, rp_id) + '''>pie</a>'
	when rp_chart_type = 'line' then
		'<a target=''_blank'' href=''view_report.aspx?view=chart&id=' + convert(varchar, rp_id) + '''>line</a>'
	when rp_chart_type = 'bar' then
		'<a target=''_blank'' href=''view_report.aspx?view=chart&id=' + convert(varchar, rp_id) + '''>bar</a>'
	else
		'&nbsp;' end [view<br>chart],
'<a target=''_blank'' href=''view_report.aspx?view=data&id=' + convert(varchar, rp_id) + '''>data</a>' [view<br>data]
, '<a href=''edit_report.aspx?id=' + convert(varchar, rp_id) + '''>edit</a>' [edit], '<a href=''delete_report.aspx?id=' + convert(varchar, rp_id) + '''>delete</a>' [delete] 
from reports order by rp_desc
2018-08-14 16:09:19 http://localhost:49412/reports.aspx elapsed milliseconds:0002
2018-08-14 16:09:23 http://localhost:49412/view_report.aspx?view=data&id=3 sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '35331cbe-1cd7-4a3d-ae5d-18563865bc9a';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '35331cbe-1cd7-4a3d-ae5d-18563865bc9a'
and us_active = 1
2018-08-14 16:09:23 http://localhost:49412/view_report.aspx?view=data&id=3 elapsed milliseconds:0007
2018-08-14 16:09:23 http://localhost:49412/view_report.aspx?view=data&id=3 sql=
select rp_desc, rp_sql, rp_chart_type
		from reports
		where rp_id = 3
2018-08-14 16:09:23 http://localhost:49412/view_report.aspx?view=data&id=3 elapsed milliseconds:0001
2018-08-14 16:09:23 http://localhost:49412/view_report.aspx?view=data&id=3 sql=
select ct_name [category], count(1) [count] 
 from bugs 
 inner join categories on bg_category = ct_id 
 group by ct_name 
 order by ct_name
2018-08-14 16:09:23 http://localhost:49412/view_report.aspx?view=data&id=3 elapsed milliseconds:0004
2018-08-14 16:11:20 http://localhost:49412/view_report.aspx?view=data&id=3 sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '35331cbe-1cd7-4a3d-ae5d-18563865bc9a';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '35331cbe-1cd7-4a3d-ae5d-18563865bc9a'
and us_active = 1
2018-08-14 16:11:20 http://localhost:49412/view_report.aspx?view=data&id=3 elapsed milliseconds:0008
2018-08-14 16:11:20 http://localhost:49412/view_report.aspx?view=data&id=3 sql=
select rp_desc, rp_sql, rp_chart_type
		from reports
		where rp_id = 3
2018-08-14 16:11:20 http://localhost:49412/view_report.aspx?view=data&id=3 elapsed milliseconds:0001
2018-08-14 16:11:20 http://localhost:49412/view_report.aspx?view=data&id=3 sql=
select ct_name [category], count(1) [count] 
 from bugs 
 inner join categories on bg_category = ct_id 
 group by ct_name 
 order by ct_name
2018-08-14 16:11:20 http://localhost:49412/view_report.aspx?view=data&id=3 elapsed milliseconds:0002

TIME: 4:11:20 PM
MSG: A potentially dangerous Request.Path value was detected from the client (>).
URL: http://localhost:49412/Content/bootstrap.min.css type=text/css><script type=
EXCEPTION: System.Web.HttpException (0x80004005): A potentially dangerous Request.Path value was detected from the client (>).
   at System.Web.HttpRequest.ValidateInputIfRequiredByConfig()
   at System.Web.HttpApplication.PipelineStepManager.ValidateHelper(HttpContext context)

ALL_HTTP=HTTP_CONNECTION:keep-alive
HTTP_ACCEPT:text/css,*/*;q=0.1
HTTP_ACCEPT_ENCODING:gzip, deflate, br
HTTP_ACCEPT_LANGUAGE:en-US,en;q=0.9,tr;q=0.8
HTTP_COOKIE:user=name=admin&NTLM=0; ASP.NET_SessionId=vrjce1domi1jxhuslyp3ip4b; se_id=35331cbe-1cd7-4a3d-ae5d-18563865bc9a
HTTP_HOST:localhost:49412
HTTP_REFERER:http://localhost:49412/view_report.aspx?view=data&id=3
HTTP_USER_AGENT:Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36

ALL_RAW=Connection: keep-alive
Accept: text/css,*/*;q=0.1
Accept-Encoding: gzip, deflate, br
Accept-Language: en-US,en;q=0.9,tr;q=0.8
Cookie: user=name=admin&NTLM=0; ASP.NET_SessionId=vrjce1domi1jxhuslyp3ip4b; se_id=35331cbe-1cd7-4a3d-ae5d-18563865bc9a
Host: localhost:49412
Referer: http://localhost:49412/view_report.aspx?view=data&id=3
User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36

APPL_MD_PATH=/LM/W3SVC/2/ROOT
APPL_PHYSICAL_PATH=F:\Synced\Visual Studio 2017\Projects\temp\btnetnew\btnetnew\
CONTENT_LENGTH=0
GATEWAY_INTERFACE=CGI/1.1
HTTPS=off
INSTANCE_ID=2
INSTANCE_META_PATH=/LM/W3SVC/2
LOCAL_ADDR=::1
PATH_INFO=/Content/bootstrap.min.css type=text/css><script type=
PATH_TRANSLATED=F:\Synced\Visual Studio 2017\Projects\temp\btnetnew\btnetnew\Content\bootstrap.min.css type=text\css><script type=
REMOTE_ADDR=::1
REMOTE_HOST=::1
REMOTE_PORT=50609
REQUEST_METHOD=GET
SCRIPT_NAME=/Content/bootstrap.min.css type=text/css><script type=
SERVER_NAME=localhost
SERVER_PORT=49412
SERVER_PORT_SECURE=0
SERVER_PROTOCOL=HTTP/1.1
SERVER_SOFTWARE=Microsoft-IIS/10.0
URL=/Content/bootstrap.min.css type=text/css><script type=
HTTP_CONNECTION=keep-alive
HTTP_ACCEPT=text/css,*/*;q=0.1
HTTP_ACCEPT_ENCODING=gzip, deflate, br
HTTP_ACCEPT_LANGUAGE=en-US,en;q=0.9,tr;q=0.8
HTTP_COOKIE=user=name=admin&NTLM=0; ASP.NET_SessionId=vrjce1domi1jxhuslyp3ip4b; se_id=35331cbe-1cd7-4a3d-ae5d-18563865bc9a
HTTP_HOST=localhost:49412
HTTP_REFERER=http://localhost:49412/view_report.aspx?view=data&id=3
HTTP_USER_AGENT=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36
2018-08-14 16:11:21 http://localhost:49412/Content/bootstrap.min.css type=text/css><script type= to email addr: admin@example.com
2018-08-14 16:11:21 http://localhost:49412/Content/bootstrap.min.css type=text/css><script type= There was a problem sending email.   Check settings in Web.config.
2018-08-14 16:11:21 http://localhost:49412/Content/bootstrap.min.css type=text/css><script type= TO:admin@example.com
2018-08-14 16:11:21 http://localhost:49412/Content/bootstrap.min.css type=text/css><script type= FROM:errors@example.com
2018-08-14 16:11:21 http://localhost:49412/Content/bootstrap.min.css type=text/css><script type= SUBJECT:Error: A potentially dangerous Request.Path value was detected from the client (>).
2018-08-14 16:11:21 http://localhost:49412/Content/bootstrap.min.css type=text/css><script type= Could not find a part of the path 'C:\temp\pickup\5e64d5b9-d4ac-4a98-ab82-f45d96a82968.eml'.
2018-08-14 16:11:40 http://localhost:49412/view_report.aspx?view=data&id=3 sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '35331cbe-1cd7-4a3d-ae5d-18563865bc9a';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '35331cbe-1cd7-4a3d-ae5d-18563865bc9a'
and us_active = 1
2018-08-14 16:11:40 http://localhost:49412/view_report.aspx?view=data&id=3 elapsed milliseconds:0007
2018-08-14 16:11:40 http://localhost:49412/view_report.aspx?view=data&id=3 sql=
select rp_desc, rp_sql, rp_chart_type
		from reports
		where rp_id = 3
2018-08-14 16:11:40 http://localhost:49412/view_report.aspx?view=data&id=3 elapsed milliseconds:0001
2018-08-14 16:11:40 http://localhost:49412/view_report.aspx?view=data&id=3 sql=
select ct_name [category], count(1) [count] 
 from bugs 
 inner join categories on bg_category = ct_id 
 group by ct_name 
 order by ct_name
2018-08-14 16:11:40 http://localhost:49412/view_report.aspx?view=data&id=3 elapsed milliseconds:0002

TIME: 4:11:40 PM
MSG: A potentially dangerous Request.Path value was detected from the client (>).
URL: http://localhost:49412/Content/bootstrap.min.css type=text/css><script type=
EXCEPTION: System.Web.HttpException (0x80004005): A potentially dangerous Request.Path value was detected from the client (>).
   at System.Web.HttpRequest.ValidateInputIfRequiredByConfig()
   at System.Web.HttpApplication.PipelineStepManager.ValidateHelper(HttpContext context)

ALL_HTTP=HTTP_CONNECTION:keep-alive
HTTP_ACCEPT:text/css,*/*;q=0.1
HTTP_ACCEPT_ENCODING:gzip, deflate, br
HTTP_ACCEPT_LANGUAGE:en-US,en;q=0.9,tr;q=0.8
HTTP_COOKIE:user=name=admin&NTLM=0; ASP.NET_SessionId=vrjce1domi1jxhuslyp3ip4b; se_id=35331cbe-1cd7-4a3d-ae5d-18563865bc9a
HTTP_HOST:localhost:49412
HTTP_REFERER:http://localhost:49412/view_report.aspx?view=data&id=3
HTTP_USER_AGENT:Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36

ALL_RAW=Connection: keep-alive
Accept: text/css,*/*;q=0.1
Accept-Encoding: gzip, deflate, br
Accept-Language: en-US,en;q=0.9,tr;q=0.8
Cookie: user=name=admin&NTLM=0; ASP.NET_SessionId=vrjce1domi1jxhuslyp3ip4b; se_id=35331cbe-1cd7-4a3d-ae5d-18563865bc9a
Host: localhost:49412
Referer: http://localhost:49412/view_report.aspx?view=data&id=3
User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36

APPL_MD_PATH=/LM/W3SVC/2/ROOT
APPL_PHYSICAL_PATH=F:\Synced\Visual Studio 2017\Projects\temp\btnetnew\btnetnew\
CONTENT_LENGTH=0
GATEWAY_INTERFACE=CGI/1.1
HTTPS=off
INSTANCE_ID=2
INSTANCE_META_PATH=/LM/W3SVC/2
LOCAL_ADDR=::1
PATH_INFO=/Content/bootstrap.min.css type=text/css><script type=
PATH_TRANSLATED=F:\Synced\Visual Studio 2017\Projects\temp\btnetnew\btnetnew\Content\bootstrap.min.css type=text\css><script type=
REMOTE_ADDR=::1
REMOTE_HOST=::1
REMOTE_PORT=50609
REQUEST_METHOD=GET
SCRIPT_NAME=/Content/bootstrap.min.css type=text/css><script type=
SERVER_NAME=localhost
SERVER_PORT=49412
SERVER_PORT_SECURE=0
SERVER_PROTOCOL=HTTP/1.1
SERVER_SOFTWARE=Microsoft-IIS/10.0
URL=/Content/bootstrap.min.css type=text/css><script type=
HTTP_CONNECTION=keep-alive
HTTP_ACCEPT=text/css,*/*;q=0.1
HTTP_ACCEPT_ENCODING=gzip, deflate, br
HTTP_ACCEPT_LANGUAGE=en-US,en;q=0.9,tr;q=0.8
HTTP_COOKIE=user=name=admin&NTLM=0; ASP.NET_SessionId=vrjce1domi1jxhuslyp3ip4b; se_id=35331cbe-1cd7-4a3d-ae5d-18563865bc9a
HTTP_HOST=localhost:49412
HTTP_REFERER=http://localhost:49412/view_report.aspx?view=data&id=3
HTTP_USER_AGENT=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36
2018-08-14 16:11:40 http://localhost:49412/Content/bootstrap.min.css type=text/css><script type= to email addr: admin@example.com
2018-08-14 16:11:41 http://localhost:49412/Content/bootstrap.min.css type=text/css><script type= There was a problem sending email.   Check settings in Web.config.
2018-08-14 16:11:41 http://localhost:49412/Content/bootstrap.min.css type=text/css><script type= TO:admin@example.com
2018-08-14 16:11:41 http://localhost:49412/Content/bootstrap.min.css type=text/css><script type= FROM:errors@example.com
2018-08-14 16:11:41 http://localhost:49412/Content/bootstrap.min.css type=text/css><script type= SUBJECT:Error: A potentially dangerous Request.Path value was detected from the client (>).
2018-08-14 16:11:41 http://localhost:49412/Content/bootstrap.min.css type=text/css><script type= Could not find a part of the path 'C:\temp\pickup\e47b4ce3-5bae-4c7a-b033-2abf963e90b2.eml'.

TIME: 4:11:51 PM
MSG: A potentially dangerous Request.Path value was detected from the client (>).
URL: http://localhost:49412/Content/bootstrap.min.css type=text/css><script type=
EXCEPTION: System.Web.HttpException (0x80004005): A potentially dangerous Request.Path value was detected from the client (>).
   at System.Web.HttpRequest.ValidateInputIfRequiredByConfig()
   at System.Web.HttpApplication.PipelineStepManager.ValidateHelper(HttpContext context)

ALL_HTTP=HTTP_CONNECTION:keep-alive
HTTP_ACCEPT:text/css,*/*;q=0.1
HTTP_ACCEPT_ENCODING:gzip, deflate, br
HTTP_ACCEPT_LANGUAGE:en-US,en;q=0.9,tr;q=0.8
HTTP_COOKIE:user=name=admin&NTLM=0; ASP.NET_SessionId=vrjce1domi1jxhuslyp3ip4b; se_id=35331cbe-1cd7-4a3d-ae5d-18563865bc9a
HTTP_HOST:localhost:49412
HTTP_REFERER:http://localhost:49412/view_report.aspx?view=data&id=3
HTTP_USER_AGENT:Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36

ALL_RAW=Connection: keep-alive
Accept: text/css,*/*;q=0.1
Accept-Encoding: gzip, deflate, br
Accept-Language: en-US,en;q=0.9,tr;q=0.8
Cookie: user=name=admin&NTLM=0; ASP.NET_SessionId=vrjce1domi1jxhuslyp3ip4b; se_id=35331cbe-1cd7-4a3d-ae5d-18563865bc9a
Host: localhost:49412
Referer: http://localhost:49412/view_report.aspx?view=data&id=3
User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36

APPL_MD_PATH=/LM/W3SVC/2/ROOT
APPL_PHYSICAL_PATH=F:\Synced\Visual Studio 2017\Projects\temp\btnetnew\btnetnew\
CONTENT_LENGTH=0
GATEWAY_INTERFACE=CGI/1.1
HTTPS=off
INSTANCE_ID=2
INSTANCE_META_PATH=/LM/W3SVC/2
LOCAL_ADDR=::1
PATH_INFO=/Content/bootstrap.min.css type=text/css><script type=
PATH_TRANSLATED=F:\Synced\Visual Studio 2017\Projects\temp\btnetnew\btnetnew\Content\bootstrap.min.css type=text\css><script type=
REMOTE_ADDR=::1
REMOTE_HOST=::1
REMOTE_PORT=50609
REQUEST_METHOD=GET
SCRIPT_NAME=/Content/bootstrap.min.css type=text/css><script type=
SERVER_NAME=localhost
SERVER_PORT=49412
SERVER_PORT_SECURE=0
SERVER_PROTOCOL=HTTP/1.1
SERVER_SOFTWARE=Microsoft-IIS/10.0
URL=/Content/bootstrap.min.css type=text/css><script type=
HTTP_CONNECTION=keep-alive
HTTP_ACCEPT=text/css,*/*;q=0.1
HTTP_ACCEPT_ENCODING=gzip, deflate, br
HTTP_ACCEPT_LANGUAGE=en-US,en;q=0.9,tr;q=0.8
HTTP_COOKIE=user=name=admin&NTLM=0; ASP.NET_SessionId=vrjce1domi1jxhuslyp3ip4b; se_id=35331cbe-1cd7-4a3d-ae5d-18563865bc9a
HTTP_HOST=localhost:49412
HTTP_REFERER=http://localhost:49412/view_report.aspx?view=data&id=3
HTTP_USER_AGENT=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36
2018-08-14 16:11:51 http://localhost:49412/Content/bootstrap.min.css type=text/css><script type= to email addr: admin@example.com
2018-08-14 16:11:51 http://localhost:49412/Content/bootstrap.min.css type=text/css><script type= There was a problem sending email.   Check settings in Web.config.
2018-08-14 16:11:51 http://localhost:49412/Content/bootstrap.min.css type=text/css><script type= TO:admin@example.com
2018-08-14 16:11:51 http://localhost:49412/Content/bootstrap.min.css type=text/css><script type= FROM:errors@example.com
2018-08-14 16:11:51 http://localhost:49412/Content/bootstrap.min.css type=text/css><script type= SUBJECT:Error: A potentially dangerous Request.Path value was detected from the client (>).
2018-08-14 16:11:51 http://localhost:49412/Content/bootstrap.min.css type=text/css><script type= Could not find a part of the path 'C:\temp\pickup\137e48f4-f9a3-4c2e-b80c-171110a2b6a2.eml'.

TIME: 4:12:04 PM
MSG: A potentially dangerous Request.Path value was detected from the client (>).
URL: http://localhost:49412/Content/bootstrap.min.css type=text/css><script type=
EXCEPTION: System.Web.HttpException (0x80004005): A potentially dangerous Request.Path value was detected from the client (>).
   at System.Web.HttpRequest.ValidateInputIfRequiredByConfig()
   at System.Web.HttpApplication.PipelineStepManager.ValidateHelper(HttpContext context)

ALL_HTTP=HTTP_CONNECTION:keep-alive
HTTP_ACCEPT:text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8
HTTP_ACCEPT_ENCODING:gzip, deflate, br
HTTP_ACCEPT_LANGUAGE:en-US,en;q=0.9,tr;q=0.8
HTTP_COOKIE:user=name=admin&NTLM=0; ASP.NET_SessionId=vrjce1domi1jxhuslyp3ip4b; se_id=35331cbe-1cd7-4a3d-ae5d-18563865bc9a
HTTP_HOST:localhost:49412
HTTP_USER_AGENT:Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36
HTTP_UPGRADE_INSECURE_REQUESTS:1

ALL_RAW=Connection: keep-alive
Accept: text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8
Accept-Encoding: gzip, deflate, br
Accept-Language: en-US,en;q=0.9,tr;q=0.8
Cookie: user=name=admin&NTLM=0; ASP.NET_SessionId=vrjce1domi1jxhuslyp3ip4b; se_id=35331cbe-1cd7-4a3d-ae5d-18563865bc9a
Host: localhost:49412
User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36
Upgrade-Insecure-Requests: 1

APPL_MD_PATH=/LM/W3SVC/2/ROOT
APPL_PHYSICAL_PATH=F:\Synced\Visual Studio 2017\Projects\temp\btnetnew\btnetnew\
CONTENT_LENGTH=0
GATEWAY_INTERFACE=CGI/1.1
HTTPS=off
INSTANCE_ID=2
INSTANCE_META_PATH=/LM/W3SVC/2
LOCAL_ADDR=::1
PATH_INFO=/Content/bootstrap.min.css type=text/css><script type=
PATH_TRANSLATED=F:\Synced\Visual Studio 2017\Projects\temp\btnetnew\btnetnew\Content\bootstrap.min.css type=text\css><script type=
REMOTE_ADDR=::1
REMOTE_HOST=::1
REMOTE_PORT=50609
REQUEST_METHOD=GET
SCRIPT_NAME=/Content/bootstrap.min.css type=text/css><script type=
SERVER_NAME=localhost
SERVER_PORT=49412
SERVER_PORT_SECURE=0
SERVER_PROTOCOL=HTTP/1.1
SERVER_SOFTWARE=Microsoft-IIS/10.0
URL=/Content/bootstrap.min.css type=text/css><script type=
HTTP_CONNECTION=keep-alive
HTTP_ACCEPT=text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8
HTTP_ACCEPT_ENCODING=gzip, deflate, br
HTTP_ACCEPT_LANGUAGE=en-US,en;q=0.9,tr;q=0.8
HTTP_COOKIE=user=name=admin&NTLM=0; ASP.NET_SessionId=vrjce1domi1jxhuslyp3ip4b; se_id=35331cbe-1cd7-4a3d-ae5d-18563865bc9a
HTTP_HOST=localhost:49412
HTTP_USER_AGENT=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36
HTTP_UPGRADE_INSECURE_REQUESTS=1
2018-08-14 16:12:04 http://localhost:49412/Content/bootstrap.min.css type=text/css><script type= to email addr: admin@example.com
2018-08-14 16:12:04 http://localhost:49412/Content/bootstrap.min.css type=text/css><script type= There was a problem sending email.   Check settings in Web.config.
2018-08-14 16:12:04 http://localhost:49412/Content/bootstrap.min.css type=text/css><script type= TO:admin@example.com
2018-08-14 16:12:04 http://localhost:49412/Content/bootstrap.min.css type=text/css><script type= FROM:errors@example.com
2018-08-14 16:12:04 http://localhost:49412/Content/bootstrap.min.css type=text/css><script type= SUBJECT:Error: A potentially dangerous Request.Path value was detected from the client (>).
2018-08-14 16:12:04 http://localhost:49412/Content/bootstrap.min.css type=text/css><script type= Could not find a part of the path 'C:\temp\pickup\caa8c546-6e85-4578-a696-db123d50a88f.eml'.
2018-08-14 16:12:47 http://localhost:49412/view_report.aspx?view=data&id=3 sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '35331cbe-1cd7-4a3d-ae5d-18563865bc9a';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '35331cbe-1cd7-4a3d-ae5d-18563865bc9a'
and us_active = 1
2018-08-14 16:12:47 http://localhost:49412/view_report.aspx?view=data&id=3 elapsed milliseconds:0007
2018-08-14 16:12:47 http://localhost:49412/view_report.aspx?view=data&id=3 sql=
select rp_desc, rp_sql, rp_chart_type
		from reports
		where rp_id = 3
2018-08-14 16:12:47 http://localhost:49412/view_report.aspx?view=data&id=3 elapsed milliseconds:0001
2018-08-14 16:12:47 http://localhost:49412/view_report.aspx?view=data&id=3 sql=
select ct_name [category], count(1) [count] 
 from bugs 
 inner join categories on bg_category = ct_id 
 group by ct_name 
 order by ct_name
2018-08-14 16:12:47 http://localhost:49412/view_report.aspx?view=data&id=3 elapsed milliseconds:0002
2018-08-14 16:15:24  caught exception in util.set_context:Request is not available in this context
2018-08-14 16:15:24  threadproc_votes
2018-08-14 16:15:24  started creating Lucene index using folder F:\Synced\Visual Studio 2017\Projects\temp\btnetnew\btnetnew\App_Data\lucene_index
2018-08-14 16:15:24  sql=

if exists (select * from dbo.sysobjects where id = object_id(N'[votes_view]'))
drop view [votes_view]
2018-08-14 16:15:24  sql=

create view votes_view as
select bu_bug as vote_bug, sum(bu_vote) as vote_total
from bug_user
group by bu_bug
having sum(bu_vote) > 0
2018-08-14 16:15:24  sql=

select bu_bug, count(1)
from bug_user 
where bu_vote = 1
group by bu_bug
2018-08-14 16:15:24  sql=

/* get searchable cols */					
select sc.name
from syscolumns sc
inner join systypes st on st.xusertype = sc.xusertype
inner join sysobjects so on sc.id = so.id
where so.name = 'bugs'
and st.[name] <> 'sysname'
and sc.name not in ('rowguid',
'bg_id',
'bg_short_desc',
'bg_reported_user',
'bg_reported_date',
'bg_project',
'bg_org',
'bg_category',
'bg_priority',
'bg_status',
'bg_assigned_to_user',
'bg_last_updated_user',
'bg_last_updated_date',
'bg_user_defined_attribute',
'bg_project_custom_dropdown_value1',
'bg_project_custom_dropdown_value2',
'bg_project_custom_dropdown_value3',
'bg_tags')
and st.[name] in ('nvarchar','varchar')
and sc.length > 30
2018-08-14 16:15:24  elapsed milliseconds:0009
2018-08-14 16:15:25  elapsed milliseconds:0070
2018-08-14 16:15:25  sql=

select bg_id, 	

isnull(bg_tags,'') bg_tags,
bg_short_desc
from bugs
2018-08-14 16:15:25  elapsed milliseconds:0003
2018-08-14 16:15:25  sql=

select bp_bug, bp_id, 
isnull(bp_comment_search,bp_comment) [text] 
from bug_posts 
where bp_type <> 'update'
and bp_hidden_from_external_users = 0
2018-08-14 16:15:25  elapsed milliseconds:0002
2018-08-14 16:15:25  done creating Lucene index
2018-08-14 16:15:26 http://localhost:49412/default.aspx sql=
select count(1) from users
2018-08-14 16:15:28 http://localhost:49412/default.aspx sql=
select count(1) from users
2018-08-14 16:15:28 http://localhost:49412/default.aspx sql=

select us_username, us_id, us_password, isnull(us_salt,0) us_salt, us_active
from users
where us_username = N'admin'
2018-08-14 16:15:28 http://localhost:49412/default.aspx elapsed milliseconds:0001
2018-08-14 16:15:28 http://localhost:49412/default.aspx sql=
update users set us_most_recent_login_datetime = getdate() where us_id = 1
2018-08-14 16:15:29 http://localhost:49412/default.aspx sql=
select us_id from users where us_username = N'admin'
2018-08-14 16:15:29 http://localhost:49412/default.aspx elapsed milliseconds:0001
2018-08-14 16:15:29 http://localhost:49412/default.aspx guid=67f3adae-409f-4805-98e8-6ab50d52c735
2018-08-14 16:15:29 http://localhost:49412/default.aspx sql=
insert into sessions (se_id, se_user) values('67f3adae-409f-4805-98e8-6ab50d52c735', 1)
2018-08-14 16:15:29 http://localhost:49412/default.aspx AppPath:
2018-08-14 16:15:31 http://localhost:49412/bugs.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '67f3adae-409f-4805-98e8-6ab50d52c735';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '67f3adae-409f-4805-98e8-6ab50d52c735'
and us_active = 1
2018-08-14 16:15:31 http://localhost:49412/bugs.aspx elapsed milliseconds:0007
2018-08-14 16:15:31 http://localhost:49412/bugs.aspx sql=

/* custom columns */ select sc.name, st.[name] [datatype], 
case when st.[name] = 'nvarchar' or st.[name] = 'nchar' then sc.length/2 else sc.length end as [length], 
sc.xprec, sc.xscale, sc.isnullable,
mm.text [default value], 
dflts.name [default name], 
isnull(ccm_dropdown_type,'') [dropdown type],
isnull(ccm_dropdown_vals,'') [vals],
isnull(ccm_sort_seq, sc.colorder) [column order],
sc.colorder
from syscolumns sc
inner join systypes st on st.xusertype = sc.xusertype
inner join sysobjects so on sc.id = so.id
left outer join syscomments mm on sc.cdefault = mm.id
left outer join custom_col_metadata on ccm_colorder = sc.colorder
left outer join sysobjects dflts on dflts.id = mm.id
where so.name = 'bugs'
and st.[name] <> 'sysname'
and sc.name not in ('rowguid',
'bg_id',
'bg_short_desc',
'bg_reported_user',
'bg_reported_date',
'bg_project',
'bg_org',
'bg_category',
'bg_priority',
'bg_status',
'bg_assigned_to_user',
'bg_last_updated_user',
'bg_last_updated_date',
'bg_user_defined_attribute',
'bg_project_custom_dropdown_value1',
'bg_project_custom_dropdown_value2',
'bg_project_custom_dropdown_value3',
'bg_tags')
order by sc.id, isnull(ccm_sort_seq,sc.colorder)
2018-08-14 16:15:31 http://localhost:49412/bugs.aspx elapsed milliseconds:0076
2018-08-14 16:15:31 http://localhost:49412/bugs.aspx sql=
/* query dropdown */
select qu_id, qu_desc
from queries
where (isnull(qu_user,0) = 0 and isnull(qu_org,0) = 0)
or isnull(qu_user,0) = 1
or isnull(qu_org,0) = 1
order by qu_desc
2018-08-14 16:15:31 http://localhost:49412/bugs.aspx elapsed milliseconds:0001
2018-08-14 16:15:31 http://localhost:49412/bugs.aspx sql=
select qu_id, qu_sql from queries where qu_id in
			(select us_default_query from users where us_id = 1)
2018-08-14 16:15:31 http://localhost:49412/bugs.aspx elapsed milliseconds:0001
2018-08-14 16:15:31 http://localhost:49412/bugs.aspx sql=
select isnull(pr_background_color,'#ffffff'), bg_id [id], isnull(bu_flag,0) [$FLAG], 
 bg_short_desc [desc], isnull(pj_name,'') [project], isnull(og_name,'') [organization], isnull(ct_name,'') [category], rpt.us_username [reported by],
 bg_reported_date [reported on], isnull(pr_name,'') [priority], isnull(asg.us_username,'') [assigned to],
 isnull(st_name,'') [status], isnull(lu.us_username,'') [last updated by], bg_last_updated_date [last updated on]
 from bugs 
 left outer join bug_user on bu_bug = bg_id and bu_user = 1 
 left outer join users rpt on rpt.us_id = bg_reported_user
 left outer join users asg on asg.us_id = bg_assigned_to_user
 left outer join users lu on lu.us_id = bg_last_updated_user
 left outer join projects on pj_id = bg_project
 left outer join orgs on og_id = bg_org
 left outer join categories on ct_id = bg_category
 left outer join priorities on pr_id = bg_priority
 left outer join statuses on st_id = bg_status
  /* altered - just order by  */ WHERE  (bugs.bg_project not in (
					select pu_project
					from project_user_xref
					where pu_user = 1
					and pu_permission_level = 0)) order by bg_id desc
2018-08-14 16:15:31 http://localhost:49412/bugs.aspx elapsed milliseconds:0012
2018-08-14 16:15:39 http://localhost:49412/reports.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '67f3adae-409f-4805-98e8-6ab50d52c735';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '67f3adae-409f-4805-98e8-6ab50d52c735'
and us_active = 1
2018-08-14 16:15:39 http://localhost:49412/reports.aspx elapsed milliseconds:0000
2018-08-14 16:15:39 http://localhost:49412/reports.aspx sql=

select
rp_desc [report],
case
	when rp_chart_type = 'pie' then
		'<a target=''_blank'' href=''view_report.aspx?view=chart&id=' + convert(varchar, rp_id) + '''>pie</a>'
	when rp_chart_type = 'line' then
		'<a target=''_blank'' href=''view_report.aspx?view=chart&id=' + convert(varchar, rp_id) + '''>line</a>'
	when rp_chart_type = 'bar' then
		'<a target=''_blank'' href=''view_report.aspx?view=chart&id=' + convert(varchar, rp_id) + '''>bar</a>'
	else
		'&nbsp;' end [view<br>chart],
'<a target=''_blank'' href=''view_report.aspx?view=data&id=' + convert(varchar, rp_id) + '''>data</a>' [view<br>data]
, '<a href=''edit_report.aspx?id=' + convert(varchar, rp_id) + '''>edit</a>' [edit], '<a href=''delete_report.aspx?id=' + convert(varchar, rp_id) + '''>delete</a>' [delete] 
from reports order by rp_desc
2018-08-14 16:15:39 http://localhost:49412/reports.aspx elapsed milliseconds:0001
2018-08-14 16:17:07 http://localhost:49412/view_report.aspx?view=data&id=3 sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '67f3adae-409f-4805-98e8-6ab50d52c735';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '67f3adae-409f-4805-98e8-6ab50d52c735'
and us_active = 1
2018-08-14 16:17:07 http://localhost:49412/view_report.aspx?view=data&id=3 elapsed milliseconds:0007
2018-08-14 16:17:07 http://localhost:49412/view_report.aspx?view=data&id=3 sql=
select rp_desc, rp_sql, rp_chart_type
		from reports
		where rp_id = 3
2018-08-14 16:17:07 http://localhost:49412/view_report.aspx?view=data&id=3 elapsed milliseconds:0001
2018-08-14 16:17:07 http://localhost:49412/view_report.aspx?view=data&id=3 sql=
select ct_name [category], count(1) [count] 
 from bugs 
 inner join categories on bg_category = ct_id 
 group by ct_name 
 order by ct_name
2018-08-14 16:17:07 http://localhost:49412/view_report.aspx?view=data&id=3 elapsed milliseconds:0002
2018-08-14 16:17:15 http://localhost:49412/edit_report.aspx?id=3 sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '67f3adae-409f-4805-98e8-6ab50d52c735';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '67f3adae-409f-4805-98e8-6ab50d52c735'
and us_active = 1
2018-08-14 16:17:15 http://localhost:49412/edit_report.aspx?id=3 elapsed milliseconds:0007
2018-08-14 16:17:15 http://localhost:49412/edit_report.aspx?id=3 sql=
select
				rp_desc, rp_sql, rp_chart_type
				from reports where rp_id = 3
2018-08-14 16:17:15 http://localhost:49412/edit_report.aspx?id=3 elapsed milliseconds:0001
2018-08-14 16:19:30 http://localhost:49412/view_report.aspx?view=chart&id=3 sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '67f3adae-409f-4805-98e8-6ab50d52c735';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '67f3adae-409f-4805-98e8-6ab50d52c735'
and us_active = 1
2018-08-14 16:19:31 http://localhost:49412/view_report.aspx?view=chart&id=3 elapsed milliseconds:0008
2018-08-14 16:19:31 http://localhost:49412/view_report.aspx?view=chart&id=3 sql=
select rp_desc, rp_sql, rp_chart_type
		from reports
		where rp_id = 3
2018-08-14 16:19:31 http://localhost:49412/view_report.aspx?view=chart&id=3 elapsed milliseconds:0001
2018-08-14 16:19:31 http://localhost:49412/view_report.aspx?view=chart&id=3 sql=
select ct_name [category], count(1) [count] 
 from bugs 
 inner join categories on bg_category = ct_id 
 group by ct_name 
 order by ct_name
2018-08-14 16:19:31 http://localhost:49412/view_report.aspx?view=chart&id=3 elapsed milliseconds:0002
2018-08-14 16:19:33 http://localhost:49412/view_report.aspx?view=chart&id=5 sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '67f3adae-409f-4805-98e8-6ab50d52c735';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '67f3adae-409f-4805-98e8-6ab50d52c735'
and us_active = 1
2018-08-14 16:19:33 http://localhost:49412/view_report.aspx?view=chart&id=5 elapsed milliseconds:0000
2018-08-14 16:19:33 http://localhost:49412/view_report.aspx?view=chart&id=5 sql=
select rp_desc, rp_sql, rp_chart_type
		from reports
		where rp_id = 5
2018-08-14 16:19:33 http://localhost:49412/view_report.aspx?view=chart&id=5 elapsed milliseconds:0000
2018-08-14 16:19:34 http://localhost:49412/view_report.aspx?view=chart&id=5 sql=
select datepart(dy, bg_reported_date) [day of year], count(1) [count] 
 from bugs 
 group by datepart(dy, bg_reported_date), 
 datepart(dy,bg_reported_date) order by 1
2018-08-14 16:19:34 http://localhost:49412/view_report.aspx?view=chart&id=5 elapsed milliseconds:0001
2018-08-14 16:20:09  caught exception in util.set_context:Request is not available in this context
2018-08-14 16:20:09  threadproc_votes
2018-08-14 16:20:09  started creating Lucene index using folder F:\Synced\Visual Studio 2017\Projects\temp\btnetnew\btnetnew\App_Data\lucene_index
2018-08-14 16:20:09  sql=

if exists (select * from dbo.sysobjects where id = object_id(N'[votes_view]'))
drop view [votes_view]
2018-08-14 16:20:09  sql=

create view votes_view as
select bu_bug as vote_bug, sum(bu_vote) as vote_total
from bug_user
group by bu_bug
having sum(bu_vote) > 0
2018-08-14 16:20:09  sql=

select bu_bug, count(1)
from bug_user 
where bu_vote = 1
group by bu_bug
2018-08-14 16:20:09  sql=

/* get searchable cols */					
select sc.name
from syscolumns sc
inner join systypes st on st.xusertype = sc.xusertype
inner join sysobjects so on sc.id = so.id
where so.name = 'bugs'
and st.[name] <> 'sysname'
and sc.name not in ('rowguid',
'bg_id',
'bg_short_desc',
'bg_reported_user',
'bg_reported_date',
'bg_project',
'bg_org',
'bg_category',
'bg_priority',
'bg_status',
'bg_assigned_to_user',
'bg_last_updated_user',
'bg_last_updated_date',
'bg_user_defined_attribute',
'bg_project_custom_dropdown_value1',
'bg_project_custom_dropdown_value2',
'bg_project_custom_dropdown_value3',
'bg_tags')
and st.[name] in ('nvarchar','varchar')
and sc.length > 30
2018-08-14 16:20:09  elapsed milliseconds:0009
2018-08-14 16:20:09  elapsed milliseconds:0088
2018-08-14 16:20:09  sql=

select bg_id, 	

isnull(bg_tags,'') bg_tags,
bg_short_desc
from bugs
2018-08-14 16:20:09  elapsed milliseconds:0001
2018-08-14 16:20:09  sql=

select bp_bug, bp_id, 
isnull(bp_comment_search,bp_comment) [text] 
from bug_posts 
where bp_type <> 'update'
and bp_hidden_from_external_users = 0
2018-08-14 16:20:09  elapsed milliseconds:0002
2018-08-14 16:20:09  done creating Lucene index
2018-08-14 16:20:10 http://localhost:49412/default.aspx sql=
select count(1) from users
2018-08-14 16:26:37 http://localhost:49412/default.aspx sql=
select count(1) from users
2018-08-14 16:26:38 http://localhost:49412/default.aspx sql=

select us_username, us_id, us_password, isnull(us_salt,0) us_salt, us_active
from users
where us_username = N'admin'
2018-08-14 16:26:38 http://localhost:49412/default.aspx elapsed milliseconds:0001
2018-08-14 16:26:38 http://localhost:49412/default.aspx sql=
update users set us_most_recent_login_datetime = getdate() where us_id = 1
2018-08-14 16:26:38 http://localhost:49412/default.aspx sql=
select us_id from users where us_username = N'admin'
2018-08-14 16:26:38 http://localhost:49412/default.aspx elapsed milliseconds:0001
2018-08-14 16:26:38 http://localhost:49412/default.aspx guid=817e288c-e334-412d-93fa-9e7eaeb9cbb7
2018-08-14 16:26:38 http://localhost:49412/default.aspx sql=
insert into sessions (se_id, se_user) values('817e288c-e334-412d-93fa-9e7eaeb9cbb7', 1)
2018-08-14 16:26:38 http://localhost:49412/default.aspx AppPath:
2018-08-14 16:26:40 http://localhost:49412/bugs.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '817e288c-e334-412d-93fa-9e7eaeb9cbb7';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '817e288c-e334-412d-93fa-9e7eaeb9cbb7'
and us_active = 1
2018-08-14 16:26:40 http://localhost:49412/bugs.aspx elapsed milliseconds:0007
2018-08-14 16:26:40 http://localhost:49412/bugs.aspx sql=

/* custom columns */ select sc.name, st.[name] [datatype], 
case when st.[name] = 'nvarchar' or st.[name] = 'nchar' then sc.length/2 else sc.length end as [length], 
sc.xprec, sc.xscale, sc.isnullable,
mm.text [default value], 
dflts.name [default name], 
isnull(ccm_dropdown_type,'') [dropdown type],
isnull(ccm_dropdown_vals,'') [vals],
isnull(ccm_sort_seq, sc.colorder) [column order],
sc.colorder
from syscolumns sc
inner join systypes st on st.xusertype = sc.xusertype
inner join sysobjects so on sc.id = so.id
left outer join syscomments mm on sc.cdefault = mm.id
left outer join custom_col_metadata on ccm_colorder = sc.colorder
left outer join sysobjects dflts on dflts.id = mm.id
where so.name = 'bugs'
and st.[name] <> 'sysname'
and sc.name not in ('rowguid',
'bg_id',
'bg_short_desc',
'bg_reported_user',
'bg_reported_date',
'bg_project',
'bg_org',
'bg_category',
'bg_priority',
'bg_status',
'bg_assigned_to_user',
'bg_last_updated_user',
'bg_last_updated_date',
'bg_user_defined_attribute',
'bg_project_custom_dropdown_value1',
'bg_project_custom_dropdown_value2',
'bg_project_custom_dropdown_value3',
'bg_tags')
order by sc.id, isnull(ccm_sort_seq,sc.colorder)
2018-08-14 16:26:40 http://localhost:49412/bugs.aspx elapsed milliseconds:0077
2018-08-14 16:26:40 http://localhost:49412/bugs.aspx sql=
/* query dropdown */
select qu_id, qu_desc
from queries
where (isnull(qu_user,0) = 0 and isnull(qu_org,0) = 0)
or isnull(qu_user,0) = 1
or isnull(qu_org,0) = 1
order by qu_desc
2018-08-14 16:26:40 http://localhost:49412/bugs.aspx elapsed milliseconds:0001
2018-08-14 16:26:40 http://localhost:49412/bugs.aspx sql=
select qu_id, qu_sql from queries where qu_id in
			(select us_default_query from users where us_id = 1)
2018-08-14 16:26:40 http://localhost:49412/bugs.aspx elapsed milliseconds:0002
2018-08-14 16:26:40 http://localhost:49412/bugs.aspx sql=
select isnull(pr_background_color,'#ffffff'), bg_id [id], isnull(bu_flag,0) [$FLAG], 
 bg_short_desc [desc], isnull(pj_name,'') [project], isnull(og_name,'') [organization], isnull(ct_name,'') [category], rpt.us_username [reported by],
 bg_reported_date [reported on], isnull(pr_name,'') [priority], isnull(asg.us_username,'') [assigned to],
 isnull(st_name,'') [status], isnull(lu.us_username,'') [last updated by], bg_last_updated_date [last updated on]
 from bugs 
 left outer join bug_user on bu_bug = bg_id and bu_user = 1 
 left outer join users rpt on rpt.us_id = bg_reported_user
 left outer join users asg on asg.us_id = bg_assigned_to_user
 left outer join users lu on lu.us_id = bg_last_updated_user
 left outer join projects on pj_id = bg_project
 left outer join orgs on og_id = bg_org
 left outer join categories on ct_id = bg_category
 left outer join priorities on pr_id = bg_priority
 left outer join statuses on st_id = bg_status
  /* altered - just order by  */ WHERE  (bugs.bg_project not in (
					select pu_project
					from project_user_xref
					where pu_user = 1
					and pu_permission_level = 0)) order by bg_id desc
2018-08-14 16:26:40 http://localhost:49412/bugs.aspx elapsed milliseconds:0011
2018-08-14 16:26:51 http://localhost:49412/reports.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '817e288c-e334-412d-93fa-9e7eaeb9cbb7';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '817e288c-e334-412d-93fa-9e7eaeb9cbb7'
and us_active = 1
2018-08-14 16:26:51 http://localhost:49412/reports.aspx elapsed milliseconds:0000
2018-08-14 16:26:51 http://localhost:49412/reports.aspx sql=

select
rp_desc [report],
case
	when rp_chart_type = 'pie' then
		'<a target=''_blank'' href=''view_report.aspx?view=chart&id=' + convert(varchar, rp_id) + '''>pie</a>'
	when rp_chart_type = 'line' then
		'<a target=''_blank'' href=''view_report.aspx?view=chart&id=' + convert(varchar, rp_id) + '''>line</a>'
	when rp_chart_type = 'bar' then
		'<a target=''_blank'' href=''view_report.aspx?view=chart&id=' + convert(varchar, rp_id) + '''>bar</a>'
	else
		'&nbsp;' end [view<br>chart],
'<a target=''_blank'' href=''view_report.aspx?view=data&id=' + convert(varchar, rp_id) + '''>data</a>' [view<br>data]
, '<a href=''edit_report.aspx?id=' + convert(varchar, rp_id) + '''>edit</a>' [edit], '<a href=''delete_report.aspx?id=' + convert(varchar, rp_id) + '''>delete</a>' [delete] 
from reports order by rp_desc
2018-08-14 16:26:51 http://localhost:49412/reports.aspx elapsed milliseconds:0001
2018-08-14 16:27:04 http://localhost:49412/dashboard.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '817e288c-e334-412d-93fa-9e7eaeb9cbb7';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '817e288c-e334-412d-93fa-9e7eaeb9cbb7'
and us_active = 1
2018-08-14 16:27:04 http://localhost:49412/dashboard.aspx elapsed milliseconds:0007
2018-08-14 16:27:05 http://localhost:49412/dashboard.aspx sql=

select ds.*, rp_desc
from dashboard_items ds
inner join reports on rp_id = ds_report
where ds_user = 1
order by ds_col, ds_row
2018-08-14 16:27:05 http://localhost:49412/dashboard.aspx elapsed milliseconds:0002
2018-08-14 16:27:09 http://localhost:49412/edit_dashboard.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '817e288c-e334-412d-93fa-9e7eaeb9cbb7';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '817e288c-e334-412d-93fa-9e7eaeb9cbb7'
and us_active = 1
2018-08-14 16:27:09 http://localhost:49412/edit_dashboard.aspx elapsed milliseconds:0007
2018-08-14 16:27:09 http://localhost:49412/edit_dashboard.aspx sql=

select ds_id, ds_col, ds_row, ds_chart_type, rp_desc
from dashboard_items ds
inner join reports on rp_id = ds_report
where ds_user = 1
order by ds_col, ds_row
2018-08-14 16:27:09 http://localhost:49412/edit_dashboard.aspx elapsed milliseconds:0002
2018-08-14 16:27:14 http://localhost:49412/select_report.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '817e288c-e334-412d-93fa-9e7eaeb9cbb7';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '817e288c-e334-412d-93fa-9e7eaeb9cbb7'
and us_active = 1
2018-08-14 16:27:14 http://localhost:49412/select_report.aspx elapsed milliseconds:0000
2018-08-14 16:27:14 http://localhost:49412/select_report.aspx sql=

select
rp_desc [report],
case
	when rp_chart_type = 'pie' then
		'<a href=''javascript:select_report("pie",' + convert(varchar, rp_id) + ')''>select pie</a>'
	when rp_chart_type = 'line' then
		'<a href=''javascript:select_report("line",' + convert(varchar, rp_id) + ')''>select line</a>'
	when rp_chart_type = 'bar' then
		'<a href=''javascript:select_report("bar",' + convert(varchar, rp_id) + ')''>select bar</a>'
	else
		'&nbsp;' end [chart],
'<a href=''javascript:select_report("data",' + convert(varchar, rp_id) + ')''>select data</a>' [data]
from reports order by rp_desc
2018-08-14 16:27:14 http://localhost:49412/select_report.aspx elapsed milliseconds:0001
2018-08-14 16:28:39 http://localhost:49412/select_report.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '817e288c-e334-412d-93fa-9e7eaeb9cbb7';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '817e288c-e334-412d-93fa-9e7eaeb9cbb7'
and us_active = 1
2018-08-14 16:28:39 http://localhost:49412/select_report.aspx elapsed milliseconds:0008
2018-08-14 16:28:40 http://localhost:49412/select_report.aspx sql=

select
rp_desc [report],
case
	when rp_chart_type = 'pie' then
		'<a href=''javascript:select_report("pie",' + convert(varchar, rp_id) + ')''>select pie</a>'
	when rp_chart_type = 'line' then
		'<a href=''javascript:select_report("line",' + convert(varchar, rp_id) + ')''>select line</a>'
	when rp_chart_type = 'bar' then
		'<a href=''javascript:select_report("bar",' + convert(varchar, rp_id) + ')''>select bar</a>'
	else
		'&nbsp;' end [chart],
'<a href=''javascript:select_report("data",' + convert(varchar, rp_id) + ')''>select data</a>' [data]
from reports order by rp_desc
2018-08-14 16:28:40 http://localhost:49412/select_report.aspx elapsed milliseconds:0001
2018-08-14 16:28:50 http://localhost:49412/update_dashboard.aspx?rp_id=3&rp_chart_type=data&rp_col=1&actn=add&ses=817e288c-e334-412d-93fa-9e7eaeb9cbb7 sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '817e288c-e334-412d-93fa-9e7eaeb9cbb7';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '817e288c-e334-412d-93fa-9e7eaeb9cbb7'
and us_active = 1
2018-08-14 16:28:50 http://localhost:49412/update_dashboard.aspx?rp_id=3&rp_chart_type=data&rp_col=1&actn=add&ses=817e288c-e334-412d-93fa-9e7eaeb9cbb7 elapsed milliseconds:0000
2018-08-14 16:28:50 http://localhost:49412/update_dashboard.aspx?rp_id=3&rp_chart_type=data&rp_col=1&actn=add&ses=817e288c-e334-412d-93fa-9e7eaeb9cbb7 sql=

declare @last_row int
set @last_row = -1

select @last_row = max(ds_row) from dashboard_items
where ds_user = 1
and ds_col = 1

if @last_row = -1 or @last_row is null
	set @last_row = 1
else
	set @last_row = @last_row + 1

insert into dashboard_items
(ds_user, ds_report, ds_chart_type, ds_col, ds_row)
values (1, 3, 'data', 1, @last_row)
2018-08-14 16:28:50 http://localhost:49412/edit_dashboard.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '817e288c-e334-412d-93fa-9e7eaeb9cbb7';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '817e288c-e334-412d-93fa-9e7eaeb9cbb7'
and us_active = 1
2018-08-14 16:28:50 http://localhost:49412/edit_dashboard.aspx elapsed milliseconds:0000
2018-08-14 16:28:50 http://localhost:49412/edit_dashboard.aspx sql=

select ds_id, ds_col, ds_row, ds_chart_type, rp_desc
from dashboard_items ds
inner join reports on rp_id = ds_report
where ds_user = 1
order by ds_col, ds_row
2018-08-14 16:28:51 http://localhost:49412/edit_dashboard.aspx elapsed milliseconds:0008
2018-08-14 16:28:53 http://localhost:49412/dashboard.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '817e288c-e334-412d-93fa-9e7eaeb9cbb7';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '817e288c-e334-412d-93fa-9e7eaeb9cbb7'
and us_active = 1
2018-08-14 16:28:53 http://localhost:49412/dashboard.aspx elapsed milliseconds:0000
2018-08-14 16:28:53 http://localhost:49412/dashboard.aspx sql=

select ds.*, rp_desc
from dashboard_items ds
inner join reports on rp_id = ds_report
where ds_user = 1
order by ds_col, ds_row
2018-08-14 16:28:53 http://localhost:49412/dashboard.aspx elapsed milliseconds:0002
2018-08-14 16:28:54 http://localhost:49412/view_report.aspx?view=data&id=3 sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '817e288c-e334-412d-93fa-9e7eaeb9cbb7';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '817e288c-e334-412d-93fa-9e7eaeb9cbb7'
and us_active = 1
2018-08-14 16:28:54 http://localhost:49412/view_report.aspx?view=data&id=3 elapsed milliseconds:0000
2018-08-14 16:28:54 http://localhost:49412/view_report.aspx?view=data&id=3 sql=
select rp_desc, rp_sql, rp_chart_type
		from reports
		where rp_id = 3
2018-08-14 16:28:54 http://localhost:49412/view_report.aspx?view=data&id=3 elapsed milliseconds:0001
2018-08-14 16:28:54 http://localhost:49412/view_report.aspx?view=data&id=3 sql=
select ct_name [category], count(1) [count] 
 from bugs 
 inner join categories on bg_category = ct_id 
 group by ct_name 
 order by ct_name
2018-08-14 16:28:54 http://localhost:49412/view_report.aspx?view=data&id=3 elapsed milliseconds:0002
2018-08-14 16:29:00 http://localhost:49412/reports.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '817e288c-e334-412d-93fa-9e7eaeb9cbb7';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '817e288c-e334-412d-93fa-9e7eaeb9cbb7'
and us_active = 1
2018-08-14 16:29:00 http://localhost:49412/reports.aspx elapsed milliseconds:0000
2018-08-14 16:29:00 http://localhost:49412/reports.aspx sql=

select
rp_desc [report],
case
	when rp_chart_type = 'pie' then
		'<a target=''_blank'' href=''view_report.aspx?view=chart&id=' + convert(varchar, rp_id) + '''>pie</a>'
	when rp_chart_type = 'line' then
		'<a target=''_blank'' href=''view_report.aspx?view=chart&id=' + convert(varchar, rp_id) + '''>line</a>'
	when rp_chart_type = 'bar' then
		'<a target=''_blank'' href=''view_report.aspx?view=chart&id=' + convert(varchar, rp_id) + '''>bar</a>'
	else
		'&nbsp;' end [view<br>chart],
'<a target=''_blank'' href=''view_report.aspx?view=data&id=' + convert(varchar, rp_id) + '''>data</a>' [view<br>data]
, '<a href=''edit_report.aspx?id=' + convert(varchar, rp_id) + '''>edit</a>' [edit], '<a href=''delete_report.aspx?id=' + convert(varchar, rp_id) + '''>delete</a>' [delete] 
from reports order by rp_desc
2018-08-14 16:29:00 http://localhost:49412/reports.aspx elapsed milliseconds:0002
2018-08-14 16:29:01 http://localhost:49412/admin.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '817e288c-e334-412d-93fa-9e7eaeb9cbb7';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '817e288c-e334-412d-93fa-9e7eaeb9cbb7'
and us_active = 1
2018-08-14 16:29:01 http://localhost:49412/admin.aspx elapsed milliseconds:0000
2018-08-14 16:29:04 http://localhost:49412/users.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '817e288c-e334-412d-93fa-9e7eaeb9cbb7';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '817e288c-e334-412d-93fa-9e7eaeb9cbb7'
and us_active = 1
2018-08-14 16:29:04 http://localhost:49412/users.aspx elapsed milliseconds:0000
2018-08-14 16:29:04 http://localhost:49412/users.aspx sql=

			select distinct pu_user
			into #t
			from
			project_user_xref
			where pu_admin = 1;

			select u.us_id [id],
			'<a href=edit_user.aspx?id=' + convert(varchar,u.us_id) + '>edit</a>' [$no_sort_edit],
			'<a href=edit_user.aspx?copy=y&id=' + convert(varchar,u.us_id) + '>copy</a>' [$no_sort_add<br>like<br>this],
			'<a href=delete_user.aspx?id=' + convert(varchar,u.us_id) + '>delete</a>' [$no_sort_delete],

			u.us_username [username],
			isnull(u.us_firstname,'') + ' ' + isnull(u.us_lastname,'') [name],
			'<a sort=''' + og_name + ''' href=edit_org.aspx?id=' + convert(varchar,og_id) + '>' + og_name + '</a>' [org],
            isnull(u.us_email,'') [email],
			case when u.us_admin = 1 then 'Y' else 'N' end [admin],
			case when pu_user is null then 'N' else 'Y' end [project<br>admin],
			case when u.us_active = 1 then 'Y' else 'N' end [active],
			case when og_external_user = 1 then 'Y' else 'N' end [external],
			isnull(pj_name,'') [forced<br>project],
			isnull(qu_desc,'') [default query],
			case when u.us_enable_notifications = 1 then 'Y' else 'N' end [notif-<br>ications],
			u.us_most_recent_login_datetime [most recent login],
			u2.us_username [created<br>by]

			from users u
			inner join orgs on u.us_org = og_id
			left outer join queries on u.us_default_query = qu_id
			left outer join projects on u.us_forced_project = pj_id
			left outer join users u2 on u.us_created_user = u2.us_id
			left outer join #t on u.us_id = pu_user
			where u.us_active in (1 ,0)
			
			order by u.us_username;

			drop table #t
2018-08-14 16:29:04 http://localhost:49412/users.aspx elapsed milliseconds:0016
2018-08-14 16:29:24 http://localhost:49412/users.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '817e288c-e334-412d-93fa-9e7eaeb9cbb7';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '817e288c-e334-412d-93fa-9e7eaeb9cbb7'
and us_active = 1
2018-08-14 16:29:24 http://localhost:49412/users.aspx elapsed milliseconds:0010
2018-08-14 16:29:24 http://localhost:49412/users.aspx sql=

			select distinct pu_user
			into #t
			from
			project_user_xref
			where pu_admin = 1;

			select u.us_id [id],
			'<a href=edit_user.aspx?id=' + convert(varchar,u.us_id) + '>edit</a>' [$no_sort_edit],
			'<a href=edit_user.aspx?copy=y&id=' + convert(varchar,u.us_id) + '>copy</a>' [$no_sort_add<br>like<br>this],
			'<a href=delete_user.aspx?id=' + convert(varchar,u.us_id) + '>delete</a>' [$no_sort_delete],

			u.us_username [username],
			isnull(u.us_firstname,'') + ' ' + isnull(u.us_lastname,'') [name],
			'<a sort=''' + og_name + ''' href=edit_org.aspx?id=' + convert(varchar,og_id) + '>' + og_name + '</a>' [org],
            isnull(u.us_email,'') [email],
			case when u.us_admin = 1 then 'Y' else 'N' end [admin],
			case when pu_user is null then 'N' else 'Y' end [project<br>admin],
			case when u.us_active = 1 then 'Y' else 'N' end [active],
			case when og_external_user = 1 then 'Y' else 'N' end [external],
			isnull(pj_name,'') [forced<br>project],
			isnull(qu_desc,'') [default query],
			case when u.us_enable_notifications = 1 then 'Y' else 'N' end [notif-<br>ications],
			u.us_most_recent_login_datetime [most recent login],
			u2.us_username [created<br>by]

			from users u
			inner join orgs on u.us_org = og_id
			left outer join queries on u.us_default_query = qu_id
			left outer join projects on u.us_forced_project = pj_id
			left outer join users u2 on u.us_created_user = u2.us_id
			left outer join #t on u.us_id = pu_user
			where u.us_active in (1 ,0)
			and u.us_username like 'adm%'
			order by u.us_username;

			drop table #t
2018-08-14 16:29:24 http://localhost:49412/users.aspx elapsed milliseconds:0014
2018-08-14 16:29:28 http://localhost:49412/users.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '817e288c-e334-412d-93fa-9e7eaeb9cbb7';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '817e288c-e334-412d-93fa-9e7eaeb9cbb7'
and us_active = 1
2018-08-14 16:29:28 http://localhost:49412/users.aspx elapsed milliseconds:0000
2018-08-14 16:29:28 http://localhost:49412/users.aspx sql=

			select distinct pu_user
			into #t
			from
			project_user_xref
			where pu_admin = 1;

			select u.us_id [id],
			'<a href=edit_user.aspx?id=' + convert(varchar,u.us_id) + '>edit</a>' [$no_sort_edit],
			'<a href=edit_user.aspx?copy=y&id=' + convert(varchar,u.us_id) + '>copy</a>' [$no_sort_add<br>like<br>this],
			'<a href=delete_user.aspx?id=' + convert(varchar,u.us_id) + '>delete</a>' [$no_sort_delete],

			u.us_username [username],
			isnull(u.us_firstname,'') + ' ' + isnull(u.us_lastname,'') [name],
			'<a sort=''' + og_name + ''' href=edit_org.aspx?id=' + convert(varchar,og_id) + '>' + og_name + '</a>' [org],
            isnull(u.us_email,'') [email],
			case when u.us_admin = 1 then 'Y' else 'N' end [admin],
			case when pu_user is null then 'N' else 'Y' end [project<br>admin],
			case when u.us_active = 1 then 'Y' else 'N' end [active],
			case when og_external_user = 1 then 'Y' else 'N' end [external],
			isnull(pj_name,'') [forced<br>project],
			isnull(qu_desc,'') [default query],
			case when u.us_enable_notifications = 1 then 'Y' else 'N' end [notif-<br>ications],
			u.us_most_recent_login_datetime [most recent login],
			u2.us_username [created<br>by]

			from users u
			inner join orgs on u.us_org = og_id
			left outer join queries on u.us_default_query = qu_id
			left outer join projects on u.us_forced_project = pj_id
			left outer join users u2 on u.us_created_user = u2.us_id
			left outer join #t on u.us_id = pu_user
			where u.us_active in (1 ,0)
			
			order by u.us_username;

			drop table #t
2018-08-14 16:29:28 http://localhost:49412/users.aspx elapsed milliseconds:0012
2018-08-14 16:29:33 http://localhost:49412/edit_user.aspx?id=1 sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '817e288c-e334-412d-93fa-9e7eaeb9cbb7';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '817e288c-e334-412d-93fa-9e7eaeb9cbb7'
and us_active = 1
2018-08-14 16:29:33 http://localhost:49412/edit_user.aspx?id=1 elapsed milliseconds:0000
2018-08-14 16:29:33 http://localhost:49412/edit_user.aspx?id=1 sql=

				select pj_id, pj_name,
				isnull(pu_permission_level,2) [pu_permission_level],
				isnull(pu_auto_subscribe,0) [pu_auto_subscribe],
				isnull(pu_admin,0) [pu_admin]
				from projects
				left outer join project_user_xref on pj_id = pu_project
				and pu_user = 1
				order by pj_name;/* populate query dropdown */
		    declare @org int
		    set @org = null
		    select @org = us_org from users where us_id = 1

			select qu_id, qu_desc
			from queries
			where (isnull(qu_user,0) = 0 and isnull(qu_org,0) = 0)
			or isnull(qu_user,0) = 1
			or isnull(qu_org,0) = isnull(@org,-1)
			order by qu_desc;/* populate org dropdown 1 */
				select og_id, og_name
				from orgs
				order by og_name;
			select
				us_username,
				isnull(us_firstname,'') [us_firstname],
				isnull(us_lastname,'') [us_lastname],
				isnull(us_bugs_per_page,10) [us_bugs_per_page],
				us_use_fckeditor,
				us_enable_bug_list_popups,
				isnull(us_email,'') [us_email],
				us_active,
				us_admin,
				us_enable_notifications,
				us_send_notifications_to_self,
                us_reported_notifications,
                us_assigned_notifications,
                us_subscribed_notifications,
				us_auto_subscribe,
				us_auto_subscribe_own_bugs,
				us_auto_subscribe_reported_bugs,
				us_default_query,
				us_org,
				isnull(us_signature,'') [us_signature],
				isnull(us_forced_project,0) [us_forced_project],
				us_created_user
				from users
				where us_id = 1
2018-08-14 16:29:33 http://localhost:49412/edit_user.aspx?id=1 elapsed milliseconds:0005
2018-08-14 16:32:51 http://localhost:49412/edit_user.aspx?id=1 sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '817e288c-e334-412d-93fa-9e7eaeb9cbb7';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '817e288c-e334-412d-93fa-9e7eaeb9cbb7'
and us_active = 1
2018-08-14 16:32:51 http://localhost:49412/edit_user.aspx?id=1 elapsed milliseconds:0008
2018-08-14 16:32:51 http://localhost:49412/edit_user.aspx?id=1 sql=

				select pj_id, pj_name,
				isnull(pu_permission_level,2) [pu_permission_level],
				isnull(pu_auto_subscribe,0) [pu_auto_subscribe],
				isnull(pu_admin,0) [pu_admin]
				from projects
				left outer join project_user_xref on pj_id = pu_project
				and pu_user = 1
				order by pj_name;/* populate query dropdown */
		    declare @org int
		    set @org = null
		    select @org = us_org from users where us_id = 1

			select qu_id, qu_desc
			from queries
			where (isnull(qu_user,0) = 0 and isnull(qu_org,0) = 0)
			or isnull(qu_user,0) = 1
			or isnull(qu_org,0) = isnull(@org,-1)
			order by qu_desc;/* populate org dropdown 1 */
				select og_id, og_name
				from orgs
				order by og_name;
			select
				us_username,
				isnull(us_firstname,'') [us_firstname],
				isnull(us_lastname,'') [us_lastname],
				isnull(us_bugs_per_page,10) [us_bugs_per_page],
				us_use_fckeditor,
				us_enable_bug_list_popups,
				isnull(us_email,'') [us_email],
				us_active,
				us_admin,
				us_enable_notifications,
				us_send_notifications_to_self,
                us_reported_notifications,
                us_assigned_notifications,
                us_subscribed_notifications,
				us_auto_subscribe,
				us_auto_subscribe_own_bugs,
				us_auto_subscribe_reported_bugs,
				us_default_query,
				us_org,
				isnull(us_signature,'') [us_signature],
				isnull(us_forced_project,0) [us_forced_project],
				us_created_user
				from users
				where us_id = 1
2018-08-14 16:32:51 http://localhost:49412/edit_user.aspx?id=1 elapsed milliseconds:0006
2018-08-14 16:36:04 http://localhost:49412/users.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '817e288c-e334-412d-93fa-9e7eaeb9cbb7';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '817e288c-e334-412d-93fa-9e7eaeb9cbb7'
and us_active = 1
2018-08-14 16:36:04 http://localhost:49412/users.aspx elapsed milliseconds:0008
2018-08-14 16:36:04 http://localhost:49412/users.aspx sql=

			select distinct pu_user
			into #t
			from
			project_user_xref
			where pu_admin = 1;

			select u.us_id [id],
			'<a href=edit_user.aspx?id=' + convert(varchar,u.us_id) + '>edit</a>' [$no_sort_edit],
			'<a href=edit_user.aspx?copy=y&id=' + convert(varchar,u.us_id) + '>copy</a>' [$no_sort_add<br>like<br>this],
			'<a href=delete_user.aspx?id=' + convert(varchar,u.us_id) + '>delete</a>' [$no_sort_delete],

			u.us_username [username],
			isnull(u.us_firstname,'') + ' ' + isnull(u.us_lastname,'') [name],
			'<a sort=''' + og_name + ''' href=edit_org.aspx?id=' + convert(varchar,og_id) + '>' + og_name + '</a>' [org],
            isnull(u.us_email,'') [email],
			case when u.us_admin = 1 then 'Y' else 'N' end [admin],
			case when pu_user is null then 'N' else 'Y' end [project<br>admin],
			case when u.us_active = 1 then 'Y' else 'N' end [active],
			case when og_external_user = 1 then 'Y' else 'N' end [external],
			isnull(pj_name,'') [forced<br>project],
			isnull(qu_desc,'') [default query],
			case when u.us_enable_notifications = 1 then 'Y' else 'N' end [notif-<br>ications],
			u.us_most_recent_login_datetime [most recent login],
			u2.us_username [created<br>by]

			from users u
			inner join orgs on u.us_org = og_id
			left outer join queries on u.us_default_query = qu_id
			left outer join projects on u.us_forced_project = pj_id
			left outer join users u2 on u.us_created_user = u2.us_id
			left outer join #t on u.us_id = pu_user
			where u.us_active in (1 ,0)
			
			order by u.us_username;

			drop table #t
2018-08-14 16:36:04 http://localhost:49412/users.aspx elapsed milliseconds:0013
2018-08-14 16:36:10 http://localhost:49412/edit_user.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '817e288c-e334-412d-93fa-9e7eaeb9cbb7';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '817e288c-e334-412d-93fa-9e7eaeb9cbb7'
and us_active = 1
2018-08-14 16:36:10 http://localhost:49412/edit_user.aspx elapsed milliseconds:0000
2018-08-14 16:36:10 http://localhost:49412/edit_user.aspx sql=

				select pj_id, pj_name,
				isnull(pu_permission_level,2) [pu_permission_level],
				isnull(pu_auto_subscribe,0) [pu_auto_subscribe],
				isnull(pu_admin,0) [pu_admin]
				from projects
				left outer join project_user_xref on pj_id = pu_project
				and pu_user = 0
				order by pj_name;/* populate query dropdown */
		    declare @org int
		    set @org = null
		    select @org = us_org from users where us_id = 0

			select qu_id, qu_desc
			from queries
			where (isnull(qu_user,0) = 0 and isnull(qu_org,0) = 0)
			or isnull(qu_user,0) = 0
			or isnull(qu_org,0) = isnull(@org,-1)
			order by qu_desc;/* populate org dropdown 1 */
				select og_id, og_name
				from orgs
				order by og_name;
2018-08-14 16:36:10 http://localhost:49412/edit_user.aspx elapsed milliseconds:0004
2018-08-14 16:36:14 http://localhost:49412/edit_user.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '817e288c-e334-412d-93fa-9e7eaeb9cbb7';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '817e288c-e334-412d-93fa-9e7eaeb9cbb7'
and us_active = 1
2018-08-14 16:36:14 http://localhost:49412/edit_user.aspx elapsed milliseconds:0000
2018-08-14 16:40:58 http://localhost:49412/edit_user.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '817e288c-e334-412d-93fa-9e7eaeb9cbb7';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '817e288c-e334-412d-93fa-9e7eaeb9cbb7'
and us_active = 1
2018-08-14 16:40:58 http://localhost:49412/edit_user.aspx elapsed milliseconds:0007
2018-08-14 16:40:58 http://localhost:49412/edit_user.aspx sql=

				select pj_id, pj_name,
				isnull(pu_permission_level,2) [pu_permission_level],
				isnull(pu_auto_subscribe,0) [pu_auto_subscribe],
				isnull(pu_admin,0) [pu_admin]
				from projects
				left outer join project_user_xref on pj_id = pu_project
				and pu_user = 0
				order by pj_name;/* populate query dropdown */
		    declare @org int
		    set @org = null
		    select @org = us_org from users where us_id = 0

			select qu_id, qu_desc
			from queries
			where (isnull(qu_user,0) = 0 and isnull(qu_org,0) = 0)
			or isnull(qu_user,0) = 0
			or isnull(qu_org,0) = isnull(@org,-1)
			order by qu_desc;/* populate org dropdown 1 */
				select og_id, og_name
				from orgs
				order by og_name;
2018-08-14 16:40:58 http://localhost:49412/edit_user.aspx elapsed milliseconds:0004
2018-08-14 16:44:40 http://localhost:49412/edit_user.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '817e288c-e334-412d-93fa-9e7eaeb9cbb7';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '817e288c-e334-412d-93fa-9e7eaeb9cbb7'
and us_active = 1
2018-08-14 16:44:40 http://localhost:49412/edit_user.aspx elapsed milliseconds:0010
2018-08-14 16:44:40 http://localhost:49412/edit_user.aspx sql=

				select pj_id, pj_name,
				isnull(pu_permission_level,2) [pu_permission_level],
				isnull(pu_auto_subscribe,0) [pu_auto_subscribe],
				isnull(pu_admin,0) [pu_admin]
				from projects
				left outer join project_user_xref on pj_id = pu_project
				and pu_user = 0
				order by pj_name;/* populate query dropdown */
		    declare @org int
		    set @org = null
		    select @org = us_org from users where us_id = 0

			select qu_id, qu_desc
			from queries
			where (isnull(qu_user,0) = 0 and isnull(qu_org,0) = 0)
			or isnull(qu_user,0) = 0
			or isnull(qu_org,0) = isnull(@org,-1)
			order by qu_desc;/* populate org dropdown 1 */
				select og_id, og_name
				from orgs
				order by og_name;
2018-08-14 16:44:40 http://localhost:49412/edit_user.aspx elapsed milliseconds:0004
2018-08-14 16:51:47 http://localhost:49412/edit_user.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '817e288c-e334-412d-93fa-9e7eaeb9cbb7';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '817e288c-e334-412d-93fa-9e7eaeb9cbb7'
and us_active = 1
2018-08-14 16:51:47 http://localhost:49412/edit_user.aspx elapsed milliseconds:0007
2018-08-14 16:51:47 http://localhost:49412/edit_user.aspx sql=

				select pj_id, pj_name,
				isnull(pu_permission_level,2) [pu_permission_level],
				isnull(pu_auto_subscribe,0) [pu_auto_subscribe],
				isnull(pu_admin,0) [pu_admin]
				from projects
				left outer join project_user_xref on pj_id = pu_project
				and pu_user = 0
				order by pj_name;/* populate query dropdown */
		    declare @org int
		    set @org = null
		    select @org = us_org from users where us_id = 0

			select qu_id, qu_desc
			from queries
			where (isnull(qu_user,0) = 0 and isnull(qu_org,0) = 0)
			or isnull(qu_user,0) = 0
			or isnull(qu_org,0) = isnull(@org,-1)
			order by qu_desc;/* populate org dropdown 1 */
				select og_id, og_name
				from orgs
				order by og_name;
2018-08-14 16:51:47 http://localhost:49412/edit_user.aspx elapsed milliseconds:0004
2018-08-14 16:53:56 http://localhost:49412/edit_user.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '817e288c-e334-412d-93fa-9e7eaeb9cbb7';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '817e288c-e334-412d-93fa-9e7eaeb9cbb7'
and us_active = 1
2018-08-14 16:53:56 http://localhost:49412/edit_user.aspx elapsed milliseconds:0008
2018-08-14 16:53:56 http://localhost:49412/edit_user.aspx sql=

				select pj_id, pj_name,
				isnull(pu_permission_level,2) [pu_permission_level],
				isnull(pu_auto_subscribe,0) [pu_auto_subscribe],
				isnull(pu_admin,0) [pu_admin]
				from projects
				left outer join project_user_xref on pj_id = pu_project
				and pu_user = 0
				order by pj_name;/* populate query dropdown */
		    declare @org int
		    set @org = null
		    select @org = us_org from users where us_id = 0

			select qu_id, qu_desc
			from queries
			where (isnull(qu_user,0) = 0 and isnull(qu_org,0) = 0)
			or isnull(qu_user,0) = 0
			or isnull(qu_org,0) = isnull(@org,-1)
			order by qu_desc;/* populate org dropdown 1 */
				select og_id, og_name
				from orgs
				order by og_name;
2018-08-14 16:53:56 http://localhost:49412/edit_user.aspx elapsed milliseconds:0004
2018-08-14 16:54:24 http://localhost:49412/edit_user.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '817e288c-e334-412d-93fa-9e7eaeb9cbb7';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '817e288c-e334-412d-93fa-9e7eaeb9cbb7'
and us_active = 1
2018-08-14 16:54:24 http://localhost:49412/edit_user.aspx elapsed milliseconds:0000
2018-08-14 16:54:39 http://localhost:49412/users.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '817e288c-e334-412d-93fa-9e7eaeb9cbb7';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '817e288c-e334-412d-93fa-9e7eaeb9cbb7'
and us_active = 1
2018-08-14 16:54:39 http://localhost:49412/users.aspx elapsed milliseconds:0015
2018-08-14 16:54:39 http://localhost:49412/users.aspx sql=

			select distinct pu_user
			into #t
			from
			project_user_xref
			where pu_admin = 1;

			select u.us_id [id],
			'<a href=edit_user.aspx?id=' + convert(varchar,u.us_id) + '>edit</a>' [$no_sort_edit],
			'<a href=edit_user.aspx?copy=y&id=' + convert(varchar,u.us_id) + '>copy</a>' [$no_sort_add<br>like<br>this],
			'<a href=delete_user.aspx?id=' + convert(varchar,u.us_id) + '>delete</a>' [$no_sort_delete],

			u.us_username [username],
			isnull(u.us_firstname,'') + ' ' + isnull(u.us_lastname,'') [name],
			'<a sort=''' + og_name + ''' href=edit_org.aspx?id=' + convert(varchar,og_id) + '>' + og_name + '</a>' [org],
            isnull(u.us_email,'') [email],
			case when u.us_admin = 1 then 'Y' else 'N' end [admin],
			case when pu_user is null then 'N' else 'Y' end [project<br>admin],
			case when u.us_active = 1 then 'Y' else 'N' end [active],
			case when og_external_user = 1 then 'Y' else 'N' end [external],
			isnull(pj_name,'') [forced<br>project],
			isnull(qu_desc,'') [default query],
			case when u.us_enable_notifications = 1 then 'Y' else 'N' end [notif-<br>ications],
			u.us_most_recent_login_datetime [most recent login],
			u2.us_username [created<br>by]

			from users u
			inner join orgs on u.us_org = og_id
			left outer join queries on u.us_default_query = qu_id
			left outer join projects on u.us_forced_project = pj_id
			left outer join users u2 on u.us_created_user = u2.us_id
			left outer join #t on u.us_id = pu_user
			where u.us_active in (1 ,0)
			
			order by u.us_username;

			drop table #t
2018-08-14 16:54:39 http://localhost:49412/users.aspx elapsed milliseconds:0013
2018-08-14 16:54:42 http://localhost:49412/admin.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '817e288c-e334-412d-93fa-9e7eaeb9cbb7';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '817e288c-e334-412d-93fa-9e7eaeb9cbb7'
and us_active = 1
2018-08-14 16:54:42 http://localhost:49412/admin.aspx elapsed milliseconds:0000
2018-08-14 16:54:45 http://localhost:49412/orgs.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '817e288c-e334-412d-93fa-9e7eaeb9cbb7';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '817e288c-e334-412d-93fa-9e7eaeb9cbb7'
and us_active = 1
2018-08-14 16:54:45 http://localhost:49412/orgs.aspx elapsed milliseconds:0000
2018-08-14 16:54:45 http://localhost:49412/orgs.aspx sql=
select og_id [id],
		'<a href=edit_org.aspx?id=' + convert(varchar,og_id) + '>edit</a>' [$no_sort_edit],
		'<a href=delete_org.aspx?id=' + convert(varchar,og_id) + '>delete</a>' [$no_sort_delete],
		og_name[desc],
		case when og_active = 1 then 'Y' else 'N' end [active],
		case when og_can_search = 1 then 'Y' else 'N' end [can<br>search],
		case when og_non_admins_can_use = 1 then 'Y' else 'N' end [non-admin<br>can use],
		case when og_can_only_see_own_reported = 1 then 'Y' else 'N' end [can see<br>only own bugs],
		case
			when og_other_orgs_permission_level = 0 then 'None'
			when og_other_orgs_permission_level = 1 then 'Read Only'
			else 'Add/Edit' end [other orgs<br>permission<br>level],
		case when og_external_user = 1 then 'Y' else 'N' end [external],
		case when og_can_be_assigned_to = 1 then 'Y' else 'N' end [can<br>be assigned to],
		case
			when og_status_field_permission_level = 0 then 'None'
			when og_status_field_permission_level = 1 then 'Read Only'
			else 'Add/Edit' end [status<br>permission<br>level],
		case
			when og_assigned_to_field_permission_level = 0 then 'None'
			when og_assigned_to_field_permission_level = 1 then 'Read Only'
			else 'Add/Edit' end [assigned to<br>permission<br>level],
		case
			when og_priority_field_permission_level = 0 then 'None'
			when og_priority_field_permission_level = 1 then 'Read Only'
			else 'Add/Edit' end [priority<br>permission<br>level],
		isnull(og_domain,'')[domain]
		from orgs order by og_name
2018-08-14 16:54:45 http://localhost:49412/orgs.aspx elapsed milliseconds:0004
2018-08-14 16:54:54 http://localhost:49412/edit_org.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '817e288c-e334-412d-93fa-9e7eaeb9cbb7';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '817e288c-e334-412d-93fa-9e7eaeb9cbb7'
and us_active = 1
2018-08-14 16:54:54 http://localhost:49412/edit_org.aspx elapsed milliseconds:0000
2018-08-14 16:59:35 http://localhost:49412/edit_org.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '817e288c-e334-412d-93fa-9e7eaeb9cbb7';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '817e288c-e334-412d-93fa-9e7eaeb9cbb7'
and us_active = 1
2018-08-14 16:59:35 http://localhost:49412/edit_org.aspx elapsed milliseconds:0007
2018-08-14 17:05:28 http://localhost:49412/orgs.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '817e288c-e334-412d-93fa-9e7eaeb9cbb7';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '817e288c-e334-412d-93fa-9e7eaeb9cbb7'
and us_active = 1
2018-08-14 17:05:29 http://localhost:49412/orgs.aspx elapsed milliseconds:0016
2018-08-14 17:05:29 http://localhost:49412/orgs.aspx sql=
select og_id [id],
		'<a href=edit_org.aspx?id=' + convert(varchar,og_id) + '>edit</a>' [$no_sort_edit],
		'<a href=delete_org.aspx?id=' + convert(varchar,og_id) + '>delete</a>' [$no_sort_delete],
		og_name[desc],
		case when og_active = 1 then 'Y' else 'N' end [active],
		case when og_can_search = 1 then 'Y' else 'N' end [can<br>search],
		case when og_non_admins_can_use = 1 then 'Y' else 'N' end [non-admin<br>can use],
		case when og_can_only_see_own_reported = 1 then 'Y' else 'N' end [can see<br>only own bugs],
		case
			when og_other_orgs_permission_level = 0 then 'None'
			when og_other_orgs_permission_level = 1 then 'Read Only'
			else 'Add/Edit' end [other orgs<br>permission<br>level],
		case when og_external_user = 1 then 'Y' else 'N' end [external],
		case when og_can_be_assigned_to = 1 then 'Y' else 'N' end [can<br>be assigned to],
		case
			when og_status_field_permission_level = 0 then 'None'
			when og_status_field_permission_level = 1 then 'Read Only'
			else 'Add/Edit' end [status<br>permission<br>level],
		case
			when og_assigned_to_field_permission_level = 0 then 'None'
			when og_assigned_to_field_permission_level = 1 then 'Read Only'
			else 'Add/Edit' end [assigned to<br>permission<br>level],
		case
			when og_priority_field_permission_level = 0 then 'None'
			when og_priority_field_permission_level = 1 then 'Read Only'
			else 'Add/Edit' end [priority<br>permission<br>level],
		isnull(og_domain,'')[domain]
		from orgs order by og_name
2018-08-14 17:05:29 http://localhost:49412/orgs.aspx elapsed milliseconds:0003
2018-08-14 17:05:47 http://localhost:49412/admin.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '817e288c-e334-412d-93fa-9e7eaeb9cbb7';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '817e288c-e334-412d-93fa-9e7eaeb9cbb7'
and us_active = 1
2018-08-14 17:05:47 http://localhost:49412/admin.aspx elapsed milliseconds:0009
2018-08-14 17:05:50 http://localhost:49412/projects.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '817e288c-e334-412d-93fa-9e7eaeb9cbb7';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '817e288c-e334-412d-93fa-9e7eaeb9cbb7'
and us_active = 1
2018-08-14 17:05:50 http://localhost:49412/projects.aspx elapsed milliseconds:0000
2018-08-14 17:05:50 http://localhost:49412/projects.aspx sql=
select
		pj_id [id],
		'<a href=edit_project.aspx?&id=' + convert(varchar,pj_id) + '>edit</a>' [$no_sort_edit],
		'<a href=edit_user_permissions2.aspx?projects=y&id=' + convert(varchar,pj_id) + '>permissions</a>' [$no_sort_per user<br>permissions],
		'<a href=delete_project.aspx?id=' + convert(varchar,pj_id) + '>delete</a>' [$no_sort_delete],
		pj_name [project],
		case when pj_active = 1 then 'Y' else 'N' end [active],
		us_username [default user],
		case when isnull(pj_auto_assign_default_user,0) = 1 then 'Y' else 'N' end [auto assign<br>default user],
		case when isnull(pj_auto_subscribe_default_user,0) = 1 then 'Y' else 'N' end [auto subscribe<br>default user],
		case when isnull(pj_enable_pop3,0) = 1 then 'Y' else 'N' end [receive items<br>via pop3],
		pj_pop3_username [pop3 username],
		pj_pop3_email_from [from email addressl],
		case when pj_default = 1 then 'Y' else 'N' end [default]
		from projects
		left outer join users on us_id = pj_default_user
		order by pj_name
2018-08-14 17:05:50 http://localhost:49412/projects.aspx elapsed milliseconds:0006
2018-08-14 17:05:53 http://localhost:49412/edit_project.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '817e288c-e334-412d-93fa-9e7eaeb9cbb7';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '817e288c-e334-412d-93fa-9e7eaeb9cbb7'
and us_active = 1
2018-08-14 17:05:53 http://localhost:49412/edit_project.aspx elapsed milliseconds:0000
2018-08-14 17:05:53 http://localhost:49412/edit_project.aspx sql=
select us_id, us_username from users order by us_username
2018-08-14 17:05:53 http://localhost:49412/edit_project.aspx elapsed milliseconds:0000
2018-08-14 17:10:35 http://localhost:49412/edit_project.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '817e288c-e334-412d-93fa-9e7eaeb9cbb7';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '817e288c-e334-412d-93fa-9e7eaeb9cbb7'
and us_active = 1
2018-08-14 17:10:35 http://localhost:49412/edit_project.aspx elapsed milliseconds:0008
2018-08-14 17:10:35 http://localhost:49412/edit_project.aspx sql=
select us_id, us_username from users order by us_username
2018-08-14 17:10:35 http://localhost:49412/edit_project.aspx elapsed milliseconds:0000
2018-08-14 17:12:17 http://localhost:49412/edit_project.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '817e288c-e334-412d-93fa-9e7eaeb9cbb7';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '817e288c-e334-412d-93fa-9e7eaeb9cbb7'
and us_active = 1
2018-08-14 17:12:17 http://localhost:49412/edit_project.aspx elapsed milliseconds:0008
2018-08-14 17:12:17 http://localhost:49412/edit_project.aspx sql=
select us_id, us_username from users order by us_username
2018-08-14 17:12:17 http://localhost:49412/edit_project.aspx elapsed milliseconds:0000
2018-08-14 17:12:56 http://localhost:49412/edit_project.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '817e288c-e334-412d-93fa-9e7eaeb9cbb7';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '817e288c-e334-412d-93fa-9e7eaeb9cbb7'
and us_active = 1
2018-08-14 17:12:56 http://localhost:49412/edit_project.aspx elapsed milliseconds:0000
2018-08-14 17:12:56 http://localhost:49412/edit_project.aspx sql=
select us_id, us_username from users order by us_username
2018-08-14 17:12:56 http://localhost:49412/edit_project.aspx elapsed milliseconds:0000
2018-08-14 17:13:17 http://localhost:49412/edit_project.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '817e288c-e334-412d-93fa-9e7eaeb9cbb7';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '817e288c-e334-412d-93fa-9e7eaeb9cbb7'
and us_active = 1
2018-08-14 17:13:17 http://localhost:49412/edit_project.aspx elapsed milliseconds:0000
2018-08-14 17:13:17 http://localhost:49412/edit_project.aspx sql=
select us_id, us_username from users order by us_username
2018-08-14 17:13:17 http://localhost:49412/edit_project.aspx elapsed milliseconds:0000
2018-08-14 17:13:52 http://localhost:49412/edit_project.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '817e288c-e334-412d-93fa-9e7eaeb9cbb7';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '817e288c-e334-412d-93fa-9e7eaeb9cbb7'
and us_active = 1
2018-08-14 17:13:52 http://localhost:49412/edit_project.aspx elapsed milliseconds:0007
2018-08-14 17:13:52 http://localhost:49412/edit_project.aspx sql=
select us_id, us_username from users order by us_username
2018-08-14 17:13:52 http://localhost:49412/edit_project.aspx elapsed milliseconds:0001
2018-08-14 17:17:18 http://localhost:49412/edit_project.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '817e288c-e334-412d-93fa-9e7eaeb9cbb7';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '817e288c-e334-412d-93fa-9e7eaeb9cbb7'
and us_active = 1
2018-08-14 17:17:18 http://localhost:49412/edit_project.aspx elapsed milliseconds:0008
2018-08-14 17:17:18 http://localhost:49412/edit_project.aspx sql=
select us_id, us_username from users order by us_username
2018-08-14 17:17:18 http://localhost:49412/edit_project.aspx elapsed milliseconds:0000
2018-08-14 17:21:27  caught exception in util.set_context:Request is not available in this context
2018-08-14 17:21:27  threadproc_votes
2018-08-14 17:21:27  started creating Lucene index using folder F:\Synced\Visual Studio 2017\Projects\temp\btnetnew\btnetnew\App_Data\lucene_index
2018-08-14 17:21:27  sql=

if exists (select * from dbo.sysobjects where id = object_id(N'[votes_view]'))
drop view [votes_view]
2018-08-14 17:21:27  sql=

create view votes_view as
select bu_bug as vote_bug, sum(bu_vote) as vote_total
from bug_user
group by bu_bug
having sum(bu_vote) > 0
2018-08-14 17:21:27  sql=

select bu_bug, count(1)
from bug_user 
where bu_vote = 1
group by bu_bug
2018-08-14 17:21:27  elapsed milliseconds:0001
2018-08-14 17:21:27  sql=

/* get searchable cols */					
select sc.name
from syscolumns sc
inner join systypes st on st.xusertype = sc.xusertype
inner join sysobjects so on sc.id = so.id
where so.name = 'bugs'
and st.[name] <> 'sysname'
and sc.name not in ('rowguid',
'bg_id',
'bg_short_desc',
'bg_reported_user',
'bg_reported_date',
'bg_project',
'bg_org',
'bg_category',
'bg_priority',
'bg_status',
'bg_assigned_to_user',
'bg_last_updated_user',
'bg_last_updated_date',
'bg_user_defined_attribute',
'bg_project_custom_dropdown_value1',
'bg_project_custom_dropdown_value2',
'bg_project_custom_dropdown_value3',
'bg_tags')
and st.[name] in ('nvarchar','varchar')
and sc.length > 30
2018-08-14 17:21:27  elapsed milliseconds:0078
2018-08-14 17:21:27  sql=

select bg_id, 	

isnull(bg_tags,'') bg_tags,
bg_short_desc
from bugs
2018-08-14 17:21:27  elapsed milliseconds:0001
2018-08-14 17:21:27  sql=

select bp_bug, bp_id, 
isnull(bp_comment_search,bp_comment) [text] 
from bug_posts 
where bp_type <> 'update'
and bp_hidden_from_external_users = 0
2018-08-14 17:21:27  elapsed milliseconds:0001
2018-08-14 17:21:28  done creating Lucene index
2018-08-14 17:21:29 http://localhost:49412/edit_project.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '817e288c-e334-412d-93fa-9e7eaeb9cbb7';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '817e288c-e334-412d-93fa-9e7eaeb9cbb7'
and us_active = 1
2018-08-14 17:21:29 http://localhost:49412/edit_project.aspx elapsed milliseconds:0007
2018-08-14 17:21:29 http://localhost:49412/edit_project.aspx sql=

/* custom columns */ select sc.name, st.[name] [datatype], 
case when st.[name] = 'nvarchar' or st.[name] = 'nchar' then sc.length/2 else sc.length end as [length], 
sc.xprec, sc.xscale, sc.isnullable,
mm.text [default value], 
dflts.name [default name], 
isnull(ccm_dropdown_type,'') [dropdown type],
isnull(ccm_dropdown_vals,'') [vals],
isnull(ccm_sort_seq, sc.colorder) [column order],
sc.colorder
from syscolumns sc
inner join systypes st on st.xusertype = sc.xusertype
inner join sysobjects so on sc.id = so.id
left outer join syscomments mm on sc.cdefault = mm.id
left outer join custom_col_metadata on ccm_colorder = sc.colorder
left outer join sysobjects dflts on dflts.id = mm.id
where so.name = 'bugs'
and st.[name] <> 'sysname'
and sc.name not in ('rowguid',
'bg_id',
'bg_short_desc',
'bg_reported_user',
'bg_reported_date',
'bg_project',
'bg_org',
'bg_category',
'bg_priority',
'bg_status',
'bg_assigned_to_user',
'bg_last_updated_user',
'bg_last_updated_date',
'bg_user_defined_attribute',
'bg_project_custom_dropdown_value1',
'bg_project_custom_dropdown_value2',
'bg_project_custom_dropdown_value3',
'bg_tags')
order by sc.id, isnull(ccm_sort_seq,sc.colorder)
2018-08-14 17:21:29 http://localhost:49412/edit_project.aspx elapsed milliseconds:0086
2018-08-14 17:21:29 http://localhost:49412/edit_project.aspx sql=
select us_id, us_username from users order by us_username
2018-08-14 17:21:29 http://localhost:49412/edit_project.aspx elapsed milliseconds:0000
2018-08-14 17:23:23 http://localhost:49412/edit_project.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '817e288c-e334-412d-93fa-9e7eaeb9cbb7';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '817e288c-e334-412d-93fa-9e7eaeb9cbb7'
and us_active = 1
2018-08-14 17:23:23 http://localhost:49412/edit_project.aspx elapsed milliseconds:0007
2018-08-14 17:23:23 http://localhost:49412/edit_project.aspx sql=
select us_id, us_username from users order by us_username
2018-08-14 17:23:23 http://localhost:49412/edit_project.aspx elapsed milliseconds:0001
2018-08-14 17:24:29 http://localhost:49412/edit_project.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '817e288c-e334-412d-93fa-9e7eaeb9cbb7';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '817e288c-e334-412d-93fa-9e7eaeb9cbb7'
and us_active = 1
2018-08-14 17:24:29 http://localhost:49412/edit_project.aspx elapsed milliseconds:0007
2018-08-14 17:24:29 http://localhost:49412/edit_project.aspx sql=
select us_id, us_username from users order by us_username
2018-08-14 17:24:29 http://localhost:49412/edit_project.aspx elapsed milliseconds:0000
2018-08-14 17:24:38 http://localhost:49412/projects.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '817e288c-e334-412d-93fa-9e7eaeb9cbb7';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '817e288c-e334-412d-93fa-9e7eaeb9cbb7'
and us_active = 1
2018-08-14 17:24:38 http://localhost:49412/projects.aspx elapsed milliseconds:0000
2018-08-14 17:24:38 http://localhost:49412/projects.aspx sql=
select
		pj_id [id],
		'<a href=edit_project.aspx?&id=' + convert(varchar,pj_id) + '>edit</a>' [$no_sort_edit],
		'<a href=edit_user_permissions2.aspx?projects=y&id=' + convert(varchar,pj_id) + '>permissions</a>' [$no_sort_per user<br>permissions],
		'<a href=delete_project.aspx?id=' + convert(varchar,pj_id) + '>delete</a>' [$no_sort_delete],
		pj_name [project],
		case when pj_active = 1 then 'Y' else 'N' end [active],
		us_username [default user],
		case when isnull(pj_auto_assign_default_user,0) = 1 then 'Y' else 'N' end [auto assign<br>default user],
		case when isnull(pj_auto_subscribe_default_user,0) = 1 then 'Y' else 'N' end [auto subscribe<br>default user],
		case when isnull(pj_enable_pop3,0) = 1 then 'Y' else 'N' end [receive items<br>via pop3],
		pj_pop3_username [pop3 username],
		pj_pop3_email_from [from email addressl],
		case when pj_default = 1 then 'Y' else 'N' end [default]
		from projects
		left outer join users on us_id = pj_default_user
		order by pj_name
2018-08-14 17:24:38 http://localhost:49412/projects.aspx elapsed milliseconds:0003
2018-08-14 17:24:40 http://localhost:49412/edit_project.aspx?&id=1 sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '817e288c-e334-412d-93fa-9e7eaeb9cbb7';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '817e288c-e334-412d-93fa-9e7eaeb9cbb7'
and us_active = 1
2018-08-14 17:24:41 http://localhost:49412/edit_project.aspx?&id=1 elapsed milliseconds:0000
2018-08-14 17:24:41 http://localhost:49412/edit_project.aspx?&id=1 sql=
select us_id, us_username from users order by us_username
2018-08-14 17:24:41 http://localhost:49412/edit_project.aspx?&id=1 elapsed milliseconds:0000
2018-08-14 17:24:41 http://localhost:49412/edit_project.aspx?&id=1 sql=
select
			pj_name,
			pj_active,
			isnull(pj_default_user,0) [pj_default_user],
			pj_default,
			isnull(pj_auto_assign_default_user,0) [pj_auto_assign_default_user],
			isnull(pj_auto_subscribe_default_user,0) [pj_auto_subscribe_default_user],
			isnull(pj_enable_pop3,0) [pj_enable_pop3],
			isnull(pj_pop3_username,'') [pj_pop3_username],
			isnull(pj_pop3_email_from,'') [pj_pop3_email_from],
			isnull(pj_description,'') [pj_description],
			isnull(pj_enable_custom_dropdown1,0) [pj_enable_custom_dropdown1],
			isnull(pj_enable_custom_dropdown2,0) [pj_enable_custom_dropdown2],
			isnull(pj_enable_custom_dropdown3,0) [pj_enable_custom_dropdown3],
			isnull(pj_custom_dropdown_label1,'') [pj_custom_dropdown_label1],
			isnull(pj_custom_dropdown_label2,'') [pj_custom_dropdown_label2],
			isnull(pj_custom_dropdown_label3,'') [pj_custom_dropdown_label3],
			isnull(pj_custom_dropdown_values1,'') [pj_custom_dropdown_values1],
			isnull(pj_custom_dropdown_values2,'') [pj_custom_dropdown_values2],
			isnull(pj_custom_dropdown_values3,'') [pj_custom_dropdown_values3]
			from projects
			where pj_id = 1
2018-08-14 17:24:41 http://localhost:49412/edit_project.aspx?&id=1 elapsed milliseconds:0001
2018-08-14 17:24:46 http://localhost:49412/edit_user_permissions2.aspx?id=1&label=project+1 sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '817e288c-e334-412d-93fa-9e7eaeb9cbb7';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '817e288c-e334-412d-93fa-9e7eaeb9cbb7'
and us_active = 1
2018-08-14 17:24:46 http://localhost:49412/edit_user_permissions2.aspx?id=1&label=project+1 elapsed milliseconds:0000
2018-08-14 17:24:46 http://localhost:49412/edit_user_permissions2.aspx?id=1&label=project+1 sql=
Select us_username, us_id, isnull(pu_permission_level,2) [pu_permission_level]
			from users
			left outer join project_user_xref on pu_user = us_id
			and pu_project = 1
			order by us_username;
			select pj_name from projects where pj_id = 1;
2018-08-14 17:24:46 http://localhost:49412/edit_user_permissions2.aspx?id=1&label=project+1 elapsed milliseconds:0003
2018-08-14 17:24:49 http://localhost:49412/edit_project.aspx?id=1 sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '817e288c-e334-412d-93fa-9e7eaeb9cbb7';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '817e288c-e334-412d-93fa-9e7eaeb9cbb7'
and us_active = 1
2018-08-14 17:24:49 http://localhost:49412/edit_project.aspx?id=1 elapsed milliseconds:0000
2018-08-14 17:24:49 http://localhost:49412/edit_project.aspx?id=1 sql=
select us_id, us_username from users order by us_username
2018-08-14 17:24:49 http://localhost:49412/edit_project.aspx?id=1 elapsed milliseconds:0000
2018-08-14 17:24:49 http://localhost:49412/edit_project.aspx?id=1 sql=
select
			pj_name,
			pj_active,
			isnull(pj_default_user,0) [pj_default_user],
			pj_default,
			isnull(pj_auto_assign_default_user,0) [pj_auto_assign_default_user],
			isnull(pj_auto_subscribe_default_user,0) [pj_auto_subscribe_default_user],
			isnull(pj_enable_pop3,0) [pj_enable_pop3],
			isnull(pj_pop3_username,'') [pj_pop3_username],
			isnull(pj_pop3_email_from,'') [pj_pop3_email_from],
			isnull(pj_description,'') [pj_description],
			isnull(pj_enable_custom_dropdown1,0) [pj_enable_custom_dropdown1],
			isnull(pj_enable_custom_dropdown2,0) [pj_enable_custom_dropdown2],
			isnull(pj_enable_custom_dropdown3,0) [pj_enable_custom_dropdown3],
			isnull(pj_custom_dropdown_label1,'') [pj_custom_dropdown_label1],
			isnull(pj_custom_dropdown_label2,'') [pj_custom_dropdown_label2],
			isnull(pj_custom_dropdown_label3,'') [pj_custom_dropdown_label3],
			isnull(pj_custom_dropdown_values1,'') [pj_custom_dropdown_values1],
			isnull(pj_custom_dropdown_values2,'') [pj_custom_dropdown_values2],
			isnull(pj_custom_dropdown_values3,'') [pj_custom_dropdown_values3]
			from projects
			where pj_id = 1
2018-08-14 17:24:49 http://localhost:49412/edit_project.aspx?id=1 elapsed milliseconds:0000
2018-08-14 17:24:53 http://localhost:49412/projects.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '817e288c-e334-412d-93fa-9e7eaeb9cbb7';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '817e288c-e334-412d-93fa-9e7eaeb9cbb7'
and us_active = 1
2018-08-14 17:24:53 http://localhost:49412/projects.aspx elapsed milliseconds:0000
2018-08-14 17:24:53 http://localhost:49412/projects.aspx sql=
select
		pj_id [id],
		'<a href=edit_project.aspx?&id=' + convert(varchar,pj_id) + '>edit</a>' [$no_sort_edit],
		'<a href=edit_user_permissions2.aspx?projects=y&id=' + convert(varchar,pj_id) + '>permissions</a>' [$no_sort_per user<br>permissions],
		'<a href=delete_project.aspx?id=' + convert(varchar,pj_id) + '>delete</a>' [$no_sort_delete],
		pj_name [project],
		case when pj_active = 1 then 'Y' else 'N' end [active],
		us_username [default user],
		case when isnull(pj_auto_assign_default_user,0) = 1 then 'Y' else 'N' end [auto assign<br>default user],
		case when isnull(pj_auto_subscribe_default_user,0) = 1 then 'Y' else 'N' end [auto subscribe<br>default user],
		case when isnull(pj_enable_pop3,0) = 1 then 'Y' else 'N' end [receive items<br>via pop3],
		pj_pop3_username [pop3 username],
		pj_pop3_email_from [from email addressl],
		case when pj_default = 1 then 'Y' else 'N' end [default]
		from projects
		left outer join users on us_id = pj_default_user
		order by pj_name
2018-08-14 17:24:53 http://localhost:49412/projects.aspx elapsed milliseconds:0000
2018-08-14 17:24:55 http://localhost:49412/edit_user_permissions2.aspx?projects=y&id=1 sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '817e288c-e334-412d-93fa-9e7eaeb9cbb7';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '817e288c-e334-412d-93fa-9e7eaeb9cbb7'
and us_active = 1
2018-08-14 17:24:55 http://localhost:49412/edit_user_permissions2.aspx?projects=y&id=1 elapsed milliseconds:0000
2018-08-14 17:24:55 http://localhost:49412/edit_user_permissions2.aspx?projects=y&id=1 sql=
Select us_username, us_id, isnull(pu_permission_level,2) [pu_permission_level]
			from users
			left outer join project_user_xref on pu_user = us_id
			and pu_project = 1
			order by us_username;
			select pj_name from projects where pj_id = 1;
2018-08-14 17:24:55 http://localhost:49412/edit_user_permissions2.aspx?projects=y&id=1 elapsed milliseconds:0000
2018-08-14 17:24:58 http://localhost:49412/admin.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '817e288c-e334-412d-93fa-9e7eaeb9cbb7';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '817e288c-e334-412d-93fa-9e7eaeb9cbb7'
and us_active = 1
2018-08-14 17:24:58 http://localhost:49412/admin.aspx elapsed milliseconds:0000
2018-08-14 17:25:01 http://localhost:49412/categories.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '817e288c-e334-412d-93fa-9e7eaeb9cbb7';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '817e288c-e334-412d-93fa-9e7eaeb9cbb7'
and us_active = 1
2018-08-14 17:25:01 http://localhost:49412/categories.aspx elapsed milliseconds:0000
2018-08-14 17:25:01 http://localhost:49412/categories.aspx sql=
select
		ct_id [id],
		ct_name [category],
		ct_sort_seq [sort seq],
		case when ct_default = 1 then 'Y' else 'N' end [default],
		ct_id [hidden]
		from categories order by ct_name
2018-08-14 17:25:01 http://localhost:49412/categories.aspx elapsed milliseconds:0001
2018-08-14 17:25:09 http://localhost:49412/edit_category.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '817e288c-e334-412d-93fa-9e7eaeb9cbb7';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '817e288c-e334-412d-93fa-9e7eaeb9cbb7'
and us_active = 1
2018-08-14 17:25:09 http://localhost:49412/edit_category.aspx elapsed milliseconds:0000
2018-08-14 17:25:17 http://localhost:49412/categories.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '817e288c-e334-412d-93fa-9e7eaeb9cbb7';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '817e288c-e334-412d-93fa-9e7eaeb9cbb7'
and us_active = 1
2018-08-14 17:25:17 http://localhost:49412/categories.aspx elapsed milliseconds:0000
2018-08-14 17:25:17 http://localhost:49412/categories.aspx sql=
select
		ct_id [id],
		ct_name [category],
		ct_sort_seq [sort seq],
		case when ct_default = 1 then 'Y' else 'N' end [default],
		ct_id [hidden]
		from categories order by ct_name
2018-08-14 17:25:17 http://localhost:49412/categories.aspx elapsed milliseconds:0000
2018-08-14 17:25:19 http://localhost:49412/edit_category.aspx?id=1 sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '817e288c-e334-412d-93fa-9e7eaeb9cbb7';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '817e288c-e334-412d-93fa-9e7eaeb9cbb7'
and us_active = 1
2018-08-14 17:25:19 http://localhost:49412/edit_category.aspx?id=1 elapsed milliseconds:0000
2018-08-14 17:25:19 http://localhost:49412/edit_category.aspx?id=1 sql=
select ct_name, ct_sort_seq, ct_default from categories where ct_id = 1
2018-08-14 17:25:19 http://localhost:49412/edit_category.aspx?id=1 elapsed milliseconds:0001
2018-08-14 17:25:21 http://localhost:49412/categories.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '817e288c-e334-412d-93fa-9e7eaeb9cbb7';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '817e288c-e334-412d-93fa-9e7eaeb9cbb7'
and us_active = 1
2018-08-14 17:25:21 http://localhost:49412/categories.aspx elapsed milliseconds:0000
2018-08-14 17:25:21 http://localhost:49412/categories.aspx sql=
select
		ct_id [id],
		ct_name [category],
		ct_sort_seq [sort seq],
		case when ct_default = 1 then 'Y' else 'N' end [default],
		ct_id [hidden]
		from categories order by ct_name
2018-08-14 17:25:21 http://localhost:49412/categories.aspx elapsed milliseconds:0000
2018-08-14 17:25:25 http://localhost:49412/admin.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '817e288c-e334-412d-93fa-9e7eaeb9cbb7';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '817e288c-e334-412d-93fa-9e7eaeb9cbb7'
and us_active = 1
2018-08-14 17:25:25 http://localhost:49412/admin.aspx elapsed milliseconds:0008
2018-08-14 17:25:28 http://localhost:49412/priorities.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '817e288c-e334-412d-93fa-9e7eaeb9cbb7';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '817e288c-e334-412d-93fa-9e7eaeb9cbb7'
and us_active = 1
2018-08-14 17:25:28 http://localhost:49412/priorities.aspx elapsed milliseconds:0007
2018-08-14 17:25:28 http://localhost:49412/priorities.aspx sql=
select pr_id [id],
		pr_name [description],
		pr_sort_seq [sort seq],
		'<div style=''background:' + pr_background_color + ';''>' + pr_background_color + '</div>' [background<br>color],
		pr_style [css<br>class],
		case when pr_default = 1 then 'Y' else 'N' end [default],
		pr_id [hidden] from priorities
2018-08-14 17:25:28 http://localhost:49412/priorities.aspx elapsed milliseconds:0001
2018-08-14 17:25:32 http://localhost:49412/edit_priority.aspx?id=1 sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '817e288c-e334-412d-93fa-9e7eaeb9cbb7';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '817e288c-e334-412d-93fa-9e7eaeb9cbb7'
and us_active = 1
2018-08-14 17:25:32 http://localhost:49412/edit_priority.aspx?id=1 elapsed milliseconds:0007
2018-08-14 17:25:32 http://localhost:49412/edit_priority.aspx?id=1 sql=
select
				pr_name, pr_sort_seq, pr_background_color, isnull(pr_style,'') [pr_style], pr_default
				from priorities where pr_id = 1
2018-08-14 17:25:32 http://localhost:49412/edit_priority.aspx?id=1 elapsed milliseconds:0001

TIME: 5:31:12 PM
MSG: Only Content controls are allowed directly in a content page that contains Content controls.
URL: http://localhost:49412/edit_priority.aspx?id=1
EXCEPTION: System.Web.HttpParseException (0x80004005): Only Content controls are allowed directly in a content page that contains Content controls.
   at System.Web.UI.FileLevelPageControlBuilder.AppendSubBuilder(ControlBuilder subBuilder)
   at System.Web.UI.TemplateParser.AppendSubBuilder(ControlBuilder builder, ControlBuilder subBuilder)
   at System.Web.UI.TemplateParser.MaybeTerminateControl(String tagName, Match match)
   at System.Web.UI.TemplateParser.ProcessEndTag(Match match)
   at System.Web.UI.TemplateParser.ParseStringInternal(String text, Encoding fileEncoding)
   at System.Web.UI.TemplateParser.ParseString(String text, VirtualPath virtualPath, Encoding fileEncoding)
   at System.Web.UI.TemplateParser.ParseFile(String physicalPath, VirtualPath virtualPath)
   at System.Web.UI.TemplateParser.ParseInternal()
   at System.Web.UI.TemplateParser.Parse()
   at System.Web.Compilation.BaseTemplateBuildProvider.get_CodeCompilerType()
   at System.Web.Compilation.BuildProvider.GetCompilerTypeFromBuildProvider(BuildProvider buildProvider)
   at System.Web.Compilation.BuildProvidersCompiler.ProcessBuildProviders()
   at System.Web.Compilation.BuildProvidersCompiler.PerformBuild()
   at System.Web.Compilation.BuildManager.CompileWebFile(VirtualPath virtualPath)
   at System.Web.Compilation.BuildManager.GetVPathBuildResultInternal(VirtualPath virtualPath, Boolean noBuild, Boolean allowCrossApp, Boolean allowBuildInPrecompile, Boolean throwIfNotFound, Boolean ensureIsUpToDate)
   at System.Web.Compilation.BuildManager.GetVPathBuildResultWithNoAssert(HttpContext context, VirtualPath virtualPath, Boolean noBuild, Boolean allowCrossApp, Boolean allowBuildInPrecompile, Boolean throwIfNotFound, Boolean ensureIsUpToDate)
   at System.Web.Compilation.BuildManager.GetVirtualPathObjectFactory(VirtualPath virtualPath, HttpContext context, Boolean allowCrossApp, Boolean throwIfNotFound)
   at System.Web.Compilation.BuildManager.CreateInstanceFromVirtualPath(VirtualPath virtualPath, Type requiredBaseType, HttpContext context, Boolean allowCrossApp)
   at System.Web.UI.PageHandlerFactory.GetHandlerHelper(HttpContext context, String requestType, VirtualPath virtualPath, String physicalPath)
   at System.Web.UI.PageHandlerFactory.GetHandler(HttpContext context, String requestType, String virtualPath, String path)
   at System.Web.HttpApplication.MaterializeHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute()
   at System.Web.HttpApplication.ExecuteStepImpl(IExecutionStep step)
   at System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously)

ALL_HTTP=HTTP_CACHE_CONTROL:max-age=0
HTTP_CONNECTION:keep-alive
HTTP_ACCEPT:text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8
HTTP_ACCEPT_ENCODING:gzip, deflate, br
HTTP_ACCEPT_LANGUAGE:en-US,en;q=0.9,tr;q=0.8
HTTP_COOKIE:user=name=admin&NTLM=0; ASP.NET_SessionId=vrjce1domi1jxhuslyp3ip4b; se_id=817e288c-e334-412d-93fa-9e7eaeb9cbb7; hide_inactive_users=0; filter_users=
HTTP_HOST:localhost:49412
HTTP_USER_AGENT:Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36
HTTP_UPGRADE_INSECURE_REQUESTS:1

ALL_RAW=Cache-Control: max-age=0
Connection: keep-alive
Accept: text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8
Accept-Encoding: gzip, deflate, br
Accept-Language: en-US,en;q=0.9,tr;q=0.8
Cookie: user=name=admin&NTLM=0; ASP.NET_SessionId=vrjce1domi1jxhuslyp3ip4b; se_id=817e288c-e334-412d-93fa-9e7eaeb9cbb7; hide_inactive_users=0; filter_users=
Host: localhost:49412
User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36
Upgrade-Insecure-Requests: 1

APPL_MD_PATH=/LM/W3SVC/2/ROOT
APPL_PHYSICAL_PATH=F:\Synced\Visual Studio 2017\Projects\temp\btnetnew\btnetnew\
CONTENT_LENGTH=0
GATEWAY_INTERFACE=CGI/1.1
HTTPS=off
INSTANCE_ID=2
INSTANCE_META_PATH=/LM/W3SVC/2
LOCAL_ADDR=::1
PATH_INFO=/edit_priority.aspx
PATH_TRANSLATED=F:\Synced\Visual Studio 2017\Projects\temp\btnetnew\btnetnew\edit_priority.aspx
QUERY_STRING=id=1
REMOTE_ADDR=::1
REMOTE_HOST=::1
REMOTE_PORT=52922
REQUEST_METHOD=GET
SCRIPT_NAME=/edit_priority.aspx
SERVER_NAME=localhost
SERVER_PORT=49412
SERVER_PORT_SECURE=0
SERVER_PROTOCOL=HTTP/1.1
SERVER_SOFTWARE=Microsoft-IIS/10.0
URL=/edit_priority.aspx
HTTP_CACHE_CONTROL=max-age=0
HTTP_CONNECTION=keep-alive
HTTP_ACCEPT=text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8
HTTP_ACCEPT_ENCODING=gzip, deflate, br
HTTP_ACCEPT_LANGUAGE=en-US,en;q=0.9,tr;q=0.8
HTTP_COOKIE=user=name=admin&NTLM=0; ASP.NET_SessionId=vrjce1domi1jxhuslyp3ip4b; se_id=817e288c-e334-412d-93fa-9e7eaeb9cbb7; hide_inactive_users=0; filter_users=
HTTP_HOST=localhost:49412
HTTP_USER_AGENT=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36
HTTP_UPGRADE_INSECURE_REQUESTS=1
2018-08-14 17:31:13 http://localhost:49412/edit_priority.aspx?id=1 to email addr: admin@example.com
2018-08-14 17:31:13 http://localhost:49412/edit_priority.aspx?id=1 There was a problem sending email.   Check settings in Web.config.
2018-08-14 17:31:13 http://localhost:49412/edit_priority.aspx?id=1 TO:admin@example.com
2018-08-14 17:31:13 http://localhost:49412/edit_priority.aspx?id=1 FROM:errors@example.com
2018-08-14 17:31:13 http://localhost:49412/edit_priority.aspx?id=1 SUBJECT:Error: Only Content controls are allowed directly in a content page that contains Content controls.
2018-08-14 17:31:13 http://localhost:49412/edit_priority.aspx?id=1 Could not find a part of the path 'C:\temp\pickup\9fd5d757-91cd-4a59-8e6a-f3843503dd6a.eml'.
2018-08-14 17:31:56 http://localhost:49412/edit_priority.aspx?id=1 sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '817e288c-e334-412d-93fa-9e7eaeb9cbb7';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '817e288c-e334-412d-93fa-9e7eaeb9cbb7'
and us_active = 1
2018-08-14 17:31:56 http://localhost:49412/edit_priority.aspx?id=1 elapsed milliseconds:0007
2018-08-14 17:31:56 http://localhost:49412/edit_priority.aspx?id=1 sql=
select
				pr_name, pr_sort_seq, pr_background_color, isnull(pr_style,'') [pr_style], pr_default
				from priorities where pr_id = 1
2018-08-14 17:31:56 http://localhost:49412/edit_priority.aspx?id=1 elapsed milliseconds:0001
2018-08-14 17:33:18 http://localhost:49412/edit_priority.aspx?id=1 sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '817e288c-e334-412d-93fa-9e7eaeb9cbb7';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '817e288c-e334-412d-93fa-9e7eaeb9cbb7'
and us_active = 1
2018-08-14 17:33:18 http://localhost:49412/edit_priority.aspx?id=1 elapsed milliseconds:0007
2018-08-14 17:33:18 http://localhost:49412/edit_priority.aspx?id=1 sql=
select
				pr_name, pr_sort_seq, pr_background_color, isnull(pr_style,'') [pr_style], pr_default
				from priorities where pr_id = 1
2018-08-14 17:33:18 http://localhost:49412/edit_priority.aspx?id=1 elapsed milliseconds:0001
2018-08-14 17:34:18 http://localhost:49412/edit_priority.aspx?id=1 sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '817e288c-e334-412d-93fa-9e7eaeb9cbb7';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '817e288c-e334-412d-93fa-9e7eaeb9cbb7'
and us_active = 1
2018-08-14 17:34:18 http://localhost:49412/edit_priority.aspx?id=1 elapsed milliseconds:0008
2018-08-14 17:34:18 http://localhost:49412/edit_priority.aspx?id=1 sql=
select
				pr_name, pr_sort_seq, pr_background_color, isnull(pr_style,'') [pr_style], pr_default
				from priorities where pr_id = 1
2018-08-14 17:34:18 http://localhost:49412/edit_priority.aspx?id=1 elapsed milliseconds:0001
2018-08-14 17:34:27 http://localhost:49412/edit_priority.aspx?id=1 sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '817e288c-e334-412d-93fa-9e7eaeb9cbb7';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '817e288c-e334-412d-93fa-9e7eaeb9cbb7'
and us_active = 1
2018-08-14 17:34:27 http://localhost:49412/edit_priority.aspx?id=1 elapsed milliseconds:0008
2018-08-14 17:34:27 http://localhost:49412/edit_priority.aspx?id=1 sql=
update priorities set
				pr_name = N'high',
				pr_sort_seq = 1,
				pr_background_color = N'#ff9999',
				pr_style = N'pr1_',
				pr_default = 0
				where pr_id = 1
2018-08-14 17:34:28 http://localhost:49412/edit_priority.aspx?id=1 sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '817e288c-e334-412d-93fa-9e7eaeb9cbb7';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '817e288c-e334-412d-93fa-9e7eaeb9cbb7'
and us_active = 1
2018-08-14 17:34:28 http://localhost:49412/edit_priority.aspx?id=1 elapsed milliseconds:0000
2018-08-14 17:34:28 http://localhost:49412/edit_priority.aspx?id=1 sql=
select pr_id [id],
		pr_name [description],
		pr_sort_seq [sort seq],
		'<div style=''background:' + pr_background_color + ';''>' + pr_background_color + '</div>' [background<br>color],
		pr_style [css<br>class],
		case when pr_default = 1 then 'Y' else 'N' end [default],
		pr_id [hidden] from priorities
2018-08-14 17:34:28 http://localhost:49412/edit_priority.aspx?id=1 elapsed milliseconds:0001
2018-08-14 17:34:30 http://localhost:49412/edit_priority.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '817e288c-e334-412d-93fa-9e7eaeb9cbb7';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '817e288c-e334-412d-93fa-9e7eaeb9cbb7'
and us_active = 1
2018-08-14 17:34:30 http://localhost:49412/edit_priority.aspx elapsed milliseconds:0000
2018-08-14 17:34:31 http://localhost:49412/edit_priority.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '817e288c-e334-412d-93fa-9e7eaeb9cbb7';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '817e288c-e334-412d-93fa-9e7eaeb9cbb7'
and us_active = 1
2018-08-14 17:34:31 http://localhost:49412/edit_priority.aspx elapsed milliseconds:0000
2018-08-14 17:35:31 http://localhost:49412/edit_priority.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '817e288c-e334-412d-93fa-9e7eaeb9cbb7';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '817e288c-e334-412d-93fa-9e7eaeb9cbb7'
and us_active = 1
2018-08-14 17:35:31 http://localhost:49412/edit_priority.aspx elapsed milliseconds:0008
2018-08-14 17:36:36 http://localhost:49412/edit_priority.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '817e288c-e334-412d-93fa-9e7eaeb9cbb7';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '817e288c-e334-412d-93fa-9e7eaeb9cbb7'
and us_active = 1
2018-08-14 17:36:36 http://localhost:49412/edit_priority.aspx elapsed milliseconds:0007
2018-08-14 17:37:36 http://localhost:49412/edit_styles.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '817e288c-e334-412d-93fa-9e7eaeb9cbb7';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '817e288c-e334-412d-93fa-9e7eaeb9cbb7'
and us_active = 1
2018-08-14 17:37:36 http://localhost:49412/edit_styles.aspx elapsed milliseconds:0011
2018-08-14 17:37:36 http://localhost:49412/edit_styles.aspx sql=
select
			'<a target=_blank href=edit_priority.aspx?id=' + convert(varchar,pr_id) + '>' + pr_name + '</a>' [priority],
			'<a target=_blank href=edit_status.aspx?id=' + convert(varchar,st_id) + '>' + st_name + '</a>' [status],
			isnull(pr_style,'') [priority CSS class],
			isnull(st_style,'') [status CSS class],
			isnull(pr_style + st_style,'datad') [combo CSS class - priority + status ],
			'<span class=''' + isnull(pr_style,'') + isnull(st_style,'')  +'''>The quick brown fox</span>' [text sample]
			from priorities, statuses /* intentioanl cartesian join */
			order by pr_sort_seq, st_sort_seq;

			select distinct isnull(pr_style + st_style,'datad')
			from priorities, statuses;
2018-08-14 17:37:36 http://localhost:49412/edit_styles.aspx elapsed milliseconds:0010
2018-08-14 17:37:53 http://localhost:49412/admin.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '817e288c-e334-412d-93fa-9e7eaeb9cbb7';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '817e288c-e334-412d-93fa-9e7eaeb9cbb7'
and us_active = 1
2018-08-14 17:37:53 http://localhost:49412/admin.aspx elapsed milliseconds:0007
2018-08-14 17:38:02 http://localhost:49412/priorities.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '817e288c-e334-412d-93fa-9e7eaeb9cbb7';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '817e288c-e334-412d-93fa-9e7eaeb9cbb7'
and us_active = 1
2018-08-14 17:38:02 http://localhost:49412/priorities.aspx elapsed milliseconds:0000
2018-08-14 17:38:03 http://localhost:49412/priorities.aspx sql=
select pr_id [id],
		pr_name [description],
		pr_sort_seq [sort seq],
		'<div style=''background:' + pr_background_color + ';''>' + pr_background_color + '</div>' [background<br>color],
		pr_style [css<br>class],
		case when pr_default = 1 then 'Y' else 'N' end [default],
		pr_id [hidden] from priorities
2018-08-14 17:38:03 http://localhost:49412/priorities.aspx elapsed milliseconds:0001
2018-08-14 17:38:07 http://localhost:49412/statuses.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '817e288c-e334-412d-93fa-9e7eaeb9cbb7';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '817e288c-e334-412d-93fa-9e7eaeb9cbb7'
and us_active = 1
2018-08-14 17:38:07 http://localhost:49412/statuses.aspx elapsed milliseconds:0000
2018-08-14 17:38:07 http://localhost:49412/statuses.aspx sql=
select st_id [id],
		st_name [status],
		st_sort_seq [sort seq],
		st_style [css<br>class],
		case when st_default = 1 then 'Y' else 'N' end [default],
		st_id [hidden]
		from statuses order by st_sort_seq
2018-08-14 17:38:07 http://localhost:49412/statuses.aspx elapsed milliseconds:0001
2018-08-14 17:38:12 http://localhost:49412/edit_status.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '817e288c-e334-412d-93fa-9e7eaeb9cbb7';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '817e288c-e334-412d-93fa-9e7eaeb9cbb7'
and us_active = 1
2018-08-14 17:38:12 http://localhost:49412/edit_status.aspx elapsed milliseconds:0000
2018-08-14 17:42:16 http://localhost:49412/edit_status.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '817e288c-e334-412d-93fa-9e7eaeb9cbb7';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '817e288c-e334-412d-93fa-9e7eaeb9cbb7'
and us_active = 1
2018-08-14 17:42:16 http://localhost:49412/edit_status.aspx elapsed milliseconds:0007
2018-08-14 17:42:19 http://localhost:49412/edit_status.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '817e288c-e334-412d-93fa-9e7eaeb9cbb7';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '817e288c-e334-412d-93fa-9e7eaeb9cbb7'
and us_active = 1
2018-08-14 17:42:19 http://localhost:49412/edit_status.aspx elapsed milliseconds:0000
2018-08-14 17:43:07 http://localhost:49412/edit_status.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '817e288c-e334-412d-93fa-9e7eaeb9cbb7';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '817e288c-e334-412d-93fa-9e7eaeb9cbb7'
and us_active = 1
2018-08-14 17:43:07 http://localhost:49412/edit_status.aspx elapsed milliseconds:0007
2018-08-14 17:43:29 http://localhost:49412/edit_status.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '817e288c-e334-412d-93fa-9e7eaeb9cbb7';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '817e288c-e334-412d-93fa-9e7eaeb9cbb7'
and us_active = 1
2018-08-14 17:43:29 http://localhost:49412/edit_status.aspx elapsed milliseconds:0000
2018-08-14 17:43:55 http://localhost:49412/edit_status.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '817e288c-e334-412d-93fa-9e7eaeb9cbb7';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '817e288c-e334-412d-93fa-9e7eaeb9cbb7'
and us_active = 1
2018-08-14 17:43:55 http://localhost:49412/edit_status.aspx elapsed milliseconds:0000
2018-08-14 17:44:04 http://localhost:49412/edit_status.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '817e288c-e334-412d-93fa-9e7eaeb9cbb7';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '817e288c-e334-412d-93fa-9e7eaeb9cbb7'
and us_active = 1
2018-08-14 17:44:04 http://localhost:49412/edit_status.aspx elapsed milliseconds:0000
2018-08-14 17:44:10 http://localhost:49412/admin.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '817e288c-e334-412d-93fa-9e7eaeb9cbb7';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '817e288c-e334-412d-93fa-9e7eaeb9cbb7'
and us_active = 1
2018-08-14 17:44:10 http://localhost:49412/admin.aspx elapsed milliseconds:0008
2018-08-14 17:44:13 http://localhost:49412/udfs.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '817e288c-e334-412d-93fa-9e7eaeb9cbb7';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '817e288c-e334-412d-93fa-9e7eaeb9cbb7'
and us_active = 1
2018-08-14 17:44:13 http://localhost:49412/udfs.aspx elapsed milliseconds:0015
2018-08-14 17:44:13 http://localhost:49412/udfs.aspx sql=
select udf_id [id],
		udf_name [user defined attribute value],
		udf_sort_seq [sort seq],
		case when udf_default = 1 then 'Y' else 'N' end [default],
		udf_id [hidden]
		from user_defined_attribute order by udf_name
2018-08-14 17:44:13 http://localhost:49412/udfs.aspx elapsed milliseconds:0001
2018-08-14 17:44:17 http://localhost:49412/edit_udf.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '817e288c-e334-412d-93fa-9e7eaeb9cbb7';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '817e288c-e334-412d-93fa-9e7eaeb9cbb7'
and us_active = 1
2018-08-14 17:44:17 http://localhost:49412/edit_udf.aspx elapsed milliseconds:0000
2018-08-14 17:45:55 http://localhost:49412/edit_udf.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '817e288c-e334-412d-93fa-9e7eaeb9cbb7';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '817e288c-e334-412d-93fa-9e7eaeb9cbb7'
and us_active = 1
2018-08-14 17:45:55 http://localhost:49412/edit_udf.aspx elapsed milliseconds:0007
2018-08-14 17:46:38 http://localhost:49412/edit_udf.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '817e288c-e334-412d-93fa-9e7eaeb9cbb7';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '817e288c-e334-412d-93fa-9e7eaeb9cbb7'
and us_active = 1
2018-08-14 17:46:38 http://localhost:49412/edit_udf.aspx elapsed milliseconds:0007
2018-08-14 17:46:45 http://localhost:49412/edit_udf.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '817e288c-e334-412d-93fa-9e7eaeb9cbb7';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '817e288c-e334-412d-93fa-9e7eaeb9cbb7'
and us_active = 1
2018-08-14 17:46:45 http://localhost:49412/edit_udf.aspx elapsed milliseconds:0000
2018-08-14 17:46:48 http://localhost:49412/edit_udf.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '817e288c-e334-412d-93fa-9e7eaeb9cbb7';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '817e288c-e334-412d-93fa-9e7eaeb9cbb7'
and us_active = 1
2018-08-14 17:46:48 http://localhost:49412/edit_udf.aspx elapsed milliseconds:0000
2018-08-14 17:47:40 http://localhost:49412/edit_udf.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '817e288c-e334-412d-93fa-9e7eaeb9cbb7';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '817e288c-e334-412d-93fa-9e7eaeb9cbb7'
and us_active = 1
2018-08-14 17:47:40 http://localhost:49412/edit_udf.aspx elapsed milliseconds:0008
2018-08-14 17:47:42 http://localhost:49412/edit_udf.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '817e288c-e334-412d-93fa-9e7eaeb9cbb7';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '817e288c-e334-412d-93fa-9e7eaeb9cbb7'
and us_active = 1
2018-08-14 17:47:42 http://localhost:49412/edit_udf.aspx elapsed milliseconds:0000
2018-08-14 17:47:53 http://localhost:49412/admin.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '817e288c-e334-412d-93fa-9e7eaeb9cbb7';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '817e288c-e334-412d-93fa-9e7eaeb9cbb7'
and us_active = 1
2018-08-14 17:47:53 http://localhost:49412/admin.aspx elapsed milliseconds:0000
2018-08-14 17:47:57 http://localhost:49412/customfields.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '817e288c-e334-412d-93fa-9e7eaeb9cbb7';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '817e288c-e334-412d-93fa-9e7eaeb9cbb7'
and us_active = 1
2018-08-14 17:47:57 http://localhost:49412/customfields.aspx elapsed milliseconds:0000
2018-08-14 17:48:00 http://localhost:49412/add_customfield.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '817e288c-e334-412d-93fa-9e7eaeb9cbb7';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '817e288c-e334-412d-93fa-9e7eaeb9cbb7'
and us_active = 1
2018-08-14 17:48:00 http://localhost:49412/add_customfield.aspx elapsed milliseconds:0000
2018-08-14 18:04:25  caught exception in util.set_context:Request is not available in this context
2018-08-14 18:04:25  threadproc_votes
2018-08-14 18:04:25  started creating Lucene index using folder F:\Synced\Visual Studio 2017\Projects\temp\btnetnew\btnetnew\App_Data\lucene_index
2018-08-14 18:04:25  sql=

if exists (select * from dbo.sysobjects where id = object_id(N'[votes_view]'))
drop view [votes_view]
2018-08-14 18:04:25  sql=

create view votes_view as
select bu_bug as vote_bug, sum(bu_vote) as vote_total
from bug_user
group by bu_bug
having sum(bu_vote) > 0
2018-08-14 18:04:25  sql=

/* get searchable cols */					
select sc.name
from syscolumns sc
inner join systypes st on st.xusertype = sc.xusertype
inner join sysobjects so on sc.id = so.id
where so.name = 'bugs'
and st.[name] <> 'sysname'
and sc.name not in ('rowguid',
'bg_id',
'bg_short_desc',
'bg_reported_user',
'bg_reported_date',
'bg_project',
'bg_org',
'bg_category',
'bg_priority',
'bg_status',
'bg_assigned_to_user',
'bg_last_updated_user',
'bg_last_updated_date',
'bg_user_defined_attribute',
'bg_project_custom_dropdown_value1',
'bg_project_custom_dropdown_value2',
'bg_project_custom_dropdown_value3',
'bg_tags')
and st.[name] in ('nvarchar','varchar')
and sc.length > 30
2018-08-14 18:04:25  sql=

select bu_bug, count(1)
from bug_user 
where bu_vote = 1
group by bu_bug
2018-08-14 18:04:25  elapsed milliseconds:0007
2018-08-14 18:04:25  elapsed milliseconds:0080
2018-08-14 18:04:25  sql=

select bg_id, 	

isnull(bg_tags,'') bg_tags,
bg_short_desc
from bugs
2018-08-14 18:04:25  elapsed milliseconds:0001
2018-08-14 18:04:25  sql=

select bp_bug, bp_id, 
isnull(bp_comment_search,bp_comment) [text] 
from bug_posts 
where bp_type <> 'update'
and bp_hidden_from_external_users = 0
2018-08-14 18:04:25  elapsed milliseconds:0002
2018-08-14 18:04:25  done creating Lucene index
2018-08-14 18:04:27 http://localhost:49412/default.aspx sql=
select count(1) from users
2018-08-14 18:04:59 http://localhost:49412/default.aspx sql=
select count(1) from users
2018-08-14 18:04:59 http://localhost:49412/default.aspx sql=

select us_username, us_id, us_password, isnull(us_salt,0) us_salt, us_active
from users
where us_username = N'admin'
2018-08-14 18:04:59 http://localhost:49412/default.aspx elapsed milliseconds:0002
2018-08-14 18:04:59 http://localhost:49412/default.aspx sql=
update users set us_most_recent_login_datetime = getdate() where us_id = 1
2018-08-14 18:04:59 http://localhost:49412/default.aspx sql=
select us_id from users where us_username = N'admin'
2018-08-14 18:04:59 http://localhost:49412/default.aspx elapsed milliseconds:0001
2018-08-14 18:04:59 http://localhost:49412/default.aspx guid=f9e9dab7-c424-4b01-b2a3-e88d7e1b23fe
2018-08-14 18:04:59 http://localhost:49412/default.aspx sql=
insert into sessions (se_id, se_user) values('f9e9dab7-c424-4b01-b2a3-e88d7e1b23fe', 1)
2018-08-14 18:04:59 http://localhost:49412/default.aspx AppPath:
2018-08-14 18:05:01 http://localhost:49412/bugs.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = 'f9e9dab7-c424-4b01-b2a3-e88d7e1b23fe';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = 'f9e9dab7-c424-4b01-b2a3-e88d7e1b23fe'
and us_active = 1
2018-08-14 18:05:01 http://localhost:49412/bugs.aspx elapsed milliseconds:0006
2018-08-14 18:05:01 http://localhost:49412/bugs.aspx sql=

/* custom columns */ select sc.name, st.[name] [datatype], 
case when st.[name] = 'nvarchar' or st.[name] = 'nchar' then sc.length/2 else sc.length end as [length], 
sc.xprec, sc.xscale, sc.isnullable,
mm.text [default value], 
dflts.name [default name], 
isnull(ccm_dropdown_type,'') [dropdown type],
isnull(ccm_dropdown_vals,'') [vals],
isnull(ccm_sort_seq, sc.colorder) [column order],
sc.colorder
from syscolumns sc
inner join systypes st on st.xusertype = sc.xusertype
inner join sysobjects so on sc.id = so.id
left outer join syscomments mm on sc.cdefault = mm.id
left outer join custom_col_metadata on ccm_colorder = sc.colorder
left outer join sysobjects dflts on dflts.id = mm.id
where so.name = 'bugs'
and st.[name] <> 'sysname'
and sc.name not in ('rowguid',
'bg_id',
'bg_short_desc',
'bg_reported_user',
'bg_reported_date',
'bg_project',
'bg_org',
'bg_category',
'bg_priority',
'bg_status',
'bg_assigned_to_user',
'bg_last_updated_user',
'bg_last_updated_date',
'bg_user_defined_attribute',
'bg_project_custom_dropdown_value1',
'bg_project_custom_dropdown_value2',
'bg_project_custom_dropdown_value3',
'bg_tags')
order by sc.id, isnull(ccm_sort_seq,sc.colorder)
2018-08-14 18:05:01 http://localhost:49412/bugs.aspx elapsed milliseconds:0072
2018-08-14 18:05:01 http://localhost:49412/bugs.aspx sql=
/* query dropdown */
select qu_id, qu_desc
from queries
where (isnull(qu_user,0) = 0 and isnull(qu_org,0) = 0)
or isnull(qu_user,0) = 1
or isnull(qu_org,0) = 1
order by qu_desc
2018-08-14 18:05:01 http://localhost:49412/bugs.aspx elapsed milliseconds:0001
2018-08-14 18:05:01 http://localhost:49412/bugs.aspx sql=
select qu_id, qu_sql from queries where qu_id in
			(select us_default_query from users where us_id = 1)
2018-08-14 18:05:01 http://localhost:49412/bugs.aspx elapsed milliseconds:0002
2018-08-14 18:05:01 http://localhost:49412/bugs.aspx sql=
select isnull(pr_background_color,'#ffffff'), bg_id [id], isnull(bu_flag,0) [$FLAG], 
 bg_short_desc [desc], isnull(pj_name,'') [project], isnull(og_name,'') [organization], isnull(ct_name,'') [category], rpt.us_username [reported by],
 bg_reported_date [reported on], isnull(pr_name,'') [priority], isnull(asg.us_username,'') [assigned to],
 isnull(st_name,'') [status], isnull(lu.us_username,'') [last updated by], bg_last_updated_date [last updated on]
 from bugs 
 left outer join bug_user on bu_bug = bg_id and bu_user = 1 
 left outer join users rpt on rpt.us_id = bg_reported_user
 left outer join users asg on asg.us_id = bg_assigned_to_user
 left outer join users lu on lu.us_id = bg_last_updated_user
 left outer join projects on pj_id = bg_project
 left outer join orgs on og_id = bg_org
 left outer join categories on ct_id = bg_category
 left outer join priorities on pr_id = bg_priority
 left outer join statuses on st_id = bg_status
  /* altered - just order by  */ WHERE  (bugs.bg_project not in (
					select pu_project
					from project_user_xref
					where pu_user = 1
					and pu_permission_level = 0)) order by bg_id desc
2018-08-14 18:05:01 http://localhost:49412/bugs.aspx elapsed milliseconds:0011
2018-08-14 18:05:08 http://localhost:49412/edit_bug.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = 'f9e9dab7-c424-4b01-b2a3-e88d7e1b23fe';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = 'f9e9dab7-c424-4b01-b2a3-e88d7e1b23fe'
and us_active = 1
2018-08-14 18:05:08 http://localhost:49412/edit_bug.aspx elapsed milliseconds:0007
2018-08-14 18:05:08 http://localhost:49412/edit_bug.aspx sql=
/* drop downs */ select pj_id, pj_name
		from projects
		left outer join project_user_xref on pj_id = pu_project
		and pu_user = 1
		where pj_active = 1
		and isnull(pu_permission_level,2) not in (0, 1)
		order by pj_name;
select og_id, og_name from orgs where og_active = 1 order by og_name;
select ct_id, ct_name from categories order by ct_sort_seq, ct_name;
select pr_id, pr_name from priorities order by pr_sort_seq, pr_name;
select st_id, st_name from statuses order by st_sort_seq, st_name;
select udf_id, udf_name from user_defined_attribute order by udf_sort_seq, udf_name;
2018-08-14 18:05:08 http://localhost:49412/edit_bug.aspx elapsed milliseconds:0008
2018-08-14 18:05:08 http://localhost:49412/edit_bug.aspx sql=

select top 1 pj_id from projects where pj_default = 1 order by pj_name;
select top 1 ct_id from categories where ct_default = 1 order by ct_name;
select top 1 pr_id from priorities where pr_default = 1 order by pr_name;
select top 1 st_id from statuses where st_default = 1 order by st_name;
select top 1 udf_id from user_defined_attribute where udf_default = 1 order by udf_name;
2018-08-14 18:05:08 http://localhost:49412/edit_bug.aspx elapsed milliseconds:0004
2018-08-14 18:05:08 http://localhost:49412/edit_bug.aspx sql=

/* users this project */ select us_id, case when 0 = 1 then us_lastname + ', ' + us_firstname else us_username end us_username
from users
inner join orgs on us_org = og_id
where us_active = 1
and og_can_be_assigned_to = 1
and (2 <> 0 or 1 = og_id or (og_external_user = 0 and 0 = 1))
and us_id not in
	(select pu_user from project_user_xref
		where pu_project = 0
		and pu_permission_level = 0)
order by us_username; 
2018-08-14 18:05:08 http://localhost:49412/edit_bug.aspx elapsed milliseconds:0005
2018-08-14 18:05:50 http://localhost:49412/default.aspx sql=
select count(1) from users
2018-08-14 18:05:51 http://localhost:49412/default.aspx sql=
select count(1) from users
2018-08-14 18:05:51 http://localhost:49412/default.aspx sql=

select us_username, us_id, us_password, isnull(us_salt,0) us_salt, us_active
from users
where us_username = N'admin'
2018-08-14 18:05:51 http://localhost:49412/default.aspx elapsed milliseconds:0001
2018-08-14 18:05:51 http://localhost:49412/default.aspx sql=
update users set us_most_recent_login_datetime = getdate() where us_id = 1
2018-08-14 18:05:51 http://localhost:49412/default.aspx sql=
select us_id from users where us_username = N'admin'
2018-08-14 18:05:51 http://localhost:49412/default.aspx elapsed milliseconds:0001
2018-08-14 18:05:51 http://localhost:49412/default.aspx guid=bd854cb2-454f-467a-93b5-d9c3704ce424
2018-08-14 18:05:51 http://localhost:49412/default.aspx sql=
insert into sessions (se_id, se_user) values('bd854cb2-454f-467a-93b5-d9c3704ce424', 1)
2018-08-14 18:05:51 http://localhost:49412/default.aspx AppPath:
2018-08-14 18:05:51 http://localhost:49412/bugs.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = 'bd854cb2-454f-467a-93b5-d9c3704ce424';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = 'bd854cb2-454f-467a-93b5-d9c3704ce424'
and us_active = 1
2018-08-14 18:05:51 http://localhost:49412/bugs.aspx elapsed milliseconds:0007
2018-08-14 18:05:51 http://localhost:49412/bugs.aspx sql=
/* query dropdown */
select qu_id, qu_desc
from queries
where (isnull(qu_user,0) = 0 and isnull(qu_org,0) = 0)
or isnull(qu_user,0) = 1
or isnull(qu_org,0) = 1
order by qu_desc
2018-08-14 18:05:52 http://localhost:49412/bugs.aspx elapsed milliseconds:0002
2018-08-14 18:05:52 http://localhost:49412/bugs.aspx sql=
select qu_sql from queries where qu_id = 1
2018-08-14 18:05:52 http://localhost:49412/bugs.aspx sql=
select isnull(pr_background_color,'#ffffff'), bg_id [id], isnull(bu_flag,0) [$FLAG], 
 bg_short_desc [desc], isnull(pj_name,'') [project], isnull(og_name,'') [organization], isnull(ct_name,'') [category], rpt.us_username [reported by],
 bg_reported_date [reported on], isnull(pr_name,'') [priority], isnull(asg.us_username,'') [assigned to],
 isnull(st_name,'') [status], isnull(lu.us_username,'') [last updated by], bg_last_updated_date [last updated on]
 from bugs 
 left outer join bug_user on bu_bug = bg_id and bu_user = 1 
 left outer join users rpt on rpt.us_id = bg_reported_user
 left outer join users asg on asg.us_id = bg_assigned_to_user
 left outer join users lu on lu.us_id = bg_last_updated_user
 left outer join projects on pj_id = bg_project
 left outer join orgs on og_id = bg_org
 left outer join categories on ct_id = bg_category
 left outer join priorities on pr_id = bg_priority
 left outer join statuses on st_id = bg_status
  /* altered - just order by  */ WHERE  (bugs.bg_project not in (
					select pu_project
					from project_user_xref
					where pu_user = 1
					and pu_permission_level = 0)) order by bg_id desc
2018-08-14 18:05:52 http://localhost:49412/bugs.aspx elapsed milliseconds:0011
2018-08-14 18:05:53 http://localhost:49412/edit_bug.aspx?id=1 sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = 'bd854cb2-454f-467a-93b5-d9c3704ce424';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = 'bd854cb2-454f-467a-93b5-d9c3704ce424'
and us_active = 1
2018-08-14 18:05:53 http://localhost:49412/edit_bug.aspx?id=1 elapsed milliseconds:0000
2018-08-14 18:05:53 http://localhost:49412/edit_bug.aspx?id=1 sql=
 /* get_bug_datarow */
declare @svn_revisions int
declare @git_commits int
declare @hg_revisions int
declare @tasks int
declare @related int;
set @svn_revisions = 0
set @git_commits = 0
set @hg_revisions = 0
set @tasks = 0
set @related = 0

select bg_id [id],
bg_short_desc [short_desc],
isnull(bg_tags,'') [bg_tags],
isnull(ru.us_username,'[deleted user]') [reporter],
isnull(ru.us_email,'') [reporter_email],
case rtrim(ru.us_firstname)
	when null then isnull(ru.us_lastname, '')
	when '' then isnull(ru.us_lastname, '')
	else isnull(ru.us_lastname + ', ' + ru.us_firstname,'')
	end [reporter_fullname],
bg_reported_date [reported_date],
datediff(s,bg_reported_date,getdate()) [seconds_ago],
isnull(lu.us_username,'') [last_updated_user],
case rtrim(lu.us_firstname)
	when null then isnull(lu.us_lastname, '')
	when '' then isnull(lu.us_lastname, '')
	else isnull(lu.us_lastname + ', ' + lu.us_firstname,'')
	end [last_updated_fullname],


bg_last_updated_date [last_updated_date],
isnull(bg_project,0) [project],
isnull(pj_name,'[no project]') [current_project],

isnull(bg_org,0) [organization],
isnull(bugorg.og_name,'') [og_name],

isnull(bg_category,0) [category],
isnull(ct_name,'') [category_name],

isnull(bg_priority,0) [priority],
isnull(pr_name,'') [priority_name],

isnull(bg_status,0) [status],
isnull(st_name,'') [status_name],

isnull(bg_user_defined_attribute,0) [udf],
isnull(udf_name,'') [udf_name],

isnull(bg_assigned_to_user,0) [assigned_to_user],
isnull(asg.us_username,'[not assigned]') [assigned_to_username],
case rtrim(asg.us_firstname)
when null then isnull(asg.us_lastname, '[not assigned]')
when '' then isnull(asg.us_lastname, '[not assigned]')
else isnull(asg.us_lastname + ', ' + asg.us_firstname,'[not assigned]')
end [assigned_to_fullname],

isnull(bs_user,0) [subscribed],

case
when
	1 <> bg_org
	and userorg.og_other_orgs_permission_level < 2
	and userorg.og_other_orgs_permission_level < isnull(pu_permission_level,2)
		then userorg.og_other_orgs_permission_level
else
	isnull(pu_permission_level,2)
end [pu_permission_level],

isnull(bg_project_custom_dropdown_value1,'') [bg_project_custom_dropdown_value1],
isnull(bg_project_custom_dropdown_value2,'') [bg_project_custom_dropdown_value2],
isnull(bg_project_custom_dropdown_value3,'') [bg_project_custom_dropdown_value3],
@related [relationship_cnt],
@svn_revisions [svn_revision_cnt],
@git_commits [git_commit_cnt],
@hg_revisions [hg_commit_cnt],
@tasks [task_cnt],
getdate() [snapshot_timestamp]

from bugs
inner join users this_user on us_id = 1
inner join orgs userorg on this_user.us_org = userorg.og_id
left outer join user_defined_attribute on bg_user_defined_attribute = udf_id
left outer join projects on bg_project = pj_id
left outer join orgs bugorg on bg_org = bugorg.og_id
left outer join categories on bg_category = ct_id
left outer join priorities on bg_priority = pr_id
left outer join statuses on bg_status = st_id
left outer join users asg on bg_assigned_to_user = asg.us_id
left outer join users ru on bg_reported_user = ru.us_id
left outer join users lu on bg_last_updated_user = lu.us_id
left outer join bug_subscriptions on bs_bug = bg_id and bs_user = 1
left outer join project_user_xref on pj_id = pu_project
and pu_user = 1
where bg_id = 1
2018-08-14 18:05:53 http://localhost:49412/edit_bug.aspx?id=1 elapsed milliseconds:0014
2018-08-14 18:05:53 http://localhost:49412/edit_bug.aspx?id=1 sql=
/* drop downs */ select pj_id, pj_name
		from projects
		left outer join project_user_xref on pj_id = pu_project
		and pu_user = 1
		where pj_active = 1
		and isnull(pu_permission_level,2) not in (0, 1)
		order by pj_name;
select og_id, og_name from orgs where og_active = 1 order by og_name;
select ct_id, ct_name from categories order by ct_sort_seq, ct_name;
select pr_id, pr_name from priorities order by pr_sort_seq, pr_name;
select st_id, st_name from statuses order by st_sort_seq, st_name;
select udf_id, udf_name from user_defined_attribute order by udf_sort_seq, udf_name;
2018-08-14 18:05:53 http://localhost:49412/edit_bug.aspx?id=1 elapsed milliseconds:0005
2018-08-14 18:05:53 http://localhost:49412/edit_bug.aspx?id=1 sql=

/* users this project */ select us_id, case when 0 = 1 then us_lastname + ', ' + us_firstname else us_username end us_username
from users
inner join orgs on us_org = og_id
where us_active = 1
and og_can_be_assigned_to = 1
and (2 <> 0 or 1 = og_id or (og_external_user = 0 and 0 = 1))
and us_id not in
	(select pu_user from project_user_xref
		where pu_project = 1
		and pu_permission_level = 0)
order by us_username; 
2018-08-14 18:05:53 http://localhost:49412/edit_bug.aspx?id=1 elapsed milliseconds:0005
2018-08-14 18:05:53 http://localhost:49412/edit_bug.aspx?id=1 sql=
select
			isnull(pj_enable_custom_dropdown1,0) [pj_enable_custom_dropdown1],
			isnull(pj_enable_custom_dropdown2,0) [pj_enable_custom_dropdown2],
			isnull(pj_enable_custom_dropdown3,0) [pj_enable_custom_dropdown3],
			isnull(pj_custom_dropdown_label1,'') [pj_custom_dropdown_label1],
			isnull(pj_custom_dropdown_label2,'') [pj_custom_dropdown_label2],
			isnull(pj_custom_dropdown_label3,'') [pj_custom_dropdown_label3],
			isnull(pj_custom_dropdown_values1,'') [pj_custom_dropdown_values1],
			isnull(pj_custom_dropdown_values2,'') [pj_custom_dropdown_values2],
			isnull(pj_custom_dropdown_values3,'') [pj_custom_dropdown_values3]
			from projects where pj_id = 1
2018-08-14 18:05:53 http://localhost:49412/edit_bug.aspx?id=1 elapsed milliseconds:0001
2018-08-14 18:05:53 http://localhost:49412/edit_bug.aspx?id=1 sql=

/* get_bug_posts */
select
a.bp_bug,
a.bp_comment,
isnull(us_username,'') [us_username],
case rtrim(us_firstname)
	when null then isnull(us_lastname, '')
	when '' then isnull(us_lastname, '')
	else isnull(us_lastname + ', ' + us_firstname,'')
	end [us_fullname],
isnull(us_email,'') [us_email],
a.bp_date,
datediff(s,a.bp_date,getdate()) [seconds_ago],
a.bp_id,
a.bp_type,
isnull(a.bp_email_from,'') bp_email_from,
isnull(a.bp_email_to,'') bp_email_to,
isnull(a.bp_email_cc,'') bp_email_cc,
isnull(a.bp_file,'') bp_file,
isnull(a.bp_size,0) bp_size,
isnull(a.bp_content_type,'') bp_content_type,
a.bp_hidden_from_external_users,
isnull(ba.bp_file,'') ba_file,  -- intentionally ba
isnull(ba.bp_id,'') ba_id, -- intentionally ba
isnull(ba.bp_size,'') ba_size,  -- intentionally ba
isnull(ba.bp_content_type,'') ba_content_type -- intentionally ba
from bug_posts a
left outer join users on us_id = a.bp_user
left outer join bug_posts ba on ba.bp_parent = a.bp_id and ba.bp_bug = a.bp_bug
where a.bp_bug = 1
and a.bp_parent is null
 and a.bp_type <> 'update'
 order by a.bp_id desc, ba.bp_parent, ba.bp_id
2018-08-14 18:05:53 http://localhost:49412/edit_bug.aspx?id=1 elapsed milliseconds:0005
2018-08-14 18:05:54 http://localhost:49412/ajax.aspx?bugid=1 sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = 'bd854cb2-454f-467a-93b5-d9c3704ce424';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = 'bd854cb2-454f-467a-93b5-d9c3704ce424'
and us_active = 1
2018-08-14 18:05:54 http://localhost:49412/ajax.aspx?bugid=1 elapsed milliseconds:0000
2018-08-14 18:05:55 http://localhost:49412/ajax.aspx?bugid=1 sql=

declare @bg_org int

select isnull(pu_permission_level,2),
bg_org
from bugs
left outer join project_user_xref
on pu_project = bg_project
and pu_user = 1
where bg_id = 1
2018-08-14 18:05:55 http://localhost:49412/ajax.aspx?bugid=1 elapsed milliseconds:0002
2018-08-14 18:05:55 http://localhost:49412/ajax.aspx?bugid=1 sql=

/* get_bug_posts */
select
a.bp_bug,
a.bp_comment,
isnull(us_username,'') [us_username],
case rtrim(us_firstname)
	when null then isnull(us_lastname, '')
	when '' then isnull(us_lastname, '')
	else isnull(us_lastname + ', ' + us_firstname,'')
	end [us_fullname],
isnull(us_email,'') [us_email],
a.bp_date,
datediff(s,a.bp_date,getdate()) [seconds_ago],
a.bp_id,
a.bp_type,
isnull(a.bp_email_from,'') bp_email_from,
isnull(a.bp_email_to,'') bp_email_to,
isnull(a.bp_email_cc,'') bp_email_cc,
isnull(a.bp_file,'') bp_file,
isnull(a.bp_size,0) bp_size,
isnull(a.bp_content_type,'') bp_content_type,
a.bp_hidden_from_external_users,
isnull(ba.bp_file,'') ba_file,  -- intentionally ba
isnull(ba.bp_id,'') ba_id, -- intentionally ba
isnull(ba.bp_size,'') ba_size,  -- intentionally ba
isnull(ba.bp_content_type,'') ba_content_type -- intentionally ba
from bug_posts a
left outer join users on us_id = a.bp_user
left outer join bug_posts ba on ba.bp_parent = a.bp_id and ba.bp_bug = a.bp_bug
where a.bp_bug = 1
and a.bp_parent is null
 and a.bp_type <> 'update'
 order by a.bp_id desc, ba.bp_parent, ba.bp_id
2018-08-14 18:05:55 http://localhost:49412/ajax.aspx?bugid=1 elapsed milliseconds:0000
2018-08-14 18:06:09 http://localhost:49412/print_bug.aspx?id=1 sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = 'bd854cb2-454f-467a-93b5-d9c3704ce424';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = 'bd854cb2-454f-467a-93b5-d9c3704ce424'
and us_active = 1
2018-08-14 18:06:09 http://localhost:49412/print_bug.aspx?id=1 elapsed milliseconds:0000
2018-08-14 18:06:09 http://localhost:49412/print_bug.aspx?id=1 sql=
 /* get_bug_datarow */
declare @svn_revisions int
declare @git_commits int
declare @hg_revisions int
declare @tasks int
declare @related int;
set @svn_revisions = 0
set @git_commits = 0
set @hg_revisions = 0
set @tasks = 0
set @related = 0

select bg_id [id],
bg_short_desc [short_desc],
isnull(bg_tags,'') [bg_tags],
isnull(ru.us_username,'[deleted user]') [reporter],
isnull(ru.us_email,'') [reporter_email],
case rtrim(ru.us_firstname)
	when null then isnull(ru.us_lastname, '')
	when '' then isnull(ru.us_lastname, '')
	else isnull(ru.us_lastname + ', ' + ru.us_firstname,'')
	end [reporter_fullname],
bg_reported_date [reported_date],
datediff(s,bg_reported_date,getdate()) [seconds_ago],
isnull(lu.us_username,'') [last_updated_user],
case rtrim(lu.us_firstname)
	when null then isnull(lu.us_lastname, '')
	when '' then isnull(lu.us_lastname, '')
	else isnull(lu.us_lastname + ', ' + lu.us_firstname,'')
	end [last_updated_fullname],


bg_last_updated_date [last_updated_date],
isnull(bg_project,0) [project],
isnull(pj_name,'[no project]') [current_project],

isnull(bg_org,0) [organization],
isnull(bugorg.og_name,'') [og_name],

isnull(bg_category,0) [category],
isnull(ct_name,'') [category_name],

isnull(bg_priority,0) [priority],
isnull(pr_name,'') [priority_name],

isnull(bg_status,0) [status],
isnull(st_name,'') [status_name],

isnull(bg_user_defined_attribute,0) [udf],
isnull(udf_name,'') [udf_name],

isnull(bg_assigned_to_user,0) [assigned_to_user],
isnull(asg.us_username,'[not assigned]') [assigned_to_username],
case rtrim(asg.us_firstname)
when null then isnull(asg.us_lastname, '[not assigned]')
when '' then isnull(asg.us_lastname, '[not assigned]')
else isnull(asg.us_lastname + ', ' + asg.us_firstname,'[not assigned]')
end [assigned_to_fullname],

isnull(bs_user,0) [subscribed],

case
when
	1 <> bg_org
	and userorg.og_other_orgs_permission_level < 2
	and userorg.og_other_orgs_permission_level < isnull(pu_permission_level,2)
		then userorg.og_other_orgs_permission_level
else
	isnull(pu_permission_level,2)
end [pu_permission_level],

isnull(bg_project_custom_dropdown_value1,'') [bg_project_custom_dropdown_value1],
isnull(bg_project_custom_dropdown_value2,'') [bg_project_custom_dropdown_value2],
isnull(bg_project_custom_dropdown_value3,'') [bg_project_custom_dropdown_value3],
@related [relationship_cnt],
@svn_revisions [svn_revision_cnt],
@git_commits [git_commit_cnt],
@hg_revisions [hg_commit_cnt],
@tasks [task_cnt],
getdate() [snapshot_timestamp]

from bugs
inner join users this_user on us_id = 1
inner join orgs userorg on this_user.us_org = userorg.og_id
left outer join user_defined_attribute on bg_user_defined_attribute = udf_id
left outer join projects on bg_project = pj_id
left outer join orgs bugorg on bg_org = bugorg.og_id
left outer join categories on bg_category = ct_id
left outer join priorities on bg_priority = pr_id
left outer join statuses on bg_status = st_id
left outer join users asg on bg_assigned_to_user = asg.us_id
left outer join users ru on bg_reported_user = ru.us_id
left outer join users lu on bg_last_updated_user = lu.us_id
left outer join bug_subscriptions on bs_bug = bg_id and bs_user = 1
left outer join project_user_xref on pj_id = pu_project
and pu_user = 1
where bg_id = 1
2018-08-14 18:06:09 http://localhost:49412/print_bug.aspx?id=1 elapsed milliseconds:0000
2018-08-14 18:06:09 http://localhost:49412/print_bug.aspx?id=1 sql=
select
					isnull(pj_enable_custom_dropdown1,0) [pj_enable_custom_dropdown1],
					isnull(pj_enable_custom_dropdown2,0) [pj_enable_custom_dropdown2],
					isnull(pj_enable_custom_dropdown3,0) [pj_enable_custom_dropdown3],
					isnull(pj_custom_dropdown_label1,'') [pj_custom_dropdown_label1],
					isnull(pj_custom_dropdown_label2,'') [pj_custom_dropdown_label2],
					isnull(pj_custom_dropdown_label3,'') [pj_custom_dropdown_label3]
					from projects where pj_id = 1
2018-08-14 18:06:09 http://localhost:49412/print_bug.aspx?id=1 elapsed milliseconds:0001
2018-08-14 18:06:09 http://localhost:49412/print_bug.aspx?id=1 sql=

/* get_bug_posts */
select
a.bp_bug,
a.bp_comment,
isnull(us_username,'') [us_username],
case rtrim(us_firstname)
	when null then isnull(us_lastname, '')
	when '' then isnull(us_lastname, '')
	else isnull(us_lastname + ', ' + us_firstname,'')
	end [us_fullname],
isnull(us_email,'') [us_email],
a.bp_date,
datediff(s,a.bp_date,getdate()) [seconds_ago],
a.bp_id,
a.bp_type,
isnull(a.bp_email_from,'') bp_email_from,
isnull(a.bp_email_to,'') bp_email_to,
isnull(a.bp_email_cc,'') bp_email_cc,
isnull(a.bp_file,'') bp_file,
isnull(a.bp_size,0) bp_size,
isnull(a.bp_content_type,'') bp_content_type,
a.bp_hidden_from_external_users,
isnull(ba.bp_file,'') ba_file,  -- intentionally ba
isnull(ba.bp_id,'') ba_id, -- intentionally ba
isnull(ba.bp_size,'') ba_size,  -- intentionally ba
isnull(ba.bp_content_type,'') ba_content_type -- intentionally ba
from bug_posts a
left outer join users on us_id = a.bp_user
left outer join bug_posts ba on ba.bp_parent = a.bp_id and ba.bp_bug = a.bp_bug
where a.bp_bug = 1
and a.bp_parent is null
 and a.bp_type <> 'update'
 order by a.bp_id desc, ba.bp_parent, ba.bp_id
2018-08-14 18:06:09 http://localhost:49412/print_bug.aspx?id=1 elapsed milliseconds:0000
2018-08-14 18:06:15 http://localhost:49412/search.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = 'bd854cb2-454f-467a-93b5-d9c3704ce424';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = 'bd854cb2-454f-467a-93b5-d9c3704ce424'
and us_active = 1
2018-08-14 18:06:15 http://localhost:49412/search.aspx elapsed milliseconds:0009
2018-08-14 18:06:15 http://localhost:49412/search.aspx sql=

/* get related users 2 */
select  pj_id, us_id,
case when 0 = 1 then
    case when len(isnull(us_firstname,'') + ' ' + isnull(us_lastname,'')) > 1
	then isnull(us_firstname,'') + ' ' + isnull(us_lastname,'')
    else us_username end
else us_username end us_username,
isnull(us_email,'') us_email
into #temp
from projects, users
where pj_id not in
(
	select pu_project from project_user_xref
	where pu_permission_level = 0 and pu_user = 1
)





if 0 = 1 -- external
and 2 = 0 -- other orgs
begin
	select distinct a.us_id, a.us_username, a.us_email
	from #temp a
	inner join users b on a.us_id = b.us_id
	inner join orgs on b.us_org = og_id
	where og_external_user = 0 or b.us_org = 1
	order by a.us_username
end
else
begin

	select distinct us_id, us_username, us_email
		from #temp
		left outer join project_user_xref on pj_id = pu_project
		and us_id = pu_user
		where isnull(pu_permission_level,2) <> 0
		order by us_username
end

drop table #temp
2018-08-14 18:06:15 http://localhost:49412/search.aspx elapsed milliseconds:0012
2018-08-14 18:06:15 http://localhost:49412/search.aspx sql=
/* drop downs */ select pj_id, pj_name from projects order by pj_name; select og_id, og_name from orgs order by og_name;
	select ct_id, ct_name from categories order by ct_sort_seq, ct_name;
	select pr_id, pr_name from priorities order by pr_sort_seq, pr_name;
	select st_id, st_name from statuses order by st_sort_seq, st_name;
	select udf_id, udf_name from user_defined_attribute order by udf_sort_seq, udf_name
2018-08-14 18:06:15 http://localhost:49412/search.aspx elapsed milliseconds:0002
2018-08-14 18:06:15 http://localhost:49412/search.aspx sql=

select count(1)
from projects
where isnull(pj_enable_custom_dropdown1,0) = 1
or isnull(pj_enable_custom_dropdown2,0) = 1
or isnull(pj_enable_custom_dropdown3,0) = 1
2018-08-14 18:06:19 http://localhost:49412/queries.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = 'bd854cb2-454f-467a-93b5-d9c3704ce424';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = 'bd854cb2-454f-467a-93b5-d9c3704ce424'
and us_active = 1
2018-08-14 18:06:19 http://localhost:49412/queries.aspx elapsed milliseconds:0000
2018-08-14 18:06:19 http://localhost:49412/queries.aspx sql=
select
			qu_desc [query],
			case
				when isnull(qu_user,0) = 0 and isnull(qu_org,0) is null then 'everybody'
				when isnull(qu_user,0) <> 0 then 'user:' + us_username
				when isnull(qu_org,0) <> 0 then 'org:' + og_name
				else ' '
				end [visibility],
			'<a href=bugs.aspx?qu_id=' + convert(varchar,qu_id) + '>view list</a>' [view list],
			'<a target=_blank href=print_bugs.aspx?qu_id=' + convert(varchar,qu_id) + '>print list</a>' [print list],
			'<a target=_blank href=print_bugs.aspx?format=excel&qu_id=' + convert(varchar,qu_id) + '>export as excel</a>' [export as excel],
			'<a target=_blank href=print_bugs2.aspx?qu_id=' + convert(varchar,qu_id) + '>print detail</a>' [print list<br>with detail],
			'<a href=edit_query.aspx?id=' + convert(varchar,qu_id) + '>edit</a>' [edit],
			'<a href=delete_query.aspx?id=' + convert(varchar,qu_id) + '>delete</a>' [delete],
			replace(convert(nvarchar(4000),qu_sql), char(10),'<br>') [sql]
			from queries
			left outer join users on qu_user = us_id
			left outer join orgs on qu_org = og_id
			where 1 = 0 /* all */
			or isnull(qu_user,0) = 1
			or isnull(qu_user,0) = 0
			order by qu_desc
2018-08-14 18:06:19 http://localhost:49412/queries.aspx elapsed milliseconds:0005
2018-08-14 18:06:21 http://localhost:49412/admin.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = 'bd854cb2-454f-467a-93b5-d9c3704ce424';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = 'bd854cb2-454f-467a-93b5-d9c3704ce424'
and us_active = 1
2018-08-14 18:06:21 http://localhost:49412/admin.aspx elapsed milliseconds:0000
2018-08-14 18:06:28 http://localhost:49412/users.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = 'bd854cb2-454f-467a-93b5-d9c3704ce424';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = 'bd854cb2-454f-467a-93b5-d9c3704ce424'
and us_active = 1
2018-08-14 18:06:28 http://localhost:49412/users.aspx elapsed milliseconds:0000
2018-08-14 18:06:28 http://localhost:49412/users.aspx sql=

			select distinct pu_user
			into #t
			from
			project_user_xref
			where pu_admin = 1;

			select u.us_id [id],
			'<a href=edit_user.aspx?id=' + convert(varchar,u.us_id) + '>edit</a>' [$no_sort_edit],
			'<a href=edit_user.aspx?copy=y&id=' + convert(varchar,u.us_id) + '>copy</a>' [$no_sort_add<br>like<br>this],
			'<a href=delete_user.aspx?id=' + convert(varchar,u.us_id) + '>delete</a>' [$no_sort_delete],

			u.us_username [username],
			isnull(u.us_firstname,'') + ' ' + isnull(u.us_lastname,'') [name],
			'<a sort=''' + og_name + ''' href=edit_org.aspx?id=' + convert(varchar,og_id) + '>' + og_name + '</a>' [org],
            isnull(u.us_email,'') [email],
			case when u.us_admin = 1 then 'Y' else 'N' end [admin],
			case when pu_user is null then 'N' else 'Y' end [project<br>admin],
			case when u.us_active = 1 then 'Y' else 'N' end [active],
			case when og_external_user = 1 then 'Y' else 'N' end [external],
			isnull(pj_name,'') [forced<br>project],
			isnull(qu_desc,'') [default query],
			case when u.us_enable_notifications = 1 then 'Y' else 'N' end [notif-<br>ications],
			u.us_most_recent_login_datetime [most recent login],
			u2.us_username [created<br>by]

			from users u
			inner join orgs on u.us_org = og_id
			left outer join queries on u.us_default_query = qu_id
			left outer join projects on u.us_forced_project = pj_id
			left outer join users u2 on u.us_created_user = u2.us_id
			left outer join #t on u.us_id = pu_user
			where u.us_active in (1 ,0)
			
			order by u.us_username;

			drop table #t
2018-08-14 18:06:28 http://localhost:49412/users.aspx elapsed milliseconds:0011
2018-08-14 18:06:29 http://localhost:49412/edit_user.aspx?id=4 sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = 'bd854cb2-454f-467a-93b5-d9c3704ce424';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = 'bd854cb2-454f-467a-93b5-d9c3704ce424'
and us_active = 1
2018-08-14 18:06:29 http://localhost:49412/edit_user.aspx?id=4 elapsed milliseconds:0000
2018-08-14 18:06:30 http://localhost:49412/edit_user.aspx?id=4 sql=

				select pj_id, pj_name,
				isnull(pu_permission_level,2) [pu_permission_level],
				isnull(pu_auto_subscribe,0) [pu_auto_subscribe],
				isnull(pu_admin,0) [pu_admin]
				from projects
				left outer join project_user_xref on pj_id = pu_project
				and pu_user = 4
				order by pj_name;/* populate query dropdown */
		    declare @org int
		    set @org = null
		    select @org = us_org from users where us_id = 4

			select qu_id, qu_desc
			from queries
			where (isnull(qu_user,0) = 0 and isnull(qu_org,0) = 0)
			or isnull(qu_user,0) = 4
			or isnull(qu_org,0) = isnull(@org,-1)
			order by qu_desc;/* populate org dropdown 1 */
				select og_id, og_name
				from orgs
				order by og_name;
			select
				us_username,
				isnull(us_firstname,'') [us_firstname],
				isnull(us_lastname,'') [us_lastname],
				isnull(us_bugs_per_page,10) [us_bugs_per_page],
				us_use_fckeditor,
				us_enable_bug_list_popups,
				isnull(us_email,'') [us_email],
				us_active,
				us_admin,
				us_enable_notifications,
				us_send_notifications_to_self,
                us_reported_notifications,
                us_assigned_notifications,
                us_subscribed_notifications,
				us_auto_subscribe,
				us_auto_subscribe_own_bugs,
				us_auto_subscribe_reported_bugs,
				us_default_query,
				us_org,
				isnull(us_signature,'') [us_signature],
				isnull(us_forced_project,0) [us_forced_project],
				us_created_user
				from users
				where us_id = 4
2018-08-14 18:06:30 http://localhost:49412/edit_user.aspx?id=4 elapsed milliseconds:0005

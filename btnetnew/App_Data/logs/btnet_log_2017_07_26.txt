2017-07-26 09:18:04  caught exception in util.set_context:Request is not available in this context
2017-07-26 09:18:04  threadproc_votes
2017-07-26 09:18:04  sql=

if exists (select * from dbo.sysobjects where id = object_id(N'[votes_view]'))
drop view [votes_view]
2017-07-26 09:18:04  started creating Lucene index using folder C:\Users\Oisiktekiner\Documents\Visual Studio 2017\Projects\btnetnew\btnetnew\App_Data\lucene_index
2017-07-26 09:18:04  sql=

/* get searchable cols */					
select sc.name
from syscolumns sc
inner join systypes st on st.xusertype = sc.xusertype
inner join sysobjects so on sc.id = so.id
where so.name = 'bugs'
and st.[name] <> 'sysname'
and sc.name not in ('rowguid',
'bg_id',
'bg_short_desc',
'bg_reported_user',
'bg_reported_date',
'bg_project',
'bg_org',
'bg_category',
'bg_priority',
'bg_status',
'bg_assigned_to_user',
'bg_last_updated_user',
'bg_last_updated_date',
'bg_user_defined_attribute',
'bg_project_custom_dropdown_value1',
'bg_project_custom_dropdown_value2',
'bg_project_custom_dropdown_value3',
'bg_tags')
and st.[name] in ('nvarchar','varchar')
and sc.length > 30
2017-07-26 09:18:04  sql=

create view votes_view as
select bu_bug as vote_bug, sum(bu_vote) as vote_total
from bug_user
group by bu_bug
having sum(bu_vote) > 0
2017-07-26 09:18:04  sql=

select bu_bug, count(1)
from bug_user 
where bu_vote = 1
group by bu_bug
2017-07-26 09:18:04  elapsed milliseconds:0050
2017-07-26 09:18:04  elapsed milliseconds:0215
2017-07-26 09:18:04  sql=

select bg_id, 	

isnull(bg_tags,'') bg_tags,
bg_short_desc
from bugs
2017-07-26 09:18:04  elapsed milliseconds:0002
2017-07-26 09:18:04  sql=

select bp_bug, bp_id, 
isnull(bp_comment_search,bp_comment) [text] 
from bug_posts 
where bp_type <> 'update'
and bp_hidden_from_external_users = 0
2017-07-26 09:18:04  elapsed milliseconds:0003
2017-07-26 09:18:04  done creating Lucene index
2017-07-26 09:18:13 http://localhost:49412/default.aspx sql=
select count(1) from users
2017-07-26 09:18:18 http://localhost:49412/default.aspx sql=
select count(1) from users
2017-07-26 09:18:18 http://localhost:49412/default.aspx sql=

select us_username, us_id, us_password, isnull(us_salt,0) us_salt, us_active
from users
where us_username = N'admin'
2017-07-26 09:18:18 http://localhost:49412/default.aspx elapsed milliseconds:0007
2017-07-26 09:18:18 http://localhost:49412/default.aspx sql=
update users set us_most_recent_login_datetime = getdate() where us_id = 1
2017-07-26 09:18:18 http://localhost:49412/default.aspx sql=
select us_id from users where us_username = N'admin'
2017-07-26 09:18:18 http://localhost:49412/default.aspx elapsed milliseconds:0001
2017-07-26 09:18:18 http://localhost:49412/default.aspx guid=f4820bc1-fd61-4ee5-b27b-1d6f729229dd
2017-07-26 09:18:18 http://localhost:49412/default.aspx sql=
insert into sessions (se_id, se_user) values('f4820bc1-fd61-4ee5-b27b-1d6f729229dd', 1)
2017-07-26 09:18:18 http://localhost:49412/default.aspx AppPath:
2017-07-26 09:18:18 http://localhost:49412/bugs.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = 'f4820bc1-fd61-4ee5-b27b-1d6f729229dd';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = 'f4820bc1-fd61-4ee5-b27b-1d6f729229dd'
and us_active = 1
2017-07-26 09:18:18 http://localhost:49412/bugs.aspx elapsed milliseconds:0018
2017-07-26 09:18:18 http://localhost:49412/bugs.aspx sql=

/* custom columns */ select sc.name, st.[name] [datatype], 
case when st.[name] = 'nvarchar' or st.[name] = 'nchar' then sc.length/2 else sc.length end as [length], 
sc.xprec, sc.xscale, sc.isnullable,
mm.text [default value], 
dflts.name [default name], 
isnull(ccm_dropdown_type,'') [dropdown type],
isnull(ccm_dropdown_vals,'') [vals],
isnull(ccm_sort_seq, sc.colorder) [column order],
sc.colorder
from syscolumns sc
inner join systypes st on st.xusertype = sc.xusertype
inner join sysobjects so on sc.id = so.id
left outer join syscomments mm on sc.cdefault = mm.id
left outer join custom_col_metadata on ccm_colorder = sc.colorder
left outer join sysobjects dflts on dflts.id = mm.id
where so.name = 'bugs'
and st.[name] <> 'sysname'
and sc.name not in ('rowguid',
'bg_id',
'bg_short_desc',
'bg_reported_user',
'bg_reported_date',
'bg_project',
'bg_org',
'bg_category',
'bg_priority',
'bg_status',
'bg_assigned_to_user',
'bg_last_updated_user',
'bg_last_updated_date',
'bg_user_defined_attribute',
'bg_project_custom_dropdown_value1',
'bg_project_custom_dropdown_value2',
'bg_project_custom_dropdown_value3',
'bg_tags')
order by sc.id, isnull(ccm_sort_seq,sc.colorder)
2017-07-26 09:18:18 http://localhost:49412/bugs.aspx elapsed milliseconds:0204
2017-07-26 09:18:18 http://localhost:49412/bugs.aspx sql=
/* query dropdown */
select qu_id, qu_desc
from queries
where (isnull(qu_user,0) = 0 and isnull(qu_org,0) = 0)
or isnull(qu_user,0) = 1
or isnull(qu_org,0) = 1
order by qu_desc
2017-07-26 09:18:18 http://localhost:49412/bugs.aspx elapsed milliseconds:0004
2017-07-26 09:18:18 http://localhost:49412/bugs.aspx sql=
select qu_id, qu_sql from queries where qu_id in
			(select us_default_query from users where us_id = 1)
2017-07-26 09:18:18 http://localhost:49412/bugs.aspx elapsed milliseconds:0004
2017-07-26 09:18:18 http://localhost:49412/bugs.aspx sql=
select isnull(pr_background_color,'#ffffff'), bg_id [id], isnull(bu_flag,0) [$FLAG], 
 bg_short_desc [desc], isnull(pj_name,'') [project], isnull(og_name,'') [organization], isnull(ct_name,'') [category], rpt.us_username [reported by],
 bg_reported_date [reported on], isnull(pr_name,'') [priority], isnull(asg.us_username,'') [assigned to],
 isnull(st_name,'') [status], isnull(lu.us_username,'') [last updated by], bg_last_updated_date [last updated on]
 from bugs 
 left outer join bug_user on bu_bug = bg_id and bu_user = 1 
 left outer join users rpt on rpt.us_id = bg_reported_user
 left outer join users asg on asg.us_id = bg_assigned_to_user
 left outer join users lu on lu.us_id = bg_last_updated_user
 left outer join projects on pj_id = bg_project
 left outer join orgs on og_id = bg_org
 left outer join categories on ct_id = bg_category
 left outer join priorities on pr_id = bg_priority
 left outer join statuses on st_id = bg_status
  /* altered - just order by  */ WHERE  (bugs.bg_project not in (
					select pu_project
					from project_user_xref
					where pu_user = 1
					and pu_permission_level = 0)) order by bg_id desc
2017-07-26 09:18:18 http://localhost:49412/bugs.aspx elapsed milliseconds:0016
2017-07-26 09:22:22 http://localhost:49412/bugs.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = 'f4820bc1-fd61-4ee5-b27b-1d6f729229dd';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = 'f4820bc1-fd61-4ee5-b27b-1d6f729229dd'
and us_active = 1
2017-07-26 09:22:22 http://localhost:49412/bugs.aspx elapsed milliseconds:0002
2017-07-26 09:22:22 http://localhost:49412/bugs.aspx sql=
/* query dropdown */
select qu_id, qu_desc
from queries
where (isnull(qu_user,0) = 0 and isnull(qu_org,0) = 0)
or isnull(qu_user,0) = 1
or isnull(qu_org,0) = 1
order by qu_desc
2017-07-26 09:22:22 http://localhost:49412/bugs.aspx elapsed milliseconds:0000
2017-07-26 09:22:22 http://localhost:49412/bugs.aspx sql=
select qu_sql from queries where qu_id = 1
2017-07-26 09:22:22 http://localhost:49412/bugs.aspx sql=
select isnull(pr_background_color,'#ffffff'), bg_id [id], isnull(bu_flag,0) [$FLAG], 
 bg_short_desc [desc], isnull(pj_name,'') [project], isnull(og_name,'') [organization], isnull(ct_name,'') [category], rpt.us_username [reported by],
 bg_reported_date [reported on], isnull(pr_name,'') [priority], isnull(asg.us_username,'') [assigned to],
 isnull(st_name,'') [status], isnull(lu.us_username,'') [last updated by], bg_last_updated_date [last updated on]
 from bugs 
 left outer join bug_user on bu_bug = bg_id and bu_user = 1 
 left outer join users rpt on rpt.us_id = bg_reported_user
 left outer join users asg on asg.us_id = bg_assigned_to_user
 left outer join users lu on lu.us_id = bg_last_updated_user
 left outer join projects on pj_id = bg_project
 left outer join orgs on og_id = bg_org
 left outer join categories on ct_id = bg_category
 left outer join priorities on pr_id = bg_priority
 left outer join statuses on st_id = bg_status
  /* altered - just order by  */ WHERE  (bugs.bg_project not in (
					select pu_project
					from project_user_xref
					where pu_user = 1
					and pu_permission_level = 0)) order by bg_id desc
2017-07-26 09:22:22 http://localhost:49412/bugs.aspx elapsed milliseconds:0000
2017-07-26 09:37:05 http://localhost:49412/bugs.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = 'f4820bc1-fd61-4ee5-b27b-1d6f729229dd';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = 'f4820bc1-fd61-4ee5-b27b-1d6f729229dd'
and us_active = 1
2017-07-26 09:37:05 http://localhost:49412/bugs.aspx elapsed milliseconds:0000
2017-07-26 09:37:05 http://localhost:49412/bugs.aspx sql=
/* query dropdown */
select qu_id, qu_desc
from queries
where (isnull(qu_user,0) = 0 and isnull(qu_org,0) = 0)
or isnull(qu_user,0) = 1
or isnull(qu_org,0) = 1
order by qu_desc
2017-07-26 09:37:05 http://localhost:49412/bugs.aspx elapsed milliseconds:0000
2017-07-26 09:37:05 http://localhost:49412/bugs.aspx sql=
select qu_sql from queries where qu_id = 1
2017-07-26 09:37:05 http://localhost:49412/bugs.aspx sql=
select isnull(pr_background_color,'#ffffff'), bg_id [id], isnull(bu_flag,0) [$FLAG], 
 bg_short_desc [desc], isnull(pj_name,'') [project], isnull(og_name,'') [organization], isnull(ct_name,'') [category], rpt.us_username [reported by],
 bg_reported_date [reported on], isnull(pr_name,'') [priority], isnull(asg.us_username,'') [assigned to],
 isnull(st_name,'') [status], isnull(lu.us_username,'') [last updated by], bg_last_updated_date [last updated on]
 from bugs 
 left outer join bug_user on bu_bug = bg_id and bu_user = 1 
 left outer join users rpt on rpt.us_id = bg_reported_user
 left outer join users asg on asg.us_id = bg_assigned_to_user
 left outer join users lu on lu.us_id = bg_last_updated_user
 left outer join projects on pj_id = bg_project
 left outer join orgs on og_id = bg_org
 left outer join categories on ct_id = bg_category
 left outer join priorities on pr_id = bg_priority
 left outer join statuses on st_id = bg_status
  /* altered - just order by  */ WHERE  (bugs.bg_project not in (
					select pu_project
					from project_user_xref
					where pu_user = 1
					and pu_permission_level = 0)) order by bg_id desc
2017-07-26 09:37:05 http://localhost:49412/bugs.aspx elapsed milliseconds:0000
2017-07-26 09:41:05 http://localhost:49412/bugs.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = 'f4820bc1-fd61-4ee5-b27b-1d6f729229dd';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = 'f4820bc1-fd61-4ee5-b27b-1d6f729229dd'
and us_active = 1
2017-07-26 09:41:05 http://localhost:49412/bugs.aspx elapsed milliseconds:0000
2017-07-26 09:41:05 http://localhost:49412/bugs.aspx sql=
/* query dropdown */
select qu_id, qu_desc
from queries
where (isnull(qu_user,0) = 0 and isnull(qu_org,0) = 0)
or isnull(qu_user,0) = 1
or isnull(qu_org,0) = 1
order by qu_desc
2017-07-26 09:41:05 http://localhost:49412/bugs.aspx elapsed milliseconds:0000
2017-07-26 09:41:05 http://localhost:49412/bugs.aspx sql=
select qu_sql from queries where qu_id = 1
2017-07-26 09:41:05 http://localhost:49412/bugs.aspx sql=
select isnull(pr_background_color,'#ffffff'), bg_id [id], isnull(bu_flag,0) [$FLAG], 
 bg_short_desc [desc], isnull(pj_name,'') [project], isnull(og_name,'') [organization], isnull(ct_name,'') [category], rpt.us_username [reported by],
 bg_reported_date [reported on], isnull(pr_name,'') [priority], isnull(asg.us_username,'') [assigned to],
 isnull(st_name,'') [status], isnull(lu.us_username,'') [last updated by], bg_last_updated_date [last updated on]
 from bugs 
 left outer join bug_user on bu_bug = bg_id and bu_user = 1 
 left outer join users rpt on rpt.us_id = bg_reported_user
 left outer join users asg on asg.us_id = bg_assigned_to_user
 left outer join users lu on lu.us_id = bg_last_updated_user
 left outer join projects on pj_id = bg_project
 left outer join orgs on og_id = bg_org
 left outer join categories on ct_id = bg_category
 left outer join priorities on pr_id = bg_priority
 left outer join statuses on st_id = bg_status
  /* altered - just order by  */ WHERE  (bugs.bg_project not in (
					select pu_project
					from project_user_xref
					where pu_user = 1
					and pu_permission_level = 0)) order by bg_id desc
2017-07-26 09:41:05 http://localhost:49412/bugs.aspx elapsed milliseconds:0000
2017-07-26 09:54:34 http://localhost:49412/bugs.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = 'f4820bc1-fd61-4ee5-b27b-1d6f729229dd';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = 'f4820bc1-fd61-4ee5-b27b-1d6f729229dd'
and us_active = 1
2017-07-26 09:54:34 http://localhost:49412/bugs.aspx elapsed milliseconds:0000
2017-07-26 09:54:34 http://localhost:49412/bugs.aspx sql=
/* query dropdown */
select qu_id, qu_desc
from queries
where (isnull(qu_user,0) = 0 and isnull(qu_org,0) = 0)
or isnull(qu_user,0) = 1
or isnull(qu_org,0) = 1
order by qu_desc
2017-07-26 09:54:34 http://localhost:49412/bugs.aspx elapsed milliseconds:0000
2017-07-26 09:54:34 http://localhost:49412/bugs.aspx sql=
select qu_sql from queries where qu_id = 1
2017-07-26 09:54:34 http://localhost:49412/bugs.aspx sql=
select isnull(pr_background_color,'#ffffff'), bg_id [id], isnull(bu_flag,0) [$FLAG], 
 bg_short_desc [desc], isnull(pj_name,'') [project], isnull(og_name,'') [organization], isnull(ct_name,'') [category], rpt.us_username [reported by],
 bg_reported_date [reported on], isnull(pr_name,'') [priority], isnull(asg.us_username,'') [assigned to],
 isnull(st_name,'') [status], isnull(lu.us_username,'') [last updated by], bg_last_updated_date [last updated on]
 from bugs 
 left outer join bug_user on bu_bug = bg_id and bu_user = 1 
 left outer join users rpt on rpt.us_id = bg_reported_user
 left outer join users asg on asg.us_id = bg_assigned_to_user
 left outer join users lu on lu.us_id = bg_last_updated_user
 left outer join projects on pj_id = bg_project
 left outer join orgs on og_id = bg_org
 left outer join categories on ct_id = bg_category
 left outer join priorities on pr_id = bg_priority
 left outer join statuses on st_id = bg_status
  /* altered - just order by  */ WHERE  (bugs.bg_project not in (
					select pu_project
					from project_user_xref
					where pu_user = 1
					and pu_permission_level = 0)) order by bg_id desc
2017-07-26 09:54:34 http://localhost:49412/bugs.aspx elapsed milliseconds:0000
2017-07-26 09:57:16 http://localhost:49412/bugs.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = 'f4820bc1-fd61-4ee5-b27b-1d6f729229dd';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = 'f4820bc1-fd61-4ee5-b27b-1d6f729229dd'
and us_active = 1
2017-07-26 09:57:16 http://localhost:49412/bugs.aspx elapsed milliseconds:0000
2017-07-26 09:57:16 http://localhost:49412/bugs.aspx sql=
/* query dropdown */
select qu_id, qu_desc
from queries
where (isnull(qu_user,0) = 0 and isnull(qu_org,0) = 0)
or isnull(qu_user,0) = 1
or isnull(qu_org,0) = 1
order by qu_desc
2017-07-26 09:57:16 http://localhost:49412/bugs.aspx elapsed milliseconds:0000
2017-07-26 09:57:16 http://localhost:49412/bugs.aspx sql=
select qu_sql from queries where qu_id = 1
2017-07-26 09:57:16 http://localhost:49412/bugs.aspx sql=
select isnull(pr_background_color,'#ffffff'), bg_id [id], isnull(bu_flag,0) [$FLAG], 
 bg_short_desc [desc], isnull(pj_name,'') [project], isnull(og_name,'') [organization], isnull(ct_name,'') [category], rpt.us_username [reported by],
 bg_reported_date [reported on], isnull(pr_name,'') [priority], isnull(asg.us_username,'') [assigned to],
 isnull(st_name,'') [status], isnull(lu.us_username,'') [last updated by], bg_last_updated_date [last updated on]
 from bugs 
 left outer join bug_user on bu_bug = bg_id and bu_user = 1 
 left outer join users rpt on rpt.us_id = bg_reported_user
 left outer join users asg on asg.us_id = bg_assigned_to_user
 left outer join users lu on lu.us_id = bg_last_updated_user
 left outer join projects on pj_id = bg_project
 left outer join orgs on og_id = bg_org
 left outer join categories on ct_id = bg_category
 left outer join priorities on pr_id = bg_priority
 left outer join statuses on st_id = bg_status
  /* altered - just order by  */ WHERE  (bugs.bg_project not in (
					select pu_project
					from project_user_xref
					where pu_user = 1
					and pu_permission_level = 0)) order by bg_id desc
2017-07-26 09:57:16 http://localhost:49412/bugs.aspx elapsed milliseconds:0000
2017-07-26 10:10:52 http://localhost:49412/bugs.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = 'f4820bc1-fd61-4ee5-b27b-1d6f729229dd';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = 'f4820bc1-fd61-4ee5-b27b-1d6f729229dd'
and us_active = 1
2017-07-26 10:10:52 http://localhost:49412/bugs.aspx elapsed milliseconds:0000
2017-07-26 10:10:52 http://localhost:49412/bugs.aspx sql=
/* query dropdown */
select qu_id, qu_desc
from queries
where (isnull(qu_user,0) = 0 and isnull(qu_org,0) = 0)
or isnull(qu_user,0) = 1
or isnull(qu_org,0) = 1
order by qu_desc
2017-07-26 10:10:52 http://localhost:49412/bugs.aspx elapsed milliseconds:0000
2017-07-26 10:10:52 http://localhost:49412/bugs.aspx sql=
select qu_sql from queries where qu_id = 1
2017-07-26 10:10:52 http://localhost:49412/bugs.aspx sql=
select isnull(pr_background_color,'#ffffff'), bg_id [id], isnull(bu_flag,0) [$FLAG], 
 bg_short_desc [desc], isnull(pj_name,'') [project], isnull(og_name,'') [organization], isnull(ct_name,'') [category], rpt.us_username [reported by],
 bg_reported_date [reported on], isnull(pr_name,'') [priority], isnull(asg.us_username,'') [assigned to],
 isnull(st_name,'') [status], isnull(lu.us_username,'') [last updated by], bg_last_updated_date [last updated on]
 from bugs 
 left outer join bug_user on bu_bug = bg_id and bu_user = 1 
 left outer join users rpt on rpt.us_id = bg_reported_user
 left outer join users asg on asg.us_id = bg_assigned_to_user
 left outer join users lu on lu.us_id = bg_last_updated_user
 left outer join projects on pj_id = bg_project
 left outer join orgs on og_id = bg_org
 left outer join categories on ct_id = bg_category
 left outer join priorities on pr_id = bg_priority
 left outer join statuses on st_id = bg_status
  /* altered - just order by  */ WHERE  (bugs.bg_project not in (
					select pu_project
					from project_user_xref
					where pu_user = 1
					and pu_permission_level = 0)) order by bg_id desc
2017-07-26 10:10:52 http://localhost:49412/bugs.aspx elapsed milliseconds:0000
2017-07-26 13:17:53 http://localhost:49412/bugs.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = 'f4820bc1-fd61-4ee5-b27b-1d6f729229dd';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = 'f4820bc1-fd61-4ee5-b27b-1d6f729229dd'
and us_active = 1
2017-07-26 13:17:53 http://localhost:49412/bugs.aspx elapsed milliseconds:0000
2017-07-26 13:17:53 http://localhost:49412/bugs.aspx sql=
/* query dropdown */
select qu_id, qu_desc
from queries
where (isnull(qu_user,0) = 0 and isnull(qu_org,0) = 0)
or isnull(qu_user,0) = 1
or isnull(qu_org,0) = 1
order by qu_desc
2017-07-26 13:17:53 http://localhost:49412/bugs.aspx elapsed milliseconds:0000
2017-07-26 13:17:53 http://localhost:49412/bugs.aspx sql=
select qu_id, qu_sql from queries where qu_id in
			(select us_default_query from users where us_id = 1)
2017-07-26 13:17:53 http://localhost:49412/bugs.aspx elapsed milliseconds:0000
2017-07-26 13:17:53 http://localhost:49412/bugs.aspx sql=
select isnull(pr_background_color,'#ffffff'), bg_id [id], isnull(bu_flag,0) [$FLAG], 
 bg_short_desc [desc], isnull(pj_name,'') [project], isnull(og_name,'') [organization], isnull(ct_name,'') [category], rpt.us_username [reported by],
 bg_reported_date [reported on], isnull(pr_name,'') [priority], isnull(asg.us_username,'') [assigned to],
 isnull(st_name,'') [status], isnull(lu.us_username,'') [last updated by], bg_last_updated_date [last updated on]
 from bugs 
 left outer join bug_user on bu_bug = bg_id and bu_user = 1 
 left outer join users rpt on rpt.us_id = bg_reported_user
 left outer join users asg on asg.us_id = bg_assigned_to_user
 left outer join users lu on lu.us_id = bg_last_updated_user
 left outer join projects on pj_id = bg_project
 left outer join orgs on og_id = bg_org
 left outer join categories on ct_id = bg_category
 left outer join priorities on pr_id = bg_priority
 left outer join statuses on st_id = bg_status
  /* altered - just order by  */ WHERE  (bugs.bg_project not in (
					select pu_project
					from project_user_xref
					where pu_user = 1
					and pu_permission_level = 0)) order by bg_id desc
2017-07-26 13:17:53 http://localhost:49412/bugs.aspx elapsed milliseconds:0000
2017-07-26 13:18:52 http://localhost:49412/bugs.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = 'f4820bc1-fd61-4ee5-b27b-1d6f729229dd';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = 'f4820bc1-fd61-4ee5-b27b-1d6f729229dd'
and us_active = 1
2017-07-26 13:18:52 http://localhost:49412/bugs.aspx elapsed milliseconds:0001
2017-07-26 13:18:52 http://localhost:49412/bugs.aspx sql=
/* query dropdown */
select qu_id, qu_desc
from queries
where (isnull(qu_user,0) = 0 and isnull(qu_org,0) = 0)
or isnull(qu_user,0) = 1
or isnull(qu_org,0) = 1
order by qu_desc
2017-07-26 13:18:52 http://localhost:49412/bugs.aspx elapsed milliseconds:0000
2017-07-26 13:18:52 http://localhost:49412/bugs.aspx sql=
select qu_sql from queries where qu_id = 1
2017-07-26 13:18:52 http://localhost:49412/bugs.aspx sql=
select isnull(pr_background_color,'#ffffff'), bg_id [id], isnull(bu_flag,0) [$FLAG], 
 bg_short_desc [desc], isnull(pj_name,'') [project], isnull(og_name,'') [organization], isnull(ct_name,'') [category], rpt.us_username [reported by],
 bg_reported_date [reported on], isnull(pr_name,'') [priority], isnull(asg.us_username,'') [assigned to],
 isnull(st_name,'') [status], isnull(lu.us_username,'') [last updated by], bg_last_updated_date [last updated on]
 from bugs 
 left outer join bug_user on bu_bug = bg_id and bu_user = 1 
 left outer join users rpt on rpt.us_id = bg_reported_user
 left outer join users asg on asg.us_id = bg_assigned_to_user
 left outer join users lu on lu.us_id = bg_last_updated_user
 left outer join projects on pj_id = bg_project
 left outer join orgs on og_id = bg_org
 left outer join categories on ct_id = bg_category
 left outer join priorities on pr_id = bg_priority
 left outer join statuses on st_id = bg_status
  /* altered - just order by  */ WHERE  (bugs.bg_project not in (
					select pu_project
					from project_user_xref
					where pu_user = 1
					and pu_permission_level = 0)) order by bg_id desc
2017-07-26 13:18:52 http://localhost:49412/bugs.aspx elapsed milliseconds:0000
2017-07-26 13:22:49 http://localhost:49412/bugs.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = 'f4820bc1-fd61-4ee5-b27b-1d6f729229dd';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = 'f4820bc1-fd61-4ee5-b27b-1d6f729229dd'
and us_active = 1
2017-07-26 13:22:49 http://localhost:49412/bugs.aspx elapsed milliseconds:0000
2017-07-26 13:22:49 http://localhost:49412/bugs.aspx sql=
/* query dropdown */
select qu_id, qu_desc
from queries
where (isnull(qu_user,0) = 0 and isnull(qu_org,0) = 0)
or isnull(qu_user,0) = 1
or isnull(qu_org,0) = 1
order by qu_desc
2017-07-26 13:22:49 http://localhost:49412/bugs.aspx elapsed milliseconds:0000
2017-07-26 13:22:49 http://localhost:49412/bugs.aspx sql=
select qu_sql from queries where qu_id = 1
2017-07-26 13:22:49 http://localhost:49412/bugs.aspx sql=
select isnull(pr_background_color,'#ffffff'), bg_id [id], isnull(bu_flag,0) [$FLAG], 
 bg_short_desc [desc], isnull(pj_name,'') [project], isnull(og_name,'') [organization], isnull(ct_name,'') [category], rpt.us_username [reported by],
 bg_reported_date [reported on], isnull(pr_name,'') [priority], isnull(asg.us_username,'') [assigned to],
 isnull(st_name,'') [status], isnull(lu.us_username,'') [last updated by], bg_last_updated_date [last updated on]
 from bugs 
 left outer join bug_user on bu_bug = bg_id and bu_user = 1 
 left outer join users rpt on rpt.us_id = bg_reported_user
 left outer join users asg on asg.us_id = bg_assigned_to_user
 left outer join users lu on lu.us_id = bg_last_updated_user
 left outer join projects on pj_id = bg_project
 left outer join orgs on og_id = bg_org
 left outer join categories on ct_id = bg_category
 left outer join priorities on pr_id = bg_priority
 left outer join statuses on st_id = bg_status
  /* altered - just order by  */ WHERE  (bugs.bg_project not in (
					select pu_project
					from project_user_xref
					where pu_user = 1
					and pu_permission_level = 0)) order by bg_id desc
2017-07-26 13:22:49 http://localhost:49412/bugs.aspx elapsed milliseconds:0000
2017-07-26 13:23:25 http://localhost:49412/bugs.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = 'f4820bc1-fd61-4ee5-b27b-1d6f729229dd';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = 'f4820bc1-fd61-4ee5-b27b-1d6f729229dd'
and us_active = 1
2017-07-26 13:23:25 http://localhost:49412/bugs.aspx elapsed milliseconds:0000
2017-07-26 13:23:26 http://localhost:49412/bugs.aspx sql=
/* query dropdown */
select qu_id, qu_desc
from queries
where (isnull(qu_user,0) = 0 and isnull(qu_org,0) = 0)
or isnull(qu_user,0) = 1
or isnull(qu_org,0) = 1
order by qu_desc
2017-07-26 13:23:26 http://localhost:49412/bugs.aspx elapsed milliseconds:0000
2017-07-26 13:23:26 http://localhost:49412/bugs.aspx sql=
select qu_sql from queries where qu_id = 1
2017-07-26 13:23:26 http://localhost:49412/bugs.aspx sql=
select isnull(pr_background_color,'#ffffff'), bg_id [id], isnull(bu_flag,0) [$FLAG], 
 bg_short_desc [desc], isnull(pj_name,'') [project], isnull(og_name,'') [organization], isnull(ct_name,'') [category], rpt.us_username [reported by],
 bg_reported_date [reported on], isnull(pr_name,'') [priority], isnull(asg.us_username,'') [assigned to],
 isnull(st_name,'') [status], isnull(lu.us_username,'') [last updated by], bg_last_updated_date [last updated on]
 from bugs 
 left outer join bug_user on bu_bug = bg_id and bu_user = 1 
 left outer join users rpt on rpt.us_id = bg_reported_user
 left outer join users asg on asg.us_id = bg_assigned_to_user
 left outer join users lu on lu.us_id = bg_last_updated_user
 left outer join projects on pj_id = bg_project
 left outer join orgs on og_id = bg_org
 left outer join categories on ct_id = bg_category
 left outer join priorities on pr_id = bg_priority
 left outer join statuses on st_id = bg_status
  /* altered - just order by  */ WHERE  (bugs.bg_project not in (
					select pu_project
					from project_user_xref
					where pu_user = 1
					and pu_permission_level = 0)) order by bg_id desc
2017-07-26 13:23:26 http://localhost:49412/bugs.aspx elapsed milliseconds:0000
2017-07-26 13:24:50 http://localhost:49412/bugs.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = 'f4820bc1-fd61-4ee5-b27b-1d6f729229dd';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = 'f4820bc1-fd61-4ee5-b27b-1d6f729229dd'
and us_active = 1
2017-07-26 13:24:50 http://localhost:49412/bugs.aspx elapsed milliseconds:0000
2017-07-26 13:24:50 http://localhost:49412/bugs.aspx sql=
/* query dropdown */
select qu_id, qu_desc
from queries
where (isnull(qu_user,0) = 0 and isnull(qu_org,0) = 0)
or isnull(qu_user,0) = 1
or isnull(qu_org,0) = 1
order by qu_desc
2017-07-26 13:24:50 http://localhost:49412/bugs.aspx elapsed milliseconds:0000
2017-07-26 13:24:50 http://localhost:49412/bugs.aspx sql=
select qu_sql from queries where qu_id = 1
2017-07-26 13:24:50 http://localhost:49412/bugs.aspx sql=
select isnull(pr_background_color,'#ffffff'), bg_id [id], isnull(bu_flag,0) [$FLAG], 
 bg_short_desc [desc], isnull(pj_name,'') [project], isnull(og_name,'') [organization], isnull(ct_name,'') [category], rpt.us_username [reported by],
 bg_reported_date [reported on], isnull(pr_name,'') [priority], isnull(asg.us_username,'') [assigned to],
 isnull(st_name,'') [status], isnull(lu.us_username,'') [last updated by], bg_last_updated_date [last updated on]
 from bugs 
 left outer join bug_user on bu_bug = bg_id and bu_user = 1 
 left outer join users rpt on rpt.us_id = bg_reported_user
 left outer join users asg on asg.us_id = bg_assigned_to_user
 left outer join users lu on lu.us_id = bg_last_updated_user
 left outer join projects on pj_id = bg_project
 left outer join orgs on og_id = bg_org
 left outer join categories on ct_id = bg_category
 left outer join priorities on pr_id = bg_priority
 left outer join statuses on st_id = bg_status
  /* altered - just order by  */ WHERE  (bugs.bg_project not in (
					select pu_project
					from project_user_xref
					where pu_user = 1
					and pu_permission_level = 0)) order by bg_id desc
2017-07-26 13:24:50 http://localhost:49412/bugs.aspx elapsed milliseconds:0000
2017-07-26 13:36:01 http://localhost:49412/bugs.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = 'f4820bc1-fd61-4ee5-b27b-1d6f729229dd';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = 'f4820bc1-fd61-4ee5-b27b-1d6f729229dd'
and us_active = 1
2017-07-26 13:36:01 http://localhost:49412/bugs.aspx elapsed milliseconds:0000
2017-07-26 13:36:01 http://localhost:49412/bugs.aspx sql=
/* query dropdown */
select qu_id, qu_desc
from queries
where (isnull(qu_user,0) = 0 and isnull(qu_org,0) = 0)
or isnull(qu_user,0) = 1
or isnull(qu_org,0) = 1
order by qu_desc
2017-07-26 13:36:01 http://localhost:49412/bugs.aspx elapsed milliseconds:0000
2017-07-26 13:36:01 http://localhost:49412/bugs.aspx sql=
select qu_sql from queries where qu_id = 1
2017-07-26 13:36:01 http://localhost:49412/bugs.aspx sql=
select isnull(pr_background_color,'#ffffff'), bg_id [id], isnull(bu_flag,0) [$FLAG], 
 bg_short_desc [desc], isnull(pj_name,'') [project], isnull(og_name,'') [organization], isnull(ct_name,'') [category], rpt.us_username [reported by],
 bg_reported_date [reported on], isnull(pr_name,'') [priority], isnull(asg.us_username,'') [assigned to],
 isnull(st_name,'') [status], isnull(lu.us_username,'') [last updated by], bg_last_updated_date [last updated on]
 from bugs 
 left outer join bug_user on bu_bug = bg_id and bu_user = 1 
 left outer join users rpt on rpt.us_id = bg_reported_user
 left outer join users asg on asg.us_id = bg_assigned_to_user
 left outer join users lu on lu.us_id = bg_last_updated_user
 left outer join projects on pj_id = bg_project
 left outer join orgs on og_id = bg_org
 left outer join categories on ct_id = bg_category
 left outer join priorities on pr_id = bg_priority
 left outer join statuses on st_id = bg_status
  /* altered - just order by  */ WHERE  (bugs.bg_project not in (
					select pu_project
					from project_user_xref
					where pu_user = 1
					and pu_permission_level = 0)) order by bg_id desc
2017-07-26 13:36:01 http://localhost:49412/bugs.aspx elapsed milliseconds:0000
2017-07-26 13:36:48 http://localhost:49412/bugs.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = 'f4820bc1-fd61-4ee5-b27b-1d6f729229dd';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = 'f4820bc1-fd61-4ee5-b27b-1d6f729229dd'
and us_active = 1
2017-07-26 13:36:48 http://localhost:49412/bugs.aspx elapsed milliseconds:0000
2017-07-26 13:36:48 http://localhost:49412/bugs.aspx sql=
/* query dropdown */
select qu_id, qu_desc
from queries
where (isnull(qu_user,0) = 0 and isnull(qu_org,0) = 0)
or isnull(qu_user,0) = 1
or isnull(qu_org,0) = 1
order by qu_desc
2017-07-26 13:36:48 http://localhost:49412/bugs.aspx elapsed milliseconds:0000
2017-07-26 13:36:48 http://localhost:49412/bugs.aspx sql=
select qu_sql from queries where qu_id = 1
2017-07-26 13:36:48 http://localhost:49412/bugs.aspx sql=
select isnull(pr_background_color,'#ffffff'), bg_id [id], isnull(bu_flag,0) [$FLAG], 
 bg_short_desc [desc], isnull(pj_name,'') [project], isnull(og_name,'') [organization], isnull(ct_name,'') [category], rpt.us_username [reported by],
 bg_reported_date [reported on], isnull(pr_name,'') [priority], isnull(asg.us_username,'') [assigned to],
 isnull(st_name,'') [status], isnull(lu.us_username,'') [last updated by], bg_last_updated_date [last updated on]
 from bugs 
 left outer join bug_user on bu_bug = bg_id and bu_user = 1 
 left outer join users rpt on rpt.us_id = bg_reported_user
 left outer join users asg on asg.us_id = bg_assigned_to_user
 left outer join users lu on lu.us_id = bg_last_updated_user
 left outer join projects on pj_id = bg_project
 left outer join orgs on og_id = bg_org
 left outer join categories on ct_id = bg_category
 left outer join priorities on pr_id = bg_priority
 left outer join statuses on st_id = bg_status
  /* altered - just order by  */ WHERE  (bugs.bg_project not in (
					select pu_project
					from project_user_xref
					where pu_user = 1
					and pu_permission_level = 0)) order by bg_id desc
2017-07-26 13:36:48 http://localhost:49412/bugs.aspx elapsed milliseconds:0000
2017-07-26 13:37:15 http://localhost:49412/bugs.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = 'f4820bc1-fd61-4ee5-b27b-1d6f729229dd';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = 'f4820bc1-fd61-4ee5-b27b-1d6f729229dd'
and us_active = 1
2017-07-26 13:37:15 http://localhost:49412/bugs.aspx elapsed milliseconds:0000
2017-07-26 13:37:15 http://localhost:49412/bugs.aspx sql=
/* query dropdown */
select qu_id, qu_desc
from queries
where (isnull(qu_user,0) = 0 and isnull(qu_org,0) = 0)
or isnull(qu_user,0) = 1
or isnull(qu_org,0) = 1
order by qu_desc
2017-07-26 13:37:15 http://localhost:49412/bugs.aspx elapsed milliseconds:0000
2017-07-26 13:37:15 http://localhost:49412/bugs.aspx sql=
select qu_sql from queries where qu_id = 1
2017-07-26 13:37:15 http://localhost:49412/bugs.aspx sql=
select isnull(pr_background_color,'#ffffff'), bg_id [id], isnull(bu_flag,0) [$FLAG], 
 bg_short_desc [desc], isnull(pj_name,'') [project], isnull(og_name,'') [organization], isnull(ct_name,'') [category], rpt.us_username [reported by],
 bg_reported_date [reported on], isnull(pr_name,'') [priority], isnull(asg.us_username,'') [assigned to],
 isnull(st_name,'') [status], isnull(lu.us_username,'') [last updated by], bg_last_updated_date [last updated on]
 from bugs 
 left outer join bug_user on bu_bug = bg_id and bu_user = 1 
 left outer join users rpt on rpt.us_id = bg_reported_user
 left outer join users asg on asg.us_id = bg_assigned_to_user
 left outer join users lu on lu.us_id = bg_last_updated_user
 left outer join projects on pj_id = bg_project
 left outer join orgs on og_id = bg_org
 left outer join categories on ct_id = bg_category
 left outer join priorities on pr_id = bg_priority
 left outer join statuses on st_id = bg_status
  /* altered - just order by  */ WHERE  (bugs.bg_project not in (
					select pu_project
					from project_user_xref
					where pu_user = 1
					and pu_permission_level = 0)) order by bg_id desc
2017-07-26 13:37:15 http://localhost:49412/bugs.aspx elapsed milliseconds:0000
2017-07-26 13:40:41 http://localhost:49412/search_text.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = 'f4820bc1-fd61-4ee5-b27b-1d6f729229dd';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = 'f4820bc1-fd61-4ee5-b27b-1d6f729229dd'
and us_active = 1
2017-07-26 13:40:41 http://localhost:49412/search_text.aspx elapsed milliseconds:0000
2017-07-26 13:40:45 http://localhost:49412/bugs.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = 'f4820bc1-fd61-4ee5-b27b-1d6f729229dd';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = 'f4820bc1-fd61-4ee5-b27b-1d6f729229dd'
and us_active = 1
2017-07-26 13:40:45 http://localhost:49412/bugs.aspx elapsed milliseconds:0000
2017-07-26 13:40:45 http://localhost:49412/bugs.aspx sql=
/* query dropdown */
select qu_id, qu_desc
from queries
where (isnull(qu_user,0) = 0 and isnull(qu_org,0) = 0)
or isnull(qu_user,0) = 1
or isnull(qu_org,0) = 1
order by qu_desc
2017-07-26 13:40:45 http://localhost:49412/bugs.aspx elapsed milliseconds:0000
2017-07-26 13:40:45 http://localhost:49412/bugs.aspx sql=
select qu_sql from queries where qu_id = 1
2017-07-26 13:40:45 http://localhost:49412/bugs.aspx sql=
select isnull(pr_background_color,'#ffffff'), bg_id [id], isnull(bu_flag,0) [$FLAG], 
 bg_short_desc [desc], isnull(pj_name,'') [project], isnull(og_name,'') [organization], isnull(ct_name,'') [category], rpt.us_username [reported by],
 bg_reported_date [reported on], isnull(pr_name,'') [priority], isnull(asg.us_username,'') [assigned to],
 isnull(st_name,'') [status], isnull(lu.us_username,'') [last updated by], bg_last_updated_date [last updated on]
 from bugs 
 left outer join bug_user on bu_bug = bg_id and bu_user = 1 
 left outer join users rpt on rpt.us_id = bg_reported_user
 left outer join users asg on asg.us_id = bg_assigned_to_user
 left outer join users lu on lu.us_id = bg_last_updated_user
 left outer join projects on pj_id = bg_project
 left outer join orgs on og_id = bg_org
 left outer join categories on ct_id = bg_category
 left outer join priorities on pr_id = bg_priority
 left outer join statuses on st_id = bg_status
  /* altered - just order by  */ WHERE  (bugs.bg_project not in (
					select pu_project
					from project_user_xref
					where pu_user = 1
					and pu_permission_level = 0)) order by bg_id desc
2017-07-26 13:40:45 http://localhost:49412/bugs.aspx elapsed milliseconds:0000
2017-07-26 13:56:46  caught exception in util.set_context:Request is not available in this context
2017-07-26 13:56:46  threadproc_votes
2017-07-26 13:56:46  sql=

if exists (select * from dbo.sysobjects where id = object_id(N'[votes_view]'))
drop view [votes_view]
2017-07-26 13:56:46  started creating Lucene index using folder C:\Users\Oisiktekiner\Documents\Visual Studio 2017\Projects\btnetnew\btnetnew\App_Data\lucene_index
2017-07-26 13:56:46  sql=

create view votes_view as
select bu_bug as vote_bug, sum(bu_vote) as vote_total
from bug_user
group by bu_bug
having sum(bu_vote) > 0
2017-07-26 13:56:46  sql=

select bu_bug, count(1)
from bug_user 
where bu_vote = 1
group by bu_bug
2017-07-26 13:56:46  elapsed milliseconds:0000
2017-07-26 13:56:46  sql=

/* get searchable cols */					
select sc.name
from syscolumns sc
inner join systypes st on st.xusertype = sc.xusertype
inner join sysobjects so on sc.id = so.id
where so.name = 'bugs'
and st.[name] <> 'sysname'
and sc.name not in ('rowguid',
'bg_id',
'bg_short_desc',
'bg_reported_user',
'bg_reported_date',
'bg_project',
'bg_org',
'bg_category',
'bg_priority',
'bg_status',
'bg_assigned_to_user',
'bg_last_updated_user',
'bg_last_updated_date',
'bg_user_defined_attribute',
'bg_project_custom_dropdown_value1',
'bg_project_custom_dropdown_value2',
'bg_project_custom_dropdown_value3',
'bg_tags')
and st.[name] in ('nvarchar','varchar')
and sc.length > 30
2017-07-26 13:56:46  elapsed milliseconds:0020
2017-07-26 13:56:46  sql=

select bg_id, 	

isnull(bg_tags,'') bg_tags,
bg_short_desc
from bugs
2017-07-26 13:56:46  elapsed milliseconds:0000
2017-07-26 13:56:46  sql=

select bp_bug, bp_id, 
isnull(bp_comment_search,bp_comment) [text] 
from bug_posts 
where bp_type <> 'update'
and bp_hidden_from_external_users = 0
2017-07-26 13:56:46  elapsed milliseconds:0000
2017-07-26 13:56:46  done creating Lucene index
2017-07-26 13:56:49 http://localhost:49412/bugs.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = 'f4820bc1-fd61-4ee5-b27b-1d6f729229dd';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = 'f4820bc1-fd61-4ee5-b27b-1d6f729229dd'
and us_active = 1
2017-07-26 13:56:49 http://localhost:49412/bugs.aspx elapsed milliseconds:0000
2017-07-26 13:56:49 http://localhost:49412/bugs.aspx sql=

/* custom columns */ select sc.name, st.[name] [datatype], 
case when st.[name] = 'nvarchar' or st.[name] = 'nchar' then sc.length/2 else sc.length end as [length], 
sc.xprec, sc.xscale, sc.isnullable,
mm.text [default value], 
dflts.name [default name], 
isnull(ccm_dropdown_type,'') [dropdown type],
isnull(ccm_dropdown_vals,'') [vals],
isnull(ccm_sort_seq, sc.colorder) [column order],
sc.colorder
from syscolumns sc
inner join systypes st on st.xusertype = sc.xusertype
inner join sysobjects so on sc.id = so.id
left outer join syscomments mm on sc.cdefault = mm.id
left outer join custom_col_metadata on ccm_colorder = sc.colorder
left outer join sysobjects dflts on dflts.id = mm.id
where so.name = 'bugs'
and st.[name] <> 'sysname'
and sc.name not in ('rowguid',
'bg_id',
'bg_short_desc',
'bg_reported_user',
'bg_reported_date',
'bg_project',
'bg_org',
'bg_category',
'bg_priority',
'bg_status',
'bg_assigned_to_user',
'bg_last_updated_user',
'bg_last_updated_date',
'bg_user_defined_attribute',
'bg_project_custom_dropdown_value1',
'bg_project_custom_dropdown_value2',
'bg_project_custom_dropdown_value3',
'bg_tags')
order by sc.id, isnull(ccm_sort_seq,sc.colorder)
2017-07-26 13:56:49 http://localhost:49412/bugs.aspx elapsed milliseconds:0000
2017-07-26 13:56:49 http://localhost:49412/bugs.aspx sql=
/* query dropdown */
select qu_id, qu_desc
from queries
where (isnull(qu_user,0) = 0 and isnull(qu_org,0) = 0)
or isnull(qu_user,0) = 1
or isnull(qu_org,0) = 1
order by qu_desc
2017-07-26 13:56:49 http://localhost:49412/bugs.aspx elapsed milliseconds:0000
2017-07-26 13:56:49 http://localhost:49412/bugs.aspx sql=
select qu_id, qu_sql from queries where qu_id in
			(select us_default_query from users where us_id = 1)
2017-07-26 13:56:49 http://localhost:49412/bugs.aspx elapsed milliseconds:0000
2017-07-26 13:56:49 http://localhost:49412/bugs.aspx sql=
select isnull(pr_background_color,'#ffffff'), bg_id [id], isnull(bu_flag,0) [$FLAG], 
 bg_short_desc [desc], isnull(pj_name,'') [project], isnull(og_name,'') [organization], isnull(ct_name,'') [category], rpt.us_username [reported by],
 bg_reported_date [reported on], isnull(pr_name,'') [priority], isnull(asg.us_username,'') [assigned to],
 isnull(st_name,'') [status], isnull(lu.us_username,'') [last updated by], bg_last_updated_date [last updated on]
 from bugs 
 left outer join bug_user on bu_bug = bg_id and bu_user = 1 
 left outer join users rpt on rpt.us_id = bg_reported_user
 left outer join users asg on asg.us_id = bg_assigned_to_user
 left outer join users lu on lu.us_id = bg_last_updated_user
 left outer join projects on pj_id = bg_project
 left outer join orgs on og_id = bg_org
 left outer join categories on ct_id = bg_category
 left outer join priorities on pr_id = bg_priority
 left outer join statuses on st_id = bg_status
  /* altered - just order by  */ WHERE  (bugs.bg_project not in (
					select pu_project
					from project_user_xref
					where pu_user = 1
					and pu_permission_level = 0)) order by bg_id desc
2017-07-26 13:56:49 http://localhost:49412/bugs.aspx elapsed milliseconds:0000
2017-07-26 14:36:08  caught exception in util.set_context:Request is not available in this context
2017-07-26 14:36:08  threadproc_votes
2017-07-26 14:36:08  sql=

if exists (select * from dbo.sysobjects where id = object_id(N'[votes_view]'))
drop view [votes_view]
2017-07-26 14:36:08  started creating Lucene index using folder C:\Users\Oisiktekiner\Documents\Visual Studio 2017\Projects\btnetnew\btnetnew\App_Data\lucene_index
2017-07-26 14:36:08  sql=

create view votes_view as
select bu_bug as vote_bug, sum(bu_vote) as vote_total
from bug_user
group by bu_bug
having sum(bu_vote) > 0
2017-07-26 14:36:08  sql=

select bu_bug, count(1)
from bug_user 
where bu_vote = 1
group by bu_bug
2017-07-26 14:36:08  elapsed milliseconds:0006
2017-07-26 14:36:08  sql=

/* get searchable cols */					
select sc.name
from syscolumns sc
inner join systypes st on st.xusertype = sc.xusertype
inner join sysobjects so on sc.id = so.id
where so.name = 'bugs'
and st.[name] <> 'sysname'
and sc.name not in ('rowguid',
'bg_id',
'bg_short_desc',
'bg_reported_user',
'bg_reported_date',
'bg_project',
'bg_org',
'bg_category',
'bg_priority',
'bg_status',
'bg_assigned_to_user',
'bg_last_updated_user',
'bg_last_updated_date',
'bg_user_defined_attribute',
'bg_project_custom_dropdown_value1',
'bg_project_custom_dropdown_value2',
'bg_project_custom_dropdown_value3',
'bg_tags')
and st.[name] in ('nvarchar','varchar')
and sc.length > 30
2017-07-26 14:36:08  elapsed milliseconds:0000
2017-07-26 14:36:08  sql=

select bg_id, 	

isnull(bg_tags,'') bg_tags,
bg_short_desc
from bugs
2017-07-26 14:36:08  elapsed milliseconds:0000
2017-07-26 14:36:08  sql=

select bp_bug, bp_id, 
isnull(bp_comment_search,bp_comment) [text] 
from bug_posts 
where bp_type <> 'update'
and bp_hidden_from_external_users = 0
2017-07-26 14:36:08  elapsed milliseconds:0001
2017-07-26 14:36:08  done creating Lucene index
2017-07-26 14:36:13 http://localhost:49412/default.aspx sql=
select count(1) from users
2017-07-26 14:36:16 http://localhost:49412/default.aspx sql=
select count(1) from users
2017-07-26 14:36:16 http://localhost:49412/default.aspx sql=

select us_username, us_id, us_password, isnull(us_salt,0) us_salt, us_active
from users
where us_username = N'admin'
2017-07-26 14:36:16 http://localhost:49412/default.aspx elapsed milliseconds:0000
2017-07-26 14:36:16 http://localhost:49412/default.aspx sql=
update users set us_most_recent_login_datetime = getdate() where us_id = 1
2017-07-26 14:36:16 http://localhost:49412/default.aspx sql=
select us_id from users where us_username = N'admin'
2017-07-26 14:36:16 http://localhost:49412/default.aspx elapsed milliseconds:0000
2017-07-26 14:36:16 http://localhost:49412/default.aspx guid=854b6414-d024-45ce-81d1-c21c66d543a1
2017-07-26 14:36:16 http://localhost:49412/default.aspx sql=
insert into sessions (se_id, se_user) values('854b6414-d024-45ce-81d1-c21c66d543a1', 1)
2017-07-26 14:36:16 http://localhost:49412/default.aspx AppPath:
2017-07-26 14:36:16 http://localhost:49412/bugs.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '854b6414-d024-45ce-81d1-c21c66d543a1';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '854b6414-d024-45ce-81d1-c21c66d543a1'
and us_active = 1
2017-07-26 14:36:16 http://localhost:49412/bugs.aspx elapsed milliseconds:0011
2017-07-26 14:36:16 http://localhost:49412/bugs.aspx sql=

/* custom columns */ select sc.name, st.[name] [datatype], 
case when st.[name] = 'nvarchar' or st.[name] = 'nchar' then sc.length/2 else sc.length end as [length], 
sc.xprec, sc.xscale, sc.isnullable,
mm.text [default value], 
dflts.name [default name], 
isnull(ccm_dropdown_type,'') [dropdown type],
isnull(ccm_dropdown_vals,'') [vals],
isnull(ccm_sort_seq, sc.colorder) [column order],
sc.colorder
from syscolumns sc
inner join systypes st on st.xusertype = sc.xusertype
inner join sysobjects so on sc.id = so.id
left outer join syscomments mm on sc.cdefault = mm.id
left outer join custom_col_metadata on ccm_colorder = sc.colorder
left outer join sysobjects dflts on dflts.id = mm.id
where so.name = 'bugs'
and st.[name] <> 'sysname'
and sc.name not in ('rowguid',
'bg_id',
'bg_short_desc',
'bg_reported_user',
'bg_reported_date',
'bg_project',
'bg_org',
'bg_category',
'bg_priority',
'bg_status',
'bg_assigned_to_user',
'bg_last_updated_user',
'bg_last_updated_date',
'bg_user_defined_attribute',
'bg_project_custom_dropdown_value1',
'bg_project_custom_dropdown_value2',
'bg_project_custom_dropdown_value3',
'bg_tags')
order by sc.id, isnull(ccm_sort_seq,sc.colorder)
2017-07-26 14:36:16 http://localhost:49412/bugs.aspx elapsed milliseconds:0000
2017-07-26 14:36:16 http://localhost:49412/bugs.aspx sql=
/* query dropdown */
select qu_id, qu_desc
from queries
where (isnull(qu_user,0) = 0 and isnull(qu_org,0) = 0)
or isnull(qu_user,0) = 1
or isnull(qu_org,0) = 1
order by qu_desc
2017-07-26 14:36:16 http://localhost:49412/bugs.aspx elapsed milliseconds:0000
2017-07-26 14:36:16 http://localhost:49412/bugs.aspx sql=
select qu_id, qu_sql from queries where qu_id in
			(select us_default_query from users where us_id = 1)
2017-07-26 14:36:16 http://localhost:49412/bugs.aspx elapsed milliseconds:0000
2017-07-26 14:36:16 http://localhost:49412/bugs.aspx sql=
select isnull(pr_background_color,'#ffffff'), bg_id [id], isnull(bu_flag,0) [$FLAG], 
 bg_short_desc [desc], isnull(pj_name,'') [project], isnull(og_name,'') [organization], isnull(ct_name,'') [category], rpt.us_username [reported by],
 bg_reported_date [reported on], isnull(pr_name,'') [priority], isnull(asg.us_username,'') [assigned to],
 isnull(st_name,'') [status], isnull(lu.us_username,'') [last updated by], bg_last_updated_date [last updated on]
 from bugs 
 left outer join bug_user on bu_bug = bg_id and bu_user = 1 
 left outer join users rpt on rpt.us_id = bg_reported_user
 left outer join users asg on asg.us_id = bg_assigned_to_user
 left outer join users lu on lu.us_id = bg_last_updated_user
 left outer join projects on pj_id = bg_project
 left outer join orgs on og_id = bg_org
 left outer join categories on ct_id = bg_category
 left outer join priorities on pr_id = bg_priority
 left outer join statuses on st_id = bg_status
  /* altered - just order by  */ WHERE  (bugs.bg_project not in (
					select pu_project
					from project_user_xref
					where pu_user = 1
					and pu_permission_level = 0)) order by bg_id desc
2017-07-26 14:36:16 http://localhost:49412/bugs.aspx elapsed milliseconds:0000
2017-07-26 16:22:29  caught exception in util.set_context:Request is not available in this context
2017-07-26 16:22:29  threadproc_votes
2017-07-26 16:22:29  sql=

if exists (select * from dbo.sysobjects where id = object_id(N'[votes_view]'))
drop view [votes_view]
2017-07-26 16:22:29  started creating Lucene index using folder C:\Users\Oisiktekiner\Documents\Visual Studio 2017\Projects\btnetnew\btnetnew\App_Data\lucene_index
2017-07-26 16:22:29  sql=

/* get searchable cols */					
select sc.name
from syscolumns sc
inner join systypes st on st.xusertype = sc.xusertype
inner join sysobjects so on sc.id = so.id
where so.name = 'bugs'
and st.[name] <> 'sysname'
and sc.name not in ('rowguid',
'bg_id',
'bg_short_desc',
'bg_reported_user',
'bg_reported_date',
'bg_project',
'bg_org',
'bg_category',
'bg_priority',
'bg_status',
'bg_assigned_to_user',
'bg_last_updated_user',
'bg_last_updated_date',
'bg_user_defined_attribute',
'bg_project_custom_dropdown_value1',
'bg_project_custom_dropdown_value2',
'bg_project_custom_dropdown_value3',
'bg_tags')
and st.[name] in ('nvarchar','varchar')
and sc.length > 30
2017-07-26 16:22:29  sql=

create view votes_view as
select bu_bug as vote_bug, sum(bu_vote) as vote_total
from bug_user
group by bu_bug
having sum(bu_vote) > 0
2017-07-26 16:22:29  sql=

select bu_bug, count(1)
from bug_user 
where bu_vote = 1
group by bu_bug
2017-07-26 16:22:29  elapsed milliseconds:0036
2017-07-26 16:22:29  sql=

select bg_id, 	

isnull(bg_tags,'') bg_tags,
bg_short_desc
from bugs
2017-07-26 16:22:29  elapsed milliseconds:0020
2017-07-26 16:22:29  elapsed milliseconds:0000
2017-07-26 16:22:29  sql=

select bp_bug, bp_id, 
isnull(bp_comment_search,bp_comment) [text] 
from bug_posts 
where bp_type <> 'update'
and bp_hidden_from_external_users = 0
2017-07-26 16:22:29  elapsed milliseconds:0000
2017-07-26 16:22:29  done creating Lucene index
2017-07-26 16:22:31 http://localhost:49412/default.aspx sql=
select count(1) from users
2017-07-26 16:22:38 http://localhost:49412/default.aspx sql=
select count(1) from users
2017-07-26 16:22:38 http://localhost:49412/default.aspx sql=

select us_username, us_id, us_password, isnull(us_salt,0) us_salt, us_active
from users
where us_username = N'admin'
2017-07-26 16:22:38 http://localhost:49412/default.aspx elapsed milliseconds:0000
2017-07-26 16:22:38 http://localhost:49412/default.aspx sql=
update users set us_most_recent_login_datetime = getdate() where us_id = 1
2017-07-26 16:22:38 http://localhost:49412/default.aspx sql=
select us_id from users where us_username = N'admin'
2017-07-26 16:22:38 http://localhost:49412/default.aspx elapsed milliseconds:0000
2017-07-26 16:22:38 http://localhost:49412/default.aspx guid=9060cd46-2de1-49bb-9970-ee1cf5c8aabf
2017-07-26 16:22:38 http://localhost:49412/default.aspx sql=
insert into sessions (se_id, se_user) values('9060cd46-2de1-49bb-9970-ee1cf5c8aabf', 1)
2017-07-26 16:22:38 http://localhost:49412/default.aspx AppPath:

TIME: 16:22:39
MSG: 'btnet.btnet' is not allowed here because it does not extend class 'System.Web.UI.MasterPage'.
URL: http://localhost:49412/bugs.aspx
EXCEPTION: System.Web.HttpException (0x80004005): 'btnet.btnet' is not allowed here because it does not extend class 'System.Web.UI.MasterPage'.
   at System.Web.UI.TemplateParser.ProcessError(String message)
   at System.Web.UI.TemplateParser.ProcessInheritsAttribute(String baseTypeName, String codeFileBaseTypeName, String src, Assembly assembly)
   at System.Web.UI.TemplateParser.PostProcessMainDirectiveAttributes(IDictionary parseData)

ALL_HTTP=HTTP_CACHE_CONTROL:no-cache
HTTP_CONNECTION:Keep-Alive
HTTP_ACCEPT:text/html, application/xhtml+xml, */*
HTTP_ACCEPT_ENCODING:gzip, deflate
HTTP_ACCEPT_LANGUAGE:tr-TR
HTTP_COOKIE:user=name=admin&NTLM=0; se_id=9060cd46-2de1-49bb-9970-ee1cf5c8aabf; ASP.NET_SessionId=qairq2rhycskvxknivtsv2qk
HTTP_HOST:localhost:49412
HTTP_REFERER:http://localhost:49412/default.aspx
HTTP_USER_AGENT:Mozilla/5.0 (Windows NT 6.1; WOW64; Trident/7.0; rv:11.0) like Gecko
HTTP_DNT:1

ALL_RAW=Cache-Control: no-cache
Connection: Keep-Alive
Accept: text/html, application/xhtml+xml, */*
Accept-Encoding: gzip, deflate
Accept-Language: tr-TR
Cookie: user=name=admin&NTLM=0; se_id=9060cd46-2de1-49bb-9970-ee1cf5c8aabf; ASP.NET_SessionId=qairq2rhycskvxknivtsv2qk
Host: localhost:49412
Referer: http://localhost:49412/default.aspx
User-Agent: Mozilla/5.0 (Windows NT 6.1; WOW64; Trident/7.0; rv:11.0) like Gecko
DNT: 1

APPL_MD_PATH=/LM/W3SVC/2/ROOT
APPL_PHYSICAL_PATH=C:\Users\Oisiktekiner\Documents\Visual Studio 2017\Projects\btnetnew\btnetnew\
CONTENT_LENGTH=0
GATEWAY_INTERFACE=CGI/1.1
HTTPS=off
INSTANCE_ID=2
INSTANCE_META_PATH=/LM/W3SVC/2
LOCAL_ADDR=::1
PATH_INFO=/bugs.aspx
PATH_TRANSLATED=C:\Users\Oisiktekiner\Documents\Visual Studio 2017\Projects\btnetnew\btnetnew\bugs.aspx
REMOTE_ADDR=::1
REMOTE_HOST=::1
REMOTE_PORT=52169
REQUEST_METHOD=GET
SCRIPT_NAME=/bugs.aspx
SERVER_NAME=localhost
SERVER_PORT=49412
SERVER_PORT_SECURE=0
SERVER_PROTOCOL=HTTP/1.1
SERVER_SOFTWARE=Microsoft-IIS/10.0
URL=/bugs.aspx
HTTP_CACHE_CONTROL=no-cache
HTTP_CONNECTION=Keep-Alive
HTTP_ACCEPT=text/html, application/xhtml+xml, */*
HTTP_ACCEPT_ENCODING=gzip, deflate
HTTP_ACCEPT_LANGUAGE=tr-TR
HTTP_COOKIE=user=name=admin&NTLM=0; se_id=9060cd46-2de1-49bb-9970-ee1cf5c8aabf; ASP.NET_SessionId=qairq2rhycskvxknivtsv2qk
HTTP_HOST=localhost:49412
HTTP_REFERER=http://localhost:49412/default.aspx
HTTP_USER_AGENT=Mozilla/5.0 (Windows NT 6.1; WOW64; Trident/7.0; rv:11.0) like Gecko
HTTP_DNT=1
2017-07-26 16:22:40 http://localhost:49412/bugs.aspx to email addr: admin@example.com
2017-07-26 16:22:40 http://localhost:49412/bugs.aspx There was a problem sending email.   Check settings in Web.config.
2017-07-26 16:22:40 http://localhost:49412/bugs.aspx TO:admin@example.com
2017-07-26 16:22:40 http://localhost:49412/bugs.aspx FROM:errors@example.com
2017-07-26 16:22:40 http://localhost:49412/bugs.aspx SUBJECT:Error: 'btnet.btnet' is not allowed here because it does not extend class 'System.Web.UI.MasterPage'.
2017-07-26 16:22:40 http://localhost:49412/bugs.aspx Could not find a part of the path 'C:\temp\pickup\e3c55bb0-4da5-4fd5-8f5c-f954b2e29fdb.eml'.
2017-07-26 16:24:35  caught exception in util.set_context:Request is not available in this context
2017-07-26 16:24:35  threadproc_votes
2017-07-26 16:24:35  sql=

if exists (select * from dbo.sysobjects where id = object_id(N'[votes_view]'))
drop view [votes_view]
2017-07-26 16:24:35  started creating Lucene index using folder C:\Users\Oisiktekiner\Documents\Visual Studio 2017\Projects\btnetnew\btnetnew\App_Data\lucene_index
2017-07-26 16:24:35  sql=

create view votes_view as
select bu_bug as vote_bug, sum(bu_vote) as vote_total
from bug_user
group by bu_bug
having sum(bu_vote) > 0
2017-07-26 16:24:35  sql=

select bu_bug, count(1)
from bug_user 
where bu_vote = 1
group by bu_bug
2017-07-26 16:24:35  elapsed milliseconds:0041
2017-07-26 16:24:35  sql=

/* get searchable cols */					
select sc.name
from syscolumns sc
inner join systypes st on st.xusertype = sc.xusertype
inner join sysobjects so on sc.id = so.id
where so.name = 'bugs'
and st.[name] <> 'sysname'
and sc.name not in ('rowguid',
'bg_id',
'bg_short_desc',
'bg_reported_user',
'bg_reported_date',
'bg_project',
'bg_org',
'bg_category',
'bg_priority',
'bg_status',
'bg_assigned_to_user',
'bg_last_updated_user',
'bg_last_updated_date',
'bg_user_defined_attribute',
'bg_project_custom_dropdown_value1',
'bg_project_custom_dropdown_value2',
'bg_project_custom_dropdown_value3',
'bg_tags')
and st.[name] in ('nvarchar','varchar')
and sc.length > 30
2017-07-26 16:24:35  elapsed milliseconds:0000
2017-07-26 16:24:35  sql=

select bg_id, 	

isnull(bg_tags,'') bg_tags,
bg_short_desc
from bugs
2017-07-26 16:24:35  elapsed milliseconds:0000
2017-07-26 16:24:35  sql=

select bp_bug, bp_id, 
isnull(bp_comment_search,bp_comment) [text] 
from bug_posts 
where bp_type <> 'update'
and bp_hidden_from_external_users = 0
2017-07-26 16:24:35  elapsed milliseconds:0000
2017-07-26 16:24:35  done creating Lucene index
2017-07-26 16:24:37 http://localhost:49412/default.aspx sql=
select count(1) from users
2017-07-26 16:24:40 http://localhost:49412/default.aspx sql=
select count(1) from users
2017-07-26 16:24:40 http://localhost:49412/default.aspx sql=

select us_username, us_id, us_password, isnull(us_salt,0) us_salt, us_active
from users
where us_username = N'admin'
2017-07-26 16:24:40 http://localhost:49412/default.aspx elapsed milliseconds:0000
2017-07-26 16:24:40 http://localhost:49412/default.aspx sql=
update users set us_most_recent_login_datetime = getdate() where us_id = 1
2017-07-26 16:24:40 http://localhost:49412/default.aspx sql=
select us_id from users where us_username = N'admin'
2017-07-26 16:24:40 http://localhost:49412/default.aspx elapsed milliseconds:0000
2017-07-26 16:24:40 http://localhost:49412/default.aspx guid=fa8f6abe-ef16-40e7-9432-9e7cd5ac501b
2017-07-26 16:24:40 http://localhost:49412/default.aspx sql=
insert into sessions (se_id, se_user) values('fa8f6abe-ef16-40e7-9432-9e7cd5ac501b', 1)
2017-07-26 16:24:40 http://localhost:49412/default.aspx AppPath:
2017-07-26 16:24:42 http://localhost:49412/bugs.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = 'fa8f6abe-ef16-40e7-9432-9e7cd5ac501b';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = 'fa8f6abe-ef16-40e7-9432-9e7cd5ac501b'
and us_active = 1
2017-07-26 16:24:42 http://localhost:49412/bugs.aspx elapsed milliseconds:0009
2017-07-26 16:24:42 http://localhost:49412/bugs.aspx sql=

/* custom columns */ select sc.name, st.[name] [datatype], 
case when st.[name] = 'nvarchar' or st.[name] = 'nchar' then sc.length/2 else sc.length end as [length], 
sc.xprec, sc.xscale, sc.isnullable,
mm.text [default value], 
dflts.name [default name], 
isnull(ccm_dropdown_type,'') [dropdown type],
isnull(ccm_dropdown_vals,'') [vals],
isnull(ccm_sort_seq, sc.colorder) [column order],
sc.colorder
from syscolumns sc
inner join systypes st on st.xusertype = sc.xusertype
inner join sysobjects so on sc.id = so.id
left outer join syscomments mm on sc.cdefault = mm.id
left outer join custom_col_metadata on ccm_colorder = sc.colorder
left outer join sysobjects dflts on dflts.id = mm.id
where so.name = 'bugs'
and st.[name] <> 'sysname'
and sc.name not in ('rowguid',
'bg_id',
'bg_short_desc',
'bg_reported_user',
'bg_reported_date',
'bg_project',
'bg_org',
'bg_category',
'bg_priority',
'bg_status',
'bg_assigned_to_user',
'bg_last_updated_user',
'bg_last_updated_date',
'bg_user_defined_attribute',
'bg_project_custom_dropdown_value1',
'bg_project_custom_dropdown_value2',
'bg_project_custom_dropdown_value3',
'bg_tags')
order by sc.id, isnull(ccm_sort_seq,sc.colorder)
2017-07-26 16:24:42 http://localhost:49412/bugs.aspx elapsed milliseconds:0000
2017-07-26 16:24:42 http://localhost:49412/bugs.aspx sql=
/* query dropdown */
select qu_id, qu_desc
from queries
where (isnull(qu_user,0) = 0 and isnull(qu_org,0) = 0)
or isnull(qu_user,0) = 1
or isnull(qu_org,0) = 1
order by qu_desc
2017-07-26 16:24:42 http://localhost:49412/bugs.aspx elapsed milliseconds:0000
2017-07-26 16:24:42 http://localhost:49412/bugs.aspx sql=
select qu_id, qu_sql from queries where qu_id in
			(select us_default_query from users where us_id = 1)
2017-07-26 16:24:42 http://localhost:49412/bugs.aspx elapsed milliseconds:0000
2017-07-26 16:24:42 http://localhost:49412/bugs.aspx sql=
select isnull(pr_background_color,'#ffffff'), bg_id [id], isnull(bu_flag,0) [$FLAG], 
 bg_short_desc [desc], isnull(pj_name,'') [project], isnull(og_name,'') [organization], isnull(ct_name,'') [category], rpt.us_username [reported by],
 bg_reported_date [reported on], isnull(pr_name,'') [priority], isnull(asg.us_username,'') [assigned to],
 isnull(st_name,'') [status], isnull(lu.us_username,'') [last updated by], bg_last_updated_date [last updated on]
 from bugs 
 left outer join bug_user on bu_bug = bg_id and bu_user = 1 
 left outer join users rpt on rpt.us_id = bg_reported_user
 left outer join users asg on asg.us_id = bg_assigned_to_user
 left outer join users lu on lu.us_id = bg_last_updated_user
 left outer join projects on pj_id = bg_project
 left outer join orgs on og_id = bg_org
 left outer join categories on ct_id = bg_category
 left outer join priorities on pr_id = bg_priority
 left outer join statuses on st_id = bg_status
  /* altered - just order by  */ WHERE  (bugs.bg_project not in (
					select pu_project
					from project_user_xref
					where pu_user = 1
					and pu_permission_level = 0)) order by bg_id desc
2017-07-26 16:24:42 http://localhost:49412/bugs.aspx elapsed milliseconds:0000
2017-07-26 16:24:50 http://localhost:49412/bugs.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = 'fa8f6abe-ef16-40e7-9432-9e7cd5ac501b';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = 'fa8f6abe-ef16-40e7-9432-9e7cd5ac501b'
and us_active = 1
2017-07-26 16:24:50 http://localhost:49412/bugs.aspx elapsed milliseconds:0000
2017-07-26 16:24:50 http://localhost:49412/bugs.aspx sql=
/* query dropdown */
select qu_id, qu_desc
from queries
where (isnull(qu_user,0) = 0 and isnull(qu_org,0) = 0)
or isnull(qu_user,0) = 1
or isnull(qu_org,0) = 1
order by qu_desc
2017-07-26 16:24:50 http://localhost:49412/bugs.aspx elapsed milliseconds:0000
2017-07-26 16:24:50 http://localhost:49412/bugs.aspx sql=
select qu_sql from queries where qu_id = 1
2017-07-26 16:24:50 http://localhost:49412/bugs.aspx sql=
select isnull(pr_background_color,'#ffffff'), bg_id [id], isnull(bu_flag,0) [$FLAG], 
 bg_short_desc [desc], isnull(pj_name,'') [project], isnull(og_name,'') [organization], isnull(ct_name,'') [category], rpt.us_username [reported by],
 bg_reported_date [reported on], isnull(pr_name,'') [priority], isnull(asg.us_username,'') [assigned to],
 isnull(st_name,'') [status], isnull(lu.us_username,'') [last updated by], bg_last_updated_date [last updated on]
 from bugs 
 left outer join bug_user on bu_bug = bg_id and bu_user = 1 
 left outer join users rpt on rpt.us_id = bg_reported_user
 left outer join users asg on asg.us_id = bg_assigned_to_user
 left outer join users lu on lu.us_id = bg_last_updated_user
 left outer join projects on pj_id = bg_project
 left outer join orgs on og_id = bg_org
 left outer join categories on ct_id = bg_category
 left outer join priorities on pr_id = bg_priority
 left outer join statuses on st_id = bg_status
  /* altered - just order by  */ WHERE  (bugs.bg_project not in (
					select pu_project
					from project_user_xref
					where pu_user = 1
					and pu_permission_level = 0)) order by bg_id desc
2017-07-26 16:24:50 http://localhost:49412/bugs.aspx elapsed milliseconds:0000
2017-07-26 16:25:23 http://localhost:49412/bugs.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = 'fa8f6abe-ef16-40e7-9432-9e7cd5ac501b';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = 'fa8f6abe-ef16-40e7-9432-9e7cd5ac501b'
and us_active = 1
2017-07-26 16:25:23 http://localhost:49412/bugs.aspx elapsed milliseconds:0000
2017-07-26 16:25:23 http://localhost:49412/bugs.aspx sql=
/* query dropdown */
select qu_id, qu_desc
from queries
where (isnull(qu_user,0) = 0 and isnull(qu_org,0) = 0)
or isnull(qu_user,0) = 1
or isnull(qu_org,0) = 1
order by qu_desc
2017-07-26 16:25:23 http://localhost:49412/bugs.aspx elapsed milliseconds:0000
2017-07-26 16:25:23 http://localhost:49412/bugs.aspx sql=
select qu_sql from queries where qu_id = 1
2017-07-26 16:25:23 http://localhost:49412/bugs.aspx sql=
select isnull(pr_background_color,'#ffffff'), bg_id [id], isnull(bu_flag,0) [$FLAG], 
 bg_short_desc [desc], isnull(pj_name,'') [project], isnull(og_name,'') [organization], isnull(ct_name,'') [category], rpt.us_username [reported by],
 bg_reported_date [reported on], isnull(pr_name,'') [priority], isnull(asg.us_username,'') [assigned to],
 isnull(st_name,'') [status], isnull(lu.us_username,'') [last updated by], bg_last_updated_date [last updated on]
 from bugs 
 left outer join bug_user on bu_bug = bg_id and bu_user = 1 
 left outer join users rpt on rpt.us_id = bg_reported_user
 left outer join users asg on asg.us_id = bg_assigned_to_user
 left outer join users lu on lu.us_id = bg_last_updated_user
 left outer join projects on pj_id = bg_project
 left outer join orgs on og_id = bg_org
 left outer join categories on ct_id = bg_category
 left outer join priorities on pr_id = bg_priority
 left outer join statuses on st_id = bg_status
  /* altered - just order by  */ WHERE  (bugs.bg_project not in (
					select pu_project
					from project_user_xref
					where pu_user = 1
					and pu_permission_level = 0)) order by bg_id desc
2017-07-26 16:25:23 http://localhost:49412/bugs.aspx elapsed milliseconds:0000
2017-07-26 16:26:26 http://localhost:49412/bugs.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = 'fa8f6abe-ef16-40e7-9432-9e7cd5ac501b';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = 'fa8f6abe-ef16-40e7-9432-9e7cd5ac501b'
and us_active = 1
2017-07-26 16:26:26 http://localhost:49412/bugs.aspx elapsed milliseconds:0000
2017-07-26 16:26:26 http://localhost:49412/bugs.aspx sql=
/* query dropdown */
select qu_id, qu_desc
from queries
where (isnull(qu_user,0) = 0 and isnull(qu_org,0) = 0)
or isnull(qu_user,0) = 1
or isnull(qu_org,0) = 1
order by qu_desc
2017-07-26 16:26:26 http://localhost:49412/bugs.aspx elapsed milliseconds:0002
2017-07-26 16:26:26 http://localhost:49412/bugs.aspx sql=
select qu_sql from queries where qu_id = 1
2017-07-26 16:26:26 http://localhost:49412/bugs.aspx sql=
select isnull(pr_background_color,'#ffffff'), bg_id [id], isnull(bu_flag,0) [$FLAG], 
 bg_short_desc [desc], isnull(pj_name,'') [project], isnull(og_name,'') [organization], isnull(ct_name,'') [category], rpt.us_username [reported by],
 bg_reported_date [reported on], isnull(pr_name,'') [priority], isnull(asg.us_username,'') [assigned to],
 isnull(st_name,'') [status], isnull(lu.us_username,'') [last updated by], bg_last_updated_date [last updated on]
 from bugs 
 left outer join bug_user on bu_bug = bg_id and bu_user = 1 
 left outer join users rpt on rpt.us_id = bg_reported_user
 left outer join users asg on asg.us_id = bg_assigned_to_user
 left outer join users lu on lu.us_id = bg_last_updated_user
 left outer join projects on pj_id = bg_project
 left outer join orgs on og_id = bg_org
 left outer join categories on ct_id = bg_category
 left outer join priorities on pr_id = bg_priority
 left outer join statuses on st_id = bg_status
  /* altered - just order by  */ WHERE  (bugs.bg_project not in (
					select pu_project
					from project_user_xref
					where pu_user = 1
					and pu_permission_level = 0)) order by bg_id desc
2017-07-26 16:26:26 http://localhost:49412/bugs.aspx elapsed milliseconds:0000
2017-07-26 16:27:57  caught exception in util.set_context:Request is not available in this context
2017-07-26 16:27:57  threadproc_votes
2017-07-26 16:27:57  sql=

if exists (select * from dbo.sysobjects where id = object_id(N'[votes_view]'))
drop view [votes_view]
2017-07-26 16:27:57  started creating Lucene index using folder C:\Users\Oisiktekiner\Documents\Visual Studio 2017\Projects\btnetnew\btnetnew\App_Data\lucene_index
2017-07-26 16:27:57  sql=

create view votes_view as
select bu_bug as vote_bug, sum(bu_vote) as vote_total
from bug_user
group by bu_bug
having sum(bu_vote) > 0
2017-07-26 16:27:57  sql=

select bu_bug, count(1)
from bug_user 
where bu_vote = 1
group by bu_bug
2017-07-26 16:27:57  sql=

/* get searchable cols */					
select sc.name
from syscolumns sc
inner join systypes st on st.xusertype = sc.xusertype
inner join sysobjects so on sc.id = so.id
where so.name = 'bugs'
and st.[name] <> 'sysname'
and sc.name not in ('rowguid',
'bg_id',
'bg_short_desc',
'bg_reported_user',
'bg_reported_date',
'bg_project',
'bg_org',
'bg_category',
'bg_priority',
'bg_status',
'bg_assigned_to_user',
'bg_last_updated_user',
'bg_last_updated_date',
'bg_user_defined_attribute',
'bg_project_custom_dropdown_value1',
'bg_project_custom_dropdown_value2',
'bg_project_custom_dropdown_value3',
'bg_tags')
and st.[name] in ('nvarchar','varchar')
and sc.length > 30
2017-07-26 16:27:58  elapsed milliseconds:0010
2017-07-26 16:27:58  elapsed milliseconds:0003
2017-07-26 16:27:58  sql=

select bg_id, 	

isnull(bg_tags,'') bg_tags,
bg_short_desc
from bugs
2017-07-26 16:27:58  elapsed milliseconds:0000
2017-07-26 16:27:58  sql=

select bp_bug, bp_id, 
isnull(bp_comment_search,bp_comment) [text] 
from bug_posts 
where bp_type <> 'update'
and bp_hidden_from_external_users = 0
2017-07-26 16:27:58  elapsed milliseconds:0000
2017-07-26 16:27:58  done creating Lucene index
2017-07-26 16:27:58 http://localhost:49412/default.aspx sql=
select count(1) from users
2017-07-26 16:28:03 http://localhost:49412/default.aspx sql=
select count(1) from users
2017-07-26 16:28:03 http://localhost:49412/default.aspx sql=

select us_username, us_id, us_password, isnull(us_salt,0) us_salt, us_active
from users
where us_username = N'admin'
2017-07-26 16:28:03 http://localhost:49412/default.aspx elapsed milliseconds:0001
2017-07-26 16:28:03 http://localhost:49412/default.aspx sql=
update users set us_most_recent_login_datetime = getdate() where us_id = 1
2017-07-26 16:28:03 http://localhost:49412/default.aspx sql=
select us_id from users where us_username = N'admin'
2017-07-26 16:28:03 http://localhost:49412/default.aspx elapsed milliseconds:0001
2017-07-26 16:28:03 http://localhost:49412/default.aspx guid=f88e2ef2-186d-43ad-86b7-03f6a1ab6f6c
2017-07-26 16:28:03 http://localhost:49412/default.aspx sql=
insert into sessions (se_id, se_user) values('f88e2ef2-186d-43ad-86b7-03f6a1ab6f6c', 1)
2017-07-26 16:28:03 http://localhost:49412/default.aspx AppPath:
2017-07-26 16:28:05 http://localhost:49412/bugs.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = 'f88e2ef2-186d-43ad-86b7-03f6a1ab6f6c';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = 'f88e2ef2-186d-43ad-86b7-03f6a1ab6f6c'
and us_active = 1
2017-07-26 16:28:05 http://localhost:49412/bugs.aspx elapsed milliseconds:0007
2017-07-26 16:28:05 http://localhost:49412/bugs.aspx sql=

/* custom columns */ select sc.name, st.[name] [datatype], 
case when st.[name] = 'nvarchar' or st.[name] = 'nchar' then sc.length/2 else sc.length end as [length], 
sc.xprec, sc.xscale, sc.isnullable,
mm.text [default value], 
dflts.name [default name], 
isnull(ccm_dropdown_type,'') [dropdown type],
isnull(ccm_dropdown_vals,'') [vals],
isnull(ccm_sort_seq, sc.colorder) [column order],
sc.colorder
from syscolumns sc
inner join systypes st on st.xusertype = sc.xusertype
inner join sysobjects so on sc.id = so.id
left outer join syscomments mm on sc.cdefault = mm.id
left outer join custom_col_metadata on ccm_colorder = sc.colorder
left outer join sysobjects dflts on dflts.id = mm.id
where so.name = 'bugs'
and st.[name] <> 'sysname'
and sc.name not in ('rowguid',
'bg_id',
'bg_short_desc',
'bg_reported_user',
'bg_reported_date',
'bg_project',
'bg_org',
'bg_category',
'bg_priority',
'bg_status',
'bg_assigned_to_user',
'bg_last_updated_user',
'bg_last_updated_date',
'bg_user_defined_attribute',
'bg_project_custom_dropdown_value1',
'bg_project_custom_dropdown_value2',
'bg_project_custom_dropdown_value3',
'bg_tags')
order by sc.id, isnull(ccm_sort_seq,sc.colorder)
2017-07-26 16:28:05 http://localhost:49412/bugs.aspx elapsed milliseconds:0000
2017-07-26 16:28:05 http://localhost:49412/bugs.aspx sql=
/* query dropdown */
select qu_id, qu_desc
from queries
where (isnull(qu_user,0) = 0 and isnull(qu_org,0) = 0)
or isnull(qu_user,0) = 1
or isnull(qu_org,0) = 1
order by qu_desc
2017-07-26 16:28:05 http://localhost:49412/bugs.aspx elapsed milliseconds:0000
2017-07-26 16:28:05 http://localhost:49412/bugs.aspx sql=
select qu_id, qu_sql from queries where qu_id in
			(select us_default_query from users where us_id = 1)
2017-07-26 16:28:05 http://localhost:49412/bugs.aspx elapsed milliseconds:0000
2017-07-26 16:28:05 http://localhost:49412/bugs.aspx sql=
select isnull(pr_background_color,'#ffffff'), bg_id [id], isnull(bu_flag,0) [$FLAG], 
 bg_short_desc [desc], isnull(pj_name,'') [project], isnull(og_name,'') [organization], isnull(ct_name,'') [category], rpt.us_username [reported by],
 bg_reported_date [reported on], isnull(pr_name,'') [priority], isnull(asg.us_username,'') [assigned to],
 isnull(st_name,'') [status], isnull(lu.us_username,'') [last updated by], bg_last_updated_date [last updated on]
 from bugs 
 left outer join bug_user on bu_bug = bg_id and bu_user = 1 
 left outer join users rpt on rpt.us_id = bg_reported_user
 left outer join users asg on asg.us_id = bg_assigned_to_user
 left outer join users lu on lu.us_id = bg_last_updated_user
 left outer join projects on pj_id = bg_project
 left outer join orgs on og_id = bg_org
 left outer join categories on ct_id = bg_category
 left outer join priorities on pr_id = bg_priority
 left outer join statuses on st_id = bg_status
  /* altered - just order by  */ WHERE  (bugs.bg_project not in (
					select pu_project
					from project_user_xref
					where pu_user = 1
					and pu_permission_level = 0)) order by bg_id desc
2017-07-26 16:28:05 http://localhost:49412/bugs.aspx elapsed milliseconds:0000
2017-07-26 16:28:30 http://localhost:49412/bugs.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = 'f88e2ef2-186d-43ad-86b7-03f6a1ab6f6c';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = 'f88e2ef2-186d-43ad-86b7-03f6a1ab6f6c'
and us_active = 1
2017-07-26 16:28:30 http://localhost:49412/bugs.aspx elapsed milliseconds:0000
2017-07-26 16:28:30 http://localhost:49412/bugs.aspx sql=
/* query dropdown */
select qu_id, qu_desc
from queries
where (isnull(qu_user,0) = 0 and isnull(qu_org,0) = 0)
or isnull(qu_user,0) = 1
or isnull(qu_org,0) = 1
order by qu_desc
2017-07-26 16:28:30 http://localhost:49412/bugs.aspx elapsed milliseconds:0000
2017-07-26 16:28:30 http://localhost:49412/bugs.aspx sql=
select qu_sql from queries where qu_id = 1
2017-07-26 16:28:30 http://localhost:49412/bugs.aspx sql=
select isnull(pr_background_color,'#ffffff'), bg_id [id], isnull(bu_flag,0) [$FLAG], 
 bg_short_desc [desc], isnull(pj_name,'') [project], isnull(og_name,'') [organization], isnull(ct_name,'') [category], rpt.us_username [reported by],
 bg_reported_date [reported on], isnull(pr_name,'') [priority], isnull(asg.us_username,'') [assigned to],
 isnull(st_name,'') [status], isnull(lu.us_username,'') [last updated by], bg_last_updated_date [last updated on]
 from bugs 
 left outer join bug_user on bu_bug = bg_id and bu_user = 1 
 left outer join users rpt on rpt.us_id = bg_reported_user
 left outer join users asg on asg.us_id = bg_assigned_to_user
 left outer join users lu on lu.us_id = bg_last_updated_user
 left outer join projects on pj_id = bg_project
 left outer join orgs on og_id = bg_org
 left outer join categories on ct_id = bg_category
 left outer join priorities on pr_id = bg_priority
 left outer join statuses on st_id = bg_status
  /* altered - just order by  */ WHERE  (bugs.bg_project not in (
					select pu_project
					from project_user_xref
					where pu_user = 1
					and pu_permission_level = 0)) order by bg_id desc
2017-07-26 16:28:30 http://localhost:49412/bugs.aspx elapsed milliseconds:0000
2017-07-26 16:28:34 http://localhost:49412/bugs.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = 'f88e2ef2-186d-43ad-86b7-03f6a1ab6f6c';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = 'f88e2ef2-186d-43ad-86b7-03f6a1ab6f6c'
and us_active = 1
2017-07-26 16:28:34 http://localhost:49412/bugs.aspx elapsed milliseconds:0000
2017-07-26 16:28:34 http://localhost:49412/bugs.aspx sql=
/* query dropdown */
select qu_id, qu_desc
from queries
where (isnull(qu_user,0) = 0 and isnull(qu_org,0) = 0)
or isnull(qu_user,0) = 1
or isnull(qu_org,0) = 1
order by qu_desc
2017-07-26 16:28:34 http://localhost:49412/bugs.aspx elapsed milliseconds:0000
2017-07-26 16:28:34 http://localhost:49412/bugs.aspx sql=
select qu_sql from queries where qu_id = 1
2017-07-26 16:28:34 http://localhost:49412/bugs.aspx sql=
select isnull(pr_background_color,'#ffffff'), bg_id [id], isnull(bu_flag,0) [$FLAG], 
 bg_short_desc [desc], isnull(pj_name,'') [project], isnull(og_name,'') [organization], isnull(ct_name,'') [category], rpt.us_username [reported by],
 bg_reported_date [reported on], isnull(pr_name,'') [priority], isnull(asg.us_username,'') [assigned to],
 isnull(st_name,'') [status], isnull(lu.us_username,'') [last updated by], bg_last_updated_date [last updated on]
 from bugs 
 left outer join bug_user on bu_bug = bg_id and bu_user = 1 
 left outer join users rpt on rpt.us_id = bg_reported_user
 left outer join users asg on asg.us_id = bg_assigned_to_user
 left outer join users lu on lu.us_id = bg_last_updated_user
 left outer join projects on pj_id = bg_project
 left outer join orgs on og_id = bg_org
 left outer join categories on ct_id = bg_category
 left outer join priorities on pr_id = bg_priority
 left outer join statuses on st_id = bg_status
  /* altered - just order by  */ WHERE  (bugs.bg_project not in (
					select pu_project
					from project_user_xref
					where pu_user = 1
					and pu_permission_level = 0)) order by bg_id desc
2017-07-26 16:28:34 http://localhost:49412/bugs.aspx elapsed milliseconds:0000
2017-07-26 16:28:52  caught exception in util.set_context:Request is not available in this context
2017-07-26 16:28:52  threadproc_votes
2017-07-26 16:28:52  sql=

if exists (select * from dbo.sysobjects where id = object_id(N'[votes_view]'))
drop view [votes_view]
2017-07-26 16:28:52  started creating Lucene index using folder C:\Users\Oisiktekiner\Documents\Visual Studio 2017\Projects\btnetnew\btnetnew\App_Data\lucene_index
2017-07-26 16:28:52  sql=

create view votes_view as
select bu_bug as vote_bug, sum(bu_vote) as vote_total
from bug_user
group by bu_bug
having sum(bu_vote) > 0
2017-07-26 16:28:52  sql=

select bu_bug, count(1)
from bug_user 
where bu_vote = 1
group by bu_bug
2017-07-26 16:28:52  elapsed milliseconds:0024
2017-07-26 16:28:52  sql=

/* get searchable cols */					
select sc.name
from syscolumns sc
inner join systypes st on st.xusertype = sc.xusertype
inner join sysobjects so on sc.id = so.id
where so.name = 'bugs'
and st.[name] <> 'sysname'
and sc.name not in ('rowguid',
'bg_id',
'bg_short_desc',
'bg_reported_user',
'bg_reported_date',
'bg_project',
'bg_org',
'bg_category',
'bg_priority',
'bg_status',
'bg_assigned_to_user',
'bg_last_updated_user',
'bg_last_updated_date',
'bg_user_defined_attribute',
'bg_project_custom_dropdown_value1',
'bg_project_custom_dropdown_value2',
'bg_project_custom_dropdown_value3',
'bg_tags')
and st.[name] in ('nvarchar','varchar')
and sc.length > 30
2017-07-26 16:28:52  elapsed milliseconds:0000
2017-07-26 16:28:52  sql=

select bg_id, 	

isnull(bg_tags,'') bg_tags,
bg_short_desc
from bugs
2017-07-26 16:28:52  elapsed milliseconds:0000
2017-07-26 16:28:52  sql=

select bp_bug, bp_id, 
isnull(bp_comment_search,bp_comment) [text] 
from bug_posts 
where bp_type <> 'update'
and bp_hidden_from_external_users = 0
2017-07-26 16:28:52  elapsed milliseconds:0000
2017-07-26 16:28:52  done creating Lucene index
2017-07-26 16:28:52 http://localhost:49412/default.aspx sql=
select count(1) from users
2017-07-26 16:28:58 http://localhost:49412/default.aspx sql=
select count(1) from users
2017-07-26 16:28:58 http://localhost:49412/default.aspx sql=

select us_username, us_id, us_password, isnull(us_salt,0) us_salt, us_active
from users
where us_username = N'admin'
2017-07-26 16:28:58 http://localhost:49412/default.aspx elapsed milliseconds:0000
2017-07-26 16:28:58 http://localhost:49412/default.aspx sql=
update users set us_most_recent_login_datetime = getdate() where us_id = 1
2017-07-26 16:28:58 http://localhost:49412/default.aspx sql=
select us_id from users where us_username = N'admin'
2017-07-26 16:28:58 http://localhost:49412/default.aspx elapsed milliseconds:0000
2017-07-26 16:28:58 http://localhost:49412/default.aspx guid=91102326-1393-4838-8b47-3a0e5c652d0a
2017-07-26 16:28:58 http://localhost:49412/default.aspx sql=
insert into sessions (se_id, se_user) values('91102326-1393-4838-8b47-3a0e5c652d0a', 1)
2017-07-26 16:28:58 http://localhost:49412/default.aspx AppPath:
2017-07-26 16:28:58 http://localhost:49412/bugs.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '91102326-1393-4838-8b47-3a0e5c652d0a';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '91102326-1393-4838-8b47-3a0e5c652d0a'
and us_active = 1
2017-07-26 16:28:58 http://localhost:49412/bugs.aspx elapsed milliseconds:0013
2017-07-26 16:28:58 http://localhost:49412/bugs.aspx sql=

/* custom columns */ select sc.name, st.[name] [datatype], 
case when st.[name] = 'nvarchar' or st.[name] = 'nchar' then sc.length/2 else sc.length end as [length], 
sc.xprec, sc.xscale, sc.isnullable,
mm.text [default value], 
dflts.name [default name], 
isnull(ccm_dropdown_type,'') [dropdown type],
isnull(ccm_dropdown_vals,'') [vals],
isnull(ccm_sort_seq, sc.colorder) [column order],
sc.colorder
from syscolumns sc
inner join systypes st on st.xusertype = sc.xusertype
inner join sysobjects so on sc.id = so.id
left outer join syscomments mm on sc.cdefault = mm.id
left outer join custom_col_metadata on ccm_colorder = sc.colorder
left outer join sysobjects dflts on dflts.id = mm.id
where so.name = 'bugs'
and st.[name] <> 'sysname'
and sc.name not in ('rowguid',
'bg_id',
'bg_short_desc',
'bg_reported_user',
'bg_reported_date',
'bg_project',
'bg_org',
'bg_category',
'bg_priority',
'bg_status',
'bg_assigned_to_user',
'bg_last_updated_user',
'bg_last_updated_date',
'bg_user_defined_attribute',
'bg_project_custom_dropdown_value1',
'bg_project_custom_dropdown_value2',
'bg_project_custom_dropdown_value3',
'bg_tags')
order by sc.id, isnull(ccm_sort_seq,sc.colorder)
2017-07-26 16:28:58 http://localhost:49412/bugs.aspx elapsed milliseconds:0000
2017-07-26 16:28:58 http://localhost:49412/bugs.aspx sql=
/* query dropdown */
select qu_id, qu_desc
from queries
where (isnull(qu_user,0) = 0 and isnull(qu_org,0) = 0)
or isnull(qu_user,0) = 1
or isnull(qu_org,0) = 1
order by qu_desc
2017-07-26 16:28:58 http://localhost:49412/bugs.aspx elapsed milliseconds:0000
2017-07-26 16:28:58 http://localhost:49412/bugs.aspx sql=
select qu_id, qu_sql from queries where qu_id in
			(select us_default_query from users where us_id = 1)
2017-07-26 16:28:58 http://localhost:49412/bugs.aspx elapsed milliseconds:0000
2017-07-26 16:28:58 http://localhost:49412/bugs.aspx sql=
select isnull(pr_background_color,'#ffffff'), bg_id [id], isnull(bu_flag,0) [$FLAG], 
 bg_short_desc [desc], isnull(pj_name,'') [project], isnull(og_name,'') [organization], isnull(ct_name,'') [category], rpt.us_username [reported by],
 bg_reported_date [reported on], isnull(pr_name,'') [priority], isnull(asg.us_username,'') [assigned to],
 isnull(st_name,'') [status], isnull(lu.us_username,'') [last updated by], bg_last_updated_date [last updated on]
 from bugs 
 left outer join bug_user on bu_bug = bg_id and bu_user = 1 
 left outer join users rpt on rpt.us_id = bg_reported_user
 left outer join users asg on asg.us_id = bg_assigned_to_user
 left outer join users lu on lu.us_id = bg_last_updated_user
 left outer join projects on pj_id = bg_project
 left outer join orgs on og_id = bg_org
 left outer join categories on ct_id = bg_category
 left outer join priorities on pr_id = bg_priority
 left outer join statuses on st_id = bg_status
  /* altered - just order by  */ WHERE  (bugs.bg_project not in (
					select pu_project
					from project_user_xref
					where pu_user = 1
					and pu_permission_level = 0)) order by bg_id desc
2017-07-26 16:28:58 http://localhost:49412/bugs.aspx elapsed milliseconds:0000
2017-07-26 16:29:44 http://localhost:49412/bugs.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '91102326-1393-4838-8b47-3a0e5c652d0a';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '91102326-1393-4838-8b47-3a0e5c652d0a'
and us_active = 1
2017-07-26 16:29:44 http://localhost:49412/bugs.aspx elapsed milliseconds:0000
2017-07-26 16:29:44 http://localhost:49412/bugs.aspx sql=
/* query dropdown */
select qu_id, qu_desc
from queries
where (isnull(qu_user,0) = 0 and isnull(qu_org,0) = 0)
or isnull(qu_user,0) = 1
or isnull(qu_org,0) = 1
order by qu_desc
2017-07-26 16:29:44 http://localhost:49412/bugs.aspx elapsed milliseconds:0000
2017-07-26 16:29:44 http://localhost:49412/bugs.aspx sql=
select qu_sql from queries where qu_id = 1
2017-07-26 16:29:44 http://localhost:49412/bugs.aspx sql=
select isnull(pr_background_color,'#ffffff'), bg_id [id], isnull(bu_flag,0) [$FLAG], 
 bg_short_desc [desc], isnull(pj_name,'') [project], isnull(og_name,'') [organization], isnull(ct_name,'') [category], rpt.us_username [reported by],
 bg_reported_date [reported on], isnull(pr_name,'') [priority], isnull(asg.us_username,'') [assigned to],
 isnull(st_name,'') [status], isnull(lu.us_username,'') [last updated by], bg_last_updated_date [last updated on]
 from bugs 
 left outer join bug_user on bu_bug = bg_id and bu_user = 1 
 left outer join users rpt on rpt.us_id = bg_reported_user
 left outer join users asg on asg.us_id = bg_assigned_to_user
 left outer join users lu on lu.us_id = bg_last_updated_user
 left outer join projects on pj_id = bg_project
 left outer join orgs on og_id = bg_org
 left outer join categories on ct_id = bg_category
 left outer join priorities on pr_id = bg_priority
 left outer join statuses on st_id = bg_status
  /* altered - just order by  */ WHERE  (bugs.bg_project not in (
					select pu_project
					from project_user_xref
					where pu_user = 1
					and pu_permission_level = 0)) order by bg_id desc
2017-07-26 16:29:44 http://localhost:49412/bugs.aspx elapsed milliseconds:0000
2017-07-26 16:30:20 http://localhost:49412/bugs.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '91102326-1393-4838-8b47-3a0e5c652d0a';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '91102326-1393-4838-8b47-3a0e5c652d0a'
and us_active = 1
2017-07-26 16:30:20 http://localhost:49412/bugs.aspx elapsed milliseconds:0000
2017-07-26 16:30:20 http://localhost:49412/bugs.aspx sql=
/* query dropdown */
select qu_id, qu_desc
from queries
where (isnull(qu_user,0) = 0 and isnull(qu_org,0) = 0)
or isnull(qu_user,0) = 1
or isnull(qu_org,0) = 1
order by qu_desc
2017-07-26 16:30:20 http://localhost:49412/bugs.aspx elapsed milliseconds:0000
2017-07-26 16:30:20 http://localhost:49412/bugs.aspx sql=
select qu_sql from queries where qu_id = 1
2017-07-26 16:30:20 http://localhost:49412/bugs.aspx sql=
select isnull(pr_background_color,'#ffffff'), bg_id [id], isnull(bu_flag,0) [$FLAG], 
 bg_short_desc [desc], isnull(pj_name,'') [project], isnull(og_name,'') [organization], isnull(ct_name,'') [category], rpt.us_username [reported by],
 bg_reported_date [reported on], isnull(pr_name,'') [priority], isnull(asg.us_username,'') [assigned to],
 isnull(st_name,'') [status], isnull(lu.us_username,'') [last updated by], bg_last_updated_date [last updated on]
 from bugs 
 left outer join bug_user on bu_bug = bg_id and bu_user = 1 
 left outer join users rpt on rpt.us_id = bg_reported_user
 left outer join users asg on asg.us_id = bg_assigned_to_user
 left outer join users lu on lu.us_id = bg_last_updated_user
 left outer join projects on pj_id = bg_project
 left outer join orgs on og_id = bg_org
 left outer join categories on ct_id = bg_category
 left outer join priorities on pr_id = bg_priority
 left outer join statuses on st_id = bg_status
  /* altered - just order by  */ WHERE  (bugs.bg_project not in (
					select pu_project
					from project_user_xref
					where pu_user = 1
					and pu_permission_level = 0)) order by bg_id desc
2017-07-26 16:30:20 http://localhost:49412/bugs.aspx elapsed milliseconds:0000
2017-07-26 16:31:41 http://localhost:49412/bugs.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '91102326-1393-4838-8b47-3a0e5c652d0a';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '91102326-1393-4838-8b47-3a0e5c652d0a'
and us_active = 1
2017-07-26 16:31:41 http://localhost:49412/bugs.aspx elapsed milliseconds:0000
2017-07-26 16:31:41 http://localhost:49412/bugs.aspx sql=
/* query dropdown */
select qu_id, qu_desc
from queries
where (isnull(qu_user,0) = 0 and isnull(qu_org,0) = 0)
or isnull(qu_user,0) = 1
or isnull(qu_org,0) = 1
order by qu_desc
2017-07-26 16:31:41 http://localhost:49412/bugs.aspx elapsed milliseconds:0000
2017-07-26 16:31:41 http://localhost:49412/bugs.aspx sql=
select qu_sql from queries where qu_id = 1
2017-07-26 16:31:41 http://localhost:49412/bugs.aspx sql=
select isnull(pr_background_color,'#ffffff'), bg_id [id], isnull(bu_flag,0) [$FLAG], 
 bg_short_desc [desc], isnull(pj_name,'') [project], isnull(og_name,'') [organization], isnull(ct_name,'') [category], rpt.us_username [reported by],
 bg_reported_date [reported on], isnull(pr_name,'') [priority], isnull(asg.us_username,'') [assigned to],
 isnull(st_name,'') [status], isnull(lu.us_username,'') [last updated by], bg_last_updated_date [last updated on]
 from bugs 
 left outer join bug_user on bu_bug = bg_id and bu_user = 1 
 left outer join users rpt on rpt.us_id = bg_reported_user
 left outer join users asg on asg.us_id = bg_assigned_to_user
 left outer join users lu on lu.us_id = bg_last_updated_user
 left outer join projects on pj_id = bg_project
 left outer join orgs on og_id = bg_org
 left outer join categories on ct_id = bg_category
 left outer join priorities on pr_id = bg_priority
 left outer join statuses on st_id = bg_status
  /* altered - just order by  */ WHERE  (bugs.bg_project not in (
					select pu_project
					from project_user_xref
					where pu_user = 1
					and pu_permission_level = 0)) order by bg_id desc
2017-07-26 16:31:41 http://localhost:49412/bugs.aspx elapsed milliseconds:0000
2017-07-26 16:32:03 http://localhost:49412/bugs.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '91102326-1393-4838-8b47-3a0e5c652d0a';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '91102326-1393-4838-8b47-3a0e5c652d0a'
and us_active = 1
2017-07-26 16:32:03 http://localhost:49412/bugs.aspx elapsed milliseconds:0000
2017-07-26 16:32:03 http://localhost:49412/bugs.aspx sql=
/* query dropdown */
select qu_id, qu_desc
from queries
where (isnull(qu_user,0) = 0 and isnull(qu_org,0) = 0)
or isnull(qu_user,0) = 1
or isnull(qu_org,0) = 1
order by qu_desc
2017-07-26 16:32:03 http://localhost:49412/bugs.aspx elapsed milliseconds:0000
2017-07-26 16:32:03 http://localhost:49412/bugs.aspx sql=
select qu_sql from queries where qu_id = 1
2017-07-26 16:32:03 http://localhost:49412/bugs.aspx sql=
select isnull(pr_background_color,'#ffffff'), bg_id [id], isnull(bu_flag,0) [$FLAG], 
 bg_short_desc [desc], isnull(pj_name,'') [project], isnull(og_name,'') [organization], isnull(ct_name,'') [category], rpt.us_username [reported by],
 bg_reported_date [reported on], isnull(pr_name,'') [priority], isnull(asg.us_username,'') [assigned to],
 isnull(st_name,'') [status], isnull(lu.us_username,'') [last updated by], bg_last_updated_date [last updated on]
 from bugs 
 left outer join bug_user on bu_bug = bg_id and bu_user = 1 
 left outer join users rpt on rpt.us_id = bg_reported_user
 left outer join users asg on asg.us_id = bg_assigned_to_user
 left outer join users lu on lu.us_id = bg_last_updated_user
 left outer join projects on pj_id = bg_project
 left outer join orgs on og_id = bg_org
 left outer join categories on ct_id = bg_category
 left outer join priorities on pr_id = bg_priority
 left outer join statuses on st_id = bg_status
  /* altered - just order by  */ WHERE  (bugs.bg_project not in (
					select pu_project
					from project_user_xref
					where pu_user = 1
					and pu_permission_level = 0)) order by bg_id desc
2017-07-26 16:32:03 http://localhost:49412/bugs.aspx elapsed milliseconds:0000
2017-07-26 16:32:20 http://localhost:49412/bugs.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '91102326-1393-4838-8b47-3a0e5c652d0a';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '91102326-1393-4838-8b47-3a0e5c652d0a'
and us_active = 1
2017-07-26 16:32:20 http://localhost:49412/bugs.aspx elapsed milliseconds:0000
2017-07-26 16:32:20 http://localhost:49412/bugs.aspx sql=
/* query dropdown */
select qu_id, qu_desc
from queries
where (isnull(qu_user,0) = 0 and isnull(qu_org,0) = 0)
or isnull(qu_user,0) = 1
or isnull(qu_org,0) = 1
order by qu_desc
2017-07-26 16:32:20 http://localhost:49412/bugs.aspx elapsed milliseconds:0000
2017-07-26 16:32:20 http://localhost:49412/bugs.aspx sql=
select qu_sql from queries where qu_id = 1
2017-07-26 16:32:20 http://localhost:49412/bugs.aspx sql=
select isnull(pr_background_color,'#ffffff'), bg_id [id], isnull(bu_flag,0) [$FLAG], 
 bg_short_desc [desc], isnull(pj_name,'') [project], isnull(og_name,'') [organization], isnull(ct_name,'') [category], rpt.us_username [reported by],
 bg_reported_date [reported on], isnull(pr_name,'') [priority], isnull(asg.us_username,'') [assigned to],
 isnull(st_name,'') [status], isnull(lu.us_username,'') [last updated by], bg_last_updated_date [last updated on]
 from bugs 
 left outer join bug_user on bu_bug = bg_id and bu_user = 1 
 left outer join users rpt on rpt.us_id = bg_reported_user
 left outer join users asg on asg.us_id = bg_assigned_to_user
 left outer join users lu on lu.us_id = bg_last_updated_user
 left outer join projects on pj_id = bg_project
 left outer join orgs on og_id = bg_org
 left outer join categories on ct_id = bg_category
 left outer join priorities on pr_id = bg_priority
 left outer join statuses on st_id = bg_status
  /* altered - just order by  */ WHERE  (bugs.bg_project not in (
					select pu_project
					from project_user_xref
					where pu_user = 1
					and pu_permission_level = 0)) order by bg_id desc
2017-07-26 16:32:20 http://localhost:49412/bugs.aspx elapsed milliseconds:0000
2017-07-26 16:32:37 http://localhost:49412/bugs.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '91102326-1393-4838-8b47-3a0e5c652d0a';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '91102326-1393-4838-8b47-3a0e5c652d0a'
and us_active = 1
2017-07-26 16:32:37 http://localhost:49412/bugs.aspx elapsed milliseconds:0000
2017-07-26 16:32:37 http://localhost:49412/bugs.aspx sql=
/* query dropdown */
select qu_id, qu_desc
from queries
where (isnull(qu_user,0) = 0 and isnull(qu_org,0) = 0)
or isnull(qu_user,0) = 1
or isnull(qu_org,0) = 1
order by qu_desc
2017-07-26 16:32:37 http://localhost:49412/bugs.aspx elapsed milliseconds:0000
2017-07-26 16:32:37 http://localhost:49412/bugs.aspx sql=
select qu_sql from queries where qu_id = 1
2017-07-26 16:32:37 http://localhost:49412/bugs.aspx sql=
select isnull(pr_background_color,'#ffffff'), bg_id [id], isnull(bu_flag,0) [$FLAG], 
 bg_short_desc [desc], isnull(pj_name,'') [project], isnull(og_name,'') [organization], isnull(ct_name,'') [category], rpt.us_username [reported by],
 bg_reported_date [reported on], isnull(pr_name,'') [priority], isnull(asg.us_username,'') [assigned to],
 isnull(st_name,'') [status], isnull(lu.us_username,'') [last updated by], bg_last_updated_date [last updated on]
 from bugs 
 left outer join bug_user on bu_bug = bg_id and bu_user = 1 
 left outer join users rpt on rpt.us_id = bg_reported_user
 left outer join users asg on asg.us_id = bg_assigned_to_user
 left outer join users lu on lu.us_id = bg_last_updated_user
 left outer join projects on pj_id = bg_project
 left outer join orgs on og_id = bg_org
 left outer join categories on ct_id = bg_category
 left outer join priorities on pr_id = bg_priority
 left outer join statuses on st_id = bg_status
  /* altered - just order by  */ WHERE  (bugs.bg_project not in (
					select pu_project
					from project_user_xref
					where pu_user = 1
					and pu_permission_level = 0)) order by bg_id desc
2017-07-26 16:32:37 http://localhost:49412/bugs.aspx elapsed milliseconds:0000

TIME: 16:32:54
MSG: c:\Users\Oisiktekiner\Documents\Visual Studio 2017\Projects\btnetnew\btnetnew\edit_bug.aspx(286): error CS0117: 'btnet.btnet' does not contain a definition for 'PrintBug'
URL: http://localhost:49412/edit_bug.aspx
EXCEPTION: System.Web.HttpCompileException (0x80004005): c:\Users\Oisiktekiner\Documents\Visual Studio 2017\Projects\btnetnew\btnetnew\edit_bug.aspx(286): error CS0117: 'btnet.btnet' does not contain a definition for 'PrintBug'
   at System.Web.Compilation.AssemblyBuilder.Compile()
   at System.Web.Compilation.BuildProvidersCompiler.PerformBuild()
   at System.Web.Compilation.BuildManager.CompileWebFile(VirtualPath virtualPath)
   at System.Web.Compilation.BuildManager.GetVPathBuildResultInternal(VirtualPath virtualPath, Boolean noBuild, Boolean allowCrossApp, Boolean allowBuildInPrecompile, Boolean throwIfNotFound, Boolean ensureIsUpToDate)
   at System.Web.Compilation.BuildManager.GetVPathBuildResultWithNoAssert(HttpContext context, VirtualPath virtualPath, Boolean noBuild, Boolean allowCrossApp, Boolean allowBuildInPrecompile, Boolean throwIfNotFound, Boolean ensureIsUpToDate)
   at System.Web.Compilation.BuildManager.GetVirtualPathObjectFactory(VirtualPath virtualPath, HttpContext context, Boolean allowCrossApp, Boolean throwIfNotFound)
   at System.Web.Compilation.BuildManager.CreateInstanceFromVirtualPath(VirtualPath virtualPath, Type requiredBaseType, HttpContext context, Boolean allowCrossApp)
   at System.Web.UI.PageHandlerFactory.GetHandlerHelper(HttpContext context, String requestType, VirtualPath virtualPath, String physicalPath)
   at System.Web.UI.PageHandlerFactory.GetHandler(HttpContext context, String requestType, String virtualPath, String path)
   at System.Web.HttpApplication.MaterializeHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute()
   at System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously)

ALL_HTTP=HTTP_CACHE_CONTROL:no-cache
HTTP_CONNECTION:Keep-Alive
HTTP_ACCEPT:text/html, application/xhtml+xml, */*
HTTP_ACCEPT_ENCODING:gzip, deflate
HTTP_ACCEPT_LANGUAGE:tr-TR
HTTP_COOKIE:user=name=admin&NTLM=0; se_id=91102326-1393-4838-8b47-3a0e5c652d0a; ASP.NET_SessionId=doeb4qqhrupbs0qmonsgnwge
HTTP_HOST:localhost:49412
HTTP_REFERER:http://localhost:49412/bugs.aspx
HTTP_USER_AGENT:Mozilla/5.0 (Windows NT 6.1; WOW64; Trident/7.0; rv:11.0) like Gecko
HTTP_DNT:1

ALL_RAW=Cache-Control: no-cache
Connection: Keep-Alive
Accept: text/html, application/xhtml+xml, */*
Accept-Encoding: gzip, deflate
Accept-Language: tr-TR
Cookie: user=name=admin&NTLM=0; se_id=91102326-1393-4838-8b47-3a0e5c652d0a; ASP.NET_SessionId=doeb4qqhrupbs0qmonsgnwge
Host: localhost:49412
Referer: http://localhost:49412/bugs.aspx
User-Agent: Mozilla/5.0 (Windows NT 6.1; WOW64; Trident/7.0; rv:11.0) like Gecko
DNT: 1

APPL_MD_PATH=/LM/W3SVC/2/ROOT
APPL_PHYSICAL_PATH=C:\Users\Oisiktekiner\Documents\Visual Studio 2017\Projects\btnetnew\btnetnew\
CONTENT_LENGTH=0
GATEWAY_INTERFACE=CGI/1.1
HTTPS=off
INSTANCE_ID=2
INSTANCE_META_PATH=/LM/W3SVC/2
LOCAL_ADDR=::1
PATH_INFO=/edit_bug.aspx
PATH_TRANSLATED=C:\Users\Oisiktekiner\Documents\Visual Studio 2017\Projects\btnetnew\btnetnew\edit_bug.aspx
REMOTE_ADDR=::1
REMOTE_HOST=::1
REMOTE_PORT=52215
REQUEST_METHOD=GET
SCRIPT_NAME=/edit_bug.aspx
SERVER_NAME=localhost
SERVER_PORT=49412
SERVER_PORT_SECURE=0
SERVER_PROTOCOL=HTTP/1.1
SERVER_SOFTWARE=Microsoft-IIS/10.0
URL=/edit_bug.aspx
HTTP_CACHE_CONTROL=no-cache
HTTP_CONNECTION=Keep-Alive
HTTP_ACCEPT=text/html, application/xhtml+xml, */*
HTTP_ACCEPT_ENCODING=gzip, deflate
HTTP_ACCEPT_LANGUAGE=tr-TR
HTTP_COOKIE=user=name=admin&NTLM=0; se_id=91102326-1393-4838-8b47-3a0e5c652d0a; ASP.NET_SessionId=doeb4qqhrupbs0qmonsgnwge
HTTP_HOST=localhost:49412
HTTP_REFERER=http://localhost:49412/bugs.aspx
HTTP_USER_AGENT=Mozilla/5.0 (Windows NT 6.1; WOW64; Trident/7.0; rv:11.0) like Gecko
HTTP_DNT=1
2017-07-26 16:32:54 http://localhost:49412/edit_bug.aspx to email addr: admin@example.com
2017-07-26 16:32:54 http://localhost:49412/edit_bug.aspx There was a problem sending email.   Check settings in Web.config.
2017-07-26 16:32:54 http://localhost:49412/edit_bug.aspx TO:admin@example.com
2017-07-26 16:32:54 http://localhost:49412/edit_bug.aspx FROM:errors@example.com
2017-07-26 16:32:54 http://localhost:49412/edit_bug.aspx SUBJECT:Error: c:\Users\Oisiktekiner\Documents\Visual Studio 2017\Projects\btnetnew\btnetnew\edit_bug.aspx(286): error CS0117: 'btnet.btnet' does not contain a definition for 'PrintBug'
2017-07-26 16:32:54 http://localhost:49412/edit_bug.aspx Could not find a part of the path 'C:\temp\pickup\d4195def-ab40-4767-9ca7-f141bdac07d1.eml'.
2017-07-26 16:37:30  caught exception in util.set_context:Request is not available in this context
2017-07-26 16:37:30  threadproc_votes
2017-07-26 16:37:30  sql=

if exists (select * from dbo.sysobjects where id = object_id(N'[votes_view]'))
drop view [votes_view]
2017-07-26 16:37:30  started creating Lucene index using folder C:\Users\Oisiktekiner\Documents\Visual Studio 2017\Projects\btnetnew\btnetnew\App_Data\lucene_index
2017-07-26 16:37:30  sql=

create view votes_view as
select bu_bug as vote_bug, sum(bu_vote) as vote_total
from bug_user
group by bu_bug
having sum(bu_vote) > 0
2017-07-26 16:37:30  sql=

select bu_bug, count(1)
from bug_user 
where bu_vote = 1
group by bu_bug
2017-07-26 16:37:30  elapsed milliseconds:0058
2017-07-26 16:37:30  sql=

/* get searchable cols */					
select sc.name
from syscolumns sc
inner join systypes st on st.xusertype = sc.xusertype
inner join sysobjects so on sc.id = so.id
where so.name = 'bugs'
and st.[name] <> 'sysname'
and sc.name not in ('rowguid',
'bg_id',
'bg_short_desc',
'bg_reported_user',
'bg_reported_date',
'bg_project',
'bg_org',
'bg_category',
'bg_priority',
'bg_status',
'bg_assigned_to_user',
'bg_last_updated_user',
'bg_last_updated_date',
'bg_user_defined_attribute',
'bg_project_custom_dropdown_value1',
'bg_project_custom_dropdown_value2',
'bg_project_custom_dropdown_value3',
'bg_tags')
and st.[name] in ('nvarchar','varchar')
and sc.length > 30
2017-07-26 16:37:30  elapsed milliseconds:0005
2017-07-26 16:37:30  sql=

select bg_id, 	

isnull(bg_tags,'') bg_tags,
bg_short_desc
from bugs
2017-07-26 16:37:30  elapsed milliseconds:0000
2017-07-26 16:37:30  sql=

select bp_bug, bp_id, 
isnull(bp_comment_search,bp_comment) [text] 
from bug_posts 
where bp_type <> 'update'
and bp_hidden_from_external_users = 0
2017-07-26 16:37:30  elapsed milliseconds:0000
2017-07-26 16:37:30  done creating Lucene index
2017-07-26 16:37:30 http://localhost:49412/default.aspx sql=
select count(1) from users
2017-07-26 16:37:32 http://localhost:49412/default.aspx sql=
select count(1) from users
2017-07-26 16:37:32 http://localhost:49412/default.aspx sql=

select us_username, us_id, us_password, isnull(us_salt,0) us_salt, us_active
from users
where us_username = N'admin'
2017-07-26 16:37:32 http://localhost:49412/default.aspx elapsed milliseconds:0000
2017-07-26 16:37:32 http://localhost:49412/default.aspx sql=
update users set us_most_recent_login_datetime = getdate() where us_id = 1
2017-07-26 16:37:32 http://localhost:49412/default.aspx sql=
select us_id from users where us_username = N'admin'
2017-07-26 16:37:32 http://localhost:49412/default.aspx elapsed milliseconds:0002
2017-07-26 16:37:32 http://localhost:49412/default.aspx guid=e4274d69-52cd-4498-a1f0-ea5e49f69f0a
2017-07-26 16:37:32 http://localhost:49412/default.aspx sql=
insert into sessions (se_id, se_user) values('e4274d69-52cd-4498-a1f0-ea5e49f69f0a', 1)
2017-07-26 16:37:32 http://localhost:49412/default.aspx AppPath:
2017-07-26 16:37:32 http://localhost:49412/bugs.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = 'e4274d69-52cd-4498-a1f0-ea5e49f69f0a';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = 'e4274d69-52cd-4498-a1f0-ea5e49f69f0a'
and us_active = 1
2017-07-26 16:37:32 http://localhost:49412/bugs.aspx elapsed milliseconds:0008
2017-07-26 16:37:32 http://localhost:49412/bugs.aspx sql=

/* custom columns */ select sc.name, st.[name] [datatype], 
case when st.[name] = 'nvarchar' or st.[name] = 'nchar' then sc.length/2 else sc.length end as [length], 
sc.xprec, sc.xscale, sc.isnullable,
mm.text [default value], 
dflts.name [default name], 
isnull(ccm_dropdown_type,'') [dropdown type],
isnull(ccm_dropdown_vals,'') [vals],
isnull(ccm_sort_seq, sc.colorder) [column order],
sc.colorder
from syscolumns sc
inner join systypes st on st.xusertype = sc.xusertype
inner join sysobjects so on sc.id = so.id
left outer join syscomments mm on sc.cdefault = mm.id
left outer join custom_col_metadata on ccm_colorder = sc.colorder
left outer join sysobjects dflts on dflts.id = mm.id
where so.name = 'bugs'
and st.[name] <> 'sysname'
and sc.name not in ('rowguid',
'bg_id',
'bg_short_desc',
'bg_reported_user',
'bg_reported_date',
'bg_project',
'bg_org',
'bg_category',
'bg_priority',
'bg_status',
'bg_assigned_to_user',
'bg_last_updated_user',
'bg_last_updated_date',
'bg_user_defined_attribute',
'bg_project_custom_dropdown_value1',
'bg_project_custom_dropdown_value2',
'bg_project_custom_dropdown_value3',
'bg_tags')
order by sc.id, isnull(ccm_sort_seq,sc.colorder)
2017-07-26 16:37:32 http://localhost:49412/bugs.aspx elapsed milliseconds:0000
2017-07-26 16:37:32 http://localhost:49412/bugs.aspx sql=
/* query dropdown */
select qu_id, qu_desc
from queries
where (isnull(qu_user,0) = 0 and isnull(qu_org,0) = 0)
or isnull(qu_user,0) = 1
or isnull(qu_org,0) = 1
order by qu_desc
2017-07-26 16:37:32 http://localhost:49412/bugs.aspx elapsed milliseconds:0000
2017-07-26 16:37:32 http://localhost:49412/bugs.aspx sql=
select qu_id, qu_sql from queries where qu_id in
			(select us_default_query from users where us_id = 1)
2017-07-26 16:37:32 http://localhost:49412/bugs.aspx elapsed milliseconds:0000
2017-07-26 16:37:32 http://localhost:49412/bugs.aspx sql=
select isnull(pr_background_color,'#ffffff'), bg_id [id], isnull(bu_flag,0) [$FLAG], 
 bg_short_desc [desc], isnull(pj_name,'') [project], isnull(og_name,'') [organization], isnull(ct_name,'') [category], rpt.us_username [reported by],
 bg_reported_date [reported on], isnull(pr_name,'') [priority], isnull(asg.us_username,'') [assigned to],
 isnull(st_name,'') [status], isnull(lu.us_username,'') [last updated by], bg_last_updated_date [last updated on]
 from bugs 
 left outer join bug_user on bu_bug = bg_id and bu_user = 1 
 left outer join users rpt on rpt.us_id = bg_reported_user
 left outer join users asg on asg.us_id = bg_assigned_to_user
 left outer join users lu on lu.us_id = bg_last_updated_user
 left outer join projects on pj_id = bg_project
 left outer join orgs on og_id = bg_org
 left outer join categories on ct_id = bg_category
 left outer join priorities on pr_id = bg_priority
 left outer join statuses on st_id = bg_status
  /* altered - just order by  */ WHERE  (bugs.bg_project not in (
					select pu_project
					from project_user_xref
					where pu_user = 1
					and pu_permission_level = 0)) order by bg_id desc
2017-07-26 16:37:32 http://localhost:49412/bugs.aspx elapsed milliseconds:0000
2017-07-26 16:38:14 http://localhost:49412/queries.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = 'e4274d69-52cd-4498-a1f0-ea5e49f69f0a';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = 'e4274d69-52cd-4498-a1f0-ea5e49f69f0a'
and us_active = 1
2017-07-26 16:38:14 http://localhost:49412/queries.aspx elapsed milliseconds:0000
2017-07-26 16:38:14 http://localhost:49412/queries.aspx sql=
select
			qu_desc [query],
			case
				when isnull(qu_user,0) = 0 and isnull(qu_org,0) is null then 'everybody'
				when isnull(qu_user,0) <> 0 then 'user:' + us_username
				when isnull(qu_org,0) <> 0 then 'org:' + og_name
				else ' '
				end [visibility],
			'<a href=bugs.aspx?qu_id=' + convert(varchar,qu_id) + '>view list</a>' [view list],
			'<a target=_blank href=print_bugs.aspx?qu_id=' + convert(varchar,qu_id) + '>print list</a>' [print list],
			'<a target=_blank href=print_bugs.aspx?format=excel&qu_id=' + convert(varchar,qu_id) + '>export as excel</a>' [export as excel],
			'<a target=_blank href=print_bugs2.aspx?qu_id=' + convert(varchar,qu_id) + '>print detail</a>' [print list<br>with detail],
			'<a href=edit_query.aspx?id=' + convert(varchar,qu_id) + '>edit</a>' [edit],
			'<a href=delete_query.aspx?id=' + convert(varchar,qu_id) + '>delete</a>' [delete],
			replace(convert(nvarchar(4000),qu_sql), char(10),'<br>') [sql]
			from queries
			left outer join users on qu_user = us_id
			left outer join orgs on qu_org = og_id
			where 1 = 0 /* all */
			or isnull(qu_user,0) = 1
			or isnull(qu_user,0) = 0
			order by qu_desc
2017-07-26 16:38:14 http://localhost:49412/queries.aspx elapsed milliseconds:0001
2017-07-26 16:38:22 http://localhost:49412/bugs.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = 'e4274d69-52cd-4498-a1f0-ea5e49f69f0a';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = 'e4274d69-52cd-4498-a1f0-ea5e49f69f0a'
and us_active = 1
2017-07-26 16:38:22 http://localhost:49412/bugs.aspx elapsed milliseconds:0000
2017-07-26 16:38:22 http://localhost:49412/bugs.aspx sql=
/* query dropdown */
select qu_id, qu_desc
from queries
where (isnull(qu_user,0) = 0 and isnull(qu_org,0) = 0)
or isnull(qu_user,0) = 1
or isnull(qu_org,0) = 1
order by qu_desc
2017-07-26 16:38:22 http://localhost:49412/bugs.aspx elapsed milliseconds:0000
2017-07-26 16:38:22 http://localhost:49412/bugs.aspx sql=
select qu_sql from queries where qu_id = 1
2017-07-26 16:38:22 http://localhost:49412/bugs.aspx sql=
select isnull(pr_background_color,'#ffffff'), bg_id [id], isnull(bu_flag,0) [$FLAG], 
 bg_short_desc [desc], isnull(pj_name,'') [project], isnull(og_name,'') [organization], isnull(ct_name,'') [category], rpt.us_username [reported by],
 bg_reported_date [reported on], isnull(pr_name,'') [priority], isnull(asg.us_username,'') [assigned to],
 isnull(st_name,'') [status], isnull(lu.us_username,'') [last updated by], bg_last_updated_date [last updated on]
 from bugs 
 left outer join bug_user on bu_bug = bg_id and bu_user = 1 
 left outer join users rpt on rpt.us_id = bg_reported_user
 left outer join users asg on asg.us_id = bg_assigned_to_user
 left outer join users lu on lu.us_id = bg_last_updated_user
 left outer join projects on pj_id = bg_project
 left outer join orgs on og_id = bg_org
 left outer join categories on ct_id = bg_category
 left outer join priorities on pr_id = bg_priority
 left outer join statuses on st_id = bg_status
  /* altered - just order by  */ WHERE  (bugs.bg_project not in (
					select pu_project
					from project_user_xref
					where pu_user = 1
					and pu_permission_level = 0)) order by bg_id desc
2017-07-26 16:38:22 http://localhost:49412/bugs.aspx elapsed milliseconds:0000
2017-07-26 16:38:31 http://localhost:49412/logoff.aspx sql=
delete from sessions
			where se_id = N'e4274d69-52cd-4498-a1f0-ea5e49f69f0a'
			or datediff(d, se_date, getdate()) > 2
2017-07-26 16:38:31 http://localhost:49412/default.aspx?msg=logged+off sql=
select count(1) from users
2017-07-26 16:38:34 http://localhost:49412/default.aspx?msg=logged+off sql=
select count(1) from users
2017-07-26 16:38:34 http://localhost:49412/default.aspx?msg=logged+off sql=

select us_username, us_id, us_password, isnull(us_salt,0) us_salt, us_active
from users
where us_username = N'admin'
2017-07-26 16:38:34 http://localhost:49412/default.aspx?msg=logged+off elapsed milliseconds:0000
2017-07-26 16:38:34 http://localhost:49412/default.aspx?msg=logged+off sql=
update users set us_most_recent_login_datetime = getdate() where us_id = 1
2017-07-26 16:38:34 http://localhost:49412/default.aspx?msg=logged+off sql=
select us_id from users where us_username = N'admin'
2017-07-26 16:38:34 http://localhost:49412/default.aspx?msg=logged+off elapsed milliseconds:0001
2017-07-26 16:38:34 http://localhost:49412/default.aspx?msg=logged+off guid=acffef7a-1613-4002-ade4-db87ed223a95
2017-07-26 16:38:34 http://localhost:49412/default.aspx?msg=logged+off sql=
insert into sessions (se_id, se_user) values('acffef7a-1613-4002-ade4-db87ed223a95', 1)
2017-07-26 16:38:34 http://localhost:49412/default.aspx?msg=logged+off AppPath:
2017-07-26 16:38:34 http://localhost:49412/bugs.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = 'acffef7a-1613-4002-ade4-db87ed223a95';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = 'acffef7a-1613-4002-ade4-db87ed223a95'
and us_active = 1
2017-07-26 16:38:34 http://localhost:49412/bugs.aspx elapsed milliseconds:0011
2017-07-26 16:38:34 http://localhost:49412/bugs.aspx sql=
/* query dropdown */
select qu_id, qu_desc
from queries
where (isnull(qu_user,0) = 0 and isnull(qu_org,0) = 0)
or isnull(qu_user,0) = 1
or isnull(qu_org,0) = 1
order by qu_desc
2017-07-26 16:38:34 http://localhost:49412/bugs.aspx elapsed milliseconds:0000
2017-07-26 16:38:34 http://localhost:49412/bugs.aspx sql=
select qu_id, qu_sql from queries where qu_id in
			(select us_default_query from users where us_id = 1)
2017-07-26 16:38:34 http://localhost:49412/bugs.aspx elapsed milliseconds:0000
2017-07-26 16:38:34 http://localhost:49412/bugs.aspx sql=
select isnull(pr_background_color,'#ffffff'), bg_id [id], isnull(bu_flag,0) [$FLAG], 
 bg_short_desc [desc], isnull(pj_name,'') [project], isnull(og_name,'') [organization], isnull(ct_name,'') [category], rpt.us_username [reported by],
 bg_reported_date [reported on], isnull(pr_name,'') [priority], isnull(asg.us_username,'') [assigned to],
 isnull(st_name,'') [status], isnull(lu.us_username,'') [last updated by], bg_last_updated_date [last updated on]
 from bugs 
 left outer join bug_user on bu_bug = bg_id and bu_user = 1 
 left outer join users rpt on rpt.us_id = bg_reported_user
 left outer join users asg on asg.us_id = bg_assigned_to_user
 left outer join users lu on lu.us_id = bg_last_updated_user
 left outer join projects on pj_id = bg_project
 left outer join orgs on og_id = bg_org
 left outer join categories on ct_id = bg_category
 left outer join priorities on pr_id = bg_priority
 left outer join statuses on st_id = bg_status
  /* altered - just order by  */ WHERE  (bugs.bg_project not in (
					select pu_project
					from project_user_xref
					where pu_user = 1
					and pu_permission_level = 0)) order by bg_id desc
2017-07-26 16:38:34 http://localhost:49412/bugs.aspx elapsed milliseconds:0000

TIME: 16:38:40
MSG: c:\Users\Oisiktekiner\Documents\Visual Studio 2017\Projects\btnetnew\btnetnew\edit_bug.aspx(286): error CS0117: 'btnet.btnet' does not contain a definition for 'PrintBug'
URL: http://localhost:49412/edit_bug.aspx
EXCEPTION: System.Web.HttpCompileException (0x80004005): c:\Users\Oisiktekiner\Documents\Visual Studio 2017\Projects\btnetnew\btnetnew\edit_bug.aspx(286): error CS0117: 'btnet.btnet' does not contain a definition for 'PrintBug'
   at System.Web.Compilation.BuildManager.PostProcessFoundBuildResult(BuildResult result, Boolean keyFromVPP, VirtualPath virtualPath)
   at System.Web.Compilation.BuildManager.GetBuildResultFromCacheInternal(String cacheKey, Boolean keyFromVPP, VirtualPath virtualPath, Int64 hashCode, Boolean ensureIsUpToDate)
   at System.Web.Compilation.BuildManager.GetVPathBuildResultFromCacheInternal(VirtualPath virtualPath, Boolean ensureIsUpToDate)
   at System.Web.Compilation.BuildManager.GetVPathBuildResultInternal(VirtualPath virtualPath, Boolean noBuild, Boolean allowCrossApp, Boolean allowBuildInPrecompile, Boolean throwIfNotFound, Boolean ensureIsUpToDate)
   at System.Web.Compilation.BuildManager.GetVPathBuildResultWithNoAssert(HttpContext context, VirtualPath virtualPath, Boolean noBuild, Boolean allowCrossApp, Boolean allowBuildInPrecompile, Boolean throwIfNotFound, Boolean ensureIsUpToDate)
   at System.Web.Compilation.BuildManager.GetVirtualPathObjectFactory(VirtualPath virtualPath, HttpContext context, Boolean allowCrossApp, Boolean throwIfNotFound)
   at System.Web.Compilation.BuildManager.CreateInstanceFromVirtualPath(VirtualPath virtualPath, Type requiredBaseType, HttpContext context, Boolean allowCrossApp)
   at System.Web.UI.PageHandlerFactory.GetHandlerHelper(HttpContext context, String requestType, VirtualPath virtualPath, String physicalPath)
   at System.Web.UI.PageHandlerFactory.GetHandler(HttpContext context, String requestType, String virtualPath, String path)
   at System.Web.HttpApplication.MaterializeHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute()
   at System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously)

ALL_HTTP=HTTP_CONNECTION:Keep-Alive
HTTP_ACCEPT:text/html, application/xhtml+xml, */*
HTTP_ACCEPT_ENCODING:gzip, deflate
HTTP_ACCEPT_LANGUAGE:tr-TR
HTTP_COOKIE:user=name=admin&NTLM=0; se_id=acffef7a-1613-4002-ade4-db87ed223a95; ASP.NET_SessionId=vvr5fmarewynfr23vjukv3uh
HTTP_HOST:localhost:49412
HTTP_REFERER:http://localhost:49412/bugs.aspx
HTTP_USER_AGENT:Mozilla/5.0 (Windows NT 6.1; WOW64; Trident/7.0; rv:11.0) like Gecko
HTTP_DNT:1

ALL_RAW=Connection: Keep-Alive
Accept: text/html, application/xhtml+xml, */*
Accept-Encoding: gzip, deflate
Accept-Language: tr-TR
Cookie: user=name=admin&NTLM=0; se_id=acffef7a-1613-4002-ade4-db87ed223a95; ASP.NET_SessionId=vvr5fmarewynfr23vjukv3uh
Host: localhost:49412
Referer: http://localhost:49412/bugs.aspx
User-Agent: Mozilla/5.0 (Windows NT 6.1; WOW64; Trident/7.0; rv:11.0) like Gecko
DNT: 1

APPL_MD_PATH=/LM/W3SVC/2/ROOT
APPL_PHYSICAL_PATH=C:\Users\Oisiktekiner\Documents\Visual Studio 2017\Projects\btnetnew\btnetnew\
CONTENT_LENGTH=0
GATEWAY_INTERFACE=CGI/1.1
HTTPS=off
INSTANCE_ID=2
INSTANCE_META_PATH=/LM/W3SVC/2
LOCAL_ADDR=::1
PATH_INFO=/edit_bug.aspx
PATH_TRANSLATED=C:\Users\Oisiktekiner\Documents\Visual Studio 2017\Projects\btnetnew\btnetnew\edit_bug.aspx
REMOTE_ADDR=::1
REMOTE_HOST=::1
REMOTE_PORT=52229
REQUEST_METHOD=GET
SCRIPT_NAME=/edit_bug.aspx
SERVER_NAME=localhost
SERVER_PORT=49412
SERVER_PORT_SECURE=0
SERVER_PROTOCOL=HTTP/1.1
SERVER_SOFTWARE=Microsoft-IIS/10.0
URL=/edit_bug.aspx
HTTP_CONNECTION=Keep-Alive
HTTP_ACCEPT=text/html, application/xhtml+xml, */*
HTTP_ACCEPT_ENCODING=gzip, deflate
HTTP_ACCEPT_LANGUAGE=tr-TR
HTTP_COOKIE=user=name=admin&NTLM=0; se_id=acffef7a-1613-4002-ade4-db87ed223a95; ASP.NET_SessionId=vvr5fmarewynfr23vjukv3uh
HTTP_HOST=localhost:49412
HTTP_REFERER=http://localhost:49412/bugs.aspx
HTTP_USER_AGENT=Mozilla/5.0 (Windows NT 6.1; WOW64; Trident/7.0; rv:11.0) like Gecko
HTTP_DNT=1
2017-07-26 16:38:40 http://localhost:49412/edit_bug.aspx to email addr: admin@example.com
2017-07-26 16:38:40 http://localhost:49412/edit_bug.aspx There was a problem sending email.   Check settings in Web.config.
2017-07-26 16:38:40 http://localhost:49412/edit_bug.aspx TO:admin@example.com
2017-07-26 16:38:40 http://localhost:49412/edit_bug.aspx FROM:errors@example.com
2017-07-26 16:38:40 http://localhost:49412/edit_bug.aspx SUBJECT:Error: c:\Users\Oisiktekiner\Documents\Visual Studio 2017\Projects\btnetnew\btnetnew\edit_bug.aspx(286): error CS0117: 'btnet.btnet' does not contain a definition for 'PrintBug'
2017-07-26 16:38:40 http://localhost:49412/edit_bug.aspx Could not find a part of the path 'C:\temp\pickup\ff5aa8eb-75b4-4c22-8183-71b719b54efe.eml'.
2017-07-26 16:39:16  caught exception in util.set_context:Request is not available in this context
2017-07-26 16:39:16  threadproc_votes
2017-07-26 16:39:16  sql=

if exists (select * from dbo.sysobjects where id = object_id(N'[votes_view]'))
drop view [votes_view]
2017-07-26 16:39:16  started creating Lucene index using folder C:\Users\Oisiktekiner\Documents\Visual Studio 2017\Projects\btnetnew\btnetnew\App_Data\lucene_index
2017-07-26 16:39:16  sql=

create view votes_view as
select bu_bug as vote_bug, sum(bu_vote) as vote_total
from bug_user
group by bu_bug
having sum(bu_vote) > 0
2017-07-26 16:39:16  sql=

select bu_bug, count(1)
from bug_user 
where bu_vote = 1
group by bu_bug
2017-07-26 16:39:16  elapsed milliseconds:0021
2017-07-26 16:39:16  sql=

/* get searchable cols */					
select sc.name
from syscolumns sc
inner join systypes st on st.xusertype = sc.xusertype
inner join sysobjects so on sc.id = so.id
where so.name = 'bugs'
and st.[name] <> 'sysname'
and sc.name not in ('rowguid',
'bg_id',
'bg_short_desc',
'bg_reported_user',
'bg_reported_date',
'bg_project',
'bg_org',
'bg_category',
'bg_priority',
'bg_status',
'bg_assigned_to_user',
'bg_last_updated_user',
'bg_last_updated_date',
'bg_user_defined_attribute',
'bg_project_custom_dropdown_value1',
'bg_project_custom_dropdown_value2',
'bg_project_custom_dropdown_value3',
'bg_tags')
and st.[name] in ('nvarchar','varchar')
and sc.length > 30
2017-07-26 16:39:16  elapsed milliseconds:0000
2017-07-26 16:39:16  sql=

select bg_id, 	

isnull(bg_tags,'') bg_tags,
bg_short_desc
from bugs
2017-07-26 16:39:16  elapsed milliseconds:0000
2017-07-26 16:39:16  sql=

select bp_bug, bp_id, 
isnull(bp_comment_search,bp_comment) [text] 
from bug_posts 
where bp_type <> 'update'
and bp_hidden_from_external_users = 0
2017-07-26 16:39:16  elapsed milliseconds:0000
2017-07-26 16:39:16  done creating Lucene index
2017-07-26 16:39:16 http://localhost:49412/default.aspx sql=
select count(1) from users
2017-07-26 16:39:22 http://localhost:49412/default.aspx sql=
select count(1) from users
2017-07-26 16:39:22 http://localhost:49412/default.aspx sql=

select us_username, us_id, us_password, isnull(us_salt,0) us_salt, us_active
from users
where us_username = N'admin'
2017-07-26 16:39:22 http://localhost:49412/default.aspx elapsed milliseconds:0000
2017-07-26 16:39:22 http://localhost:49412/default.aspx sql=
update users set us_most_recent_login_datetime = getdate() where us_id = 1
2017-07-26 16:39:22 http://localhost:49412/default.aspx sql=
select us_id from users where us_username = N'admin'
2017-07-26 16:39:22 http://localhost:49412/default.aspx elapsed milliseconds:0000
2017-07-26 16:39:22 http://localhost:49412/default.aspx guid=dcb1027d-1c00-4aca-a931-b4fc046aea01
2017-07-26 16:39:22 http://localhost:49412/default.aspx sql=
insert into sessions (se_id, se_user) values('dcb1027d-1c00-4aca-a931-b4fc046aea01', 1)
2017-07-26 16:39:22 http://localhost:49412/default.aspx AppPath:
2017-07-26 16:39:22 http://localhost:49412/bugs.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = 'dcb1027d-1c00-4aca-a931-b4fc046aea01';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = 'dcb1027d-1c00-4aca-a931-b4fc046aea01'
and us_active = 1
2017-07-26 16:39:22 http://localhost:49412/bugs.aspx elapsed milliseconds:0013
2017-07-26 16:39:22 http://localhost:49412/bugs.aspx sql=

/* custom columns */ select sc.name, st.[name] [datatype], 
case when st.[name] = 'nvarchar' or st.[name] = 'nchar' then sc.length/2 else sc.length end as [length], 
sc.xprec, sc.xscale, sc.isnullable,
mm.text [default value], 
dflts.name [default name], 
isnull(ccm_dropdown_type,'') [dropdown type],
isnull(ccm_dropdown_vals,'') [vals],
isnull(ccm_sort_seq, sc.colorder) [column order],
sc.colorder
from syscolumns sc
inner join systypes st on st.xusertype = sc.xusertype
inner join sysobjects so on sc.id = so.id
left outer join syscomments mm on sc.cdefault = mm.id
left outer join custom_col_metadata on ccm_colorder = sc.colorder
left outer join sysobjects dflts on dflts.id = mm.id
where so.name = 'bugs'
and st.[name] <> 'sysname'
and sc.name not in ('rowguid',
'bg_id',
'bg_short_desc',
'bg_reported_user',
'bg_reported_date',
'bg_project',
'bg_org',
'bg_category',
'bg_priority',
'bg_status',
'bg_assigned_to_user',
'bg_last_updated_user',
'bg_last_updated_date',
'bg_user_defined_attribute',
'bg_project_custom_dropdown_value1',
'bg_project_custom_dropdown_value2',
'bg_project_custom_dropdown_value3',
'bg_tags')
order by sc.id, isnull(ccm_sort_seq,sc.colorder)
2017-07-26 16:39:22 http://localhost:49412/bugs.aspx elapsed milliseconds:0002
2017-07-26 16:39:22 http://localhost:49412/bugs.aspx sql=
/* query dropdown */
select qu_id, qu_desc
from queries
where (isnull(qu_user,0) = 0 and isnull(qu_org,0) = 0)
or isnull(qu_user,0) = 1
or isnull(qu_org,0) = 1
order by qu_desc
2017-07-26 16:39:22 http://localhost:49412/bugs.aspx elapsed milliseconds:0000
2017-07-26 16:39:22 http://localhost:49412/bugs.aspx sql=
select qu_id, qu_sql from queries where qu_id in
			(select us_default_query from users where us_id = 1)
2017-07-26 16:39:22 http://localhost:49412/bugs.aspx elapsed milliseconds:0000
2017-07-26 16:39:22 http://localhost:49412/bugs.aspx sql=
select isnull(pr_background_color,'#ffffff'), bg_id [id], isnull(bu_flag,0) [$FLAG], 
 bg_short_desc [desc], isnull(pj_name,'') [project], isnull(og_name,'') [organization], isnull(ct_name,'') [category], rpt.us_username [reported by],
 bg_reported_date [reported on], isnull(pr_name,'') [priority], isnull(asg.us_username,'') [assigned to],
 isnull(st_name,'') [status], isnull(lu.us_username,'') [last updated by], bg_last_updated_date [last updated on]
 from bugs 
 left outer join bug_user on bu_bug = bg_id and bu_user = 1 
 left outer join users rpt on rpt.us_id = bg_reported_user
 left outer join users asg on asg.us_id = bg_assigned_to_user
 left outer join users lu on lu.us_id = bg_last_updated_user
 left outer join projects on pj_id = bg_project
 left outer join orgs on og_id = bg_org
 left outer join categories on ct_id = bg_category
 left outer join priorities on pr_id = bg_priority
 left outer join statuses on st_id = bg_status
  /* altered - just order by  */ WHERE  (bugs.bg_project not in (
					select pu_project
					from project_user_xref
					where pu_user = 1
					and pu_permission_level = 0)) order by bg_id desc
2017-07-26 16:39:22 http://localhost:49412/bugs.aspx elapsed milliseconds:0000
2017-07-26 16:39:32 http://localhost:49412/edit_bug.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = 'dcb1027d-1c00-4aca-a931-b4fc046aea01';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = 'dcb1027d-1c00-4aca-a931-b4fc046aea01'
and us_active = 1
2017-07-26 16:39:32 http://localhost:49412/edit_bug.aspx elapsed milliseconds:0000
2017-07-26 16:39:32 http://localhost:49412/edit_bug.aspx sql=
/* drop downs */ select pj_id, pj_name
		from projects
		left outer join project_user_xref on pj_id = pu_project
		and pu_user = 1
		where pj_active = 1
		and isnull(pu_permission_level,2) not in (0, 1)
		order by pj_name;
select og_id, og_name from orgs where og_active = 1 order by og_name;
select ct_id, ct_name from categories order by ct_sort_seq, ct_name;
select pr_id, pr_name from priorities order by pr_sort_seq, pr_name;
select st_id, st_name from statuses order by st_sort_seq, st_name;
select udf_id, udf_name from user_defined_attribute order by udf_sort_seq, udf_name;
2017-07-26 16:39:32 http://localhost:49412/edit_bug.aspx elapsed milliseconds:0008
2017-07-26 16:39:32 http://localhost:49412/edit_bug.aspx sql=

select top 1 pj_id from projects where pj_default = 1 order by pj_name;
select top 1 ct_id from categories where ct_default = 1 order by ct_name;
select top 1 pr_id from priorities where pr_default = 1 order by pr_name;
select top 1 st_id from statuses where st_default = 1 order by st_name;
select top 1 udf_id from user_defined_attribute where udf_default = 1 order by udf_name;
2017-07-26 16:39:32 http://localhost:49412/edit_bug.aspx elapsed milliseconds:0010
2017-07-26 16:39:32 http://localhost:49412/edit_bug.aspx sql=

/* users this project */ select us_id, case when 0 = 1 then us_lastname + ', ' + us_firstname else us_username end us_username
from users
inner join orgs on us_org = og_id
where us_active = 1
and og_can_be_assigned_to = 1
and (2 <> 0 or 1 = og_id or (og_external_user = 0 and 0 = 1))
and us_id not in
	(select pu_user from project_user_xref
		where pu_project = 0
		and pu_permission_level = 0)
order by us_username; 
2017-07-26 16:39:32 http://localhost:49412/edit_bug.aspx elapsed milliseconds:0007
2017-07-26 16:43:30  caught exception in util.set_context:Request is not available in this context
2017-07-26 16:43:30  threadproc_votes
2017-07-26 16:43:30  sql=

if exists (select * from dbo.sysobjects where id = object_id(N'[votes_view]'))
drop view [votes_view]
2017-07-26 16:43:30  started creating Lucene index using folder C:\Users\Oisiktekiner\Documents\Visual Studio 2017\Projects\btnetnew\btnetnew\App_Data\lucene_index
2017-07-26 16:43:30  sql=

create view votes_view as
select bu_bug as vote_bug, sum(bu_vote) as vote_total
from bug_user
group by bu_bug
having sum(bu_vote) > 0
2017-07-26 16:43:30  sql=

select bu_bug, count(1)
from bug_user 
where bu_vote = 1
group by bu_bug
2017-07-26 16:43:30  elapsed milliseconds:0017
2017-07-26 16:43:30  sql=

/* get searchable cols */					
select sc.name
from syscolumns sc
inner join systypes st on st.xusertype = sc.xusertype
inner join sysobjects so on sc.id = so.id
where so.name = 'bugs'
and st.[name] <> 'sysname'
and sc.name not in ('rowguid',
'bg_id',
'bg_short_desc',
'bg_reported_user',
'bg_reported_date',
'bg_project',
'bg_org',
'bg_category',
'bg_priority',
'bg_status',
'bg_assigned_to_user',
'bg_last_updated_user',
'bg_last_updated_date',
'bg_user_defined_attribute',
'bg_project_custom_dropdown_value1',
'bg_project_custom_dropdown_value2',
'bg_project_custom_dropdown_value3',
'bg_tags')
and st.[name] in ('nvarchar','varchar')
and sc.length > 30
2017-07-26 16:43:30  elapsed milliseconds:0000
2017-07-26 16:43:30  sql=

select bg_id, 	

isnull(bg_tags,'') bg_tags,
bg_short_desc
from bugs
2017-07-26 16:43:30  elapsed milliseconds:0000
2017-07-26 16:43:30  sql=

select bp_bug, bp_id, 
isnull(bp_comment_search,bp_comment) [text] 
from bug_posts 
where bp_type <> 'update'
and bp_hidden_from_external_users = 0
2017-07-26 16:43:30  elapsed milliseconds:0000
2017-07-26 16:43:30  done creating Lucene index
2017-07-26 16:43:30 http://localhost:49412/default.aspx sql=
select count(1) from users
2017-07-26 16:43:33 http://localhost:49412/default.aspx sql=
select count(1) from users
2017-07-26 16:43:33 http://localhost:49412/default.aspx sql=

select us_username, us_id, us_password, isnull(us_salt,0) us_salt, us_active
from users
where us_username = N'admin'
2017-07-26 16:43:33 http://localhost:49412/default.aspx elapsed milliseconds:0000
2017-07-26 16:43:33 http://localhost:49412/default.aspx sql=
update users set us_most_recent_login_datetime = getdate() where us_id = 1
2017-07-26 16:43:33 http://localhost:49412/default.aspx sql=
select us_id from users where us_username = N'admin'
2017-07-26 16:43:33 http://localhost:49412/default.aspx elapsed milliseconds:0000
2017-07-26 16:43:33 http://localhost:49412/default.aspx guid=1fff7fcc-efd8-4556-8ff9-45f170c63646
2017-07-26 16:43:33 http://localhost:49412/default.aspx sql=
insert into sessions (se_id, se_user) values('1fff7fcc-efd8-4556-8ff9-45f170c63646', 1)
2017-07-26 16:43:33 http://localhost:49412/default.aspx AppPath:
2017-07-26 16:43:33 http://localhost:49412/bugs.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '1fff7fcc-efd8-4556-8ff9-45f170c63646';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '1fff7fcc-efd8-4556-8ff9-45f170c63646'
and us_active = 1
2017-07-26 16:43:33 http://localhost:49412/bugs.aspx elapsed milliseconds:0011
2017-07-26 16:43:33 http://localhost:49412/bugs.aspx sql=

/* custom columns */ select sc.name, st.[name] [datatype], 
case when st.[name] = 'nvarchar' or st.[name] = 'nchar' then sc.length/2 else sc.length end as [length], 
sc.xprec, sc.xscale, sc.isnullable,
mm.text [default value], 
dflts.name [default name], 
isnull(ccm_dropdown_type,'') [dropdown type],
isnull(ccm_dropdown_vals,'') [vals],
isnull(ccm_sort_seq, sc.colorder) [column order],
sc.colorder
from syscolumns sc
inner join systypes st on st.xusertype = sc.xusertype
inner join sysobjects so on sc.id = so.id
left outer join syscomments mm on sc.cdefault = mm.id
left outer join custom_col_metadata on ccm_colorder = sc.colorder
left outer join sysobjects dflts on dflts.id = mm.id
where so.name = 'bugs'
and st.[name] <> 'sysname'
and sc.name not in ('rowguid',
'bg_id',
'bg_short_desc',
'bg_reported_user',
'bg_reported_date',
'bg_project',
'bg_org',
'bg_category',
'bg_priority',
'bg_status',
'bg_assigned_to_user',
'bg_last_updated_user',
'bg_last_updated_date',
'bg_user_defined_attribute',
'bg_project_custom_dropdown_value1',
'bg_project_custom_dropdown_value2',
'bg_project_custom_dropdown_value3',
'bg_tags')
order by sc.id, isnull(ccm_sort_seq,sc.colorder)
2017-07-26 16:43:33 http://localhost:49412/bugs.aspx elapsed milliseconds:0000
2017-07-26 16:43:33 http://localhost:49412/bugs.aspx sql=
/* query dropdown */
select qu_id, qu_desc
from queries
where (isnull(qu_user,0) = 0 and isnull(qu_org,0) = 0)
or isnull(qu_user,0) = 1
or isnull(qu_org,0) = 1
order by qu_desc
2017-07-26 16:43:33 http://localhost:49412/bugs.aspx elapsed milliseconds:0000
2017-07-26 16:43:33 http://localhost:49412/bugs.aspx sql=
select qu_id, qu_sql from queries where qu_id in
			(select us_default_query from users where us_id = 1)
2017-07-26 16:43:33 http://localhost:49412/bugs.aspx elapsed milliseconds:0000
2017-07-26 16:43:33 http://localhost:49412/bugs.aspx sql=
select isnull(pr_background_color,'#ffffff'), bg_id [id], isnull(bu_flag,0) [$FLAG], 
 bg_short_desc [desc], isnull(pj_name,'') [project], isnull(og_name,'') [organization], isnull(ct_name,'') [category], rpt.us_username [reported by],
 bg_reported_date [reported on], isnull(pr_name,'') [priority], isnull(asg.us_username,'') [assigned to],
 isnull(st_name,'') [status], isnull(lu.us_username,'') [last updated by], bg_last_updated_date [last updated on]
 from bugs 
 left outer join bug_user on bu_bug = bg_id and bu_user = 1 
 left outer join users rpt on rpt.us_id = bg_reported_user
 left outer join users asg on asg.us_id = bg_assigned_to_user
 left outer join users lu on lu.us_id = bg_last_updated_user
 left outer join projects on pj_id = bg_project
 left outer join orgs on og_id = bg_org
 left outer join categories on ct_id = bg_category
 left outer join priorities on pr_id = bg_priority
 left outer join statuses on st_id = bg_status
  /* altered - just order by  */ WHERE  (bugs.bg_project not in (
					select pu_project
					from project_user_xref
					where pu_user = 1
					and pu_permission_level = 0)) order by bg_id desc
2017-07-26 16:43:33 http://localhost:49412/bugs.aspx elapsed milliseconds:0000
2017-07-26 16:45:31  caught exception in util.set_context:Request is not available in this context
2017-07-26 16:45:31  threadproc_votes
2017-07-26 16:45:31  sql=

if exists (select * from dbo.sysobjects where id = object_id(N'[votes_view]'))
drop view [votes_view]
2017-07-26 16:45:31  started creating Lucene index using folder C:\Users\Oisiktekiner\Documents\Visual Studio 2017\Projects\btnetnew\btnetnew\App_Data\lucene_index
2017-07-26 16:45:31  sql=

create view votes_view as
select bu_bug as vote_bug, sum(bu_vote) as vote_total
from bug_user
group by bu_bug
having sum(bu_vote) > 0
2017-07-26 16:45:31  sql=

select bu_bug, count(1)
from bug_user 
where bu_vote = 1
group by bu_bug
2017-07-26 16:45:31  elapsed milliseconds:0051
2017-07-26 16:45:31  sql=

/* get searchable cols */					
select sc.name
from syscolumns sc
inner join systypes st on st.xusertype = sc.xusertype
inner join sysobjects so on sc.id = so.id
where so.name = 'bugs'
and st.[name] <> 'sysname'
and sc.name not in ('rowguid',
'bg_id',
'bg_short_desc',
'bg_reported_user',
'bg_reported_date',
'bg_project',
'bg_org',
'bg_category',
'bg_priority',
'bg_status',
'bg_assigned_to_user',
'bg_last_updated_user',
'bg_last_updated_date',
'bg_user_defined_attribute',
'bg_project_custom_dropdown_value1',
'bg_project_custom_dropdown_value2',
'bg_project_custom_dropdown_value3',
'bg_tags')
and st.[name] in ('nvarchar','varchar')
and sc.length > 30
2017-07-26 16:45:31  elapsed milliseconds:0000
2017-07-26 16:45:31  sql=

select bg_id, 	

isnull(bg_tags,'') bg_tags,
bg_short_desc
from bugs
2017-07-26 16:45:31  elapsed milliseconds:0000
2017-07-26 16:45:31  sql=

select bp_bug, bp_id, 
isnull(bp_comment_search,bp_comment) [text] 
from bug_posts 
where bp_type <> 'update'
and bp_hidden_from_external_users = 0
2017-07-26 16:45:31  elapsed milliseconds:0000
2017-07-26 16:45:31  done creating Lucene index
2017-07-26 16:45:31 http://localhost:49412/default.aspx sql=
select count(1) from users
2017-07-26 16:45:34 http://localhost:49412/default.aspx sql=
select count(1) from users
2017-07-26 16:45:34 http://localhost:49412/default.aspx sql=

select us_username, us_id, us_password, isnull(us_salt,0) us_salt, us_active
from users
where us_username = N'admin'
2017-07-26 16:45:34 http://localhost:49412/default.aspx elapsed milliseconds:0001
2017-07-26 16:45:34 http://localhost:49412/default.aspx sql=
update users set us_most_recent_login_datetime = getdate() where us_id = 1
2017-07-26 16:45:34 http://localhost:49412/default.aspx sql=
select us_id from users where us_username = N'admin'
2017-07-26 16:45:34 http://localhost:49412/default.aspx elapsed milliseconds:0000
2017-07-26 16:45:34 http://localhost:49412/default.aspx guid=ee7151b1-31b9-4a4c-a015-6e6330b76bc8
2017-07-26 16:45:34 http://localhost:49412/default.aspx sql=
insert into sessions (se_id, se_user) values('ee7151b1-31b9-4a4c-a015-6e6330b76bc8', 1)
2017-07-26 16:45:34 http://localhost:49412/default.aspx AppPath:
2017-07-26 16:45:36 http://localhost:49412/bugs.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = 'ee7151b1-31b9-4a4c-a015-6e6330b76bc8';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = 'ee7151b1-31b9-4a4c-a015-6e6330b76bc8'
and us_active = 1
2017-07-26 16:45:36 http://localhost:49412/bugs.aspx elapsed milliseconds:0007
2017-07-26 16:45:36 http://localhost:49412/bugs.aspx sql=

/* custom columns */ select sc.name, st.[name] [datatype], 
case when st.[name] = 'nvarchar' or st.[name] = 'nchar' then sc.length/2 else sc.length end as [length], 
sc.xprec, sc.xscale, sc.isnullable,
mm.text [default value], 
dflts.name [default name], 
isnull(ccm_dropdown_type,'') [dropdown type],
isnull(ccm_dropdown_vals,'') [vals],
isnull(ccm_sort_seq, sc.colorder) [column order],
sc.colorder
from syscolumns sc
inner join systypes st on st.xusertype = sc.xusertype
inner join sysobjects so on sc.id = so.id
left outer join syscomments mm on sc.cdefault = mm.id
left outer join custom_col_metadata on ccm_colorder = sc.colorder
left outer join sysobjects dflts on dflts.id = mm.id
where so.name = 'bugs'
and st.[name] <> 'sysname'
and sc.name not in ('rowguid',
'bg_id',
'bg_short_desc',
'bg_reported_user',
'bg_reported_date',
'bg_project',
'bg_org',
'bg_category',
'bg_priority',
'bg_status',
'bg_assigned_to_user',
'bg_last_updated_user',
'bg_last_updated_date',
'bg_user_defined_attribute',
'bg_project_custom_dropdown_value1',
'bg_project_custom_dropdown_value2',
'bg_project_custom_dropdown_value3',
'bg_tags')
order by sc.id, isnull(ccm_sort_seq,sc.colorder)
2017-07-26 16:45:36 http://localhost:49412/bugs.aspx elapsed milliseconds:0000
2017-07-26 16:45:36 http://localhost:49412/bugs.aspx sql=
/* query dropdown */
select qu_id, qu_desc
from queries
where (isnull(qu_user,0) = 0 and isnull(qu_org,0) = 0)
or isnull(qu_user,0) = 1
or isnull(qu_org,0) = 1
order by qu_desc
2017-07-26 16:45:36 http://localhost:49412/bugs.aspx elapsed milliseconds:0000
2017-07-26 16:45:36 http://localhost:49412/bugs.aspx sql=
select qu_id, qu_sql from queries where qu_id in
			(select us_default_query from users where us_id = 1)
2017-07-26 16:45:36 http://localhost:49412/bugs.aspx elapsed milliseconds:0000
2017-07-26 16:45:36 http://localhost:49412/bugs.aspx sql=
select isnull(pr_background_color,'#ffffff'), bg_id [id], isnull(bu_flag,0) [$FLAG], 
 bg_short_desc [desc], isnull(pj_name,'') [project], isnull(og_name,'') [organization], isnull(ct_name,'') [category], rpt.us_username [reported by],
 bg_reported_date [reported on], isnull(pr_name,'') [priority], isnull(asg.us_username,'') [assigned to],
 isnull(st_name,'') [status], isnull(lu.us_username,'') [last updated by], bg_last_updated_date [last updated on]
 from bugs 
 left outer join bug_user on bu_bug = bg_id and bu_user = 1 
 left outer join users rpt on rpt.us_id = bg_reported_user
 left outer join users asg on asg.us_id = bg_assigned_to_user
 left outer join users lu on lu.us_id = bg_last_updated_user
 left outer join projects on pj_id = bg_project
 left outer join orgs on og_id = bg_org
 left outer join categories on ct_id = bg_category
 left outer join priorities on pr_id = bg_priority
 left outer join statuses on st_id = bg_status
  /* altered - just order by  */ WHERE  (bugs.bg_project not in (
					select pu_project
					from project_user_xref
					where pu_user = 1
					and pu_permission_level = 0)) order by bg_id desc
2017-07-26 16:45:36 http://localhost:49412/bugs.aspx elapsed milliseconds:0000
2017-07-26 16:54:57  caught exception in util.set_context:Request is not available in this context
2017-07-26 16:54:57  threadproc_votes
2017-07-26 16:54:57  started creating Lucene index using folder C:\Users\Oisiktekiner\Documents\Visual Studio 2017\Projects\btnetnew\btnetnew\App_Data\lucene_index
2017-07-26 16:54:57  sql=

if exists (select * from dbo.sysobjects where id = object_id(N'[votes_view]'))
drop view [votes_view]
2017-07-26 16:54:57  sql=

create view votes_view as
select bu_bug as vote_bug, sum(bu_vote) as vote_total
from bug_user
group by bu_bug
having sum(bu_vote) > 0
2017-07-26 16:54:57  sql=

select bu_bug, count(1)
from bug_user 
where bu_vote = 1
group by bu_bug
2017-07-26 16:54:57  elapsed milliseconds:0011
2017-07-26 16:54:57  sql=

/* get searchable cols */					
select sc.name
from syscolumns sc
inner join systypes st on st.xusertype = sc.xusertype
inner join sysobjects so on sc.id = so.id
where so.name = 'bugs'
and st.[name] <> 'sysname'
and sc.name not in ('rowguid',
'bg_id',
'bg_short_desc',
'bg_reported_user',
'bg_reported_date',
'bg_project',
'bg_org',
'bg_category',
'bg_priority',
'bg_status',
'bg_assigned_to_user',
'bg_last_updated_user',
'bg_last_updated_date',
'bg_user_defined_attribute',
'bg_project_custom_dropdown_value1',
'bg_project_custom_dropdown_value2',
'bg_project_custom_dropdown_value3',
'bg_tags')
and st.[name] in ('nvarchar','varchar')
and sc.length > 30
2017-07-26 16:54:57  elapsed milliseconds:0000
2017-07-26 16:54:57  sql=

select bg_id, 	

isnull(bg_tags,'') bg_tags,
bg_short_desc
from bugs
2017-07-26 16:54:57  elapsed milliseconds:0000
2017-07-26 16:54:57  sql=

select bp_bug, bp_id, 
isnull(bp_comment_search,bp_comment) [text] 
from bug_posts 
where bp_type <> 'update'
and bp_hidden_from_external_users = 0
2017-07-26 16:54:57  elapsed milliseconds:0002
2017-07-26 16:54:57  done creating Lucene index
2017-07-26 16:54:57 http://localhost:49412/default.aspx sql=
select count(1) from users
2017-07-26 16:54:59 http://localhost:49412/default.aspx sql=
select count(1) from users
2017-07-26 16:54:59 http://localhost:49412/default.aspx sql=

select us_username, us_id, us_password, isnull(us_salt,0) us_salt, us_active
from users
where us_username = N'admin'
2017-07-26 16:54:59 http://localhost:49412/default.aspx elapsed milliseconds:0000
2017-07-26 16:54:59 http://localhost:49412/default.aspx sql=
update users set us_most_recent_login_datetime = getdate() where us_id = 1
2017-07-26 16:54:59 http://localhost:49412/default.aspx sql=
select us_id from users where us_username = N'admin'
2017-07-26 16:54:59 http://localhost:49412/default.aspx elapsed milliseconds:0001
2017-07-26 16:54:59 http://localhost:49412/default.aspx guid=b31bcea2-3a24-4a60-af30-68c4abda3fd0
2017-07-26 16:54:59 http://localhost:49412/default.aspx sql=
insert into sessions (se_id, se_user) values('b31bcea2-3a24-4a60-af30-68c4abda3fd0', 1)
2017-07-26 16:54:59 http://localhost:49412/default.aspx AppPath:
2017-07-26 16:55:02 http://localhost:49412/bugs.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = 'b31bcea2-3a24-4a60-af30-68c4abda3fd0';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = 'b31bcea2-3a24-4a60-af30-68c4abda3fd0'
and us_active = 1
2017-07-26 16:55:02 http://localhost:49412/bugs.aspx elapsed milliseconds:0007
2017-07-26 16:55:02 http://localhost:49412/bugs.aspx sql=

/* custom columns */ select sc.name, st.[name] [datatype], 
case when st.[name] = 'nvarchar' or st.[name] = 'nchar' then sc.length/2 else sc.length end as [length], 
sc.xprec, sc.xscale, sc.isnullable,
mm.text [default value], 
dflts.name [default name], 
isnull(ccm_dropdown_type,'') [dropdown type],
isnull(ccm_dropdown_vals,'') [vals],
isnull(ccm_sort_seq, sc.colorder) [column order],
sc.colorder
from syscolumns sc
inner join systypes st on st.xusertype = sc.xusertype
inner join sysobjects so on sc.id = so.id
left outer join syscomments mm on sc.cdefault = mm.id
left outer join custom_col_metadata on ccm_colorder = sc.colorder
left outer join sysobjects dflts on dflts.id = mm.id
where so.name = 'bugs'
and st.[name] <> 'sysname'
and sc.name not in ('rowguid',
'bg_id',
'bg_short_desc',
'bg_reported_user',
'bg_reported_date',
'bg_project',
'bg_org',
'bg_category',
'bg_priority',
'bg_status',
'bg_assigned_to_user',
'bg_last_updated_user',
'bg_last_updated_date',
'bg_user_defined_attribute',
'bg_project_custom_dropdown_value1',
'bg_project_custom_dropdown_value2',
'bg_project_custom_dropdown_value3',
'bg_tags')
order by sc.id, isnull(ccm_sort_seq,sc.colorder)
2017-07-26 16:55:02 http://localhost:49412/bugs.aspx elapsed milliseconds:0000
2017-07-26 16:55:02 http://localhost:49412/bugs.aspx sql=
/* query dropdown */
select qu_id, qu_desc
from queries
where (isnull(qu_user,0) = 0 and isnull(qu_org,0) = 0)
or isnull(qu_user,0) = 1
or isnull(qu_org,0) = 1
order by qu_desc
2017-07-26 16:55:02 http://localhost:49412/bugs.aspx elapsed milliseconds:0000
2017-07-26 16:55:02 http://localhost:49412/bugs.aspx sql=
select qu_id, qu_sql from queries where qu_id in
			(select us_default_query from users where us_id = 1)
2017-07-26 16:55:02 http://localhost:49412/bugs.aspx elapsed milliseconds:0000
2017-07-26 16:55:02 http://localhost:49412/bugs.aspx sql=
select isnull(pr_background_color,'#ffffff'), bg_id [id], isnull(bu_flag,0) [$FLAG], 
 bg_short_desc [desc], isnull(pj_name,'') [project], isnull(og_name,'') [organization], isnull(ct_name,'') [category], rpt.us_username [reported by],
 bg_reported_date [reported on], isnull(pr_name,'') [priority], isnull(asg.us_username,'') [assigned to],
 isnull(st_name,'') [status], isnull(lu.us_username,'') [last updated by], bg_last_updated_date [last updated on]
 from bugs 
 left outer join bug_user on bu_bug = bg_id and bu_user = 1 
 left outer join users rpt on rpt.us_id = bg_reported_user
 left outer join users asg on asg.us_id = bg_assigned_to_user
 left outer join users lu on lu.us_id = bg_last_updated_user
 left outer join projects on pj_id = bg_project
 left outer join orgs on og_id = bg_org
 left outer join categories on ct_id = bg_category
 left outer join priorities on pr_id = bg_priority
 left outer join statuses on st_id = bg_status
  /* altered - just order by  */ WHERE  (bugs.bg_project not in (
					select pu_project
					from project_user_xref
					where pu_user = 1
					and pu_permission_level = 0)) order by bg_id desc
2017-07-26 16:55:02 http://localhost:49412/bugs.aspx elapsed milliseconds:0000
2017-07-26 16:56:42  caught exception in util.set_context:Request is not available in this context
2017-07-26 16:56:42  threadproc_votes
2017-07-26 16:56:42  sql=

if exists (select * from dbo.sysobjects where id = object_id(N'[votes_view]'))
drop view [votes_view]
2017-07-26 16:56:42  started creating Lucene index using folder C:\Users\Oisiktekiner\Documents\Visual Studio 2017\Projects\btnetnew\btnetnew\App_Data\lucene_index
2017-07-26 16:56:42  sql=

create view votes_view as
select bu_bug as vote_bug, sum(bu_vote) as vote_total
from bug_user
group by bu_bug
having sum(bu_vote) > 0
2017-07-26 16:56:42  sql=

/* get searchable cols */					
select sc.name
from syscolumns sc
inner join systypes st on st.xusertype = sc.xusertype
inner join sysobjects so on sc.id = so.id
where so.name = 'bugs'
and st.[name] <> 'sysname'
and sc.name not in ('rowguid',
'bg_id',
'bg_short_desc',
'bg_reported_user',
'bg_reported_date',
'bg_project',
'bg_org',
'bg_category',
'bg_priority',
'bg_status',
'bg_assigned_to_user',
'bg_last_updated_user',
'bg_last_updated_date',
'bg_user_defined_attribute',
'bg_project_custom_dropdown_value1',
'bg_project_custom_dropdown_value2',
'bg_project_custom_dropdown_value3',
'bg_tags')
and st.[name] in ('nvarchar','varchar')
and sc.length > 30
2017-07-26 16:56:42  sql=

select bu_bug, count(1)
from bug_user 
where bu_vote = 1
group by bu_bug
2017-07-26 16:56:42  elapsed milliseconds:0045
2017-07-26 16:56:42  elapsed milliseconds:0031
2017-07-26 16:56:42  sql=

select bg_id, 	

isnull(bg_tags,'') bg_tags,
bg_short_desc
from bugs
2017-07-26 16:56:42  elapsed milliseconds:0000
2017-07-26 16:56:42  sql=

select bp_bug, bp_id, 
isnull(bp_comment_search,bp_comment) [text] 
from bug_posts 
where bp_type <> 'update'
and bp_hidden_from_external_users = 0
2017-07-26 16:56:42  elapsed milliseconds:0000
2017-07-26 16:56:42  done creating Lucene index
2017-07-26 16:56:42 http://localhost:49412/default.aspx sql=
select count(1) from users
2017-07-26 16:56:46 http://localhost:49412/default.aspx sql=
select count(1) from users
2017-07-26 16:56:46 http://localhost:49412/default.aspx sql=

select us_username, us_id, us_password, isnull(us_salt,0) us_salt, us_active
from users
where us_username = N'admin'
2017-07-26 16:56:46 http://localhost:49412/default.aspx elapsed milliseconds:0000
2017-07-26 16:56:46 http://localhost:49412/default.aspx sql=
update users set us_most_recent_login_datetime = getdate() where us_id = 1
2017-07-26 16:56:46 http://localhost:49412/default.aspx sql=
select us_id from users where us_username = N'admin'
2017-07-26 16:56:46 http://localhost:49412/default.aspx elapsed milliseconds:0000
2017-07-26 16:56:46 http://localhost:49412/default.aspx guid=9eb0c319-9e75-4abf-ac20-abca938c5fd1
2017-07-26 16:56:46 http://localhost:49412/default.aspx sql=
insert into sessions (se_id, se_user) values('9eb0c319-9e75-4abf-ac20-abca938c5fd1', 1)
2017-07-26 16:56:46 http://localhost:49412/default.aspx AppPath:
2017-07-26 16:56:46 http://localhost:49412/bugs.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '9eb0c319-9e75-4abf-ac20-abca938c5fd1';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '9eb0c319-9e75-4abf-ac20-abca938c5fd1'
and us_active = 1
2017-07-26 16:56:46 http://localhost:49412/bugs.aspx elapsed milliseconds:0016
2017-07-26 16:56:46 http://localhost:49412/bugs.aspx sql=

/* custom columns */ select sc.name, st.[name] [datatype], 
case when st.[name] = 'nvarchar' or st.[name] = 'nchar' then sc.length/2 else sc.length end as [length], 
sc.xprec, sc.xscale, sc.isnullable,
mm.text [default value], 
dflts.name [default name], 
isnull(ccm_dropdown_type,'') [dropdown type],
isnull(ccm_dropdown_vals,'') [vals],
isnull(ccm_sort_seq, sc.colorder) [column order],
sc.colorder
from syscolumns sc
inner join systypes st on st.xusertype = sc.xusertype
inner join sysobjects so on sc.id = so.id
left outer join syscomments mm on sc.cdefault = mm.id
left outer join custom_col_metadata on ccm_colorder = sc.colorder
left outer join sysobjects dflts on dflts.id = mm.id
where so.name = 'bugs'
and st.[name] <> 'sysname'
and sc.name not in ('rowguid',
'bg_id',
'bg_short_desc',
'bg_reported_user',
'bg_reported_date',
'bg_project',
'bg_org',
'bg_category',
'bg_priority',
'bg_status',
'bg_assigned_to_user',
'bg_last_updated_user',
'bg_last_updated_date',
'bg_user_defined_attribute',
'bg_project_custom_dropdown_value1',
'bg_project_custom_dropdown_value2',
'bg_project_custom_dropdown_value3',
'bg_tags')
order by sc.id, isnull(ccm_sort_seq,sc.colorder)
2017-07-26 16:56:46 http://localhost:49412/bugs.aspx elapsed milliseconds:0000
2017-07-26 16:56:46 http://localhost:49412/bugs.aspx sql=
/* query dropdown */
select qu_id, qu_desc
from queries
where (isnull(qu_user,0) = 0 and isnull(qu_org,0) = 0)
or isnull(qu_user,0) = 1
or isnull(qu_org,0) = 1
order by qu_desc
2017-07-26 16:56:46 http://localhost:49412/bugs.aspx elapsed milliseconds:0000
2017-07-26 16:56:46 http://localhost:49412/bugs.aspx sql=
select qu_id, qu_sql from queries where qu_id in
			(select us_default_query from users where us_id = 1)
2017-07-26 16:56:46 http://localhost:49412/bugs.aspx elapsed milliseconds:0000
2017-07-26 16:56:46 http://localhost:49412/bugs.aspx sql=
select isnull(pr_background_color,'#ffffff'), bg_id [id], isnull(bu_flag,0) [$FLAG], 
 bg_short_desc [desc], isnull(pj_name,'') [project], isnull(og_name,'') [organization], isnull(ct_name,'') [category], rpt.us_username [reported by],
 bg_reported_date [reported on], isnull(pr_name,'') [priority], isnull(asg.us_username,'') [assigned to],
 isnull(st_name,'') [status], isnull(lu.us_username,'') [last updated by], bg_last_updated_date [last updated on]
 from bugs 
 left outer join bug_user on bu_bug = bg_id and bu_user = 1 
 left outer join users rpt on rpt.us_id = bg_reported_user
 left outer join users asg on asg.us_id = bg_assigned_to_user
 left outer join users lu on lu.us_id = bg_last_updated_user
 left outer join projects on pj_id = bg_project
 left outer join orgs on og_id = bg_org
 left outer join categories on ct_id = bg_category
 left outer join priorities on pr_id = bg_priority
 left outer join statuses on st_id = bg_status
  /* altered - just order by  */ WHERE  (bugs.bg_project not in (
					select pu_project
					from project_user_xref
					where pu_user = 1
					and pu_permission_level = 0)) order by bg_id desc
2017-07-26 16:56:46 http://localhost:49412/bugs.aspx elapsed milliseconds:0000
2017-07-26 16:57:35  caught exception in util.set_context:Request is not available in this context
2017-07-26 16:57:35  threadproc_votes
2017-07-26 16:57:35  sql=

if exists (select * from dbo.sysobjects where id = object_id(N'[votes_view]'))
drop view [votes_view]
2017-07-26 16:57:35  started creating Lucene index using folder C:\Users\Oisiktekiner\Documents\Visual Studio 2017\Projects\btnetnew\btnetnew\App_Data\lucene_index
2017-07-26 16:57:35  sql=

create view votes_view as
select bu_bug as vote_bug, sum(bu_vote) as vote_total
from bug_user
group by bu_bug
having sum(bu_vote) > 0
2017-07-26 16:57:35  sql=

select bu_bug, count(1)
from bug_user 
where bu_vote = 1
group by bu_bug
2017-07-26 16:57:35  elapsed milliseconds:0016
2017-07-26 16:57:35  sql=

/* get searchable cols */					
select sc.name
from syscolumns sc
inner join systypes st on st.xusertype = sc.xusertype
inner join sysobjects so on sc.id = so.id
where so.name = 'bugs'
and st.[name] <> 'sysname'
and sc.name not in ('rowguid',
'bg_id',
'bg_short_desc',
'bg_reported_user',
'bg_reported_date',
'bg_project',
'bg_org',
'bg_category',
'bg_priority',
'bg_status',
'bg_assigned_to_user',
'bg_last_updated_user',
'bg_last_updated_date',
'bg_user_defined_attribute',
'bg_project_custom_dropdown_value1',
'bg_project_custom_dropdown_value2',
'bg_project_custom_dropdown_value3',
'bg_tags')
and st.[name] in ('nvarchar','varchar')
and sc.length > 30
2017-07-26 16:57:35  elapsed milliseconds:0000
2017-07-26 16:57:35  sql=

select bg_id, 	

isnull(bg_tags,'') bg_tags,
bg_short_desc
from bugs
2017-07-26 16:57:35  elapsed milliseconds:0000
2017-07-26 16:57:35  sql=

select bp_bug, bp_id, 
isnull(bp_comment_search,bp_comment) [text] 
from bug_posts 
where bp_type <> 'update'
and bp_hidden_from_external_users = 0
2017-07-26 16:57:35  elapsed milliseconds:0000
2017-07-26 16:57:35  done creating Lucene index
2017-07-26 16:57:37 http://localhost:49412/default.aspx sql=
select count(1) from users
2017-07-26 16:58:21 http://localhost:49412/default.aspx sql=
select count(1) from users
2017-07-26 16:58:21 http://localhost:49412/default.aspx sql=

select us_username, us_id, us_password, isnull(us_salt,0) us_salt, us_active
from users
where us_username = N'admin'
2017-07-26 16:58:21 http://localhost:49412/default.aspx elapsed milliseconds:0000
2017-07-26 16:58:22 http://localhost:49412/default.aspx sql=
update users set us_most_recent_login_datetime = getdate() where us_id = 1
2017-07-26 16:58:22 http://localhost:49412/default.aspx sql=
select us_id from users where us_username = N'admin'
2017-07-26 16:58:22 http://localhost:49412/default.aspx elapsed milliseconds:0000
2017-07-26 16:58:22 http://localhost:49412/default.aspx guid=2e3d862e-8e5b-49bd-a556-4efa6b210a3b
2017-07-26 16:58:22 http://localhost:49412/default.aspx sql=
insert into sessions (se_id, se_user) values('2e3d862e-8e5b-49bd-a556-4efa6b210a3b', 1)
2017-07-26 16:58:22 http://localhost:49412/default.aspx AppPath:
2017-07-26 16:58:24 http://localhost:49412/bugs.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '2e3d862e-8e5b-49bd-a556-4efa6b210a3b';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '2e3d862e-8e5b-49bd-a556-4efa6b210a3b'
and us_active = 1
2017-07-26 16:58:24 http://localhost:49412/bugs.aspx elapsed milliseconds:0007
2017-07-26 16:58:24 http://localhost:49412/bugs.aspx sql=

/* custom columns */ select sc.name, st.[name] [datatype], 
case when st.[name] = 'nvarchar' or st.[name] = 'nchar' then sc.length/2 else sc.length end as [length], 
sc.xprec, sc.xscale, sc.isnullable,
mm.text [default value], 
dflts.name [default name], 
isnull(ccm_dropdown_type,'') [dropdown type],
isnull(ccm_dropdown_vals,'') [vals],
isnull(ccm_sort_seq, sc.colorder) [column order],
sc.colorder
from syscolumns sc
inner join systypes st on st.xusertype = sc.xusertype
inner join sysobjects so on sc.id = so.id
left outer join syscomments mm on sc.cdefault = mm.id
left outer join custom_col_metadata on ccm_colorder = sc.colorder
left outer join sysobjects dflts on dflts.id = mm.id
where so.name = 'bugs'
and st.[name] <> 'sysname'
and sc.name not in ('rowguid',
'bg_id',
'bg_short_desc',
'bg_reported_user',
'bg_reported_date',
'bg_project',
'bg_org',
'bg_category',
'bg_priority',
'bg_status',
'bg_assigned_to_user',
'bg_last_updated_user',
'bg_last_updated_date',
'bg_user_defined_attribute',
'bg_project_custom_dropdown_value1',
'bg_project_custom_dropdown_value2',
'bg_project_custom_dropdown_value3',
'bg_tags')
order by sc.id, isnull(ccm_sort_seq,sc.colorder)
2017-07-26 16:58:24 http://localhost:49412/bugs.aspx elapsed milliseconds:0000
2017-07-26 16:58:24 http://localhost:49412/bugs.aspx sql=
/* query dropdown */
select qu_id, qu_desc
from queries
where (isnull(qu_user,0) = 0 and isnull(qu_org,0) = 0)
or isnull(qu_user,0) = 1
or isnull(qu_org,0) = 1
order by qu_desc
2017-07-26 16:58:24 http://localhost:49412/bugs.aspx elapsed milliseconds:0000
2017-07-26 16:58:24 http://localhost:49412/bugs.aspx sql=
select qu_id, qu_sql from queries where qu_id in
			(select us_default_query from users where us_id = 1)
2017-07-26 16:58:24 http://localhost:49412/bugs.aspx elapsed milliseconds:0000
2017-07-26 16:58:24 http://localhost:49412/bugs.aspx sql=
select isnull(pr_background_color,'#ffffff'), bg_id [id], isnull(bu_flag,0) [$FLAG], 
 bg_short_desc [desc], isnull(pj_name,'') [project], isnull(og_name,'') [organization], isnull(ct_name,'') [category], rpt.us_username [reported by],
 bg_reported_date [reported on], isnull(pr_name,'') [priority], isnull(asg.us_username,'') [assigned to],
 isnull(st_name,'') [status], isnull(lu.us_username,'') [last updated by], bg_last_updated_date [last updated on]
 from bugs 
 left outer join bug_user on bu_bug = bg_id and bu_user = 1 
 left outer join users rpt on rpt.us_id = bg_reported_user
 left outer join users asg on asg.us_id = bg_assigned_to_user
 left outer join users lu on lu.us_id = bg_last_updated_user
 left outer join projects on pj_id = bg_project
 left outer join orgs on og_id = bg_org
 left outer join categories on ct_id = bg_category
 left outer join priorities on pr_id = bg_priority
 left outer join statuses on st_id = bg_status
  /* altered - just order by  */ WHERE  (bugs.bg_project not in (
					select pu_project
					from project_user_xref
					where pu_user = 1
					and pu_permission_level = 0)) order by bg_id desc
2017-07-26 16:58:24 http://localhost:49412/bugs.aspx elapsed milliseconds:0000
2017-07-26 16:58:40 http://localhost:49412/bugs.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '2e3d862e-8e5b-49bd-a556-4efa6b210a3b';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '2e3d862e-8e5b-49bd-a556-4efa6b210a3b'
and us_active = 1
2017-07-26 16:58:40 http://localhost:49412/bugs.aspx elapsed milliseconds:0000
2017-07-26 16:58:40 http://localhost:49412/bugs.aspx sql=
select qu_sql from queries where qu_id = 8
2017-07-26 16:58:40 http://localhost:49412/bugs.aspx sql=
select bp_bug, sum(bp_size) bytes 
 into #t 
 from bug_posts 
 where bp_type = 'file' 
 group by bp_bug 
 select '#ffffff', bg_id [id], bg_short_desc [desc], 
 bytes, rpt.us_username [reported by] 
 from bugs 
 inner join #t on bp_bug = bg_id 
 left outer join users rpt on rpt.us_id = bg_reported_user 
 WhErE /* altered - both  */ (  1 = 1 
  ) AND (  (bugs.bg_project not in (
					select pu_project
					from project_user_xref
					where pu_user = 1
					and pu_permission_level = 0))  ) order by bytes desc 
 drop table #t 
2017-07-26 16:58:40 http://localhost:49412/bugs.aspx elapsed milliseconds:0013
2017-07-26 16:58:44 http://localhost:49412/bugs.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '2e3d862e-8e5b-49bd-a556-4efa6b210a3b';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '2e3d862e-8e5b-49bd-a556-4efa6b210a3b'
and us_active = 1
2017-07-26 16:58:44 http://localhost:49412/bugs.aspx elapsed milliseconds:0000
2017-07-26 16:58:44 http://localhost:49412/bugs.aspx sql=
select qu_sql from queries where qu_id = 6
2017-07-26 16:58:44 http://localhost:49412/bugs.aspx sql=
select '#ffffff', bg_id [id], bg_short_desc [desc], 
 substring(bp_comment_search,1,40) [last comment], bp_date [last comment date]
 from bugs
 left outer join bug_posts on bg_id = bp_bug
 and bp_type = 'comment'
 and bp_date in (select max(bp_date) from bug_posts where bp_bug = bg_id)
 WhErE /* altered - both  */ (  1 = 1
  ) AND (  (bugs.bg_project not in (
					select pu_project
					from project_user_xref
					where pu_user = 1
					and pu_permission_level = 0))  ) order by bg_id desc
2017-07-26 16:58:44 http://localhost:49412/bugs.aspx elapsed milliseconds:0009
2017-07-26 16:58:45 http://localhost:49412/bugs.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '2e3d862e-8e5b-49bd-a556-4efa6b210a3b';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '2e3d862e-8e5b-49bd-a556-4efa6b210a3b'
and us_active = 1
2017-07-26 16:58:45 http://localhost:49412/bugs.aspx elapsed milliseconds:0000
2017-07-26 16:58:45 http://localhost:49412/bugs.aspx sql=
select qu_sql from queries where qu_id = 2
2017-07-26 16:58:45 http://localhost:49412/bugs.aspx sql=
select isnull(pr_background_color,'#ffffff'), bg_id [id], isnull(bu_flag,0) [$FLAG], 
 bg_short_desc [desc], isnull(pj_name,'') [project], isnull(og_name,'') [organization], isnull(ct_name,'') [category], rpt.us_username [reported by],
 bg_reported_date [reported on], isnull(pr_name,'') [priority], isnull(asg.us_username,'') [assigned to],
 isnull(st_name,'') [status], isnull(lu.us_username,'') [last updated by], bg_last_updated_date [last updated on]
 from bugs 
 left outer join bug_user on bu_bug = bg_id and bu_user = 1 
 left outer join users rpt on rpt.us_id = bg_reported_user
 left outer join users asg on asg.us_id = bg_assigned_to_user
 left outer join users lu on lu.us_id = bg_last_updated_user
 left outer join projects on pj_id = bg_project
 left outer join orgs on og_id = bg_org
 left outer join categories on ct_id = bg_category
 left outer join priorities on pr_id = bg_priority
 left outer join statuses on st_id = bg_status
 where /* altered - both  */ (  bg_status <> 5  ) AND (  (bugs.bg_project not in (
					select pu_project
					from project_user_xref
					where pu_user = 1
					and pu_permission_level = 0))  ) order by bg_id desc
2017-07-26 16:58:45 http://localhost:49412/bugs.aspx elapsed milliseconds:0019
2017-07-26 16:58:49 http://localhost:49412/edit_bug.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '2e3d862e-8e5b-49bd-a556-4efa6b210a3b';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '2e3d862e-8e5b-49bd-a556-4efa6b210a3b'
and us_active = 1
2017-07-26 16:58:49 http://localhost:49412/edit_bug.aspx elapsed milliseconds:0000
2017-07-26 16:58:49 http://localhost:49412/edit_bug.aspx sql=
/* drop downs */ select pj_id, pj_name
		from projects
		left outer join project_user_xref on pj_id = pu_project
		and pu_user = 1
		where pj_active = 1
		and isnull(pu_permission_level,2) not in (0, 1)
		order by pj_name;
select og_id, og_name from orgs where og_active = 1 order by og_name;
select ct_id, ct_name from categories order by ct_sort_seq, ct_name;
select pr_id, pr_name from priorities order by pr_sort_seq, pr_name;
select st_id, st_name from statuses order by st_sort_seq, st_name;
select udf_id, udf_name from user_defined_attribute order by udf_sort_seq, udf_name;
2017-07-26 16:58:49 http://localhost:49412/edit_bug.aspx elapsed milliseconds:0000
2017-07-26 16:58:49 http://localhost:49412/edit_bug.aspx sql=

select top 1 pj_id from projects where pj_default = 1 order by pj_name;
select top 1 ct_id from categories where ct_default = 1 order by ct_name;
select top 1 pr_id from priorities where pr_default = 1 order by pr_name;
select top 1 st_id from statuses where st_default = 1 order by st_name;
select top 1 udf_id from user_defined_attribute where udf_default = 1 order by udf_name;
2017-07-26 16:58:49 http://localhost:49412/edit_bug.aspx elapsed milliseconds:0000
2017-07-26 16:58:49 http://localhost:49412/edit_bug.aspx sql=

/* users this project */ select us_id, case when 0 = 1 then us_lastname + ', ' + us_firstname else us_username end us_username
from users
inner join orgs on us_org = og_id
where us_active = 1
and og_can_be_assigned_to = 1
and (2 <> 0 or 1 = og_id or (og_external_user = 0 and 0 = 1))
and us_id not in
	(select pu_user from project_user_xref
		where pu_project = 0
		and pu_permission_level = 0)
order by us_username; 
2017-07-26 16:58:49 http://localhost:49412/edit_bug.aspx elapsed milliseconds:0000
2017-07-26 16:59:09 http://localhost:49412/edit_bug.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '2e3d862e-8e5b-49bd-a556-4efa6b210a3b';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '2e3d862e-8e5b-49bd-a556-4efa6b210a3b'
and us_active = 1
2017-07-26 16:59:09 http://localhost:49412/edit_bug.aspx elapsed milliseconds:0000
2017-07-26 16:59:09 http://localhost:49412/edit_bug.aspx sql=

/* users this project */ select us_id, case when 0 = 1 then us_lastname + ', ' + us_firstname else us_username end us_username
from users
inner join orgs on us_org = og_id
where us_active = 1
and og_can_be_assigned_to = 1
and (2 <> 0 or 1 = og_id or (og_external_user = 0 and 0 = 1))
and us_id not in
	(select pu_user from project_user_xref
		where pu_project = 1
		and pu_permission_level = 0)
order by us_username; 
2017-07-26 16:59:09 http://localhost:49412/edit_bug.aspx elapsed milliseconds:0007
2017-07-26 16:59:09 http://localhost:49412/edit_bug.aspx sql=
select isnull(pj_default_user,0)
					from projects
					where pj_id = 1
2017-07-26 16:59:09 http://localhost:49412/edit_bug.aspx sql=
select
			isnull(pj_enable_custom_dropdown1,0) [pj_enable_custom_dropdown1],
			isnull(pj_enable_custom_dropdown2,0) [pj_enable_custom_dropdown2],
			isnull(pj_enable_custom_dropdown3,0) [pj_enable_custom_dropdown3],
			isnull(pj_custom_dropdown_label1,'') [pj_custom_dropdown_label1],
			isnull(pj_custom_dropdown_label2,'') [pj_custom_dropdown_label2],
			isnull(pj_custom_dropdown_label3,'') [pj_custom_dropdown_label3],
			isnull(pj_custom_dropdown_values1,'') [pj_custom_dropdown_values1],
			isnull(pj_custom_dropdown_values2,'') [pj_custom_dropdown_values2],
			isnull(pj_custom_dropdown_values3,'') [pj_custom_dropdown_values3]
			from projects where pj_id = 1
2017-07-26 16:59:09 http://localhost:49412/edit_bug.aspx elapsed milliseconds:0004
2017-07-26 16:59:22 http://localhost:49412/edit_bug.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '2e3d862e-8e5b-49bd-a556-4efa6b210a3b';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '2e3d862e-8e5b-49bd-a556-4efa6b210a3b'
and us_active = 1
2017-07-26 16:59:22 http://localhost:49412/edit_bug.aspx elapsed milliseconds:0000
2017-07-26 16:59:22 http://localhost:49412/edit_bug.aspx sql=
 /* get_bug_datarow */
declare @svn_revisions int
declare @git_commits int
declare @hg_revisions int
declare @tasks int
declare @related int;
set @svn_revisions = 0
set @git_commits = 0
set @hg_revisions = 0
set @tasks = 0
set @related = 0

select bg_id [id],
bg_short_desc [short_desc],
isnull(bg_tags,'') [bg_tags],
isnull(ru.us_username,'[deleted user]') [reporter],
isnull(ru.us_email,'') [reporter_email],
case rtrim(ru.us_firstname)
	when null then isnull(ru.us_lastname, '')
	when '' then isnull(ru.us_lastname, '')
	else isnull(ru.us_lastname + ', ' + ru.us_firstname,'')
	end [reporter_fullname],
bg_reported_date [reported_date],
datediff(s,bg_reported_date,getdate()) [seconds_ago],
isnull(lu.us_username,'') [last_updated_user],
case rtrim(lu.us_firstname)
	when null then isnull(lu.us_lastname, '')
	when '' then isnull(lu.us_lastname, '')
	else isnull(lu.us_lastname + ', ' + lu.us_firstname,'')
	end [last_updated_fullname],


bg_last_updated_date [last_updated_date],
isnull(bg_project,0) [project],
isnull(pj_name,'[no project]') [current_project],

isnull(bg_org,0) [organization],
isnull(bugorg.og_name,'') [og_name],

isnull(bg_category,0) [category],
isnull(ct_name,'') [category_name],

isnull(bg_priority,0) [priority],
isnull(pr_name,'') [priority_name],

isnull(bg_status,0) [status],
isnull(st_name,'') [status_name],

isnull(bg_user_defined_attribute,0) [udf],
isnull(udf_name,'') [udf_name],

isnull(bg_assigned_to_user,0) [assigned_to_user],
isnull(asg.us_username,'[not assigned]') [assigned_to_username],
case rtrim(asg.us_firstname)
when null then isnull(asg.us_lastname, '[not assigned]')
when '' then isnull(asg.us_lastname, '[not assigned]')
else isnull(asg.us_lastname + ', ' + asg.us_firstname,'[not assigned]')
end [assigned_to_fullname],

isnull(bs_user,0) [subscribed],

case
when
	1 <> bg_org
	and userorg.og_other_orgs_permission_level < 2
	and userorg.og_other_orgs_permission_level < isnull(pu_permission_level,2)
		then userorg.og_other_orgs_permission_level
else
	isnull(pu_permission_level,2)
end [pu_permission_level],

isnull(bg_project_custom_dropdown_value1,'') [bg_project_custom_dropdown_value1],
isnull(bg_project_custom_dropdown_value2,'') [bg_project_custom_dropdown_value2],
isnull(bg_project_custom_dropdown_value3,'') [bg_project_custom_dropdown_value3],
@related [relationship_cnt],
@svn_revisions [svn_revision_cnt],
@git_commits [git_commit_cnt],
@hg_revisions [hg_commit_cnt],
@tasks [task_cnt],
getdate() [snapshot_timestamp]

from bugs
inner join users this_user on us_id = 1
inner join orgs userorg on this_user.us_org = userorg.og_id
left outer join user_defined_attribute on bg_user_defined_attribute = udf_id
left outer join projects on bg_project = pj_id
left outer join orgs bugorg on bg_org = bugorg.og_id
left outer join categories on bg_category = ct_id
left outer join priorities on bg_priority = pr_id
left outer join statuses on bg_status = st_id
left outer join users asg on bg_assigned_to_user = asg.us_id
left outer join users ru on bg_reported_user = ru.us_id
left outer join users lu on bg_last_updated_user = lu.us_id
left outer join bug_subscriptions on bs_bug = bg_id and bs_user = 1
left outer join project_user_xref on pj_id = pu_project
and pu_user = 1
where bg_id = 0
2017-07-26 16:59:22 http://localhost:49412/edit_bug.aspx elapsed milliseconds:0026
2017-07-26 16:59:22 http://localhost:49412/edit_bug.aspx sql=

/* validate org versus assigned_to */
select case when og_other_orgs_permission_level <> 0
or 1 = og_id then 1
else 0 end as [answer]
from users
inner join orgs on us_org = og_id
where us_id = 2
2017-07-26 16:59:22 http://localhost:49412/edit_bug.aspx sql=
insert into bugs
					(bg_short_desc,
					bg_tags,
					bg_reported_user,
					bg_last_updated_user,
					bg_reported_date,
					bg_last_updated_date,
					bg_project,
					bg_org,
					bg_category,
					bg_priority,
					bg_status,
					bg_assigned_to_user,
					bg_user_defined_attribute,
					bg_project_custom_dropdown_value1,
					bg_project_custom_dropdown_value2,
					bg_project_custom_dropdown_value3
					)
					values (N'search page', N'', 1,  1, getdate(), getdate(),
					1, 1,
					2, 1, 1, 2, 0,
					N'',N'',N'' )
select scope_identity()
2017-07-26 16:59:22 http://localhost:49412/edit_bug.aspx sql=

declare @now datetime
set @now = getdate()

insert into bug_posts
(bp_bug, bp_user, bp_date, bp_comment, bp_comment_search, bp_email_from, bp_email_cc, bp_type, bp_content_type,
bp_hidden_from_external_users)
values(
1,
1,
@now,
N'bootstrap implement',
N'bootstrap implement',
null,
N'',
N'comment',
N'text/plain',
0)
select scope_identity();
2017-07-26 16:59:22 http://localhost:49412/edit_bug.aspx sql=

declare @pj int
select @pj = bg_project from bugs where bg_id = 1

delete from bug_subscriptions
where bs_bug = 1
and bs_user in
(select x.pu_user
from projects
left outer join project_user_xref x on pu_project = pj_id
where pu_project = @pj
and isnull(pu_permission_level,2) = 0)

delete from bug_subscriptions
where bs_bug = 1
and bs_user in
(select us_id from users
 inner join orgs on us_org = og_id
 inner join bugs on bg_id = 1
 where og_other_orgs_permission_level = 0
 and bg_org <> og_id)

insert into bug_subscriptions (bs_bug, bs_user)
select 1, us_id
from users
inner join orgs on us_org = og_id
inner join bugs on bg_id = 1
left outer join project_user_xref on pu_project = @pj and pu_user = us_id
where us_auto_subscribe = 1
and
case
	when
		us_org <> bg_org
		and og_other_orgs_permission_level < 2
		and og_other_orgs_permission_level < isnull(pu_permission_level,2)
			then og_other_orgs_permission_level
	else
		isnull(pu_permission_level,2)
end <> 0
and us_active = 1
and us_id not in
(select bs_user from bug_subscriptions
where bs_bug = 1)

insert into bug_subscriptions (bs_bug, bs_user)
select 1, pj_default_user
from projects
inner join users on pj_default_user = us_id
where pj_id = @pj
and pj_default_user <> 0
and pj_auto_subscribe_default_user = 1
and us_active = 1
and pj_default_user not in
(select bs_user from bug_subscriptions
where bs_bug = 1)

insert into bug_subscriptions (bs_bug, bs_user)
select 1, pu_user from project_user_xref
inner join users on pu_user = us_id
inner join orgs on us_org = og_id
inner join bugs on bg_id = 1
where pu_auto_subscribe = 1
and
case
	when
		us_org <> bg_org
		and og_other_orgs_permission_level < 2
		and og_other_orgs_permission_level < isnull(pu_permission_level,2)
			then og_other_orgs_permission_level
	else
		isnull(pu_permission_level,2)
end <> 0
and us_active = 1
and pu_project = @pj
and pu_user not in
(select bs_user from bug_subscriptions
where bs_bug = 1)

insert into bug_subscriptions (bs_bug, bs_user)
select 1, us_id
from users
inner join bugs on bg_id = 1
inner join orgs on us_org = og_id
left outer join project_user_xref on pu_project = @pj and pu_user = us_id
where ((us_auto_subscribe_own_bugs = 1 and bg_assigned_to_user = us_id)
or
(us_auto_subscribe_reported_bugs = 1 and bg_reported_user = us_id))
and
case
	when
		us_org <> bg_org
		and og_other_orgs_permission_level < 2
		and og_other_orgs_permission_level < isnull(pu_permission_level,2)
			then og_other_orgs_permission_level
	else
		isnull(pu_permission_level,2)
end <> 0
and us_active = 1
and us_id not in
(select bs_user from bug_subscriptions
where bs_bug = 1)
2017-07-26 16:59:22 http://localhost:49412/edit_bug.aspx sql=

/* get notification emails for all subscribers */
select us_email, us_id, us_admin, og.*
from bug_subscriptions
inner join users on bs_user = us_id
inner join orgs og on us_org = og_id
inner join bugs on bg_id = bs_bug
left outer join project_user_xref on pu_user = us_id and pu_project = bg_project
where us_email is not null
and us_enable_notifications = 1
-- $status_change
and us_active = 1
and us_email <> ''
and (   (1 <= us_reported_notifications and bg_reported_user = bs_user)
or (1 <= us_assigned_notifications and bg_assigned_to_user = bs_user)
or (1 <= us_assigned_notifications and 0 = bs_user)
or (1 <= us_subscribed_notifications))
and
case
when
us_org <> bg_org
and og_other_orgs_permission_level < 2
and og_other_orgs_permission_level < isnull(pu_permission_level,2)
	then og_other_orgs_permission_level
else
isnull(pu_permission_level,2)
end <> 0
and bs_bug = 1
and (us_id <> 1 or isnull(us_send_notifications_to_self,0) = 1)
2017-07-26 16:59:22  started updating Lucene index using folder C:\Users\Oisiktekiner\Documents\Visual Studio 2017\Projects\btnetnew\btnetnew\App_Data\lucene_index
2017-07-26 16:59:22  sql=

/* get searchable cols */					
select sc.name
from syscolumns sc
inner join systypes st on st.xusertype = sc.xusertype
inner join sysobjects so on sc.id = so.id
where so.name = 'bugs'
and st.[name] <> 'sysname'
and sc.name not in ('rowguid',
'bg_id',
'bg_short_desc',
'bg_reported_user',
'bg_reported_date',
'bg_project',
'bg_org',
'bg_category',
'bg_priority',
'bg_status',
'bg_assigned_to_user',
'bg_last_updated_user',
'bg_last_updated_date',
'bg_user_defined_attribute',
'bg_project_custom_dropdown_value1',
'bg_project_custom_dropdown_value2',
'bg_project_custom_dropdown_value3',
'bg_tags')
and st.[name] in ('nvarchar','varchar')
and sc.length > 30
2017-07-26 16:59:22  elapsed milliseconds:0000
2017-07-26 16:59:22  sql=

select bg_id, 

isnull(bg_tags,'') bg_tags,
bg_short_desc    
from bugs where bg_id = 1
2017-07-26 16:59:22  elapsed milliseconds:0001
2017-07-26 16:59:22 http://localhost:49412/edit_bug.aspx elapsed milliseconds:0023
2017-07-26 16:59:22 http://localhost:49412/edit_bug.aspx?id=1 sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '2e3d862e-8e5b-49bd-a556-4efa6b210a3b';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '2e3d862e-8e5b-49bd-a556-4efa6b210a3b'
and us_active = 1
2017-07-26 16:59:22 http://localhost:49412/edit_bug.aspx?id=1 elapsed milliseconds:0000
2017-07-26 16:59:22 http://localhost:49412/edit_bug.aspx?id=1 sql=
 /* get_bug_datarow */
declare @svn_revisions int
declare @git_commits int
declare @hg_revisions int
declare @tasks int
declare @related int;
set @svn_revisions = 0
set @git_commits = 0
set @hg_revisions = 0
set @tasks = 0
set @related = 0

select bg_id [id],
bg_short_desc [short_desc],
isnull(bg_tags,'') [bg_tags],
isnull(ru.us_username,'[deleted user]') [reporter],
isnull(ru.us_email,'') [reporter_email],
case rtrim(ru.us_firstname)
	when null then isnull(ru.us_lastname, '')
	when '' then isnull(ru.us_lastname, '')
	else isnull(ru.us_lastname + ', ' + ru.us_firstname,'')
	end [reporter_fullname],
bg_reported_date [reported_date],
datediff(s,bg_reported_date,getdate()) [seconds_ago],
isnull(lu.us_username,'') [last_updated_user],
case rtrim(lu.us_firstname)
	when null then isnull(lu.us_lastname, '')
	when '' then isnull(lu.us_lastname, '')
	else isnull(lu.us_lastname + ', ' + lu.us_firstname,'')
	end [last_updated_fullname],


bg_last_updated_date [last_updated_date],
isnull(bg_project,0) [project],
isnull(pj_name,'[no project]') [current_project],

isnull(bg_org,0) [organization],
isnull(bugorg.og_name,'') [og_name],

isnull(bg_category,0) [category],
isnull(ct_name,'') [category_name],

isnull(bg_priority,0) [priority],
isnull(pr_name,'') [priority_name],

isnull(bg_status,0) [status],
isnull(st_name,'') [status_name],

isnull(bg_user_defined_attribute,0) [udf],
isnull(udf_name,'') [udf_name],

isnull(bg_assigned_to_user,0) [assigned_to_user],
isnull(asg.us_username,'[not assigned]') [assigned_to_username],
case rtrim(asg.us_firstname)
when null then isnull(asg.us_lastname, '[not assigned]')
when '' then isnull(asg.us_lastname, '[not assigned]')
else isnull(asg.us_lastname + ', ' + asg.us_firstname,'[not assigned]')
end [assigned_to_fullname],

isnull(bs_user,0) [subscribed],

case
when
	1 <> bg_org
	and userorg.og_other_orgs_permission_level < 2
	and userorg.og_other_orgs_permission_level < isnull(pu_permission_level,2)
		then userorg.og_other_orgs_permission_level
else
	isnull(pu_permission_level,2)
end [pu_permission_level],

isnull(bg_project_custom_dropdown_value1,'') [bg_project_custom_dropdown_value1],
isnull(bg_project_custom_dropdown_value2,'') [bg_project_custom_dropdown_value2],
isnull(bg_project_custom_dropdown_value3,'') [bg_project_custom_dropdown_value3],
@related [relationship_cnt],
@svn_revisions [svn_revision_cnt],
@git_commits [git_commit_cnt],
@hg_revisions [hg_commit_cnt],
@tasks [task_cnt],
getdate() [snapshot_timestamp]

from bugs
inner join users this_user on us_id = 1
inner join orgs userorg on this_user.us_org = userorg.og_id
left outer join user_defined_attribute on bg_user_defined_attribute = udf_id
left outer join projects on bg_project = pj_id
left outer join orgs bugorg on bg_org = bugorg.og_id
left outer join categories on bg_category = ct_id
left outer join priorities on bg_priority = pr_id
left outer join statuses on bg_status = st_id
left outer join users asg on bg_assigned_to_user = asg.us_id
left outer join users ru on bg_reported_user = ru.us_id
left outer join users lu on bg_last_updated_user = lu.us_id
left outer join bug_subscriptions on bs_bug = bg_id and bs_user = 1
left outer join project_user_xref on pj_id = pu_project
and pu_user = 1
where bg_id = 1
2017-07-26 16:59:23 http://localhost:49412/edit_bug.aspx?id=1 elapsed milliseconds:0030
2017-07-26 16:59:23 http://localhost:49412/edit_bug.aspx?id=1 sql=
/* drop downs */ select pj_id, pj_name
		from projects
		left outer join project_user_xref on pj_id = pu_project
		and pu_user = 1
		where pj_active = 1
		and isnull(pu_permission_level,2) not in (0, 1)
		order by pj_name;
select og_id, og_name from orgs where og_active = 1 order by og_name;
select ct_id, ct_name from categories order by ct_sort_seq, ct_name;
select pr_id, pr_name from priorities order by pr_sort_seq, pr_name;
select st_id, st_name from statuses order by st_sort_seq, st_name;
select udf_id, udf_name from user_defined_attribute order by udf_sort_seq, udf_name;
2017-07-26 16:59:23 http://localhost:49412/edit_bug.aspx?id=1 elapsed milliseconds:0000
2017-07-26 16:59:23 http://localhost:49412/edit_bug.aspx?id=1 sql=

/* users this project */ select us_id, case when 0 = 1 then us_lastname + ', ' + us_firstname else us_username end us_username
from users
inner join orgs on us_org = og_id
where us_active = 1
and og_can_be_assigned_to = 1
and (2 <> 0 or 1 = og_id or (og_external_user = 0 and 0 = 1))
and us_id not in
	(select pu_user from project_user_xref
		where pu_project = 1
		and pu_permission_level = 0)
order by us_username; 
2017-07-26 16:59:23 http://localhost:49412/edit_bug.aspx?id=1 elapsed milliseconds:0000
2017-07-26 16:59:23  sql=

select bp_bug, bp_id, 
isnull(bp_comment_search,bp_comment) [text] 
from bug_posts 
where bp_type <> 'update'
and bp_hidden_from_external_users = 0
and bp_bug = 1
2017-07-26 16:59:23 http://localhost:49412/edit_bug.aspx?id=1 sql=
select
			isnull(pj_enable_custom_dropdown1,0) [pj_enable_custom_dropdown1],
			isnull(pj_enable_custom_dropdown2,0) [pj_enable_custom_dropdown2],
			isnull(pj_enable_custom_dropdown3,0) [pj_enable_custom_dropdown3],
			isnull(pj_custom_dropdown_label1,'') [pj_custom_dropdown_label1],
			isnull(pj_custom_dropdown_label2,'') [pj_custom_dropdown_label2],
			isnull(pj_custom_dropdown_label3,'') [pj_custom_dropdown_label3],
			isnull(pj_custom_dropdown_values1,'') [pj_custom_dropdown_values1],
			isnull(pj_custom_dropdown_values2,'') [pj_custom_dropdown_values2],
			isnull(pj_custom_dropdown_values3,'') [pj_custom_dropdown_values3]
			from projects where pj_id = 1
2017-07-26 16:59:23 http://localhost:49412/edit_bug.aspx?id=1 elapsed milliseconds:0000
2017-07-26 16:59:23  elapsed milliseconds:0005
2017-07-26 16:59:23 http://localhost:49412/edit_bug.aspx?id=1 sql=

/* get_bug_posts */
select
a.bp_bug,
a.bp_comment,
isnull(us_username,'') [us_username],
case rtrim(us_firstname)
	when null then isnull(us_lastname, '')
	when '' then isnull(us_lastname, '')
	else isnull(us_lastname + ', ' + us_firstname,'')
	end [us_fullname],
isnull(us_email,'') [us_email],
a.bp_date,
datediff(s,a.bp_date,getdate()) [seconds_ago],
a.bp_id,
a.bp_type,
isnull(a.bp_email_from,'') bp_email_from,
isnull(a.bp_email_to,'') bp_email_to,
isnull(a.bp_email_cc,'') bp_email_cc,
isnull(a.bp_file,'') bp_file,
isnull(a.bp_size,0) bp_size,
isnull(a.bp_content_type,'') bp_content_type,
a.bp_hidden_from_external_users,
isnull(ba.bp_file,'') ba_file,  -- intentionally ba
isnull(ba.bp_id,'') ba_id, -- intentionally ba
isnull(ba.bp_size,'') ba_size,  -- intentionally ba
isnull(ba.bp_content_type,'') ba_content_type -- intentionally ba
from bug_posts a
left outer join users on us_id = a.bp_user
left outer join bug_posts ba on ba.bp_parent = a.bp_id and ba.bp_bug = a.bp_bug
where a.bp_bug = 1
and a.bp_parent is null
 and a.bp_type <> 'update'
 order by a.bp_id desc, ba.bp_parent, ba.bp_id
2017-07-26 16:59:23 http://localhost:49412/edit_bug.aspx?id=1 elapsed milliseconds:0012
2017-07-26 16:59:23  done updating Lucene index
2017-07-26 16:59:31 http://localhost:49412/bugs.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '2e3d862e-8e5b-49bd-a556-4efa6b210a3b';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '2e3d862e-8e5b-49bd-a556-4efa6b210a3b'
and us_active = 1
2017-07-26 16:59:31 http://localhost:49412/bugs.aspx elapsed milliseconds:0000
2017-07-26 16:59:31 http://localhost:49412/bugs.aspx sql=
/* query dropdown */
select qu_id, qu_desc
from queries
where (isnull(qu_user,0) = 0 and isnull(qu_org,0) = 0)
or isnull(qu_user,0) = 1
or isnull(qu_org,0) = 1
order by qu_desc
2017-07-26 16:59:31 http://localhost:49412/bugs.aspx elapsed milliseconds:0000
2017-07-26 16:59:31 http://localhost:49412/bugs.aspx sql=
select qu_sql from queries where qu_id = 2
2017-07-26 16:59:31 http://localhost:49412/bugs.aspx sql=
select isnull(pr_background_color,'#ffffff'), bg_id [id], isnull(bu_flag,0) [$FLAG], 
 bg_short_desc [desc], isnull(pj_name,'') [project], isnull(og_name,'') [organization], isnull(ct_name,'') [category], rpt.us_username [reported by],
 bg_reported_date [reported on], isnull(pr_name,'') [priority], isnull(asg.us_username,'') [assigned to],
 isnull(st_name,'') [status], isnull(lu.us_username,'') [last updated by], bg_last_updated_date [last updated on]
 from bugs 
 left outer join bug_user on bu_bug = bg_id and bu_user = 1 
 left outer join users rpt on rpt.us_id = bg_reported_user
 left outer join users asg on asg.us_id = bg_assigned_to_user
 left outer join users lu on lu.us_id = bg_last_updated_user
 left outer join projects on pj_id = bg_project
 left outer join orgs on og_id = bg_org
 left outer join categories on ct_id = bg_category
 left outer join priorities on pr_id = bg_priority
 left outer join statuses on st_id = bg_status
 where /* altered - both  */ (  bg_status <> 5  ) AND (  (bugs.bg_project not in (
					select pu_project
					from project_user_xref
					where pu_user = 1
					and pu_permission_level = 0))  ) order by bg_id desc
2017-07-26 16:59:31 http://localhost:49412/bugs.aspx elapsed milliseconds:0023
2017-07-26 16:59:36 http://localhost:49412/flag.aspx?ses=2e3d862e-8e5b-49bd-a556-4efa6b210a3b&bugid=1&flag=1 sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '2e3d862e-8e5b-49bd-a556-4efa6b210a3b';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '2e3d862e-8e5b-49bd-a556-4efa6b210a3b'
and us_active = 1
2017-07-26 16:59:36 http://localhost:49412/flag.aspx?ses=2e3d862e-8e5b-49bd-a556-4efa6b210a3b&bugid=1&flag=1 elapsed milliseconds:0000
2017-07-26 16:59:36 http://localhost:49412/flag.aspx?ses=2e3d862e-8e5b-49bd-a556-4efa6b210a3b&bugid=1&flag=1 sql=

declare @bg_org int

select isnull(pu_permission_level,2),
bg_org
from bugs
left outer join project_user_xref
on pu_project = bg_project
and pu_user = 1
where bg_id = 1
2017-07-26 16:59:36 http://localhost:49412/flag.aspx?ses=2e3d862e-8e5b-49bd-a556-4efa6b210a3b&bugid=1&flag=1 elapsed milliseconds:0002
2017-07-26 16:59:36 http://localhost:49412/flag.aspx?ses=2e3d862e-8e5b-49bd-a556-4efa6b210a3b&bugid=1&flag=1 sql=

if not exists (select bu_bug from bug_user where bu_bug = 1 and bu_user = 1)
	insert into bug_user (bu_bug, bu_user, bu_flag, bu_seen, bu_vote) values(1, 1, 1, 0, 0) 
update bug_user set bu_flag = 1, bu_flag_datetime = getdate() where bu_bug = 1 and bu_user = 1 and bu_flag <> 1
2017-07-26 17:00:45 http://localhost:49412/ajax.aspx?bugid=1 sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '2e3d862e-8e5b-49bd-a556-4efa6b210a3b';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '2e3d862e-8e5b-49bd-a556-4efa6b210a3b'
and us_active = 1
2017-07-26 17:00:45 http://localhost:49412/ajax.aspx?bugid=1 elapsed milliseconds:0000
2017-07-26 17:00:45 http://localhost:49412/ajax.aspx?bugid=1 sql=

declare @bg_org int

select isnull(pu_permission_level,2),
bg_org
from bugs
left outer join project_user_xref
on pu_project = bg_project
and pu_user = 1
where bg_id = 1
2017-07-26 17:00:45 http://localhost:49412/ajax.aspx?bugid=1 elapsed milliseconds:0000
2017-07-26 17:00:45 http://localhost:49412/ajax.aspx?bugid=1 sql=

/* get_bug_posts */
select
a.bp_bug,
a.bp_comment,
isnull(us_username,'') [us_username],
case rtrim(us_firstname)
	when null then isnull(us_lastname, '')
	when '' then isnull(us_lastname, '')
	else isnull(us_lastname + ', ' + us_firstname,'')
	end [us_fullname],
isnull(us_email,'') [us_email],
a.bp_date,
datediff(s,a.bp_date,getdate()) [seconds_ago],
a.bp_id,
a.bp_type,
isnull(a.bp_email_from,'') bp_email_from,
isnull(a.bp_email_to,'') bp_email_to,
isnull(a.bp_email_cc,'') bp_email_cc,
isnull(a.bp_file,'') bp_file,
isnull(a.bp_size,0) bp_size,
isnull(a.bp_content_type,'') bp_content_type,
a.bp_hidden_from_external_users,
isnull(ba.bp_file,'') ba_file,  -- intentionally ba
isnull(ba.bp_id,'') ba_id, -- intentionally ba
isnull(ba.bp_size,'') ba_size,  -- intentionally ba
isnull(ba.bp_content_type,'') ba_content_type -- intentionally ba
from bug_posts a
left outer join users on us_id = a.bp_user
left outer join bug_posts ba on ba.bp_parent = a.bp_id and ba.bp_bug = a.bp_bug
where a.bp_bug = 1
and a.bp_parent is null
 and a.bp_type <> 'update'
 order by a.bp_id desc, ba.bp_parent, ba.bp_id
2017-07-26 17:00:45 http://localhost:49412/ajax.aspx?bugid=1 elapsed milliseconds:0001
2017-07-26 17:10:04 http://localhost:49412/ajax.aspx?bugid=1 sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '2e3d862e-8e5b-49bd-a556-4efa6b210a3b';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '2e3d862e-8e5b-49bd-a556-4efa6b210a3b'
and us_active = 1
2017-07-26 17:10:04 http://localhost:49412/ajax.aspx?bugid=1 elapsed milliseconds:0000
2017-07-26 17:10:04 http://localhost:49412/ajax.aspx?bugid=1 sql=

declare @bg_org int

select isnull(pu_permission_level,2),
bg_org
from bugs
left outer join project_user_xref
on pu_project = bg_project
and pu_user = 1
where bg_id = 1
2017-07-26 17:10:04 http://localhost:49412/ajax.aspx?bugid=1 elapsed milliseconds:0000
2017-07-26 17:10:04 http://localhost:49412/ajax.aspx?bugid=1 sql=

/* get_bug_posts */
select
a.bp_bug,
a.bp_comment,
isnull(us_username,'') [us_username],
case rtrim(us_firstname)
	when null then isnull(us_lastname, '')
	when '' then isnull(us_lastname, '')
	else isnull(us_lastname + ', ' + us_firstname,'')
	end [us_fullname],
isnull(us_email,'') [us_email],
a.bp_date,
datediff(s,a.bp_date,getdate()) [seconds_ago],
a.bp_id,
a.bp_type,
isnull(a.bp_email_from,'') bp_email_from,
isnull(a.bp_email_to,'') bp_email_to,
isnull(a.bp_email_cc,'') bp_email_cc,
isnull(a.bp_file,'') bp_file,
isnull(a.bp_size,0) bp_size,
isnull(a.bp_content_type,'') bp_content_type,
a.bp_hidden_from_external_users,
isnull(ba.bp_file,'') ba_file,  -- intentionally ba
isnull(ba.bp_id,'') ba_id, -- intentionally ba
isnull(ba.bp_size,'') ba_size,  -- intentionally ba
isnull(ba.bp_content_type,'') ba_content_type -- intentionally ba
from bug_posts a
left outer join users on us_id = a.bp_user
left outer join bug_posts ba on ba.bp_parent = a.bp_id and ba.bp_bug = a.bp_bug
where a.bp_bug = 1
and a.bp_parent is null
 and a.bp_type <> 'update'
 order by a.bp_id desc, ba.bp_parent, ba.bp_id
2017-07-26 17:10:04 http://localhost:49412/ajax.aspx?bugid=1 elapsed milliseconds:0000
2017-07-26 17:10:57 http://localhost:49412/ajax.aspx?bugid=1 sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '2e3d862e-8e5b-49bd-a556-4efa6b210a3b';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '2e3d862e-8e5b-49bd-a556-4efa6b210a3b'
and us_active = 1
2017-07-26 17:10:57 http://localhost:49412/ajax.aspx?bugid=1 elapsed milliseconds:0000
2017-07-26 17:10:57 http://localhost:49412/ajax.aspx?bugid=1 sql=

declare @bg_org int

select isnull(pu_permission_level,2),
bg_org
from bugs
left outer join project_user_xref
on pu_project = bg_project
and pu_user = 1
where bg_id = 1
2017-07-26 17:10:57 http://localhost:49412/ajax.aspx?bugid=1 elapsed milliseconds:0000
2017-07-26 17:10:57 http://localhost:49412/ajax.aspx?bugid=1 sql=

/* get_bug_posts */
select
a.bp_bug,
a.bp_comment,
isnull(us_username,'') [us_username],
case rtrim(us_firstname)
	when null then isnull(us_lastname, '')
	when '' then isnull(us_lastname, '')
	else isnull(us_lastname + ', ' + us_firstname,'')
	end [us_fullname],
isnull(us_email,'') [us_email],
a.bp_date,
datediff(s,a.bp_date,getdate()) [seconds_ago],
a.bp_id,
a.bp_type,
isnull(a.bp_email_from,'') bp_email_from,
isnull(a.bp_email_to,'') bp_email_to,
isnull(a.bp_email_cc,'') bp_email_cc,
isnull(a.bp_file,'') bp_file,
isnull(a.bp_size,0) bp_size,
isnull(a.bp_content_type,'') bp_content_type,
a.bp_hidden_from_external_users,
isnull(ba.bp_file,'') ba_file,  -- intentionally ba
isnull(ba.bp_id,'') ba_id, -- intentionally ba
isnull(ba.bp_size,'') ba_size,  -- intentionally ba
isnull(ba.bp_content_type,'') ba_content_type -- intentionally ba
from bug_posts a
left outer join users on us_id = a.bp_user
left outer join bug_posts ba on ba.bp_parent = a.bp_id and ba.bp_bug = a.bp_bug
where a.bp_bug = 1
and a.bp_parent is null
 and a.bp_type <> 'update'
 order by a.bp_id desc, ba.bp_parent, ba.bp_id
2017-07-26 17:10:57 http://localhost:49412/ajax.aspx?bugid=1 elapsed milliseconds:0000
2017-07-26 17:10:58 http://localhost:49412/ajax.aspx?bugid=1 sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '2e3d862e-8e5b-49bd-a556-4efa6b210a3b';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '2e3d862e-8e5b-49bd-a556-4efa6b210a3b'
and us_active = 1
2017-07-26 17:10:58 http://localhost:49412/ajax.aspx?bugid=1 elapsed milliseconds:0000
2017-07-26 17:10:58 http://localhost:49412/ajax.aspx?bugid=1 sql=

declare @bg_org int

select isnull(pu_permission_level,2),
bg_org
from bugs
left outer join project_user_xref
on pu_project = bg_project
and pu_user = 1
where bg_id = 1
2017-07-26 17:10:58 http://localhost:49412/ajax.aspx?bugid=1 elapsed milliseconds:0000
2017-07-26 17:10:58 http://localhost:49412/ajax.aspx?bugid=1 sql=

/* get_bug_posts */
select
a.bp_bug,
a.bp_comment,
isnull(us_username,'') [us_username],
case rtrim(us_firstname)
	when null then isnull(us_lastname, '')
	when '' then isnull(us_lastname, '')
	else isnull(us_lastname + ', ' + us_firstname,'')
	end [us_fullname],
isnull(us_email,'') [us_email],
a.bp_date,
datediff(s,a.bp_date,getdate()) [seconds_ago],
a.bp_id,
a.bp_type,
isnull(a.bp_email_from,'') bp_email_from,
isnull(a.bp_email_to,'') bp_email_to,
isnull(a.bp_email_cc,'') bp_email_cc,
isnull(a.bp_file,'') bp_file,
isnull(a.bp_size,0) bp_size,
isnull(a.bp_content_type,'') bp_content_type,
a.bp_hidden_from_external_users,
isnull(ba.bp_file,'') ba_file,  -- intentionally ba
isnull(ba.bp_id,'') ba_id, -- intentionally ba
isnull(ba.bp_size,'') ba_size,  -- intentionally ba
isnull(ba.bp_content_type,'') ba_content_type -- intentionally ba
from bug_posts a
left outer join users on us_id = a.bp_user
left outer join bug_posts ba on ba.bp_parent = a.bp_id and ba.bp_bug = a.bp_bug
where a.bp_bug = 1
and a.bp_parent is null
 and a.bp_type <> 'update'
 order by a.bp_id desc, ba.bp_parent, ba.bp_id
2017-07-26 17:10:58 http://localhost:49412/ajax.aspx?bugid=1 elapsed milliseconds:0000
2017-07-26 17:13:45  caught exception in util.set_context:Request is not available in this context
2017-07-26 17:13:45  threadproc_votes
2017-07-26 17:13:45  sql=

if exists (select * from dbo.sysobjects where id = object_id(N'[votes_view]'))
drop view [votes_view]
2017-07-26 17:13:45  started creating Lucene index using folder C:\Users\Oisiktekiner\Documents\Visual Studio 2017\Projects\btnetnew\btnetnew\App_Data\lucene_index
2017-07-26 17:13:45  sql=

create view votes_view as
select bu_bug as vote_bug, sum(bu_vote) as vote_total
from bug_user
group by bu_bug
having sum(bu_vote) > 0
2017-07-26 17:13:45  sql=

select bu_bug, count(1)
from bug_user 
where bu_vote = 1
group by bu_bug
2017-07-26 17:13:45  elapsed milliseconds:0022
2017-07-26 17:13:45  sql=

/* get searchable cols */					
select sc.name
from syscolumns sc
inner join systypes st on st.xusertype = sc.xusertype
inner join sysobjects so on sc.id = so.id
where so.name = 'bugs'
and st.[name] <> 'sysname'
and sc.name not in ('rowguid',
'bg_id',
'bg_short_desc',
'bg_reported_user',
'bg_reported_date',
'bg_project',
'bg_org',
'bg_category',
'bg_priority',
'bg_status',
'bg_assigned_to_user',
'bg_last_updated_user',
'bg_last_updated_date',
'bg_user_defined_attribute',
'bg_project_custom_dropdown_value1',
'bg_project_custom_dropdown_value2',
'bg_project_custom_dropdown_value3',
'bg_tags')
and st.[name] in ('nvarchar','varchar')
and sc.length > 30
2017-07-26 17:13:45  elapsed milliseconds:0000
2017-07-26 17:13:45  sql=

select bg_id, 	

isnull(bg_tags,'') bg_tags,
bg_short_desc
from bugs
2017-07-26 17:13:45  elapsed milliseconds:0001
2017-07-26 17:13:45  sql=

select bp_bug, bp_id, 
isnull(bp_comment_search,bp_comment) [text] 
from bug_posts 
where bp_type <> 'update'
and bp_hidden_from_external_users = 0
2017-07-26 17:13:45  elapsed milliseconds:0012
2017-07-26 17:13:45  done creating Lucene index
2017-07-26 17:13:47 http://localhost:49412/default.aspx sql=
select count(1) from users
2017-07-26 17:13:50 http://localhost:49412/default.aspx sql=
select count(1) from users
2017-07-26 17:13:50 http://localhost:49412/default.aspx sql=

select us_username, us_id, us_password, isnull(us_salt,0) us_salt, us_active
from users
where us_username = N'admin'
2017-07-26 17:13:50 http://localhost:49412/default.aspx elapsed milliseconds:0000
2017-07-26 17:13:50 http://localhost:49412/default.aspx sql=
update users set us_most_recent_login_datetime = getdate() where us_id = 1
2017-07-26 17:13:50 http://localhost:49412/default.aspx sql=
select us_id from users where us_username = N'admin'
2017-07-26 17:13:50 http://localhost:49412/default.aspx elapsed milliseconds:0000
2017-07-26 17:13:50 http://localhost:49412/default.aspx guid=eae2b634-ea82-4a54-8857-4dfd5717a0ad
2017-07-26 17:13:50 http://localhost:49412/default.aspx sql=
insert into sessions (se_id, se_user) values('eae2b634-ea82-4a54-8857-4dfd5717a0ad', 1)
2017-07-26 17:13:50 http://localhost:49412/default.aspx AppPath:
2017-07-26 17:13:53 http://localhost:49412/bugs.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = 'eae2b634-ea82-4a54-8857-4dfd5717a0ad';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = 'eae2b634-ea82-4a54-8857-4dfd5717a0ad'
and us_active = 1
2017-07-26 17:13:53 http://localhost:49412/bugs.aspx elapsed milliseconds:0010
2017-07-26 17:13:53 http://localhost:49412/bugs.aspx sql=

/* custom columns */ select sc.name, st.[name] [datatype], 
case when st.[name] = 'nvarchar' or st.[name] = 'nchar' then sc.length/2 else sc.length end as [length], 
sc.xprec, sc.xscale, sc.isnullable,
mm.text [default value], 
dflts.name [default name], 
isnull(ccm_dropdown_type,'') [dropdown type],
isnull(ccm_dropdown_vals,'') [vals],
isnull(ccm_sort_seq, sc.colorder) [column order],
sc.colorder
from syscolumns sc
inner join systypes st on st.xusertype = sc.xusertype
inner join sysobjects so on sc.id = so.id
left outer join syscomments mm on sc.cdefault = mm.id
left outer join custom_col_metadata on ccm_colorder = sc.colorder
left outer join sysobjects dflts on dflts.id = mm.id
where so.name = 'bugs'
and st.[name] <> 'sysname'
and sc.name not in ('rowguid',
'bg_id',
'bg_short_desc',
'bg_reported_user',
'bg_reported_date',
'bg_project',
'bg_org',
'bg_category',
'bg_priority',
'bg_status',
'bg_assigned_to_user',
'bg_last_updated_user',
'bg_last_updated_date',
'bg_user_defined_attribute',
'bg_project_custom_dropdown_value1',
'bg_project_custom_dropdown_value2',
'bg_project_custom_dropdown_value3',
'bg_tags')
order by sc.id, isnull(ccm_sort_seq,sc.colorder)
2017-07-26 17:13:53 http://localhost:49412/bugs.aspx elapsed milliseconds:0000
2017-07-26 17:13:53 http://localhost:49412/bugs.aspx sql=
/* query dropdown */
select qu_id, qu_desc
from queries
where (isnull(qu_user,0) = 0 and isnull(qu_org,0) = 0)
or isnull(qu_user,0) = 1
or isnull(qu_org,0) = 1
order by qu_desc
2017-07-26 17:13:53 http://localhost:49412/bugs.aspx elapsed milliseconds:0000
2017-07-26 17:13:53 http://localhost:49412/bugs.aspx sql=
select qu_id, qu_sql from queries where qu_id in
			(select us_default_query from users where us_id = 1)
2017-07-26 17:13:53 http://localhost:49412/bugs.aspx elapsed milliseconds:0000
2017-07-26 17:13:53 http://localhost:49412/bugs.aspx sql=
select isnull(pr_background_color,'#ffffff'), bg_id [id], isnull(bu_flag,0) [$FLAG], 
 bg_short_desc [desc], isnull(pj_name,'') [project], isnull(og_name,'') [organization], isnull(ct_name,'') [category], rpt.us_username [reported by],
 bg_reported_date [reported on], isnull(pr_name,'') [priority], isnull(asg.us_username,'') [assigned to],
 isnull(st_name,'') [status], isnull(lu.us_username,'') [last updated by], bg_last_updated_date [last updated on]
 from bugs 
 left outer join bug_user on bu_bug = bg_id and bu_user = 1 
 left outer join users rpt on rpt.us_id = bg_reported_user
 left outer join users asg on asg.us_id = bg_assigned_to_user
 left outer join users lu on lu.us_id = bg_last_updated_user
 left outer join projects on pj_id = bg_project
 left outer join orgs on og_id = bg_org
 left outer join categories on ct_id = bg_category
 left outer join priorities on pr_id = bg_priority
 left outer join statuses on st_id = bg_status
  /* altered - just order by  */ WHERE  (bugs.bg_project not in (
					select pu_project
					from project_user_xref
					where pu_user = 1
					and pu_permission_level = 0)) order by bg_id desc
2017-07-26 17:13:53 http://localhost:49412/bugs.aspx elapsed milliseconds:0019
2017-07-26 17:14:10 http://localhost:49412/bugs.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = 'eae2b634-ea82-4a54-8857-4dfd5717a0ad';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = 'eae2b634-ea82-4a54-8857-4dfd5717a0ad'
and us_active = 1
2017-07-26 17:14:10 http://localhost:49412/bugs.aspx elapsed milliseconds:0000
2017-07-26 17:14:14 http://localhost:49412/bugs.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = 'eae2b634-ea82-4a54-8857-4dfd5717a0ad';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = 'eae2b634-ea82-4a54-8857-4dfd5717a0ad'
and us_active = 1
2017-07-26 17:14:14 http://localhost:49412/bugs.aspx elapsed milliseconds:0000
2017-07-26 17:14:17 http://localhost:49412/bugs.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = 'eae2b634-ea82-4a54-8857-4dfd5717a0ad';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = 'eae2b634-ea82-4a54-8857-4dfd5717a0ad'
and us_active = 1
2017-07-26 17:14:17 http://localhost:49412/bugs.aspx elapsed milliseconds:0000
2017-07-26 17:14:19 http://localhost:49412/bugs.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = 'eae2b634-ea82-4a54-8857-4dfd5717a0ad';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = 'eae2b634-ea82-4a54-8857-4dfd5717a0ad'
and us_active = 1
2017-07-26 17:14:19 http://localhost:49412/bugs.aspx elapsed milliseconds:0000
2017-07-26 17:14:20 http://localhost:49412/bugs.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = 'eae2b634-ea82-4a54-8857-4dfd5717a0ad';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = 'eae2b634-ea82-4a54-8857-4dfd5717a0ad'
and us_active = 1
2017-07-26 17:14:20 http://localhost:49412/bugs.aspx elapsed milliseconds:0000
2017-07-26 17:14:23 http://localhost:49412/ajax.aspx?bugid=1 sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = 'eae2b634-ea82-4a54-8857-4dfd5717a0ad';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = 'eae2b634-ea82-4a54-8857-4dfd5717a0ad'
and us_active = 1
2017-07-26 17:14:23 http://localhost:49412/ajax.aspx?bugid=1 elapsed milliseconds:0000
2017-07-26 17:14:23 http://localhost:49412/ajax.aspx?bugid=1 sql=

declare @bg_org int

select isnull(pu_permission_level,2),
bg_org
from bugs
left outer join project_user_xref
on pu_project = bg_project
and pu_user = 1
where bg_id = 1
2017-07-26 17:14:23 http://localhost:49412/ajax.aspx?bugid=1 elapsed milliseconds:0000
2017-07-26 17:14:23 http://localhost:49412/ajax.aspx?bugid=1 sql=

/* get_bug_posts */
select
a.bp_bug,
a.bp_comment,
isnull(us_username,'') [us_username],
case rtrim(us_firstname)
	when null then isnull(us_lastname, '')
	when '' then isnull(us_lastname, '')
	else isnull(us_lastname + ', ' + us_firstname,'')
	end [us_fullname],
isnull(us_email,'') [us_email],
a.bp_date,
datediff(s,a.bp_date,getdate()) [seconds_ago],
a.bp_id,
a.bp_type,
isnull(a.bp_email_from,'') bp_email_from,
isnull(a.bp_email_to,'') bp_email_to,
isnull(a.bp_email_cc,'') bp_email_cc,
isnull(a.bp_file,'') bp_file,
isnull(a.bp_size,0) bp_size,
isnull(a.bp_content_type,'') bp_content_type,
a.bp_hidden_from_external_users,
isnull(ba.bp_file,'') ba_file,  -- intentionally ba
isnull(ba.bp_id,'') ba_id, -- intentionally ba
isnull(ba.bp_size,'') ba_size,  -- intentionally ba
isnull(ba.bp_content_type,'') ba_content_type -- intentionally ba
from bug_posts a
left outer join users on us_id = a.bp_user
left outer join bug_posts ba on ba.bp_parent = a.bp_id and ba.bp_bug = a.bp_bug
where a.bp_bug = 1
and a.bp_parent is null
 and a.bp_type <> 'update'
 order by a.bp_id desc, ba.bp_parent, ba.bp_id
2017-07-26 17:14:23 http://localhost:49412/ajax.aspx?bugid=1 elapsed milliseconds:0000
2017-07-26 17:15:24 http://localhost:49412/search.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = 'eae2b634-ea82-4a54-8857-4dfd5717a0ad';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = 'eae2b634-ea82-4a54-8857-4dfd5717a0ad'
and us_active = 1
2017-07-26 17:15:24 http://localhost:49412/search.aspx elapsed milliseconds:0000
2017-07-26 17:15:24 http://localhost:49412/search.aspx sql=

/* get related users 2 */
select  pj_id, us_id,
case when 0 = 1 then
    case when len(isnull(us_firstname,'') + ' ' + isnull(us_lastname,'')) > 1
	then isnull(us_firstname,'') + ' ' + isnull(us_lastname,'')
    else us_username end
else us_username end us_username,
isnull(us_email,'') us_email
into #temp
from projects, users
where pj_id not in
(
	select pu_project from project_user_xref
	where pu_permission_level = 0 and pu_user = 1
)





if 0 = 1 -- external
and 2 = 0 -- other orgs
begin
	select distinct a.us_id, a.us_username, a.us_email
	from #temp a
	inner join users b on a.us_id = b.us_id
	inner join orgs on b.us_org = og_id
	where og_external_user = 0 or b.us_org = 1
	order by a.us_username
end
else
begin

	select distinct us_id, us_username, us_email
		from #temp
		left outer join project_user_xref on pj_id = pu_project
		and us_id = pu_user
		where isnull(pu_permission_level,2) <> 0
		order by us_username
end

drop table #temp
2017-07-26 17:15:24 http://localhost:49412/search.aspx elapsed milliseconds:0013
2017-07-26 17:15:24 http://localhost:49412/search.aspx sql=
/* drop downs */ select pj_id, pj_name from projects order by pj_name; select og_id, og_name from orgs order by og_name;
	select ct_id, ct_name from categories order by ct_sort_seq, ct_name;
	select pr_id, pr_name from priorities order by pr_sort_seq, pr_name;
	select st_id, st_name from statuses order by st_sort_seq, st_name;
	select udf_id, udf_name from user_defined_attribute order by udf_sort_seq, udf_name
2017-07-26 17:15:24 http://localhost:49412/search.aspx elapsed milliseconds:0000
2017-07-26 17:15:24 http://localhost:49412/search.aspx sql=

select count(1)
from projects
where isnull(pj_enable_custom_dropdown1,0) = 1
or isnull(pj_enable_custom_dropdown2,0) = 1
or isnull(pj_enable_custom_dropdown3,0) = 1
2017-07-26 17:25:14  caught exception in util.set_context:Request is not available in this context
2017-07-26 17:25:14  threadproc_votes
2017-07-26 17:25:14  sql=

if exists (select * from dbo.sysobjects where id = object_id(N'[votes_view]'))
drop view [votes_view]
2017-07-26 17:25:14  started creating Lucene index using folder C:\Users\Oisiktekiner\Documents\Visual Studio 2017\Projects\btnetnew\btnetnew\App_Data\lucene_index
2017-07-26 17:25:15  sql=

create view votes_view as
select bu_bug as vote_bug, sum(bu_vote) as vote_total
from bug_user
group by bu_bug
having sum(bu_vote) > 0
2017-07-26 17:25:15  sql=

select bu_bug, count(1)
from bug_user 
where bu_vote = 1
group by bu_bug
2017-07-26 17:25:15  sql=

/* get searchable cols */					
select sc.name
from syscolumns sc
inner join systypes st on st.xusertype = sc.xusertype
inner join sysobjects so on sc.id = so.id
where so.name = 'bugs'
and st.[name] <> 'sysname'
and sc.name not in ('rowguid',
'bg_id',
'bg_short_desc',
'bg_reported_user',
'bg_reported_date',
'bg_project',
'bg_org',
'bg_category',
'bg_priority',
'bg_status',
'bg_assigned_to_user',
'bg_last_updated_user',
'bg_last_updated_date',
'bg_user_defined_attribute',
'bg_project_custom_dropdown_value1',
'bg_project_custom_dropdown_value2',
'bg_project_custom_dropdown_value3',
'bg_tags')
and st.[name] in ('nvarchar','varchar')
and sc.length > 30
2017-07-26 17:25:15  elapsed milliseconds:0012
2017-07-26 17:25:15  elapsed milliseconds:0000
2017-07-26 17:25:15  sql=

select bg_id, 	

isnull(bg_tags,'') bg_tags,
bg_short_desc
from bugs
2017-07-26 17:25:15  elapsed milliseconds:0001
2017-07-26 17:25:15  sql=

select bp_bug, bp_id, 
isnull(bp_comment_search,bp_comment) [text] 
from bug_posts 
where bp_type <> 'update'
and bp_hidden_from_external_users = 0
2017-07-26 17:25:15  elapsed milliseconds:0000
2017-07-26 17:25:15  done creating Lucene index
2017-07-26 17:25:17 http://localhost:49412/default.aspx sql=
select count(1) from users
2017-07-26 17:25:19 http://localhost:49412/default.aspx sql=
select count(1) from users
2017-07-26 17:25:19 http://localhost:49412/default.aspx sql=

select us_username, us_id, us_password, isnull(us_salt,0) us_salt, us_active
from users
where us_username = N'admin'
2017-07-26 17:25:19 http://localhost:49412/default.aspx elapsed milliseconds:0000
2017-07-26 17:25:19 http://localhost:49412/default.aspx sql=
update users set us_most_recent_login_datetime = getdate() where us_id = 1
2017-07-26 17:25:19 http://localhost:49412/default.aspx sql=
select us_id from users where us_username = N'admin'
2017-07-26 17:25:19 http://localhost:49412/default.aspx elapsed milliseconds:0000
2017-07-26 17:25:19 http://localhost:49412/default.aspx guid=dc795638-4564-49c9-b794-36682532da3a
2017-07-26 17:25:19 http://localhost:49412/default.aspx sql=
insert into sessions (se_id, se_user) values('dc795638-4564-49c9-b794-36682532da3a', 1)
2017-07-26 17:25:19 http://localhost:49412/default.aspx AppPath:
2017-07-26 17:25:22 http://localhost:49412/bugs.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = 'dc795638-4564-49c9-b794-36682532da3a';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = 'dc795638-4564-49c9-b794-36682532da3a'
and us_active = 1
2017-07-26 17:25:22 http://localhost:49412/bugs.aspx elapsed milliseconds:0008
2017-07-26 17:25:22 http://localhost:49412/bugs.aspx sql=

/* custom columns */ select sc.name, st.[name] [datatype], 
case when st.[name] = 'nvarchar' or st.[name] = 'nchar' then sc.length/2 else sc.length end as [length], 
sc.xprec, sc.xscale, sc.isnullable,
mm.text [default value], 
dflts.name [default name], 
isnull(ccm_dropdown_type,'') [dropdown type],
isnull(ccm_dropdown_vals,'') [vals],
isnull(ccm_sort_seq, sc.colorder) [column order],
sc.colorder
from syscolumns sc
inner join systypes st on st.xusertype = sc.xusertype
inner join sysobjects so on sc.id = so.id
left outer join syscomments mm on sc.cdefault = mm.id
left outer join custom_col_metadata on ccm_colorder = sc.colorder
left outer join sysobjects dflts on dflts.id = mm.id
where so.name = 'bugs'
and st.[name] <> 'sysname'
and sc.name not in ('rowguid',
'bg_id',
'bg_short_desc',
'bg_reported_user',
'bg_reported_date',
'bg_project',
'bg_org',
'bg_category',
'bg_priority',
'bg_status',
'bg_assigned_to_user',
'bg_last_updated_user',
'bg_last_updated_date',
'bg_user_defined_attribute',
'bg_project_custom_dropdown_value1',
'bg_project_custom_dropdown_value2',
'bg_project_custom_dropdown_value3',
'bg_tags')
order by sc.id, isnull(ccm_sort_seq,sc.colorder)
2017-07-26 17:25:22 http://localhost:49412/bugs.aspx elapsed milliseconds:0000
2017-07-26 17:25:22 http://localhost:49412/bugs.aspx sql=
/* query dropdown */
select qu_id, qu_desc
from queries
where (isnull(qu_user,0) = 0 and isnull(qu_org,0) = 0)
or isnull(qu_user,0) = 1
or isnull(qu_org,0) = 1
order by qu_desc
2017-07-26 17:25:22 http://localhost:49412/bugs.aspx elapsed milliseconds:0000
2017-07-26 17:25:22 http://localhost:49412/bugs.aspx sql=
select qu_id, qu_sql from queries where qu_id in
			(select us_default_query from users where us_id = 1)
2017-07-26 17:25:22 http://localhost:49412/bugs.aspx elapsed milliseconds:0000
2017-07-26 17:25:22 http://localhost:49412/bugs.aspx sql=
select isnull(pr_background_color,'#ffffff'), bg_id [id], isnull(bu_flag,0) [$FLAG], 
 bg_short_desc [desc], isnull(pj_name,'') [project], isnull(og_name,'') [organization], isnull(ct_name,'') [category], rpt.us_username [reported by],
 bg_reported_date [reported on], isnull(pr_name,'') [priority], isnull(asg.us_username,'') [assigned to],
 isnull(st_name,'') [status], isnull(lu.us_username,'') [last updated by], bg_last_updated_date [last updated on]
 from bugs 
 left outer join bug_user on bu_bug = bg_id and bu_user = 1 
 left outer join users rpt on rpt.us_id = bg_reported_user
 left outer join users asg on asg.us_id = bg_assigned_to_user
 left outer join users lu on lu.us_id = bg_last_updated_user
 left outer join projects on pj_id = bg_project
 left outer join orgs on og_id = bg_org
 left outer join categories on ct_id = bg_category
 left outer join priorities on pr_id = bg_priority
 left outer join statuses on st_id = bg_status
  /* altered - just order by  */ WHERE  (bugs.bg_project not in (
					select pu_project
					from project_user_xref
					where pu_user = 1
					and pu_permission_level = 0)) order by bg_id desc
2017-07-26 17:25:22 http://localhost:49412/bugs.aspx elapsed milliseconds:0001

TIME: 17:25:26
MSG: Only Content controls are allowed directly in a content page that contains Content controls.
URL: http://localhost:49412/search.aspx
EXCEPTION: System.Web.HttpParseException (0x80004005): Only Content controls are allowed directly in a content page that contains Content controls.
   at System.Web.UI.FileLevelPageControlBuilder.AppendSubBuilder(ControlBuilder subBuilder)
   at System.Web.UI.TemplateParser.AppendSubBuilder(ControlBuilder builder, ControlBuilder subBuilder)
   at System.Web.UI.TemplateParser.MaybeTerminateControl(String tagName, Match match)
   at System.Web.UI.TemplateParser.ProcessEndTag(Match match)
   at System.Web.UI.TemplateParser.ParseStringInternal(String text, Encoding fileEncoding)
   at System.Web.UI.TemplateParser.ParseString(String text, VirtualPath virtualPath, Encoding fileEncoding)
   at System.Web.UI.TemplateParser.ParseFile(String physicalPath, VirtualPath virtualPath)
   at System.Web.UI.TemplateParser.ParseInternal()
   at System.Web.UI.TemplateParser.Parse()
   at System.Web.Compilation.BaseTemplateBuildProvider.get_CodeCompilerType()
   at System.Web.Compilation.BuildProvider.GetCompilerTypeFromBuildProvider(BuildProvider buildProvider)
   at System.Web.Compilation.BuildProvidersCompiler.ProcessBuildProviders()
   at System.Web.Compilation.BuildProvidersCompiler.PerformBuild()
   at System.Web.Compilation.BuildManager.CompileWebFile(VirtualPath virtualPath)
   at System.Web.Compilation.BuildManager.GetVPathBuildResultInternal(VirtualPath virtualPath, Boolean noBuild, Boolean allowCrossApp, Boolean allowBuildInPrecompile, Boolean throwIfNotFound, Boolean ensureIsUpToDate)
   at System.Web.Compilation.BuildManager.GetVPathBuildResultWithNoAssert(HttpContext context, VirtualPath virtualPath, Boolean noBuild, Boolean allowCrossApp, Boolean allowBuildInPrecompile, Boolean throwIfNotFound, Boolean ensureIsUpToDate)
   at System.Web.Compilation.BuildManager.GetVirtualPathObjectFactory(VirtualPath virtualPath, HttpContext context, Boolean allowCrossApp, Boolean throwIfNotFound)
   at System.Web.Compilation.BuildManager.CreateInstanceFromVirtualPath(VirtualPath virtualPath, Type requiredBaseType, HttpContext context, Boolean allowCrossApp)
   at System.Web.UI.PageHandlerFactory.GetHandlerHelper(HttpContext context, String requestType, VirtualPath virtualPath, String physicalPath)
   at System.Web.UI.PageHandlerFactory.GetHandler(HttpContext context, String requestType, String virtualPath, String path)
   at System.Web.HttpApplication.MaterializeHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute()
   at System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously)

ALL_HTTP=HTTP_CONNECTION:Keep-Alive
HTTP_ACCEPT:text/html, application/xhtml+xml, */*
HTTP_ACCEPT_ENCODING:gzip, deflate
HTTP_ACCEPT_LANGUAGE:tr-TR
HTTP_COOKIE:user=name=admin&NTLM=0; se_id=dc795638-4564-49c9-b794-36682532da3a; ASP.NET_SessionId=bwneiehc3kbo1br5qmvw3kxd
HTTP_HOST:localhost:49412
HTTP_REFERER:http://localhost:49412/bugs.aspx
HTTP_USER_AGENT:Mozilla/5.0 (Windows NT 6.1; WOW64; Trident/7.0; rv:11.0) like Gecko
HTTP_DNT:1

ALL_RAW=Connection: Keep-Alive
Accept: text/html, application/xhtml+xml, */*
Accept-Encoding: gzip, deflate
Accept-Language: tr-TR
Cookie: user=name=admin&NTLM=0; se_id=dc795638-4564-49c9-b794-36682532da3a; ASP.NET_SessionId=bwneiehc3kbo1br5qmvw3kxd
Host: localhost:49412
Referer: http://localhost:49412/bugs.aspx
User-Agent: Mozilla/5.0 (Windows NT 6.1; WOW64; Trident/7.0; rv:11.0) like Gecko
DNT: 1

APPL_MD_PATH=/LM/W3SVC/2/ROOT
APPL_PHYSICAL_PATH=C:\Users\Oisiktekiner\Documents\Visual Studio 2017\Projects\btnetnew\btnetnew\
CONTENT_LENGTH=0
GATEWAY_INTERFACE=CGI/1.1
HTTPS=off
INSTANCE_ID=2
INSTANCE_META_PATH=/LM/W3SVC/2
LOCAL_ADDR=::1
PATH_INFO=/search.aspx
PATH_TRANSLATED=C:\Users\Oisiktekiner\Documents\Visual Studio 2017\Projects\btnetnew\btnetnew\search.aspx
REMOTE_ADDR=::1
REMOTE_HOST=::1
REMOTE_PORT=52578
REQUEST_METHOD=GET
SCRIPT_NAME=/search.aspx
SERVER_NAME=localhost
SERVER_PORT=49412
SERVER_PORT_SECURE=0
SERVER_PROTOCOL=HTTP/1.1
SERVER_SOFTWARE=Microsoft-IIS/10.0
URL=/search.aspx
HTTP_CONNECTION=Keep-Alive
HTTP_ACCEPT=text/html, application/xhtml+xml, */*
HTTP_ACCEPT_ENCODING=gzip, deflate
HTTP_ACCEPT_LANGUAGE=tr-TR
HTTP_COOKIE=user=name=admin&NTLM=0; se_id=dc795638-4564-49c9-b794-36682532da3a; ASP.NET_SessionId=bwneiehc3kbo1br5qmvw3kxd
HTTP_HOST=localhost:49412
HTTP_REFERER=http://localhost:49412/bugs.aspx
HTTP_USER_AGENT=Mozilla/5.0 (Windows NT 6.1; WOW64; Trident/7.0; rv:11.0) like Gecko
HTTP_DNT=1
2017-07-26 17:25:26 http://localhost:49412/search.aspx to email addr: admin@example.com
2017-07-26 17:25:26 http://localhost:49412/search.aspx There was a problem sending email.   Check settings in Web.config.
2017-07-26 17:25:26 http://localhost:49412/search.aspx TO:admin@example.com
2017-07-26 17:25:26 http://localhost:49412/search.aspx FROM:errors@example.com
2017-07-26 17:25:26 http://localhost:49412/search.aspx SUBJECT:Error: Only Content controls are allowed directly in a content page that contains Content controls.
2017-07-26 17:25:26 http://localhost:49412/search.aspx Could not find a part of the path 'C:\temp\pickup\d8e707e2-fabe-41cd-a66d-8da4ad582ec2.eml'.
2017-07-26 17:27:04  caught exception in util.set_context:Request is not available in this context
2017-07-26 17:27:04  threadproc_votes
2017-07-26 17:27:04  sql=

if exists (select * from dbo.sysobjects where id = object_id(N'[votes_view]'))
drop view [votes_view]
2017-07-26 17:27:04  started creating Lucene index using folder C:\Users\Oisiktekiner\Documents\Visual Studio 2017\Projects\btnetnew\btnetnew\App_Data\lucene_index
2017-07-26 17:27:04  sql=

create view votes_view as
select bu_bug as vote_bug, sum(bu_vote) as vote_total
from bug_user
group by bu_bug
having sum(bu_vote) > 0
2017-07-26 17:27:04  sql=

select bu_bug, count(1)
from bug_user 
where bu_vote = 1
group by bu_bug
2017-07-26 17:27:04  elapsed milliseconds:0053
2017-07-26 17:27:04  sql=

/* get searchable cols */					
select sc.name
from syscolumns sc
inner join systypes st on st.xusertype = sc.xusertype
inner join sysobjects so on sc.id = so.id
where so.name = 'bugs'
and st.[name] <> 'sysname'
and sc.name not in ('rowguid',
'bg_id',
'bg_short_desc',
'bg_reported_user',
'bg_reported_date',
'bg_project',
'bg_org',
'bg_category',
'bg_priority',
'bg_status',
'bg_assigned_to_user',
'bg_last_updated_user',
'bg_last_updated_date',
'bg_user_defined_attribute',
'bg_project_custom_dropdown_value1',
'bg_project_custom_dropdown_value2',
'bg_project_custom_dropdown_value3',
'bg_tags')
and st.[name] in ('nvarchar','varchar')
and sc.length > 30
2017-07-26 17:27:04  elapsed milliseconds:0000
2017-07-26 17:27:04  sql=

select bg_id, 	

isnull(bg_tags,'') bg_tags,
bg_short_desc
from bugs
2017-07-26 17:27:04  elapsed milliseconds:0000
2017-07-26 17:27:05  sql=

select bp_bug, bp_id, 
isnull(bp_comment_search,bp_comment) [text] 
from bug_posts 
where bp_type <> 'update'
and bp_hidden_from_external_users = 0
2017-07-26 17:27:05  elapsed milliseconds:0000
2017-07-26 17:27:05  done creating Lucene index
2017-07-26 17:27:08 http://localhost:49412/search.aspx se_id cookie is null, so redirecting
2017-07-26 17:27:10 http://localhost:49412/default.aspx?url=/search.aspx&qs= sql=
select count(1) from users
2017-07-26 17:27:13 http://localhost:49412/default.aspx?url=/search.aspx&qs= sql=
select count(1) from users
2017-07-26 17:27:13 http://localhost:49412/default.aspx?url=/search.aspx&qs= sql=

select us_username, us_id, us_password, isnull(us_salt,0) us_salt, us_active
from users
where us_username = N'admin'
2017-07-26 17:27:13 http://localhost:49412/default.aspx?url=/search.aspx&qs= elapsed milliseconds:0000
2017-07-26 17:27:13 http://localhost:49412/default.aspx?url=/search.aspx&qs= sql=
update users set us_most_recent_login_datetime = getdate() where us_id = 1
2017-07-26 17:27:13 http://localhost:49412/default.aspx?url=/search.aspx&qs= sql=
select us_id from users where us_username = N'admin'
2017-07-26 17:27:13 http://localhost:49412/default.aspx?url=/search.aspx&qs= elapsed milliseconds:0001
2017-07-26 17:27:13 http://localhost:49412/default.aspx?url=/search.aspx&qs= guid=3cda3944-5be4-4693-9c75-337117e5abb8
2017-07-26 17:27:13 http://localhost:49412/default.aspx?url=/search.aspx&qs= sql=
insert into sessions (se_id, se_user) values('3cda3944-5be4-4693-9c75-337117e5abb8', 1)
2017-07-26 17:27:13 http://localhost:49412/default.aspx?url=/search.aspx&qs= AppPath:
2017-07-26 17:27:13 http://localhost:49412/search.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '3cda3944-5be4-4693-9c75-337117e5abb8';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '3cda3944-5be4-4693-9c75-337117e5abb8'
and us_active = 1
2017-07-26 17:27:13 http://localhost:49412/search.aspx elapsed milliseconds:0018
2017-07-26 17:27:13 http://localhost:49412/search.aspx sql=

/* custom columns */ select sc.name, st.[name] [datatype], 
case when st.[name] = 'nvarchar' or st.[name] = 'nchar' then sc.length/2 else sc.length end as [length], 
sc.xprec, sc.xscale, sc.isnullable,
mm.text [default value], 
dflts.name [default name], 
isnull(ccm_dropdown_type,'') [dropdown type],
isnull(ccm_dropdown_vals,'') [vals],
isnull(ccm_sort_seq, sc.colorder) [column order],
sc.colorder
from syscolumns sc
inner join systypes st on st.xusertype = sc.xusertype
inner join sysobjects so on sc.id = so.id
left outer join syscomments mm on sc.cdefault = mm.id
left outer join custom_col_metadata on ccm_colorder = sc.colorder
left outer join sysobjects dflts on dflts.id = mm.id
where so.name = 'bugs'
and st.[name] <> 'sysname'
and sc.name not in ('rowguid',
'bg_id',
'bg_short_desc',
'bg_reported_user',
'bg_reported_date',
'bg_project',
'bg_org',
'bg_category',
'bg_priority',
'bg_status',
'bg_assigned_to_user',
'bg_last_updated_user',
'bg_last_updated_date',
'bg_user_defined_attribute',
'bg_project_custom_dropdown_value1',
'bg_project_custom_dropdown_value2',
'bg_project_custom_dropdown_value3',
'bg_tags')
order by sc.id, isnull(ccm_sort_seq,sc.colorder)
2017-07-26 17:27:13 http://localhost:49412/search.aspx elapsed milliseconds:0000
2017-07-26 17:27:13 http://localhost:49412/search.aspx sql=

/* get related users 2 */
select  pj_id, us_id,
case when 0 = 1 then
    case when len(isnull(us_firstname,'') + ' ' + isnull(us_lastname,'')) > 1
	then isnull(us_firstname,'') + ' ' + isnull(us_lastname,'')
    else us_username end
else us_username end us_username,
isnull(us_email,'') us_email
into #temp
from projects, users
where pj_id not in
(
	select pu_project from project_user_xref
	where pu_permission_level = 0 and pu_user = 1
)





if 0 = 1 -- external
and 2 = 0 -- other orgs
begin
	select distinct a.us_id, a.us_username, a.us_email
	from #temp a
	inner join users b on a.us_id = b.us_id
	inner join orgs on b.us_org = og_id
	where og_external_user = 0 or b.us_org = 1
	order by a.us_username
end
else
begin

	select distinct us_id, us_username, us_email
		from #temp
		left outer join project_user_xref on pj_id = pu_project
		and us_id = pu_user
		where isnull(pu_permission_level,2) <> 0
		order by us_username
end

drop table #temp
2017-07-26 17:27:13 http://localhost:49412/search.aspx elapsed milliseconds:0011
2017-07-26 17:27:13 http://localhost:49412/search.aspx sql=
/* drop downs */ select pj_id, pj_name from projects order by pj_name; select og_id, og_name from orgs order by og_name;
	select ct_id, ct_name from categories order by ct_sort_seq, ct_name;
	select pr_id, pr_name from priorities order by pr_sort_seq, pr_name;
	select st_id, st_name from statuses order by st_sort_seq, st_name;
	select udf_id, udf_name from user_defined_attribute order by udf_sort_seq, udf_name
2017-07-26 17:27:13 http://localhost:49412/search.aspx elapsed milliseconds:0001
2017-07-26 17:27:13 http://localhost:49412/search.aspx sql=

select count(1)
from projects
where isnull(pj_enable_custom_dropdown1,0) = 1
or isnull(pj_enable_custom_dropdown2,0) = 1
or isnull(pj_enable_custom_dropdown3,0) = 1

TIME: 17:27:13
MSG: A page can have only one server-side Form tag.
URL: http://localhost:49412/search.aspx
EXCEPTION: System.Web.HttpException (0x80004005): A page can have only one server-side Form tag.
   at System.Web.UI.Page.OnFormRender()
   at System.Web.UI.HtmlControls.HtmlForm.RenderChildren(HtmlTextWriter writer)
   at System.Web.UI.HtmlControls.HtmlContainerControl.Render(HtmlTextWriter writer)
   at System.Web.UI.HtmlControls.HtmlForm.Render(HtmlTextWriter output)
   at System.Web.UI.Control.RenderControlInternal(HtmlTextWriter writer, ControlAdapter adapter)
   at System.Web.UI.Control.RenderControl(HtmlTextWriter writer, ControlAdapter adapter)
   at System.Web.UI.HtmlControls.HtmlForm.RenderControl(HtmlTextWriter writer)
   at ASP.search_aspx.__RenderContent2(HtmlTextWriter __w, Control parameterContainer) in c:\Users\Oisiktekiner\Documents\Visual Studio 2017\Projects\btnetnew\btnetnew\search.aspx:line 1869
   at System.Web.UI.Control.RenderChildrenInternal(HtmlTextWriter writer, ICollection children)
   at System.Web.UI.Control.RenderChildren(HtmlTextWriter writer)
   at System.Web.UI.Control.Render(HtmlTextWriter writer)
   at System.Web.UI.Control.RenderControlInternal(HtmlTextWriter writer, ControlAdapter adapter)
   at System.Web.UI.Control.RenderControl(HtmlTextWriter writer, ControlAdapter adapter)
   at System.Web.UI.Control.RenderControl(HtmlTextWriter writer)
   at ASP.btnet_master.__Renderform1(HtmlTextWriter __w, Control parameterContainer) in c:\Users\Oisiktekiner\Documents\Visual Studio 2017\Projects\btnetnew\btnetnew\btnet.Master:line 42
   at System.Web.UI.Control.RenderChildrenInternal(HtmlTextWriter writer, ICollection children)
   at System.Web.UI.HtmlControls.HtmlForm.RenderChildren(HtmlTextWriter writer)
   at System.Web.UI.HtmlControls.HtmlContainerControl.Render(HtmlTextWriter writer)
   at System.Web.UI.HtmlControls.HtmlForm.Render(HtmlTextWriter output)
   at System.Web.UI.Control.RenderControlInternal(HtmlTextWriter writer, ControlAdapter adapter)
   at System.Web.UI.Control.RenderControl(HtmlTextWriter writer, ControlAdapter adapter)
   at System.Web.UI.HtmlControls.HtmlForm.RenderControl(HtmlTextWriter writer)
   at System.Web.UI.Control.RenderChildrenInternal(HtmlTextWriter writer, ICollection children)
   at System.Web.UI.Control.RenderChildren(HtmlTextWriter writer)
   at System.Web.UI.Control.Render(HtmlTextWriter writer)
   at System.Web.UI.Control.RenderControlInternal(HtmlTextWriter writer, ControlAdapter adapter)
   at System.Web.UI.Control.RenderControl(HtmlTextWriter writer, ControlAdapter adapter)
   at System.Web.UI.Control.RenderControl(HtmlTextWriter writer)
   at System.Web.UI.Control.RenderChildrenInternal(HtmlTextWriter writer, ICollection children)
   at System.Web.UI.Control.RenderChildren(HtmlTextWriter writer)
   at System.Web.UI.Page.Render(HtmlTextWriter writer)
   at System.Web.UI.Control.RenderControlInternal(HtmlTextWriter writer, ControlAdapter adapter)
   at System.Web.UI.Control.RenderControl(HtmlTextWriter writer, ControlAdapter adapter)
   at System.Web.UI.Control.RenderControl(HtmlTextWriter writer)
   at System.Web.UI.Page.ProcessRequestMain(Boolean includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint)

ALL_HTTP=HTTP_CACHE_CONTROL:no-cache
HTTP_CONNECTION:Keep-Alive
HTTP_ACCEPT:text/html, application/xhtml+xml, */*
HTTP_ACCEPT_ENCODING:gzip, deflate
HTTP_ACCEPT_LANGUAGE:tr-TR
HTTP_COOKIE:user=name=admin&NTLM=0; se_id=3cda3944-5be4-4693-9c75-337117e5abb8; ASP.NET_SessionId=3peodpa3enutfyrxxf5jrj25
HTTP_HOST:localhost:49412
HTTP_REFERER:http://localhost:49412/default.aspx?url=/search.aspx&qs=
HTTP_USER_AGENT:Mozilla/5.0 (Windows NT 6.1; WOW64; Trident/7.0; rv:11.0) like Gecko
HTTP_DNT:1

ALL_RAW=Cache-Control: no-cache
Connection: Keep-Alive
Accept: text/html, application/xhtml+xml, */*
Accept-Encoding: gzip, deflate
Accept-Language: tr-TR
Cookie: user=name=admin&NTLM=0; se_id=3cda3944-5be4-4693-9c75-337117e5abb8; ASP.NET_SessionId=3peodpa3enutfyrxxf5jrj25
Host: localhost:49412
Referer: http://localhost:49412/default.aspx?url=/search.aspx&qs=
User-Agent: Mozilla/5.0 (Windows NT 6.1; WOW64; Trident/7.0; rv:11.0) like Gecko
DNT: 1

APPL_MD_PATH=/LM/W3SVC/2/ROOT
APPL_PHYSICAL_PATH=C:\Users\Oisiktekiner\Documents\Visual Studio 2017\Projects\btnetnew\btnetnew\
CONTENT_LENGTH=0
GATEWAY_INTERFACE=CGI/1.1
HTTPS=off
INSTANCE_ID=2
INSTANCE_META_PATH=/LM/W3SVC/2
LOCAL_ADDR=::1
PATH_INFO=/search.aspx
PATH_TRANSLATED=C:\Users\Oisiktekiner\Documents\Visual Studio 2017\Projects\btnetnew\btnetnew\search.aspx
REMOTE_ADDR=::1
REMOTE_HOST=::1
REMOTE_PORT=52603
REQUEST_METHOD=GET
SCRIPT_NAME=/search.aspx
SERVER_NAME=localhost
SERVER_PORT=49412
SERVER_PORT_SECURE=0
SERVER_PROTOCOL=HTTP/1.1
SERVER_SOFTWARE=Microsoft-IIS/10.0
URL=/search.aspx
HTTP_CACHE_CONTROL=no-cache
HTTP_CONNECTION=Keep-Alive
HTTP_ACCEPT=text/html, application/xhtml+xml, */*
HTTP_ACCEPT_ENCODING=gzip, deflate
HTTP_ACCEPT_LANGUAGE=tr-TR
HTTP_COOKIE=user=name=admin&NTLM=0; se_id=3cda3944-5be4-4693-9c75-337117e5abb8; ASP.NET_SessionId=3peodpa3enutfyrxxf5jrj25
HTTP_HOST=localhost:49412
HTTP_REFERER=http://localhost:49412/default.aspx?url=/search.aspx&qs=
HTTP_USER_AGENT=Mozilla/5.0 (Windows NT 6.1; WOW64; Trident/7.0; rv:11.0) like Gecko
HTTP_DNT=1
2017-07-26 17:27:13 http://localhost:49412/search.aspx to email addr: admin@example.com
2017-07-26 17:27:13 http://localhost:49412/search.aspx There was a problem sending email.   Check settings in Web.config.
2017-07-26 17:27:13 http://localhost:49412/search.aspx TO:admin@example.com
2017-07-26 17:27:13 http://localhost:49412/search.aspx FROM:errors@example.com
2017-07-26 17:27:13 http://localhost:49412/search.aspx SUBJECT:Error: A page can have only one server-side Form tag.
2017-07-26 17:27:13 http://localhost:49412/search.aspx Could not find a part of the path 'C:\temp\pickup\ccf2ae35-76cd-4a8d-bb56-17459bdb52dc.eml'.
2017-07-26 17:30:33  caught exception in util.set_context:Request is not available in this context
2017-07-26 17:30:33  threadproc_votes
2017-07-26 17:30:33  sql=

if exists (select * from dbo.sysobjects where id = object_id(N'[votes_view]'))
drop view [votes_view]
2017-07-26 17:30:33  started creating Lucene index using folder C:\Users\Oisiktekiner\Documents\Visual Studio 2017\Projects\btnetnew\btnetnew\App_Data\lucene_index
2017-07-26 17:30:33  sql=

create view votes_view as
select bu_bug as vote_bug, sum(bu_vote) as vote_total
from bug_user
group by bu_bug
having sum(bu_vote) > 0
2017-07-26 17:30:33  sql=

select bu_bug, count(1)
from bug_user 
where bu_vote = 1
group by bu_bug
2017-07-26 17:30:33  elapsed milliseconds:0033
2017-07-26 17:30:33  sql=

/* get searchable cols */					
select sc.name
from syscolumns sc
inner join systypes st on st.xusertype = sc.xusertype
inner join sysobjects so on sc.id = so.id
where so.name = 'bugs'
and st.[name] <> 'sysname'
and sc.name not in ('rowguid',
'bg_id',
'bg_short_desc',
'bg_reported_user',
'bg_reported_date',
'bg_project',
'bg_org',
'bg_category',
'bg_priority',
'bg_status',
'bg_assigned_to_user',
'bg_last_updated_user',
'bg_last_updated_date',
'bg_user_defined_attribute',
'bg_project_custom_dropdown_value1',
'bg_project_custom_dropdown_value2',
'bg_project_custom_dropdown_value3',
'bg_tags')
and st.[name] in ('nvarchar','varchar')
and sc.length > 30
2017-07-26 17:30:33  elapsed milliseconds:0001
2017-07-26 17:30:33  sql=

select bg_id, 	

isnull(bg_tags,'') bg_tags,
bg_short_desc
from bugs
2017-07-26 17:30:33  elapsed milliseconds:0001
2017-07-26 17:30:33  sql=

select bp_bug, bp_id, 
isnull(bp_comment_search,bp_comment) [text] 
from bug_posts 
where bp_type <> 'update'
and bp_hidden_from_external_users = 0
2017-07-26 17:30:33  elapsed milliseconds:0000
2017-07-26 17:30:33  done creating Lucene index
2017-07-26 17:30:36 http://localhost:49412/search.aspx se_id cookie is null, so redirecting
2017-07-26 17:30:36 http://localhost:49412/default.aspx?url=/search.aspx&qs= sql=
select count(1) from users
2017-07-26 17:30:38 http://localhost:49412/default.aspx?url=/search.aspx&qs= sql=
select count(1) from users
2017-07-26 17:30:38 http://localhost:49412/default.aspx?url=/search.aspx&qs= sql=

select us_username, us_id, us_password, isnull(us_salt,0) us_salt, us_active
from users
where us_username = N'admin'
2017-07-26 17:30:38 http://localhost:49412/default.aspx?url=/search.aspx&qs= elapsed milliseconds:0000
2017-07-26 17:30:38 http://localhost:49412/default.aspx?url=/search.aspx&qs= sql=
update users set us_most_recent_login_datetime = getdate() where us_id = 1
2017-07-26 17:30:38 http://localhost:49412/default.aspx?url=/search.aspx&qs= sql=
select us_id from users where us_username = N'admin'
2017-07-26 17:30:38 http://localhost:49412/default.aspx?url=/search.aspx&qs= elapsed milliseconds:0000
2017-07-26 17:30:38 http://localhost:49412/default.aspx?url=/search.aspx&qs= guid=7c94eec5-e320-4c7d-a783-6e211c0d639e
2017-07-26 17:30:38 http://localhost:49412/default.aspx?url=/search.aspx&qs= sql=
insert into sessions (se_id, se_user) values('7c94eec5-e320-4c7d-a783-6e211c0d639e', 1)
2017-07-26 17:30:38 http://localhost:49412/default.aspx?url=/search.aspx&qs= AppPath:
2017-07-26 17:30:38 http://localhost:49412/search.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '7c94eec5-e320-4c7d-a783-6e211c0d639e';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '7c94eec5-e320-4c7d-a783-6e211c0d639e'
and us_active = 1
2017-07-26 17:30:38 http://localhost:49412/search.aspx elapsed milliseconds:0013
2017-07-26 17:30:38 http://localhost:49412/search.aspx sql=

/* custom columns */ select sc.name, st.[name] [datatype], 
case when st.[name] = 'nvarchar' or st.[name] = 'nchar' then sc.length/2 else sc.length end as [length], 
sc.xprec, sc.xscale, sc.isnullable,
mm.text [default value], 
dflts.name [default name], 
isnull(ccm_dropdown_type,'') [dropdown type],
isnull(ccm_dropdown_vals,'') [vals],
isnull(ccm_sort_seq, sc.colorder) [column order],
sc.colorder
from syscolumns sc
inner join systypes st on st.xusertype = sc.xusertype
inner join sysobjects so on sc.id = so.id
left outer join syscomments mm on sc.cdefault = mm.id
left outer join custom_col_metadata on ccm_colorder = sc.colorder
left outer join sysobjects dflts on dflts.id = mm.id
where so.name = 'bugs'
and st.[name] <> 'sysname'
and sc.name not in ('rowguid',
'bg_id',
'bg_short_desc',
'bg_reported_user',
'bg_reported_date',
'bg_project',
'bg_org',
'bg_category',
'bg_priority',
'bg_status',
'bg_assigned_to_user',
'bg_last_updated_user',
'bg_last_updated_date',
'bg_user_defined_attribute',
'bg_project_custom_dropdown_value1',
'bg_project_custom_dropdown_value2',
'bg_project_custom_dropdown_value3',
'bg_tags')
order by sc.id, isnull(ccm_sort_seq,sc.colorder)
2017-07-26 17:30:38 http://localhost:49412/search.aspx elapsed milliseconds:0000
2017-07-26 17:30:38 http://localhost:49412/search.aspx sql=

/* get related users 2 */
select  pj_id, us_id,
case when 0 = 1 then
    case when len(isnull(us_firstname,'') + ' ' + isnull(us_lastname,'')) > 1
	then isnull(us_firstname,'') + ' ' + isnull(us_lastname,'')
    else us_username end
else us_username end us_username,
isnull(us_email,'') us_email
into #temp
from projects, users
where pj_id not in
(
	select pu_project from project_user_xref
	where pu_permission_level = 0 and pu_user = 1
)





if 0 = 1 -- external
and 2 = 0 -- other orgs
begin
	select distinct a.us_id, a.us_username, a.us_email
	from #temp a
	inner join users b on a.us_id = b.us_id
	inner join orgs on b.us_org = og_id
	where og_external_user = 0 or b.us_org = 1
	order by a.us_username
end
else
begin

	select distinct us_id, us_username, us_email
		from #temp
		left outer join project_user_xref on pj_id = pu_project
		and us_id = pu_user
		where isnull(pu_permission_level,2) <> 0
		order by us_username
end

drop table #temp
2017-07-26 17:30:38 http://localhost:49412/search.aspx elapsed milliseconds:0022
2017-07-26 17:30:38 http://localhost:49412/search.aspx sql=
/* drop downs */ select pj_id, pj_name from projects order by pj_name; select og_id, og_name from orgs order by og_name;
	select ct_id, ct_name from categories order by ct_sort_seq, ct_name;
	select pr_id, pr_name from priorities order by pr_sort_seq, pr_name;
	select st_id, st_name from statuses order by st_sort_seq, st_name;
	select udf_id, udf_name from user_defined_attribute order by udf_sort_seq, udf_name
2017-07-26 17:30:38 http://localhost:49412/search.aspx elapsed milliseconds:0000
2017-07-26 17:30:38 http://localhost:49412/search.aspx sql=

select count(1)
from projects
where isnull(pj_enable_custom_dropdown1,0) = 1
or isnull(pj_enable_custom_dropdown2,0) = 1
or isnull(pj_enable_custom_dropdown3,0) = 1
2017-07-26 17:40:30  caught exception in util.set_context:Request is not available in this context
2017-07-26 17:40:30  threadproc_votes
2017-07-26 17:40:30  sql=

if exists (select * from dbo.sysobjects where id = object_id(N'[votes_view]'))
drop view [votes_view]
2017-07-26 17:40:30  started creating Lucene index using folder C:\Users\Oisiktekiner\Documents\Visual Studio 2017\Projects\btnetnew\btnetnew\App_Data\lucene_index
2017-07-26 17:40:30  sql=

create view votes_view as
select bu_bug as vote_bug, sum(bu_vote) as vote_total
from bug_user
group by bu_bug
having sum(bu_vote) > 0
2017-07-26 17:40:30  sql=

select bu_bug, count(1)
from bug_user 
where bu_vote = 1
group by bu_bug
2017-07-26 17:40:30  elapsed milliseconds:0015
2017-07-26 17:40:30  sql=

/* get searchable cols */					
select sc.name
from syscolumns sc
inner join systypes st on st.xusertype = sc.xusertype
inner join sysobjects so on sc.id = so.id
where so.name = 'bugs'
and st.[name] <> 'sysname'
and sc.name not in ('rowguid',
'bg_id',
'bg_short_desc',
'bg_reported_user',
'bg_reported_date',
'bg_project',
'bg_org',
'bg_category',
'bg_priority',
'bg_status',
'bg_assigned_to_user',
'bg_last_updated_user',
'bg_last_updated_date',
'bg_user_defined_attribute',
'bg_project_custom_dropdown_value1',
'bg_project_custom_dropdown_value2',
'bg_project_custom_dropdown_value3',
'bg_tags')
and st.[name] in ('nvarchar','varchar')
and sc.length > 30
2017-07-26 17:40:30  elapsed milliseconds:0000
2017-07-26 17:40:30  sql=

select bg_id, 	

isnull(bg_tags,'') bg_tags,
bg_short_desc
from bugs
2017-07-26 17:40:30  elapsed milliseconds:0000
2017-07-26 17:40:30  sql=

select bp_bug, bp_id, 
isnull(bp_comment_search,bp_comment) [text] 
from bug_posts 
where bp_type <> 'update'
and bp_hidden_from_external_users = 0
2017-07-26 17:40:30  elapsed milliseconds:0000
2017-07-26 17:40:31  done creating Lucene index
2017-07-26 17:40:33 http://localhost:49412/search.aspx se_id cookie is null, so redirecting
2017-07-26 17:40:36 http://localhost:49412/default.aspx?url=/search.aspx&qs= sql=
select count(1) from users
2017-07-26 17:40:39 http://localhost:49412/default.aspx?url=/search.aspx&qs= sql=
select count(1) from users
2017-07-26 17:40:39 http://localhost:49412/default.aspx?url=/search.aspx&qs= sql=

select us_username, us_id, us_password, isnull(us_salt,0) us_salt, us_active
from users
where us_username = N'admin'
2017-07-26 17:40:39 http://localhost:49412/default.aspx?url=/search.aspx&qs= elapsed milliseconds:0000
2017-07-26 17:40:39 http://localhost:49412/default.aspx?url=/search.aspx&qs= sql=
update users set us_most_recent_login_datetime = getdate() where us_id = 1
2017-07-26 17:40:39 http://localhost:49412/default.aspx?url=/search.aspx&qs= sql=
select us_id from users where us_username = N'admin'
2017-07-26 17:40:39 http://localhost:49412/default.aspx?url=/search.aspx&qs= elapsed milliseconds:0001
2017-07-26 17:40:39 http://localhost:49412/default.aspx?url=/search.aspx&qs= guid=17369c8d-c54f-4385-90dc-95983b0effcd
2017-07-26 17:40:39 http://localhost:49412/default.aspx?url=/search.aspx&qs= sql=
insert into sessions (se_id, se_user) values('17369c8d-c54f-4385-90dc-95983b0effcd', 1)
2017-07-26 17:40:39 http://localhost:49412/default.aspx?url=/search.aspx&qs= AppPath:
2017-07-26 17:40:39 http://localhost:49412/search.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '17369c8d-c54f-4385-90dc-95983b0effcd';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '17369c8d-c54f-4385-90dc-95983b0effcd'
and us_active = 1
2017-07-26 17:40:39 http://localhost:49412/search.aspx elapsed milliseconds:0018
2017-07-26 17:40:39 http://localhost:49412/search.aspx sql=

/* custom columns */ select sc.name, st.[name] [datatype], 
case when st.[name] = 'nvarchar' or st.[name] = 'nchar' then sc.length/2 else sc.length end as [length], 
sc.xprec, sc.xscale, sc.isnullable,
mm.text [default value], 
dflts.name [default name], 
isnull(ccm_dropdown_type,'') [dropdown type],
isnull(ccm_dropdown_vals,'') [vals],
isnull(ccm_sort_seq, sc.colorder) [column order],
sc.colorder
from syscolumns sc
inner join systypes st on st.xusertype = sc.xusertype
inner join sysobjects so on sc.id = so.id
left outer join syscomments mm on sc.cdefault = mm.id
left outer join custom_col_metadata on ccm_colorder = sc.colorder
left outer join sysobjects dflts on dflts.id = mm.id
where so.name = 'bugs'
and st.[name] <> 'sysname'
and sc.name not in ('rowguid',
'bg_id',
'bg_short_desc',
'bg_reported_user',
'bg_reported_date',
'bg_project',
'bg_org',
'bg_category',
'bg_priority',
'bg_status',
'bg_assigned_to_user',
'bg_last_updated_user',
'bg_last_updated_date',
'bg_user_defined_attribute',
'bg_project_custom_dropdown_value1',
'bg_project_custom_dropdown_value2',
'bg_project_custom_dropdown_value3',
'bg_tags')
order by sc.id, isnull(ccm_sort_seq,sc.colorder)
2017-07-26 17:40:39 http://localhost:49412/search.aspx elapsed milliseconds:0000
2017-07-26 17:40:39 http://localhost:49412/search.aspx sql=

/* get related users 2 */
select  pj_id, us_id,
case when 0 = 1 then
    case when len(isnull(us_firstname,'') + ' ' + isnull(us_lastname,'')) > 1
	then isnull(us_firstname,'') + ' ' + isnull(us_lastname,'')
    else us_username end
else us_username end us_username,
isnull(us_email,'') us_email
into #temp
from projects, users
where pj_id not in
(
	select pu_project from project_user_xref
	where pu_permission_level = 0 and pu_user = 1
)





if 0 = 1 -- external
and 2 = 0 -- other orgs
begin
	select distinct a.us_id, a.us_username, a.us_email
	from #temp a
	inner join users b on a.us_id = b.us_id
	inner join orgs on b.us_org = og_id
	where og_external_user = 0 or b.us_org = 1
	order by a.us_username
end
else
begin

	select distinct us_id, us_username, us_email
		from #temp
		left outer join project_user_xref on pj_id = pu_project
		and us_id = pu_user
		where isnull(pu_permission_level,2) <> 0
		order by us_username
end

drop table #temp
2017-07-26 17:40:39 http://localhost:49412/search.aspx elapsed milliseconds:0019
2017-07-26 17:40:39 http://localhost:49412/search.aspx sql=
/* drop downs */ select pj_id, pj_name from projects order by pj_name; select og_id, og_name from orgs order by og_name;
	select ct_id, ct_name from categories order by ct_sort_seq, ct_name;
	select pr_id, pr_name from priorities order by pr_sort_seq, pr_name;
	select st_id, st_name from statuses order by st_sort_seq, st_name;
	select udf_id, udf_name from user_defined_attribute order by udf_sort_seq, udf_name
2017-07-26 17:40:39 http://localhost:49412/search.aspx elapsed milliseconds:0000
2017-07-26 17:40:39 http://localhost:49412/search.aspx sql=

select count(1)
from projects
where isnull(pj_enable_custom_dropdown1,0) = 1
or isnull(pj_enable_custom_dropdown2,0) = 1
or isnull(pj_enable_custom_dropdown3,0) = 1
2017-07-26 17:46:57  caught exception in util.set_context:Request is not available in this context
2017-07-26 17:46:57  threadproc_votes
2017-07-26 17:46:57  sql=

if exists (select * from dbo.sysobjects where id = object_id(N'[votes_view]'))
drop view [votes_view]
2017-07-26 17:46:57  started creating Lucene index using folder C:\Users\Oisiktekiner\Documents\Visual Studio 2017\Projects\btnetnew\btnetnew\App_Data\lucene_index
2017-07-26 17:46:57  sql=

create view votes_view as
select bu_bug as vote_bug, sum(bu_vote) as vote_total
from bug_user
group by bu_bug
having sum(bu_vote) > 0
2017-07-26 17:46:57  sql=

select bu_bug, count(1)
from bug_user 
where bu_vote = 1
group by bu_bug
2017-07-26 17:46:57  sql=

/* get searchable cols */					
select sc.name
from syscolumns sc
inner join systypes st on st.xusertype = sc.xusertype
inner join sysobjects so on sc.id = so.id
where so.name = 'bugs'
and st.[name] <> 'sysname'
and sc.name not in ('rowguid',
'bg_id',
'bg_short_desc',
'bg_reported_user',
'bg_reported_date',
'bg_project',
'bg_org',
'bg_category',
'bg_priority',
'bg_status',
'bg_assigned_to_user',
'bg_last_updated_user',
'bg_last_updated_date',
'bg_user_defined_attribute',
'bg_project_custom_dropdown_value1',
'bg_project_custom_dropdown_value2',
'bg_project_custom_dropdown_value3',
'bg_tags')
and st.[name] in ('nvarchar','varchar')
and sc.length > 30
2017-07-26 17:46:57  elapsed milliseconds:0028
2017-07-26 17:46:57  elapsed milliseconds:0019
2017-07-26 17:46:57  sql=

select bg_id, 	

isnull(bg_tags,'') bg_tags,
bg_short_desc
from bugs
2017-07-26 17:46:57  elapsed milliseconds:0000
2017-07-26 17:46:57  sql=

select bp_bug, bp_id, 
isnull(bp_comment_search,bp_comment) [text] 
from bug_posts 
where bp_type <> 'update'
and bp_hidden_from_external_users = 0
2017-07-26 17:46:57  elapsed milliseconds:0000
2017-07-26 17:46:57  done creating Lucene index
2017-07-26 17:47:00 http://localhost:49412/search.aspx se_id cookie is null, so redirecting
2017-07-26 17:47:00 http://localhost:49412/default.aspx?url=/search.aspx&qs= sql=
select count(1) from users
2017-07-26 17:52:13  caught exception in util.set_context:Request is not available in this context
2017-07-26 17:52:13  threadproc_votes
2017-07-26 17:52:13  sql=

if exists (select * from dbo.sysobjects where id = object_id(N'[votes_view]'))
drop view [votes_view]
2017-07-26 17:52:13  started creating Lucene index using folder C:\Users\Oisiktekiner\Documents\Visual Studio 2017\Projects\btnetnew\btnetnew\App_Data\lucene_index
2017-07-26 17:52:13  sql=

create view votes_view as
select bu_bug as vote_bug, sum(bu_vote) as vote_total
from bug_user
group by bu_bug
having sum(bu_vote) > 0
2017-07-26 17:52:13  sql=

select bu_bug, count(1)
from bug_user 
where bu_vote = 1
group by bu_bug
2017-07-26 17:52:13  sql=

/* get searchable cols */					
select sc.name
from syscolumns sc
inner join systypes st on st.xusertype = sc.xusertype
inner join sysobjects so on sc.id = so.id
where so.name = 'bugs'
and st.[name] <> 'sysname'
and sc.name not in ('rowguid',
'bg_id',
'bg_short_desc',
'bg_reported_user',
'bg_reported_date',
'bg_project',
'bg_org',
'bg_category',
'bg_priority',
'bg_status',
'bg_assigned_to_user',
'bg_last_updated_user',
'bg_last_updated_date',
'bg_user_defined_attribute',
'bg_project_custom_dropdown_value1',
'bg_project_custom_dropdown_value2',
'bg_project_custom_dropdown_value3',
'bg_tags')
and st.[name] in ('nvarchar','varchar')
and sc.length > 30
2017-07-26 17:52:13  elapsed milliseconds:0057
2017-07-26 17:52:13  elapsed milliseconds:0000
2017-07-26 17:52:13  sql=

select bg_id, 	

isnull(bg_tags,'') bg_tags,
bg_short_desc
from bugs
2017-07-26 17:52:13  elapsed milliseconds:0000
2017-07-26 17:52:13  sql=

select bp_bug, bp_id, 
isnull(bp_comment_search,bp_comment) [text] 
from bug_posts 
where bp_type <> 'update'
and bp_hidden_from_external_users = 0
2017-07-26 17:52:13  elapsed milliseconds:0001
2017-07-26 17:52:14  done creating Lucene index
2017-07-26 17:52:16 http://localhost:49412/search.aspx se_id cookie is null, so redirecting
2017-07-26 17:52:16 http://localhost:49412/default.aspx?url=/search.aspx&qs= sql=
select count(1) from users
2017-07-26 17:52:22 http://localhost:49412/default.aspx?url=/search.aspx&qs= sql=
select count(1) from users
2017-07-26 17:52:22 http://localhost:49412/default.aspx?url=/search.aspx&qs= sql=

select us_username, us_id, us_password, isnull(us_salt,0) us_salt, us_active
from users
where us_username = N'admin'
2017-07-26 17:52:22 http://localhost:49412/default.aspx?url=/search.aspx&qs= elapsed milliseconds:0000
2017-07-26 17:52:22 http://localhost:49412/default.aspx?url=/search.aspx&qs= sql=
update users set us_most_recent_login_datetime = getdate() where us_id = 1
2017-07-26 17:52:22 http://localhost:49412/default.aspx?url=/search.aspx&qs= sql=
select us_id from users where us_username = N'admin'
2017-07-26 17:52:22 http://localhost:49412/default.aspx?url=/search.aspx&qs= elapsed milliseconds:0000
2017-07-26 17:52:22 http://localhost:49412/default.aspx?url=/search.aspx&qs= guid=6c51bbb0-a6bc-4308-9d54-9d71a5e77124
2017-07-26 17:52:22 http://localhost:49412/default.aspx?url=/search.aspx&qs= sql=
insert into sessions (se_id, se_user) values('6c51bbb0-a6bc-4308-9d54-9d71a5e77124', 1)
2017-07-26 17:52:22 http://localhost:49412/default.aspx?url=/search.aspx&qs= AppPath:
2017-07-26 17:52:22 http://localhost:49412/search.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '6c51bbb0-a6bc-4308-9d54-9d71a5e77124';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '6c51bbb0-a6bc-4308-9d54-9d71a5e77124'
and us_active = 1
2017-07-26 17:52:22 http://localhost:49412/search.aspx elapsed milliseconds:0007
2017-07-26 17:52:22 http://localhost:49412/search.aspx sql=

/* custom columns */ select sc.name, st.[name] [datatype], 
case when st.[name] = 'nvarchar' or st.[name] = 'nchar' then sc.length/2 else sc.length end as [length], 
sc.xprec, sc.xscale, sc.isnullable,
mm.text [default value], 
dflts.name [default name], 
isnull(ccm_dropdown_type,'') [dropdown type],
isnull(ccm_dropdown_vals,'') [vals],
isnull(ccm_sort_seq, sc.colorder) [column order],
sc.colorder
from syscolumns sc
inner join systypes st on st.xusertype = sc.xusertype
inner join sysobjects so on sc.id = so.id
left outer join syscomments mm on sc.cdefault = mm.id
left outer join custom_col_metadata on ccm_colorder = sc.colorder
left outer join sysobjects dflts on dflts.id = mm.id
where so.name = 'bugs'
and st.[name] <> 'sysname'
and sc.name not in ('rowguid',
'bg_id',
'bg_short_desc',
'bg_reported_user',
'bg_reported_date',
'bg_project',
'bg_org',
'bg_category',
'bg_priority',
'bg_status',
'bg_assigned_to_user',
'bg_last_updated_user',
'bg_last_updated_date',
'bg_user_defined_attribute',
'bg_project_custom_dropdown_value1',
'bg_project_custom_dropdown_value2',
'bg_project_custom_dropdown_value3',
'bg_tags')
order by sc.id, isnull(ccm_sort_seq,sc.colorder)
2017-07-26 17:52:22 http://localhost:49412/search.aspx elapsed milliseconds:0000
2017-07-26 17:52:22 http://localhost:49412/search.aspx sql=

/* get related users 2 */
select  pj_id, us_id,
case when 0 = 1 then
    case when len(isnull(us_firstname,'') + ' ' + isnull(us_lastname,'')) > 1
	then isnull(us_firstname,'') + ' ' + isnull(us_lastname,'')
    else us_username end
else us_username end us_username,
isnull(us_email,'') us_email
into #temp
from projects, users
where pj_id not in
(
	select pu_project from project_user_xref
	where pu_permission_level = 0 and pu_user = 1
)





if 0 = 1 -- external
and 2 = 0 -- other orgs
begin
	select distinct a.us_id, a.us_username, a.us_email
	from #temp a
	inner join users b on a.us_id = b.us_id
	inner join orgs on b.us_org = og_id
	where og_external_user = 0 or b.us_org = 1
	order by a.us_username
end
else
begin

	select distinct us_id, us_username, us_email
		from #temp
		left outer join project_user_xref on pj_id = pu_project
		and us_id = pu_user
		where isnull(pu_permission_level,2) <> 0
		order by us_username
end

drop table #temp
2017-07-26 17:52:22 http://localhost:49412/search.aspx elapsed milliseconds:0011
2017-07-26 17:52:22 http://localhost:49412/search.aspx sql=
/* drop downs */ select pj_id, pj_name from projects order by pj_name; select og_id, og_name from orgs order by og_name;
	select ct_id, ct_name from categories order by ct_sort_seq, ct_name;
	select pr_id, pr_name from priorities order by pr_sort_seq, pr_name;
	select st_id, st_name from statuses order by st_sort_seq, st_name;
	select udf_id, udf_name from user_defined_attribute order by udf_sort_seq, udf_name
2017-07-26 17:52:22 http://localhost:49412/search.aspx elapsed milliseconds:0000
2017-07-26 17:52:22 http://localhost:49412/search.aspx sql=

select count(1)
from projects
where isnull(pj_enable_custom_dropdown1,0) = 1
or isnull(pj_enable_custom_dropdown2,0) = 1
or isnull(pj_enable_custom_dropdown3,0) = 1
2017-07-26 17:54:48  caught exception in util.set_context:Request is not available in this context
2017-07-26 17:54:48  threadproc_votes
2017-07-26 17:54:48  sql=

if exists (select * from dbo.sysobjects where id = object_id(N'[votes_view]'))
drop view [votes_view]
2017-07-26 17:54:48  started creating Lucene index using folder C:\Users\Oisiktekiner\Documents\Visual Studio 2017\Projects\btnetnew\btnetnew\App_Data\lucene_index
2017-07-26 17:54:48  sql=

create view votes_view as
select bu_bug as vote_bug, sum(bu_vote) as vote_total
from bug_user
group by bu_bug
having sum(bu_vote) > 0
2017-07-26 17:54:48  sql=

select bu_bug, count(1)
from bug_user 
where bu_vote = 1
group by bu_bug
2017-07-26 17:54:48  elapsed milliseconds:0006
2017-07-26 17:54:48  sql=

/* get searchable cols */					
select sc.name
from syscolumns sc
inner join systypes st on st.xusertype = sc.xusertype
inner join sysobjects so on sc.id = so.id
where so.name = 'bugs'
and st.[name] <> 'sysname'
and sc.name not in ('rowguid',
'bg_id',
'bg_short_desc',
'bg_reported_user',
'bg_reported_date',
'bg_project',
'bg_org',
'bg_category',
'bg_priority',
'bg_status',
'bg_assigned_to_user',
'bg_last_updated_user',
'bg_last_updated_date',
'bg_user_defined_attribute',
'bg_project_custom_dropdown_value1',
'bg_project_custom_dropdown_value2',
'bg_project_custom_dropdown_value3',
'bg_tags')
and st.[name] in ('nvarchar','varchar')
and sc.length > 30
2017-07-26 17:54:48  elapsed milliseconds:0000
2017-07-26 17:54:48  sql=

select bg_id, 	

isnull(bg_tags,'') bg_tags,
bg_short_desc
from bugs
2017-07-26 17:54:48  elapsed milliseconds:0000
2017-07-26 17:54:48  sql=

select bp_bug, bp_id, 
isnull(bp_comment_search,bp_comment) [text] 
from bug_posts 
where bp_type <> 'update'
and bp_hidden_from_external_users = 0
2017-07-26 17:54:48  elapsed milliseconds:0000
2017-07-26 17:54:48  done creating Lucene index
2017-07-26 17:54:50 http://localhost:49412/search.aspx se_id cookie is null, so redirecting
2017-07-26 17:54:51 http://localhost:49412/default.aspx?url=/search.aspx&qs= sql=
select count(1) from users
2017-07-26 17:54:53 http://localhost:49412/default.aspx?url=/search.aspx&qs= sql=
select count(1) from users
2017-07-26 17:54:53 http://localhost:49412/default.aspx?url=/search.aspx&qs= sql=

select us_username, us_id, us_password, isnull(us_salt,0) us_salt, us_active
from users
where us_username = N'admin'
2017-07-26 17:54:53 http://localhost:49412/default.aspx?url=/search.aspx&qs= elapsed milliseconds:0000
2017-07-26 17:54:53 http://localhost:49412/default.aspx?url=/search.aspx&qs= sql=
update users set us_most_recent_login_datetime = getdate() where us_id = 1
2017-07-26 17:54:53 http://localhost:49412/default.aspx?url=/search.aspx&qs= sql=
select us_id from users where us_username = N'admin'
2017-07-26 17:54:53 http://localhost:49412/default.aspx?url=/search.aspx&qs= elapsed milliseconds:0000
2017-07-26 17:54:53 http://localhost:49412/default.aspx?url=/search.aspx&qs= guid=e0defbd0-1f55-464d-a688-5cf6b821f196
2017-07-26 17:54:53 http://localhost:49412/default.aspx?url=/search.aspx&qs= sql=
insert into sessions (se_id, se_user) values('e0defbd0-1f55-464d-a688-5cf6b821f196', 1)
2017-07-26 17:54:53 http://localhost:49412/default.aspx?url=/search.aspx&qs= AppPath:
2017-07-26 17:54:53 http://localhost:49412/search.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = 'e0defbd0-1f55-464d-a688-5cf6b821f196';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = 'e0defbd0-1f55-464d-a688-5cf6b821f196'
and us_active = 1
2017-07-26 17:54:53 http://localhost:49412/search.aspx elapsed milliseconds:0019
2017-07-26 17:54:53 http://localhost:49412/search.aspx sql=

/* custom columns */ select sc.name, st.[name] [datatype], 
case when st.[name] = 'nvarchar' or st.[name] = 'nchar' then sc.length/2 else sc.length end as [length], 
sc.xprec, sc.xscale, sc.isnullable,
mm.text [default value], 
dflts.name [default name], 
isnull(ccm_dropdown_type,'') [dropdown type],
isnull(ccm_dropdown_vals,'') [vals],
isnull(ccm_sort_seq, sc.colorder) [column order],
sc.colorder
from syscolumns sc
inner join systypes st on st.xusertype = sc.xusertype
inner join sysobjects so on sc.id = so.id
left outer join syscomments mm on sc.cdefault = mm.id
left outer join custom_col_metadata on ccm_colorder = sc.colorder
left outer join sysobjects dflts on dflts.id = mm.id
where so.name = 'bugs'
and st.[name] <> 'sysname'
and sc.name not in ('rowguid',
'bg_id',
'bg_short_desc',
'bg_reported_user',
'bg_reported_date',
'bg_project',
'bg_org',
'bg_category',
'bg_priority',
'bg_status',
'bg_assigned_to_user',
'bg_last_updated_user',
'bg_last_updated_date',
'bg_user_defined_attribute',
'bg_project_custom_dropdown_value1',
'bg_project_custom_dropdown_value2',
'bg_project_custom_dropdown_value3',
'bg_tags')
order by sc.id, isnull(ccm_sort_seq,sc.colorder)
2017-07-26 17:54:53 http://localhost:49412/search.aspx elapsed milliseconds:0000
2017-07-26 17:54:53 http://localhost:49412/search.aspx sql=

/* get related users 2 */
select  pj_id, us_id,
case when 0 = 1 then
    case when len(isnull(us_firstname,'') + ' ' + isnull(us_lastname,'')) > 1
	then isnull(us_firstname,'') + ' ' + isnull(us_lastname,'')
    else us_username end
else us_username end us_username,
isnull(us_email,'') us_email
into #temp
from projects, users
where pj_id not in
(
	select pu_project from project_user_xref
	where pu_permission_level = 0 and pu_user = 1
)





if 0 = 1 -- external
and 2 = 0 -- other orgs
begin
	select distinct a.us_id, a.us_username, a.us_email
	from #temp a
	inner join users b on a.us_id = b.us_id
	inner join orgs on b.us_org = og_id
	where og_external_user = 0 or b.us_org = 1
	order by a.us_username
end
else
begin

	select distinct us_id, us_username, us_email
		from #temp
		left outer join project_user_xref on pj_id = pu_project
		and us_id = pu_user
		where isnull(pu_permission_level,2) <> 0
		order by us_username
end

drop table #temp
2017-07-26 17:54:53 http://localhost:49412/search.aspx elapsed milliseconds:0014
2017-07-26 17:54:53 http://localhost:49412/search.aspx sql=
/* drop downs */ select pj_id, pj_name from projects order by pj_name; select og_id, og_name from orgs order by og_name;
	select ct_id, ct_name from categories order by ct_sort_seq, ct_name;
	select pr_id, pr_name from priorities order by pr_sort_seq, pr_name;
	select st_id, st_name from statuses order by st_sort_seq, st_name;
	select udf_id, udf_name from user_defined_attribute order by udf_sort_seq, udf_name
2017-07-26 17:54:53 http://localhost:49412/search.aspx elapsed milliseconds:0000
2017-07-26 17:54:53 http://localhost:49412/search.aspx sql=

select count(1)
from projects
where isnull(pj_enable_custom_dropdown1,0) = 1
or isnull(pj_enable_custom_dropdown2,0) = 1
or isnull(pj_enable_custom_dropdown3,0) = 1
2017-07-26 17:56:46  caught exception in util.set_context:Request is not available in this context
2017-07-26 17:56:46  threadproc_votes
2017-07-26 17:56:46  sql=

if exists (select * from dbo.sysobjects where id = object_id(N'[votes_view]'))
drop view [votes_view]
2017-07-26 17:56:46  started creating Lucene index using folder C:\Users\Oisiktekiner\Documents\Visual Studio 2017\Projects\btnetnew\btnetnew\App_Data\lucene_index
2017-07-26 17:56:46  sql=

create view votes_view as
select bu_bug as vote_bug, sum(bu_vote) as vote_total
from bug_user
group by bu_bug
having sum(bu_vote) > 0
2017-07-26 17:56:46  sql=

select bu_bug, count(1)
from bug_user 
where bu_vote = 1
group by bu_bug
2017-07-26 17:56:46  sql=

/* get searchable cols */					
select sc.name
from syscolumns sc
inner join systypes st on st.xusertype = sc.xusertype
inner join sysobjects so on sc.id = so.id
where so.name = 'bugs'
and st.[name] <> 'sysname'
and sc.name not in ('rowguid',
'bg_id',
'bg_short_desc',
'bg_reported_user',
'bg_reported_date',
'bg_project',
'bg_org',
'bg_category',
'bg_priority',
'bg_status',
'bg_assigned_to_user',
'bg_last_updated_user',
'bg_last_updated_date',
'bg_user_defined_attribute',
'bg_project_custom_dropdown_value1',
'bg_project_custom_dropdown_value2',
'bg_project_custom_dropdown_value3',
'bg_tags')
and st.[name] in ('nvarchar','varchar')
and sc.length > 30
2017-07-26 17:56:46  elapsed milliseconds:0024
2017-07-26 17:56:46  elapsed milliseconds:0000
2017-07-26 17:56:46  sql=

select bg_id, 	

isnull(bg_tags,'') bg_tags,
bg_short_desc
from bugs
2017-07-26 17:56:46  elapsed milliseconds:0000
2017-07-26 17:56:47  sql=

select bp_bug, bp_id, 
isnull(bp_comment_search,bp_comment) [text] 
from bug_posts 
where bp_type <> 'update'
and bp_hidden_from_external_users = 0
2017-07-26 17:56:47  elapsed milliseconds:0000
2017-07-26 17:56:47  done creating Lucene index
2017-07-26 17:56:49 http://localhost:49412/search.aspx se_id cookie is null, so redirecting
2017-07-26 17:56:49 http://localhost:49412/default.aspx?url=/search.aspx&qs= sql=
select count(1) from users
2017-07-26 17:56:51 http://localhost:49412/default.aspx?url=/search.aspx&qs= sql=
select count(1) from users
2017-07-26 17:56:51 http://localhost:49412/default.aspx?url=/search.aspx&qs= sql=

select us_username, us_id, us_password, isnull(us_salt,0) us_salt, us_active
from users
where us_username = N'admin'
2017-07-26 17:56:51 http://localhost:49412/default.aspx?url=/search.aspx&qs= elapsed milliseconds:0000
2017-07-26 17:56:51 http://localhost:49412/default.aspx?url=/search.aspx&qs= sql=
update users set us_most_recent_login_datetime = getdate() where us_id = 1
2017-07-26 17:56:51 http://localhost:49412/default.aspx?url=/search.aspx&qs= sql=
select us_id from users where us_username = N'admin'
2017-07-26 17:56:51 http://localhost:49412/default.aspx?url=/search.aspx&qs= elapsed milliseconds:0000
2017-07-26 17:56:51 http://localhost:49412/default.aspx?url=/search.aspx&qs= guid=5b5c8746-3981-4da6-86c3-6feed2cd8475
2017-07-26 17:56:51 http://localhost:49412/default.aspx?url=/search.aspx&qs= sql=
insert into sessions (se_id, se_user) values('5b5c8746-3981-4da6-86c3-6feed2cd8475', 1)
2017-07-26 17:56:51 http://localhost:49412/default.aspx?url=/search.aspx&qs= AppPath:
2017-07-26 17:56:51 http://localhost:49412/search.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '5b5c8746-3981-4da6-86c3-6feed2cd8475';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '5b5c8746-3981-4da6-86c3-6feed2cd8475'
and us_active = 1
2017-07-26 17:56:51 http://localhost:49412/search.aspx elapsed milliseconds:0009
2017-07-26 17:56:51 http://localhost:49412/search.aspx sql=

/* custom columns */ select sc.name, st.[name] [datatype], 
case when st.[name] = 'nvarchar' or st.[name] = 'nchar' then sc.length/2 else sc.length end as [length], 
sc.xprec, sc.xscale, sc.isnullable,
mm.text [default value], 
dflts.name [default name], 
isnull(ccm_dropdown_type,'') [dropdown type],
isnull(ccm_dropdown_vals,'') [vals],
isnull(ccm_sort_seq, sc.colorder) [column order],
sc.colorder
from syscolumns sc
inner join systypes st on st.xusertype = sc.xusertype
inner join sysobjects so on sc.id = so.id
left outer join syscomments mm on sc.cdefault = mm.id
left outer join custom_col_metadata on ccm_colorder = sc.colorder
left outer join sysobjects dflts on dflts.id = mm.id
where so.name = 'bugs'
and st.[name] <> 'sysname'
and sc.name not in ('rowguid',
'bg_id',
'bg_short_desc',
'bg_reported_user',
'bg_reported_date',
'bg_project',
'bg_org',
'bg_category',
'bg_priority',
'bg_status',
'bg_assigned_to_user',
'bg_last_updated_user',
'bg_last_updated_date',
'bg_user_defined_attribute',
'bg_project_custom_dropdown_value1',
'bg_project_custom_dropdown_value2',
'bg_project_custom_dropdown_value3',
'bg_tags')
order by sc.id, isnull(ccm_sort_seq,sc.colorder)
2017-07-26 17:56:51 http://localhost:49412/search.aspx elapsed milliseconds:0000
2017-07-26 17:56:51 http://localhost:49412/search.aspx sql=

/* get related users 2 */
select  pj_id, us_id,
case when 0 = 1 then
    case when len(isnull(us_firstname,'') + ' ' + isnull(us_lastname,'')) > 1
	then isnull(us_firstname,'') + ' ' + isnull(us_lastname,'')
    else us_username end
else us_username end us_username,
isnull(us_email,'') us_email
into #temp
from projects, users
where pj_id not in
(
	select pu_project from project_user_xref
	where pu_permission_level = 0 and pu_user = 1
)





if 0 = 1 -- external
and 2 = 0 -- other orgs
begin
	select distinct a.us_id, a.us_username, a.us_email
	from #temp a
	inner join users b on a.us_id = b.us_id
	inner join orgs on b.us_org = og_id
	where og_external_user = 0 or b.us_org = 1
	order by a.us_username
end
else
begin

	select distinct us_id, us_username, us_email
		from #temp
		left outer join project_user_xref on pj_id = pu_project
		and us_id = pu_user
		where isnull(pu_permission_level,2) <> 0
		order by us_username
end

drop table #temp
2017-07-26 17:56:51 http://localhost:49412/search.aspx elapsed milliseconds:0015
2017-07-26 17:56:51 http://localhost:49412/search.aspx sql=
/* drop downs */ select pj_id, pj_name from projects order by pj_name; select og_id, og_name from orgs order by og_name;
	select ct_id, ct_name from categories order by ct_sort_seq, ct_name;
	select pr_id, pr_name from priorities order by pr_sort_seq, pr_name;
	select st_id, st_name from statuses order by st_sort_seq, st_name;
	select udf_id, udf_name from user_defined_attribute order by udf_sort_seq, udf_name
2017-07-26 17:56:51 http://localhost:49412/search.aspx elapsed milliseconds:0001
2017-07-26 17:56:51 http://localhost:49412/search.aspx sql=

select count(1)
from projects
where isnull(pj_enable_custom_dropdown1,0) = 1
or isnull(pj_enable_custom_dropdown2,0) = 1
or isnull(pj_enable_custom_dropdown3,0) = 1
2017-07-26 22:01:14  caught exception in util.set_context:Request is not available in this context
2017-07-26 22:01:14  threadproc_votes
2017-07-26 22:01:14  sql=

if exists (select * from dbo.sysobjects where id = object_id(N'[votes_view]'))
drop view [votes_view]
2017-07-26 22:01:14  started creating Lucene index using folder C:\Users\Oisiktekiner\Documents\Visual Studio 2017\Projects\btnetnew\btnetnew\App_Data\lucene_index
2017-07-26 22:01:14  sql=

/* get searchable cols */					
select sc.name
from syscolumns sc
inner join systypes st on st.xusertype = sc.xusertype
inner join sysobjects so on sc.id = so.id
where so.name = 'bugs'
and st.[name] <> 'sysname'
and sc.name not in ('rowguid',
'bg_id',
'bg_short_desc',
'bg_reported_user',
'bg_reported_date',
'bg_project',
'bg_org',
'bg_category',
'bg_priority',
'bg_status',
'bg_assigned_to_user',
'bg_last_updated_user',
'bg_last_updated_date',
'bg_user_defined_attribute',
'bg_project_custom_dropdown_value1',
'bg_project_custom_dropdown_value2',
'bg_project_custom_dropdown_value3',
'bg_tags')
and st.[name] in ('nvarchar','varchar')
and sc.length > 30
2017-07-26 22:01:14  sql=

create view votes_view as
select bu_bug as vote_bug, sum(bu_vote) as vote_total
from bug_user
group by bu_bug
having sum(bu_vote) > 0
2017-07-26 22:01:14  sql=

select bu_bug, count(1)
from bug_user 
where bu_vote = 1
group by bu_bug
2017-07-26 22:01:14  elapsed milliseconds:0018
2017-07-26 22:01:14  elapsed milliseconds:0274
2017-07-26 22:01:14  sql=

select bg_id, 	

isnull(bg_tags,'') bg_tags,
bg_short_desc
from bugs
2017-07-26 22:01:14  elapsed milliseconds:0005
2017-07-26 22:01:14  sql=

select bp_bug, bp_id, 
isnull(bp_comment_search,bp_comment) [text] 
from bug_posts 
where bp_type <> 'update'
and bp_hidden_from_external_users = 0
2017-07-26 22:01:15  elapsed milliseconds:0014
2017-07-26 22:01:15  done creating Lucene index
2017-07-26 22:01:18 http://localhost:49412/search.aspx se_id cookie is null, so redirecting
2017-07-26 22:01:20 http://localhost:49412/default.aspx?url=/search.aspx&qs= sql=
select count(1) from users
2017-07-26 22:01:27 http://localhost:49412/default.aspx?url=/search.aspx&qs= sql=
select count(1) from users
2017-07-26 22:01:27 http://localhost:49412/default.aspx?url=/search.aspx&qs= sql=

select us_username, us_id, us_password, isnull(us_salt,0) us_salt, us_active
from users
where us_username = N'admin'
2017-07-26 22:01:27 http://localhost:49412/default.aspx?url=/search.aspx&qs= elapsed milliseconds:0004
2017-07-26 22:01:27 http://localhost:49412/default.aspx?url=/search.aspx&qs= sql=
update users set us_most_recent_login_datetime = getdate() where us_id = 1
2017-07-26 22:01:27 http://localhost:49412/default.aspx?url=/search.aspx&qs= sql=
select us_id from users where us_username = N'admin'
2017-07-26 22:01:27 http://localhost:49412/default.aspx?url=/search.aspx&qs= elapsed milliseconds:0001
2017-07-26 22:01:27 http://localhost:49412/default.aspx?url=/search.aspx&qs= guid=d81b9008-721f-4834-9125-23de24304051
2017-07-26 22:01:27 http://localhost:49412/default.aspx?url=/search.aspx&qs= sql=
insert into sessions (se_id, se_user) values('d81b9008-721f-4834-9125-23de24304051', 1)
2017-07-26 22:01:27 http://localhost:49412/default.aspx?url=/search.aspx&qs= AppPath:
2017-07-26 22:01:27 http://localhost:49412/search.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = 'd81b9008-721f-4834-9125-23de24304051';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = 'd81b9008-721f-4834-9125-23de24304051'
and us_active = 1
2017-07-26 22:01:27 http://localhost:49412/search.aspx elapsed milliseconds:0016
2017-07-26 22:01:27 http://localhost:49412/search.aspx sql=

/* custom columns */ select sc.name, st.[name] [datatype], 
case when st.[name] = 'nvarchar' or st.[name] = 'nchar' then sc.length/2 else sc.length end as [length], 
sc.xprec, sc.xscale, sc.isnullable,
mm.text [default value], 
dflts.name [default name], 
isnull(ccm_dropdown_type,'') [dropdown type],
isnull(ccm_dropdown_vals,'') [vals],
isnull(ccm_sort_seq, sc.colorder) [column order],
sc.colorder
from syscolumns sc
inner join systypes st on st.xusertype = sc.xusertype
inner join sysobjects so on sc.id = so.id
left outer join syscomments mm on sc.cdefault = mm.id
left outer join custom_col_metadata on ccm_colorder = sc.colorder
left outer join sysobjects dflts on dflts.id = mm.id
where so.name = 'bugs'
and st.[name] <> 'sysname'
and sc.name not in ('rowguid',
'bg_id',
'bg_short_desc',
'bg_reported_user',
'bg_reported_date',
'bg_project',
'bg_org',
'bg_category',
'bg_priority',
'bg_status',
'bg_assigned_to_user',
'bg_last_updated_user',
'bg_last_updated_date',
'bg_user_defined_attribute',
'bg_project_custom_dropdown_value1',
'bg_project_custom_dropdown_value2',
'bg_project_custom_dropdown_value3',
'bg_tags')
order by sc.id, isnull(ccm_sort_seq,sc.colorder)
2017-07-26 22:01:27 http://localhost:49412/search.aspx elapsed milliseconds:0174
2017-07-26 22:01:27 http://localhost:49412/search.aspx sql=

/* get related users 2 */
select  pj_id, us_id,
case when 0 = 1 then
    case when len(isnull(us_firstname,'') + ' ' + isnull(us_lastname,'')) > 1
	then isnull(us_firstname,'') + ' ' + isnull(us_lastname,'')
    else us_username end
else us_username end us_username,
isnull(us_email,'') us_email
into #temp
from projects, users
where pj_id not in
(
	select pu_project from project_user_xref
	where pu_permission_level = 0 and pu_user = 1
)





if 0 = 1 -- external
and 2 = 0 -- other orgs
begin
	select distinct a.us_id, a.us_username, a.us_email
	from #temp a
	inner join users b on a.us_id = b.us_id
	inner join orgs on b.us_org = og_id
	where og_external_user = 0 or b.us_org = 1
	order by a.us_username
end
else
begin

	select distinct us_id, us_username, us_email
		from #temp
		left outer join project_user_xref on pj_id = pu_project
		and us_id = pu_user
		where isnull(pu_permission_level,2) <> 0
		order by us_username
end

drop table #temp
2017-07-26 22:01:27 http://localhost:49412/search.aspx elapsed milliseconds:0035
2017-07-26 22:01:27 http://localhost:49412/search.aspx sql=
/* drop downs */ select pj_id, pj_name from projects order by pj_name; select og_id, og_name from orgs order by og_name;
	select ct_id, ct_name from categories order by ct_sort_seq, ct_name;
	select pr_id, pr_name from priorities order by pr_sort_seq, pr_name;
	select st_id, st_name from statuses order by st_sort_seq, st_name;
	select udf_id, udf_name from user_defined_attribute order by udf_sort_seq, udf_name
2017-07-26 22:01:27 http://localhost:49412/search.aspx elapsed milliseconds:0006
2017-07-26 22:01:27 http://localhost:49412/search.aspx sql=

select count(1)
from projects
where isnull(pj_enable_custom_dropdown1,0) = 1
or isnull(pj_enable_custom_dropdown2,0) = 1
or isnull(pj_enable_custom_dropdown3,0) = 1
2017-07-26 22:12:40  caught exception in util.set_context:Request is not available in this context
2017-07-26 22:12:40  threadproc_votes
2017-07-26 22:12:40  sql=

if exists (select * from dbo.sysobjects where id = object_id(N'[votes_view]'))
drop view [votes_view]
2017-07-26 22:12:40  started creating Lucene index using folder C:\Users\Oisiktekiner\Documents\Visual Studio 2017\Projects\btnetnew\btnetnew\App_Data\lucene_index
2017-07-26 22:12:40  sql=

create view votes_view as
select bu_bug as vote_bug, sum(bu_vote) as vote_total
from bug_user
group by bu_bug
having sum(bu_vote) > 0
2017-07-26 22:12:40  sql=

select bu_bug, count(1)
from bug_user 
where bu_vote = 1
group by bu_bug
2017-07-26 22:12:40  elapsed milliseconds:0025
2017-07-26 22:12:40  sql=

/* get searchable cols */					
select sc.name
from syscolumns sc
inner join systypes st on st.xusertype = sc.xusertype
inner join sysobjects so on sc.id = so.id
where so.name = 'bugs'
and st.[name] <> 'sysname'
and sc.name not in ('rowguid',
'bg_id',
'bg_short_desc',
'bg_reported_user',
'bg_reported_date',
'bg_project',
'bg_org',
'bg_category',
'bg_priority',
'bg_status',
'bg_assigned_to_user',
'bg_last_updated_user',
'bg_last_updated_date',
'bg_user_defined_attribute',
'bg_project_custom_dropdown_value1',
'bg_project_custom_dropdown_value2',
'bg_project_custom_dropdown_value3',
'bg_tags')
and st.[name] in ('nvarchar','varchar')
and sc.length > 30
2017-07-26 22:12:40  elapsed milliseconds:0000
2017-07-26 22:12:40  sql=

select bg_id, 	

isnull(bg_tags,'') bg_tags,
bg_short_desc
from bugs
2017-07-26 22:12:40  elapsed milliseconds:0000
2017-07-26 22:12:40  sql=

select bp_bug, bp_id, 
isnull(bp_comment_search,bp_comment) [text] 
from bug_posts 
where bp_type <> 'update'
and bp_hidden_from_external_users = 0
2017-07-26 22:12:40  elapsed milliseconds:0001
2017-07-26 22:12:40  done creating Lucene index
2017-07-26 22:12:43 http://localhost:49412/default.aspx sql=
select count(1) from users
2017-07-26 22:13:11 http://localhost:49412/default.aspx sql=
select count(1) from users
2017-07-26 22:13:11 http://localhost:49412/default.aspx sql=

select us_username, us_id, us_password, isnull(us_salt,0) us_salt, us_active
from users
where us_username = N'admin'
2017-07-26 22:13:11 http://localhost:49412/default.aspx elapsed milliseconds:0000
2017-07-26 22:13:11 http://localhost:49412/default.aspx sql=
update users set us_most_recent_login_datetime = getdate() where us_id = 1
2017-07-26 22:13:11 http://localhost:49412/default.aspx sql=
select us_id from users where us_username = N'admin'
2017-07-26 22:13:11 http://localhost:49412/default.aspx elapsed milliseconds:0000
2017-07-26 22:13:11 http://localhost:49412/default.aspx guid=da9260a7-e70e-4cf8-a482-ed2ea59fc595
2017-07-26 22:13:11 http://localhost:49412/default.aspx sql=
insert into sessions (se_id, se_user) values('da9260a7-e70e-4cf8-a482-ed2ea59fc595', 1)
2017-07-26 22:13:11 http://localhost:49412/default.aspx AppPath:
2017-07-26 22:13:14 http://localhost:49412/bugs.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = 'da9260a7-e70e-4cf8-a482-ed2ea59fc595';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = 'da9260a7-e70e-4cf8-a482-ed2ea59fc595'
and us_active = 1
2017-07-26 22:13:14 http://localhost:49412/bugs.aspx elapsed milliseconds:0010
2017-07-26 22:13:14 http://localhost:49412/bugs.aspx sql=

/* custom columns */ select sc.name, st.[name] [datatype], 
case when st.[name] = 'nvarchar' or st.[name] = 'nchar' then sc.length/2 else sc.length end as [length], 
sc.xprec, sc.xscale, sc.isnullable,
mm.text [default value], 
dflts.name [default name], 
isnull(ccm_dropdown_type,'') [dropdown type],
isnull(ccm_dropdown_vals,'') [vals],
isnull(ccm_sort_seq, sc.colorder) [column order],
sc.colorder
from syscolumns sc
inner join systypes st on st.xusertype = sc.xusertype
inner join sysobjects so on sc.id = so.id
left outer join syscomments mm on sc.cdefault = mm.id
left outer join custom_col_metadata on ccm_colorder = sc.colorder
left outer join sysobjects dflts on dflts.id = mm.id
where so.name = 'bugs'
and st.[name] <> 'sysname'
and sc.name not in ('rowguid',
'bg_id',
'bg_short_desc',
'bg_reported_user',
'bg_reported_date',
'bg_project',
'bg_org',
'bg_category',
'bg_priority',
'bg_status',
'bg_assigned_to_user',
'bg_last_updated_user',
'bg_last_updated_date',
'bg_user_defined_attribute',
'bg_project_custom_dropdown_value1',
'bg_project_custom_dropdown_value2',
'bg_project_custom_dropdown_value3',
'bg_tags')
order by sc.id, isnull(ccm_sort_seq,sc.colorder)
2017-07-26 22:13:14 http://localhost:49412/bugs.aspx elapsed milliseconds:0000
2017-07-26 22:13:14 http://localhost:49412/bugs.aspx sql=
/* query dropdown */
select qu_id, qu_desc
from queries
where (isnull(qu_user,0) = 0 and isnull(qu_org,0) = 0)
or isnull(qu_user,0) = 1
or isnull(qu_org,0) = 1
order by qu_desc
2017-07-26 22:13:14 http://localhost:49412/bugs.aspx elapsed milliseconds:0004
2017-07-26 22:13:14 http://localhost:49412/bugs.aspx sql=
select qu_id, qu_sql from queries where qu_id in
			(select us_default_query from users where us_id = 1)
2017-07-26 22:13:14 http://localhost:49412/bugs.aspx elapsed milliseconds:0003
2017-07-26 22:13:14 http://localhost:49412/bugs.aspx sql=
select isnull(pr_background_color,'#ffffff'), bg_id [id], isnull(bu_flag,0) [$FLAG], 
 bg_short_desc [desc], isnull(pj_name,'') [project], isnull(og_name,'') [organization], isnull(ct_name,'') [category], rpt.us_username [reported by],
 bg_reported_date [reported on], isnull(pr_name,'') [priority], isnull(asg.us_username,'') [assigned to],
 isnull(st_name,'') [status], isnull(lu.us_username,'') [last updated by], bg_last_updated_date [last updated on]
 from bugs 
 left outer join bug_user on bu_bug = bg_id and bu_user = 1 
 left outer join users rpt on rpt.us_id = bg_reported_user
 left outer join users asg on asg.us_id = bg_assigned_to_user
 left outer join users lu on lu.us_id = bg_last_updated_user
 left outer join projects on pj_id = bg_project
 left outer join orgs on og_id = bg_org
 left outer join categories on ct_id = bg_category
 left outer join priorities on pr_id = bg_priority
 left outer join statuses on st_id = bg_status
  /* altered - just order by  */ WHERE  (bugs.bg_project not in (
					select pu_project
					from project_user_xref
					where pu_user = 1
					and pu_permission_level = 0)) order by bg_id desc
2017-07-26 22:13:14 http://localhost:49412/bugs.aspx elapsed milliseconds:0021
2017-07-26 22:13:22 http://localhost:49412/search.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = 'da9260a7-e70e-4cf8-a482-ed2ea59fc595';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = 'da9260a7-e70e-4cf8-a482-ed2ea59fc595'
and us_active = 1
2017-07-26 22:13:22 http://localhost:49412/search.aspx elapsed milliseconds:0000
2017-07-26 22:13:22 http://localhost:49412/search.aspx sql=

/* get related users 2 */
select  pj_id, us_id,
case when 0 = 1 then
    case when len(isnull(us_firstname,'') + ' ' + isnull(us_lastname,'')) > 1
	then isnull(us_firstname,'') + ' ' + isnull(us_lastname,'')
    else us_username end
else us_username end us_username,
isnull(us_email,'') us_email
into #temp
from projects, users
where pj_id not in
(
	select pu_project from project_user_xref
	where pu_permission_level = 0 and pu_user = 1
)





if 0 = 1 -- external
and 2 = 0 -- other orgs
begin
	select distinct a.us_id, a.us_username, a.us_email
	from #temp a
	inner join users b on a.us_id = b.us_id
	inner join orgs on b.us_org = og_id
	where og_external_user = 0 or b.us_org = 1
	order by a.us_username
end
else
begin

	select distinct us_id, us_username, us_email
		from #temp
		left outer join project_user_xref on pj_id = pu_project
		and us_id = pu_user
		where isnull(pu_permission_level,2) <> 0
		order by us_username
end

drop table #temp
2017-07-26 22:13:22 http://localhost:49412/search.aspx elapsed milliseconds:0015
2017-07-26 22:13:22 http://localhost:49412/search.aspx sql=
/* drop downs */ select pj_id, pj_name from projects order by pj_name; select og_id, og_name from orgs order by og_name;
	select ct_id, ct_name from categories order by ct_sort_seq, ct_name;
	select pr_id, pr_name from priorities order by pr_sort_seq, pr_name;
	select st_id, st_name from statuses order by st_sort_seq, st_name;
	select udf_id, udf_name from user_defined_attribute order by udf_sort_seq, udf_name
2017-07-26 22:13:22 http://localhost:49412/search.aspx elapsed milliseconds:0000
2017-07-26 22:13:22 http://localhost:49412/search.aspx sql=

select count(1)
from projects
where isnull(pj_enable_custom_dropdown1,0) = 1
or isnull(pj_enable_custom_dropdown2,0) = 1
or isnull(pj_enable_custom_dropdown3,0) = 1
2017-07-26 22:15:58 http://localhost:49412/search.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = 'da9260a7-e70e-4cf8-a482-ed2ea59fc595';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = 'da9260a7-e70e-4cf8-a482-ed2ea59fc595'
and us_active = 1
2017-07-26 22:15:58 http://localhost:49412/search.aspx elapsed milliseconds:0001
2017-07-26 22:15:58 http://localhost:49412/search.aspx sql=

/* get related users 2 */
select  pj_id, us_id,
case when 0 = 1 then
    case when len(isnull(us_firstname,'') + ' ' + isnull(us_lastname,'')) > 1
	then isnull(us_firstname,'') + ' ' + isnull(us_lastname,'')
    else us_username end
else us_username end us_username,
isnull(us_email,'') us_email
into #temp
from projects, users
where pj_id not in
(
	select pu_project from project_user_xref
	where pu_permission_level = 0 and pu_user = 1
)





if 0 = 1 -- external
and 2 = 0 -- other orgs
begin
	select distinct a.us_id, a.us_username, a.us_email
	from #temp a
	inner join users b on a.us_id = b.us_id
	inner join orgs on b.us_org = og_id
	where og_external_user = 0 or b.us_org = 1
	order by a.us_username
end
else
begin

	select distinct us_id, us_username, us_email
		from #temp
		left outer join project_user_xref on pj_id = pu_project
		and us_id = pu_user
		where isnull(pu_permission_level,2) <> 0
		order by us_username
end

drop table #temp
2017-07-26 22:15:58 http://localhost:49412/search.aspx elapsed milliseconds:0019
2017-07-26 22:15:58 http://localhost:49412/search.aspx sql=

select
pj_id,
isnull(pj_enable_custom_dropdown1,0) pj_enable_custom_dropdown1,
isnull(pj_enable_custom_dropdown2,0) pj_enable_custom_dropdown2,
isnull(pj_enable_custom_dropdown3,0) pj_enable_custom_dropdown3,
isnull(pj_custom_dropdown_label1,'') pj_custom_dropdown_label1,
isnull(pj_custom_dropdown_label2,'') pj_custom_dropdown_label2,
isnull(pj_custom_dropdown_label3,'') pj_custom_dropdown_label3,
isnull(pj_custom_dropdown_values1,'') pj_custom_dropdown_values1,
isnull(pj_custom_dropdown_values2,'') pj_custom_dropdown_values2,
isnull(pj_custom_dropdown_values3,'') pj_custom_dropdown_values3
from projects
where isnull(pj_enable_custom_dropdown1,0) = 1
or isnull(pj_enable_custom_dropdown2,0) = 1
or isnull(pj_enable_custom_dropdown3,0) = 1
2017-07-26 22:15:58 http://localhost:49412/search.aspx elapsed milliseconds:0003
2017-07-26 22:15:58 http://localhost:49412/search.aspx sql=
select isnull(pr_background_color,'#ffffff') [color], bg_id [id],
bg_short_desc [desc]
,isnull(rpt.us_username,'') [reported by]
,bg_reported_date [reported on]
,isnull(lu.us_username,'') [last updated by]
,bg_last_updated_date [last updated on],
isnull(pj_name,'') [project],
isnull(og_name,'') [organization],
isnull(ct_name,'') [category],
isnull(pr_name,'') [priority],
isnull(asg.us_username,'') [assigned to],
isnull(st_name,'') [status] from bugs
			left outer join users rpt on rpt.us_id = bg_reported_user
			left outer join users lu on lu.us_id = bg_last_updated_user
			left outer join users asg on asg.us_id = bg_assigned_to_user
			left outer join projects on pj_id = bg_project
			left outer join orgs on og_id = bg_org
			left outer join categories on ct_id = bg_category
			left outer join priorities on pr_id = bg_priority
			left outer join statuses on st_id = bg_status
			 where /* altered - both  */ (  bg_reported_user in (1) and bg_category in (2)   ) AND (  (bugs.bg_project not in (
					select pu_project
					from project_user_xref
					where pu_user = 1
					and pu_permission_level = 0))  ) order by bg_id desc
2017-07-26 22:15:58 http://localhost:49412/search.aspx elapsed milliseconds:0018
2017-07-26 22:16:42 http://localhost:49412/search.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = 'da9260a7-e70e-4cf8-a482-ed2ea59fc595';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = 'da9260a7-e70e-4cf8-a482-ed2ea59fc595'
and us_active = 1
2017-07-26 22:16:42 http://localhost:49412/search.aspx elapsed milliseconds:0001
2017-07-26 22:16:42 http://localhost:49412/search.aspx sql=

/* get related users 2 */
select  pj_id, us_id,
case when 0 = 1 then
    case when len(isnull(us_firstname,'') + ' ' + isnull(us_lastname,'')) > 1
	then isnull(us_firstname,'') + ' ' + isnull(us_lastname,'')
    else us_username end
else us_username end us_username,
isnull(us_email,'') us_email
into #temp
from projects, users
where pj_id not in
(
	select pu_project from project_user_xref
	where pu_permission_level = 0 and pu_user = 1
)





if 0 = 1 -- external
and 2 = 0 -- other orgs
begin
	select distinct a.us_id, a.us_username, a.us_email
	from #temp a
	inner join users b on a.us_id = b.us_id
	inner join orgs on b.us_org = og_id
	where og_external_user = 0 or b.us_org = 1
	order by a.us_username
end
else
begin

	select distinct us_id, us_username, us_email
		from #temp
		left outer join project_user_xref on pj_id = pu_project
		and us_id = pu_user
		where isnull(pu_permission_level,2) <> 0
		order by us_username
end

drop table #temp
2017-07-26 22:16:42 http://localhost:49412/search.aspx elapsed milliseconds:0014
2017-07-26 22:16:42 http://localhost:49412/search.aspx sql=

select
pj_id,
isnull(pj_enable_custom_dropdown1,0) pj_enable_custom_dropdown1,
isnull(pj_enable_custom_dropdown2,0) pj_enable_custom_dropdown2,
isnull(pj_enable_custom_dropdown3,0) pj_enable_custom_dropdown3,
isnull(pj_custom_dropdown_label1,'') pj_custom_dropdown_label1,
isnull(pj_custom_dropdown_label2,'') pj_custom_dropdown_label2,
isnull(pj_custom_dropdown_label3,'') pj_custom_dropdown_label3,
isnull(pj_custom_dropdown_values1,'') pj_custom_dropdown_values1,
isnull(pj_custom_dropdown_values2,'') pj_custom_dropdown_values2,
isnull(pj_custom_dropdown_values3,'') pj_custom_dropdown_values3
from projects
where isnull(pj_enable_custom_dropdown1,0) = 1
or isnull(pj_enable_custom_dropdown2,0) = 1
or isnull(pj_enable_custom_dropdown3,0) = 1
2017-07-26 22:16:42 http://localhost:49412/search.aspx elapsed milliseconds:0000
2017-07-26 22:16:42 http://localhost:49412/search.aspx sql=
select isnull(pr_background_color,'#ffffff') [color], bg_id [id],
bg_short_desc [desc]
,isnull(rpt.us_username,'') [reported by]
,bg_reported_date [reported on]
,isnull(lu.us_username,'') [last updated by]
,bg_last_updated_date [last updated on],
isnull(pj_name,'') [project],
isnull(og_name,'') [organization],
isnull(ct_name,'') [category],
isnull(pr_name,'') [priority],
isnull(asg.us_username,'') [assigned to],
isnull(st_name,'') [status] from bugs
			left outer join users rpt on rpt.us_id = bg_reported_user
			left outer join users lu on lu.us_id = bg_last_updated_user
			left outer join users asg on asg.us_id = bg_assigned_to_user
			left outer join projects on pj_id = bg_project
			left outer join orgs on og_id = bg_org
			left outer join categories on ct_id = bg_category
			left outer join priorities on pr_id = bg_priority
			left outer join statuses on st_id = bg_status
			 where /* altered - both  */ (  bg_reported_user in (1) and bg_assigned_to_user in (2) and bg_category in (2) and bg_priority in (1) and bg_status in (2)   ) AND (  (bugs.bg_project not in (
					select pu_project
					from project_user_xref
					where pu_user = 1
					and pu_permission_level = 0))  ) order by bg_id desc
2017-07-26 22:16:42 http://localhost:49412/search.aspx elapsed milliseconds:0015
2017-07-26 22:16:50 http://localhost:49412/search.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = 'da9260a7-e70e-4cf8-a482-ed2ea59fc595';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = 'da9260a7-e70e-4cf8-a482-ed2ea59fc595'
and us_active = 1
2017-07-26 22:16:50 http://localhost:49412/search.aspx elapsed milliseconds:0001
2017-07-26 22:16:50 http://localhost:49412/search.aspx sql=

/* get related users 2 */
select  pj_id, us_id,
case when 0 = 1 then
    case when len(isnull(us_firstname,'') + ' ' + isnull(us_lastname,'')) > 1
	then isnull(us_firstname,'') + ' ' + isnull(us_lastname,'')
    else us_username end
else us_username end us_username,
isnull(us_email,'') us_email
into #temp
from projects, users
where pj_id not in
(
	select pu_project from project_user_xref
	where pu_permission_level = 0 and pu_user = 1
)





if 0 = 1 -- external
and 2 = 0 -- other orgs
begin
	select distinct a.us_id, a.us_username, a.us_email
	from #temp a
	inner join users b on a.us_id = b.us_id
	inner join orgs on b.us_org = og_id
	where og_external_user = 0 or b.us_org = 1
	order by a.us_username
end
else
begin

	select distinct us_id, us_username, us_email
		from #temp
		left outer join project_user_xref on pj_id = pu_project
		and us_id = pu_user
		where isnull(pu_permission_level,2) <> 0
		order by us_username
end

drop table #temp
2017-07-26 22:16:50 http://localhost:49412/search.aspx elapsed milliseconds:0022
2017-07-26 22:16:50 http://localhost:49412/search.aspx sql=

select
pj_id,
isnull(pj_enable_custom_dropdown1,0) pj_enable_custom_dropdown1,
isnull(pj_enable_custom_dropdown2,0) pj_enable_custom_dropdown2,
isnull(pj_enable_custom_dropdown3,0) pj_enable_custom_dropdown3,
isnull(pj_custom_dropdown_label1,'') pj_custom_dropdown_label1,
isnull(pj_custom_dropdown_label2,'') pj_custom_dropdown_label2,
isnull(pj_custom_dropdown_label3,'') pj_custom_dropdown_label3,
isnull(pj_custom_dropdown_values1,'') pj_custom_dropdown_values1,
isnull(pj_custom_dropdown_values2,'') pj_custom_dropdown_values2,
isnull(pj_custom_dropdown_values3,'') pj_custom_dropdown_values3
from projects
where isnull(pj_enable_custom_dropdown1,0) = 1
or isnull(pj_enable_custom_dropdown2,0) = 1
or isnull(pj_enable_custom_dropdown3,0) = 1
2017-07-26 22:16:50 http://localhost:49412/search.aspx elapsed milliseconds:0000
2017-07-26 22:16:50 http://localhost:49412/search.aspx sql=
select isnull(pr_background_color,'#ffffff') [color], bg_id [id],
bg_short_desc [desc]
,isnull(rpt.us_username,'') [reported by]
,bg_reported_date [reported on]
,isnull(lu.us_username,'') [last updated by]
,bg_last_updated_date [last updated on],
isnull(pj_name,'') [project],
isnull(og_name,'') [organization],
isnull(ct_name,'') [category],
isnull(pr_name,'') [priority],
isnull(asg.us_username,'') [assigned to],
isnull(st_name,'') [status] from bugs
			left outer join users rpt on rpt.us_id = bg_reported_user
			left outer join users lu on lu.us_id = bg_last_updated_user
			left outer join users asg on asg.us_id = bg_assigned_to_user
			left outer join projects on pj_id = bg_project
			left outer join orgs on og_id = bg_org
			left outer join categories on ct_id = bg_category
			left outer join priorities on pr_id = bg_priority
			left outer join statuses on st_id = bg_status
			 where /* altered - both  */ (  bg_reported_user in (1) and bg_assigned_to_user in (2) and bg_category in (2) and bg_priority in (1) and bg_status in (0)   ) AND (  (bugs.bg_project not in (
					select pu_project
					from project_user_xref
					where pu_user = 1
					and pu_permission_level = 0))  ) order by bg_id desc
2017-07-26 22:16:50 http://localhost:49412/search.aspx elapsed milliseconds:0016
2017-07-26 22:16:55 http://localhost:49412/search.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = 'da9260a7-e70e-4cf8-a482-ed2ea59fc595';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = 'da9260a7-e70e-4cf8-a482-ed2ea59fc595'
and us_active = 1
2017-07-26 22:16:55 http://localhost:49412/search.aspx elapsed milliseconds:0001
2017-07-26 22:16:55 http://localhost:49412/search.aspx sql=

/* get related users 2 */
select  pj_id, us_id,
case when 0 = 1 then
    case when len(isnull(us_firstname,'') + ' ' + isnull(us_lastname,'')) > 1
	then isnull(us_firstname,'') + ' ' + isnull(us_lastname,'')
    else us_username end
else us_username end us_username,
isnull(us_email,'') us_email
into #temp
from projects, users
where pj_id not in
(
	select pu_project from project_user_xref
	where pu_permission_level = 0 and pu_user = 1
)





if 0 = 1 -- external
and 2 = 0 -- other orgs
begin
	select distinct a.us_id, a.us_username, a.us_email
	from #temp a
	inner join users b on a.us_id = b.us_id
	inner join orgs on b.us_org = og_id
	where og_external_user = 0 or b.us_org = 1
	order by a.us_username
end
else
begin

	select distinct us_id, us_username, us_email
		from #temp
		left outer join project_user_xref on pj_id = pu_project
		and us_id = pu_user
		where isnull(pu_permission_level,2) <> 0
		order by us_username
end

drop table #temp
2017-07-26 22:16:55 http://localhost:49412/search.aspx elapsed milliseconds:0014
2017-07-26 22:16:55 http://localhost:49412/search.aspx sql=

select
pj_id,
isnull(pj_enable_custom_dropdown1,0) pj_enable_custom_dropdown1,
isnull(pj_enable_custom_dropdown2,0) pj_enable_custom_dropdown2,
isnull(pj_enable_custom_dropdown3,0) pj_enable_custom_dropdown3,
isnull(pj_custom_dropdown_label1,'') pj_custom_dropdown_label1,
isnull(pj_custom_dropdown_label2,'') pj_custom_dropdown_label2,
isnull(pj_custom_dropdown_label3,'') pj_custom_dropdown_label3,
isnull(pj_custom_dropdown_values1,'') pj_custom_dropdown_values1,
isnull(pj_custom_dropdown_values2,'') pj_custom_dropdown_values2,
isnull(pj_custom_dropdown_values3,'') pj_custom_dropdown_values3
from projects
where isnull(pj_enable_custom_dropdown1,0) = 1
or isnull(pj_enable_custom_dropdown2,0) = 1
or isnull(pj_enable_custom_dropdown3,0) = 1
2017-07-26 22:16:55 http://localhost:49412/search.aspx elapsed milliseconds:0000
2017-07-26 22:16:55 http://localhost:49412/search.aspx sql=
select isnull(pr_background_color,'#ffffff') [color], bg_id [id],
bg_short_desc [desc]
,isnull(rpt.us_username,'') [reported by]
,bg_reported_date [reported on]
,isnull(lu.us_username,'') [last updated by]
,bg_last_updated_date [last updated on],
isnull(pj_name,'') [project],
isnull(og_name,'') [organization],
isnull(ct_name,'') [category],
isnull(pr_name,'') [priority],
isnull(asg.us_username,'') [assigned to],
isnull(st_name,'') [status] from bugs
			left outer join users rpt on rpt.us_id = bg_reported_user
			left outer join users lu on lu.us_id = bg_last_updated_user
			left outer join users asg on asg.us_id = bg_assigned_to_user
			left outer join projects on pj_id = bg_project
			left outer join orgs on og_id = bg_org
			left outer join categories on ct_id = bg_category
			left outer join priorities on pr_id = bg_priority
			left outer join statuses on st_id = bg_status
			 where /* altered - both  */ (  bg_reported_user in (1) and bg_assigned_to_user in (0) and bg_category in (2) and bg_priority in (1) and bg_status in (0)   ) AND (  (bugs.bg_project not in (
					select pu_project
					from project_user_xref
					where pu_user = 1
					and pu_permission_level = 0))  ) order by bg_id desc
2017-07-26 22:16:55 http://localhost:49412/search.aspx elapsed milliseconds:0016
2017-07-26 22:17:00 http://localhost:49412/search.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = 'da9260a7-e70e-4cf8-a482-ed2ea59fc595';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = 'da9260a7-e70e-4cf8-a482-ed2ea59fc595'
and us_active = 1
2017-07-26 22:17:00 http://localhost:49412/search.aspx elapsed milliseconds:0003
2017-07-26 22:17:00 http://localhost:49412/search.aspx sql=

/* get related users 2 */
select  pj_id, us_id,
case when 0 = 1 then
    case when len(isnull(us_firstname,'') + ' ' + isnull(us_lastname,'')) > 1
	then isnull(us_firstname,'') + ' ' + isnull(us_lastname,'')
    else us_username end
else us_username end us_username,
isnull(us_email,'') us_email
into #temp
from projects, users
where pj_id not in
(
	select pu_project from project_user_xref
	where pu_permission_level = 0 and pu_user = 1
)





if 0 = 1 -- external
and 2 = 0 -- other orgs
begin
	select distinct a.us_id, a.us_username, a.us_email
	from #temp a
	inner join users b on a.us_id = b.us_id
	inner join orgs on b.us_org = og_id
	where og_external_user = 0 or b.us_org = 1
	order by a.us_username
end
else
begin

	select distinct us_id, us_username, us_email
		from #temp
		left outer join project_user_xref on pj_id = pu_project
		and us_id = pu_user
		where isnull(pu_permission_level,2) <> 0
		order by us_username
end

drop table #temp
2017-07-26 22:17:00 http://localhost:49412/search.aspx elapsed milliseconds:0016
2017-07-26 22:17:00 http://localhost:49412/search.aspx sql=

select
pj_id,
isnull(pj_enable_custom_dropdown1,0) pj_enable_custom_dropdown1,
isnull(pj_enable_custom_dropdown2,0) pj_enable_custom_dropdown2,
isnull(pj_enable_custom_dropdown3,0) pj_enable_custom_dropdown3,
isnull(pj_custom_dropdown_label1,'') pj_custom_dropdown_label1,
isnull(pj_custom_dropdown_label2,'') pj_custom_dropdown_label2,
isnull(pj_custom_dropdown_label3,'') pj_custom_dropdown_label3,
isnull(pj_custom_dropdown_values1,'') pj_custom_dropdown_values1,
isnull(pj_custom_dropdown_values2,'') pj_custom_dropdown_values2,
isnull(pj_custom_dropdown_values3,'') pj_custom_dropdown_values3
from projects
where isnull(pj_enable_custom_dropdown1,0) = 1
or isnull(pj_enable_custom_dropdown2,0) = 1
or isnull(pj_enable_custom_dropdown3,0) = 1
2017-07-26 22:17:00 http://localhost:49412/search.aspx elapsed milliseconds:0000
2017-07-26 22:17:00 http://localhost:49412/search.aspx sql=
select isnull(pr_background_color,'#ffffff') [color], bg_id [id],
bg_short_desc [desc]
,isnull(rpt.us_username,'') [reported by]
,bg_reported_date [reported on]
,isnull(lu.us_username,'') [last updated by]
,bg_last_updated_date [last updated on],
isnull(pj_name,'') [project],
isnull(og_name,'') [organization],
isnull(ct_name,'') [category],
isnull(pr_name,'') [priority],
isnull(asg.us_username,'') [assigned to],
isnull(st_name,'') [status] from bugs
			left outer join users rpt on rpt.us_id = bg_reported_user
			left outer join users lu on lu.us_id = bg_last_updated_user
			left outer join users asg on asg.us_id = bg_assigned_to_user
			left outer join projects on pj_id = bg_project
			left outer join orgs on og_id = bg_org
			left outer join categories on ct_id = bg_category
			left outer join priorities on pr_id = bg_priority
			left outer join statuses on st_id = bg_status
			 where /* altered - both  */ (  bg_reported_user in (1) and bg_assigned_to_user in (0) and bg_category in (2) and bg_priority in (0) and bg_status in (0)   ) AND (  (bugs.bg_project not in (
					select pu_project
					from project_user_xref
					where pu_user = 1
					and pu_permission_level = 0))  ) order by bg_id desc
2017-07-26 22:17:00 http://localhost:49412/search.aspx elapsed milliseconds:0016
2017-07-26 22:17:09 http://localhost:49412/search.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = 'da9260a7-e70e-4cf8-a482-ed2ea59fc595';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = 'da9260a7-e70e-4cf8-a482-ed2ea59fc595'
and us_active = 1
2017-07-26 22:17:09 http://localhost:49412/search.aspx elapsed milliseconds:0003
2017-07-26 22:17:09 http://localhost:49412/search.aspx sql=

/* get related users 2 */
select  pj_id, us_id,
case when 0 = 1 then
    case when len(isnull(us_firstname,'') + ' ' + isnull(us_lastname,'')) > 1
	then isnull(us_firstname,'') + ' ' + isnull(us_lastname,'')
    else us_username end
else us_username end us_username,
isnull(us_email,'') us_email
into #temp
from projects, users
where pj_id not in
(
	select pu_project from project_user_xref
	where pu_permission_level = 0 and pu_user = 1
)





if 0 = 1 -- external
and 2 = 0 -- other orgs
begin
	select distinct a.us_id, a.us_username, a.us_email
	from #temp a
	inner join users b on a.us_id = b.us_id
	inner join orgs on b.us_org = og_id
	where og_external_user = 0 or b.us_org = 1
	order by a.us_username
end
else
begin

	select distinct us_id, us_username, us_email
		from #temp
		left outer join project_user_xref on pj_id = pu_project
		and us_id = pu_user
		where isnull(pu_permission_level,2) <> 0
		order by us_username
end

drop table #temp
2017-07-26 22:17:09 http://localhost:49412/search.aspx elapsed milliseconds:0014
2017-07-26 22:17:09 http://localhost:49412/search.aspx sql=

select
pj_id,
isnull(pj_enable_custom_dropdown1,0) pj_enable_custom_dropdown1,
isnull(pj_enable_custom_dropdown2,0) pj_enable_custom_dropdown2,
isnull(pj_enable_custom_dropdown3,0) pj_enable_custom_dropdown3,
isnull(pj_custom_dropdown_label1,'') pj_custom_dropdown_label1,
isnull(pj_custom_dropdown_label2,'') pj_custom_dropdown_label2,
isnull(pj_custom_dropdown_label3,'') pj_custom_dropdown_label3,
isnull(pj_custom_dropdown_values1,'') pj_custom_dropdown_values1,
isnull(pj_custom_dropdown_values2,'') pj_custom_dropdown_values2,
isnull(pj_custom_dropdown_values3,'') pj_custom_dropdown_values3
from projects
where isnull(pj_enable_custom_dropdown1,0) = 1
or isnull(pj_enable_custom_dropdown2,0) = 1
or isnull(pj_enable_custom_dropdown3,0) = 1
2017-07-26 22:17:09 http://localhost:49412/search.aspx elapsed milliseconds:0000
2017-07-26 22:17:09 http://localhost:49412/search.aspx sql=
select isnull(pr_background_color,'#ffffff') [color], bg_id [id],
bg_short_desc [desc]
,isnull(rpt.us_username,'') [reported by]
,bg_reported_date [reported on]
,isnull(lu.us_username,'') [last updated by]
,bg_last_updated_date [last updated on],
isnull(pj_name,'') [project],
isnull(og_name,'') [organization],
isnull(ct_name,'') [category],
isnull(pr_name,'') [priority],
isnull(asg.us_username,'') [assigned to],
isnull(st_name,'') [status] from bugs
			left outer join users rpt on rpt.us_id = bg_reported_user
			left outer join users lu on lu.us_id = bg_last_updated_user
			left outer join users asg on asg.us_id = bg_assigned_to_user
			left outer join projects on pj_id = bg_project
			left outer join orgs on og_id = bg_org
			left outer join categories on ct_id = bg_category
			left outer join priorities on pr_id = bg_priority
			left outer join statuses on st_id = bg_status
			 where /* altered - both  */ (  bg_reported_user in (1) and bg_assigned_to_user in (0) and bg_category in (0) and bg_priority in (0) and bg_status in (0)   ) AND (  (bugs.bg_project not in (
					select pu_project
					from project_user_xref
					where pu_user = 1
					and pu_permission_level = 0))  ) order by bg_id desc
2017-07-26 22:17:09 http://localhost:49412/search.aspx elapsed milliseconds:0015
2017-07-26 22:17:29 http://localhost:49412/search.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = 'da9260a7-e70e-4cf8-a482-ed2ea59fc595';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = 'da9260a7-e70e-4cf8-a482-ed2ea59fc595'
and us_active = 1
2017-07-26 22:17:29 http://localhost:49412/search.aspx elapsed milliseconds:0003
2017-07-26 22:17:29 http://localhost:49412/search.aspx sql=

/* get related users 2 */
select  pj_id, us_id,
case when 0 = 1 then
    case when len(isnull(us_firstname,'') + ' ' + isnull(us_lastname,'')) > 1
	then isnull(us_firstname,'') + ' ' + isnull(us_lastname,'')
    else us_username end
else us_username end us_username,
isnull(us_email,'') us_email
into #temp
from projects, users
where pj_id not in
(
	select pu_project from project_user_xref
	where pu_permission_level = 0 and pu_user = 1
)





if 0 = 1 -- external
and 2 = 0 -- other orgs
begin
	select distinct a.us_id, a.us_username, a.us_email
	from #temp a
	inner join users b on a.us_id = b.us_id
	inner join orgs on b.us_org = og_id
	where og_external_user = 0 or b.us_org = 1
	order by a.us_username
end
else
begin

	select distinct us_id, us_username, us_email
		from #temp
		left outer join project_user_xref on pj_id = pu_project
		and us_id = pu_user
		where isnull(pu_permission_level,2) <> 0
		order by us_username
end

drop table #temp
2017-07-26 22:17:29 http://localhost:49412/search.aspx elapsed milliseconds:0015
2017-07-26 22:17:29 http://localhost:49412/search.aspx sql=

select
pj_id,
isnull(pj_enable_custom_dropdown1,0) pj_enable_custom_dropdown1,
isnull(pj_enable_custom_dropdown2,0) pj_enable_custom_dropdown2,
isnull(pj_enable_custom_dropdown3,0) pj_enable_custom_dropdown3,
isnull(pj_custom_dropdown_label1,'') pj_custom_dropdown_label1,
isnull(pj_custom_dropdown_label2,'') pj_custom_dropdown_label2,
isnull(pj_custom_dropdown_label3,'') pj_custom_dropdown_label3,
isnull(pj_custom_dropdown_values1,'') pj_custom_dropdown_values1,
isnull(pj_custom_dropdown_values2,'') pj_custom_dropdown_values2,
isnull(pj_custom_dropdown_values3,'') pj_custom_dropdown_values3
from projects
where isnull(pj_enable_custom_dropdown1,0) = 1
or isnull(pj_enable_custom_dropdown2,0) = 1
or isnull(pj_enable_custom_dropdown3,0) = 1
2017-07-26 22:17:29 http://localhost:49412/search.aspx elapsed milliseconds:0000
2017-07-26 22:17:29 http://localhost:49412/search.aspx sql=
select isnull(pr_background_color,'#ffffff') [color], bg_id [id],
bg_short_desc [desc]
,isnull(rpt.us_username,'') [reported by]
,bg_reported_date [reported on]
,isnull(lu.us_username,'') [last updated by]
,bg_last_updated_date [last updated on],
isnull(pj_name,'') [project],
isnull(og_name,'') [organization],
isnull(ct_name,'') [category],
isnull(pr_name,'') [priority],
isnull(asg.us_username,'') [assigned to],
isnull(st_name,'') [status] from bugs
			left outer join users rpt on rpt.us_id = bg_reported_user
			left outer join users lu on lu.us_id = bg_last_updated_user
			left outer join users asg on asg.us_id = bg_assigned_to_user
			left outer join projects on pj_id = bg_project
			left outer join orgs on og_id = bg_org
			left outer join categories on ct_id = bg_category
			left outer join priorities on pr_id = bg_priority
			left outer join statuses on st_id = bg_status
			 where /* altered - both  */ (  bg_reported_user in (1) and bg_assigned_to_user in (0,1,4,5,2,6,9,8,3,7) and bg_category in (2) and bg_priority in (0,1,2,3) and bg_status in (0,1,2,3,4,5)   ) AND (  (bugs.bg_project not in (
					select pu_project
					from project_user_xref
					where pu_user = 1
					and pu_permission_level = 0))  ) order by bg_id desc
2017-07-26 22:17:29 http://localhost:49412/search.aspx elapsed milliseconds:0023
2017-07-26 22:17:38 http://localhost:49412/search.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = 'da9260a7-e70e-4cf8-a482-ed2ea59fc595';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = 'da9260a7-e70e-4cf8-a482-ed2ea59fc595'
and us_active = 1
2017-07-26 22:17:38 http://localhost:49412/search.aspx elapsed milliseconds:0001
2017-07-26 22:17:38 http://localhost:49412/search.aspx sql=

/* get related users 2 */
select  pj_id, us_id,
case when 0 = 1 then
    case when len(isnull(us_firstname,'') + ' ' + isnull(us_lastname,'')) > 1
	then isnull(us_firstname,'') + ' ' + isnull(us_lastname,'')
    else us_username end
else us_username end us_username,
isnull(us_email,'') us_email
into #temp
from projects, users
where pj_id not in
(
	select pu_project from project_user_xref
	where pu_permission_level = 0 and pu_user = 1
)





if 0 = 1 -- external
and 2 = 0 -- other orgs
begin
	select distinct a.us_id, a.us_username, a.us_email
	from #temp a
	inner join users b on a.us_id = b.us_id
	inner join orgs on b.us_org = og_id
	where og_external_user = 0 or b.us_org = 1
	order by a.us_username
end
else
begin

	select distinct us_id, us_username, us_email
		from #temp
		left outer join project_user_xref on pj_id = pu_project
		and us_id = pu_user
		where isnull(pu_permission_level,2) <> 0
		order by us_username
end

drop table #temp
2017-07-26 22:17:38 http://localhost:49412/search.aspx elapsed milliseconds:0014
2017-07-26 22:17:38 http://localhost:49412/search.aspx sql=

select
pj_id,
isnull(pj_enable_custom_dropdown1,0) pj_enable_custom_dropdown1,
isnull(pj_enable_custom_dropdown2,0) pj_enable_custom_dropdown2,
isnull(pj_enable_custom_dropdown3,0) pj_enable_custom_dropdown3,
isnull(pj_custom_dropdown_label1,'') pj_custom_dropdown_label1,
isnull(pj_custom_dropdown_label2,'') pj_custom_dropdown_label2,
isnull(pj_custom_dropdown_label3,'') pj_custom_dropdown_label3,
isnull(pj_custom_dropdown_values1,'') pj_custom_dropdown_values1,
isnull(pj_custom_dropdown_values2,'') pj_custom_dropdown_values2,
isnull(pj_custom_dropdown_values3,'') pj_custom_dropdown_values3
from projects
where isnull(pj_enable_custom_dropdown1,0) = 1
or isnull(pj_enable_custom_dropdown2,0) = 1
or isnull(pj_enable_custom_dropdown3,0) = 1
2017-07-26 22:17:38 http://localhost:49412/search.aspx elapsed milliseconds:0000
2017-07-26 22:17:38 http://localhost:49412/search.aspx sql=
select isnull(pr_background_color,'#ffffff') [color], bg_id [id],
bg_short_desc [desc]
,isnull(rpt.us_username,'') [reported by]
,bg_reported_date [reported on]
,isnull(lu.us_username,'') [last updated by]
,bg_last_updated_date [last updated on],
isnull(pj_name,'') [project],
isnull(og_name,'') [organization],
isnull(ct_name,'') [category],
isnull(pr_name,'') [priority],
isnull(asg.us_username,'') [assigned to],
isnull(st_name,'') [status] from bugs
			left outer join users rpt on rpt.us_id = bg_reported_user
			left outer join users lu on lu.us_id = bg_last_updated_user
			left outer join users asg on asg.us_id = bg_assigned_to_user
			left outer join projects on pj_id = bg_project
			left outer join orgs on og_id = bg_org
			left outer join categories on ct_id = bg_category
			left outer join priorities on pr_id = bg_priority
			left outer join statuses on st_id = bg_status
			 where /* altered - both  */ (  bg_reported_user in (1) and bg_assigned_to_user in (0,1,4,5,2,6,9,8,3,7) and bg_category in (2) and bg_priority in (1) and bg_status in (0,1,2,3,4,5)   ) AND (  (bugs.bg_project not in (
					select pu_project
					from project_user_xref
					where pu_user = 1
					and pu_permission_level = 0))  ) order by bg_id desc
2017-07-26 22:17:38 http://localhost:49412/search.aspx elapsed milliseconds:0020
2017-07-26 22:17:45 http://localhost:49412/search.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = 'da9260a7-e70e-4cf8-a482-ed2ea59fc595';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = 'da9260a7-e70e-4cf8-a482-ed2ea59fc595'
and us_active = 1
2017-07-26 22:17:45 http://localhost:49412/search.aspx elapsed milliseconds:0001
2017-07-26 22:17:45 http://localhost:49412/search.aspx sql=

/* get related users 2 */
select  pj_id, us_id,
case when 0 = 1 then
    case when len(isnull(us_firstname,'') + ' ' + isnull(us_lastname,'')) > 1
	then isnull(us_firstname,'') + ' ' + isnull(us_lastname,'')
    else us_username end
else us_username end us_username,
isnull(us_email,'') us_email
into #temp
from projects, users
where pj_id not in
(
	select pu_project from project_user_xref
	where pu_permission_level = 0 and pu_user = 1
)





if 0 = 1 -- external
and 2 = 0 -- other orgs
begin
	select distinct a.us_id, a.us_username, a.us_email
	from #temp a
	inner join users b on a.us_id = b.us_id
	inner join orgs on b.us_org = og_id
	where og_external_user = 0 or b.us_org = 1
	order by a.us_username
end
else
begin

	select distinct us_id, us_username, us_email
		from #temp
		left outer join project_user_xref on pj_id = pu_project
		and us_id = pu_user
		where isnull(pu_permission_level,2) <> 0
		order by us_username
end

drop table #temp
2017-07-26 22:17:45 http://localhost:49412/search.aspx elapsed milliseconds:0015
2017-07-26 22:17:45 http://localhost:49412/search.aspx sql=

select
pj_id,
isnull(pj_enable_custom_dropdown1,0) pj_enable_custom_dropdown1,
isnull(pj_enable_custom_dropdown2,0) pj_enable_custom_dropdown2,
isnull(pj_enable_custom_dropdown3,0) pj_enable_custom_dropdown3,
isnull(pj_custom_dropdown_label1,'') pj_custom_dropdown_label1,
isnull(pj_custom_dropdown_label2,'') pj_custom_dropdown_label2,
isnull(pj_custom_dropdown_label3,'') pj_custom_dropdown_label3,
isnull(pj_custom_dropdown_values1,'') pj_custom_dropdown_values1,
isnull(pj_custom_dropdown_values2,'') pj_custom_dropdown_values2,
isnull(pj_custom_dropdown_values3,'') pj_custom_dropdown_values3
from projects
where isnull(pj_enable_custom_dropdown1,0) = 1
or isnull(pj_enable_custom_dropdown2,0) = 1
or isnull(pj_enable_custom_dropdown3,0) = 1
2017-07-26 22:17:45 http://localhost:49412/search.aspx elapsed milliseconds:0000
2017-07-26 22:17:45 http://localhost:49412/search.aspx sql=
select isnull(pr_background_color,'#ffffff') [color], bg_id [id],
bg_short_desc [desc]
,isnull(rpt.us_username,'') [reported by]
,bg_reported_date [reported on]
,isnull(lu.us_username,'') [last updated by]
,bg_last_updated_date [last updated on],
isnull(pj_name,'') [project],
isnull(og_name,'') [organization],
isnull(ct_name,'') [category],
isnull(pr_name,'') [priority],
isnull(asg.us_username,'') [assigned to],
isnull(st_name,'') [status] from bugs
			left outer join users rpt on rpt.us_id = bg_reported_user
			left outer join users lu on lu.us_id = bg_last_updated_user
			left outer join users asg on asg.us_id = bg_assigned_to_user
			left outer join projects on pj_id = bg_project
			left outer join orgs on og_id = bg_org
			left outer join categories on ct_id = bg_category
			left outer join priorities on pr_id = bg_priority
			left outer join statuses on st_id = bg_status
			 where /* altered - both  */ (  bg_reported_user in (1) and bg_assigned_to_user in (2) and bg_category in (2) and bg_priority in (1) and bg_status in (0,1,2,3,4,5)   ) AND (  (bugs.bg_project not in (
					select pu_project
					from project_user_xref
					where pu_user = 1
					and pu_permission_level = 0))  ) order by bg_id desc
2017-07-26 22:17:45 http://localhost:49412/search.aspx elapsed milliseconds:0018
2017-07-26 22:17:51 http://localhost:49412/search.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = 'da9260a7-e70e-4cf8-a482-ed2ea59fc595';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = 'da9260a7-e70e-4cf8-a482-ed2ea59fc595'
and us_active = 1
2017-07-26 22:17:51 http://localhost:49412/search.aspx elapsed milliseconds:0001
2017-07-26 22:17:51 http://localhost:49412/search.aspx sql=

/* get related users 2 */
select  pj_id, us_id,
case when 0 = 1 then
    case when len(isnull(us_firstname,'') + ' ' + isnull(us_lastname,'')) > 1
	then isnull(us_firstname,'') + ' ' + isnull(us_lastname,'')
    else us_username end
else us_username end us_username,
isnull(us_email,'') us_email
into #temp
from projects, users
where pj_id not in
(
	select pu_project from project_user_xref
	where pu_permission_level = 0 and pu_user = 1
)





if 0 = 1 -- external
and 2 = 0 -- other orgs
begin
	select distinct a.us_id, a.us_username, a.us_email
	from #temp a
	inner join users b on a.us_id = b.us_id
	inner join orgs on b.us_org = og_id
	where og_external_user = 0 or b.us_org = 1
	order by a.us_username
end
else
begin

	select distinct us_id, us_username, us_email
		from #temp
		left outer join project_user_xref on pj_id = pu_project
		and us_id = pu_user
		where isnull(pu_permission_level,2) <> 0
		order by us_username
end

drop table #temp
2017-07-26 22:17:51 http://localhost:49412/search.aspx elapsed milliseconds:0015
2017-07-26 22:17:51 http://localhost:49412/search.aspx sql=

select
pj_id,
isnull(pj_enable_custom_dropdown1,0) pj_enable_custom_dropdown1,
isnull(pj_enable_custom_dropdown2,0) pj_enable_custom_dropdown2,
isnull(pj_enable_custom_dropdown3,0) pj_enable_custom_dropdown3,
isnull(pj_custom_dropdown_label1,'') pj_custom_dropdown_label1,
isnull(pj_custom_dropdown_label2,'') pj_custom_dropdown_label2,
isnull(pj_custom_dropdown_label3,'') pj_custom_dropdown_label3,
isnull(pj_custom_dropdown_values1,'') pj_custom_dropdown_values1,
isnull(pj_custom_dropdown_values2,'') pj_custom_dropdown_values2,
isnull(pj_custom_dropdown_values3,'') pj_custom_dropdown_values3
from projects
where isnull(pj_enable_custom_dropdown1,0) = 1
or isnull(pj_enable_custom_dropdown2,0) = 1
or isnull(pj_enable_custom_dropdown3,0) = 1
2017-07-26 22:17:51 http://localhost:49412/search.aspx elapsed milliseconds:0000
2017-07-26 22:17:51 http://localhost:49412/search.aspx sql=
select isnull(pr_background_color,'#ffffff') [color], bg_id [id],
bg_short_desc [desc]
,isnull(rpt.us_username,'') [reported by]
,bg_reported_date [reported on]
,isnull(lu.us_username,'') [last updated by]
,bg_last_updated_date [last updated on],
isnull(pj_name,'') [project],
isnull(og_name,'') [organization],
isnull(ct_name,'') [category],
isnull(pr_name,'') [priority],
isnull(asg.us_username,'') [assigned to],
isnull(st_name,'') [status] from bugs
			left outer join users rpt on rpt.us_id = bg_reported_user
			left outer join users lu on lu.us_id = bg_last_updated_user
			left outer join users asg on asg.us_id = bg_assigned_to_user
			left outer join projects on pj_id = bg_project
			left outer join orgs on og_id = bg_org
			left outer join categories on ct_id = bg_category
			left outer join priorities on pr_id = bg_priority
			left outer join statuses on st_id = bg_status
			 where /* altered - both  */ (  bg_reported_user in (1) and bg_assigned_to_user in (2) and bg_category in (2) and bg_priority in (1) and bg_status in (1)   ) AND (  (bugs.bg_project not in (
					select pu_project
					from project_user_xref
					where pu_user = 1
					and pu_permission_level = 0))  ) order by bg_id desc
2017-07-26 22:17:51 http://localhost:49412/search.aspx elapsed milliseconds:0019
2017-07-26 22:18:05 http://localhost:49412/search.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = 'da9260a7-e70e-4cf8-a482-ed2ea59fc595';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = 'da9260a7-e70e-4cf8-a482-ed2ea59fc595'
and us_active = 1
2017-07-26 22:18:05 http://localhost:49412/search.aspx elapsed milliseconds:0000
2017-07-26 22:18:05 http://localhost:49412/search.aspx sql=

/* get related users 2 */
select  pj_id, us_id,
case when 0 = 1 then
    case when len(isnull(us_firstname,'') + ' ' + isnull(us_lastname,'')) > 1
	then isnull(us_firstname,'') + ' ' + isnull(us_lastname,'')
    else us_username end
else us_username end us_username,
isnull(us_email,'') us_email
into #temp
from projects, users
where pj_id not in
(
	select pu_project from project_user_xref
	where pu_permission_level = 0 and pu_user = 1
)





if 0 = 1 -- external
and 2 = 0 -- other orgs
begin
	select distinct a.us_id, a.us_username, a.us_email
	from #temp a
	inner join users b on a.us_id = b.us_id
	inner join orgs on b.us_org = og_id
	where og_external_user = 0 or b.us_org = 1
	order by a.us_username
end
else
begin

	select distinct us_id, us_username, us_email
		from #temp
		left outer join project_user_xref on pj_id = pu_project
		and us_id = pu_user
		where isnull(pu_permission_level,2) <> 0
		order by us_username
end

drop table #temp
2017-07-26 22:18:05 http://localhost:49412/search.aspx elapsed milliseconds:0016
2017-07-26 22:18:05 http://localhost:49412/search.aspx sql=

select
pj_id,
isnull(pj_enable_custom_dropdown1,0) pj_enable_custom_dropdown1,
isnull(pj_enable_custom_dropdown2,0) pj_enable_custom_dropdown2,
isnull(pj_enable_custom_dropdown3,0) pj_enable_custom_dropdown3,
isnull(pj_custom_dropdown_label1,'') pj_custom_dropdown_label1,
isnull(pj_custom_dropdown_label2,'') pj_custom_dropdown_label2,
isnull(pj_custom_dropdown_label3,'') pj_custom_dropdown_label3,
isnull(pj_custom_dropdown_values1,'') pj_custom_dropdown_values1,
isnull(pj_custom_dropdown_values2,'') pj_custom_dropdown_values2,
isnull(pj_custom_dropdown_values3,'') pj_custom_dropdown_values3
from projects
where isnull(pj_enable_custom_dropdown1,0) = 1
or isnull(pj_enable_custom_dropdown2,0) = 1
or isnull(pj_enable_custom_dropdown3,0) = 1
2017-07-26 22:18:05 http://localhost:49412/search.aspx elapsed milliseconds:0000
2017-07-26 22:18:05 http://localhost:49412/search.aspx sql=
select isnull(pr_background_color,'#ffffff') [color], bg_id [id],
bg_short_desc [desc]
,isnull(rpt.us_username,'') [reported by]
,bg_reported_date [reported on]
,isnull(lu.us_username,'') [last updated by]
,bg_last_updated_date [last updated on],
isnull(pj_name,'') [project],
isnull(og_name,'') [organization],
isnull(ct_name,'') [category],
isnull(pr_name,'') [priority],
isnull(asg.us_username,'') [assigned to],
isnull(st_name,'') [status] from bugs
			left outer join users rpt on rpt.us_id = bg_reported_user
			left outer join users lu on lu.us_id = bg_last_updated_user
			left outer join users asg on asg.us_id = bg_assigned_to_user
			left outer join projects on pj_id = bg_project
			left outer join orgs on og_id = bg_org
			left outer join categories on ct_id = bg_category
			left outer join priorities on pr_id = bg_priority
			left outer join statuses on st_id = bg_status
			 where /* altered - both  */ (  bg_reported_user in (1) and bg_assigned_to_user in (2) and bg_org in (1) and bg_category in (2) and bg_priority in (1) and bg_status in (1)   ) AND (  (bugs.bg_project not in (
					select pu_project
					from project_user_xref
					where pu_user = 1
					and pu_permission_level = 0))  ) order by bg_id desc
2017-07-26 22:18:05 http://localhost:49412/search.aspx elapsed milliseconds:0015
2017-07-26 22:18:18 http://localhost:49412/search.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = 'da9260a7-e70e-4cf8-a482-ed2ea59fc595';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = 'da9260a7-e70e-4cf8-a482-ed2ea59fc595'
and us_active = 1
2017-07-26 22:18:18 http://localhost:49412/search.aspx elapsed milliseconds:0001
2017-07-26 22:18:18 http://localhost:49412/search.aspx sql=

/* get related users 2 */
select  pj_id, us_id,
case when 0 = 1 then
    case when len(isnull(us_firstname,'') + ' ' + isnull(us_lastname,'')) > 1
	then isnull(us_firstname,'') + ' ' + isnull(us_lastname,'')
    else us_username end
else us_username end us_username,
isnull(us_email,'') us_email
into #temp
from projects, users
where pj_id not in
(
	select pu_project from project_user_xref
	where pu_permission_level = 0 and pu_user = 1
)





if 0 = 1 -- external
and 2 = 0 -- other orgs
begin
	select distinct a.us_id, a.us_username, a.us_email
	from #temp a
	inner join users b on a.us_id = b.us_id
	inner join orgs on b.us_org = og_id
	where og_external_user = 0 or b.us_org = 1
	order by a.us_username
end
else
begin

	select distinct us_id, us_username, us_email
		from #temp
		left outer join project_user_xref on pj_id = pu_project
		and us_id = pu_user
		where isnull(pu_permission_level,2) <> 0
		order by us_username
end

drop table #temp
2017-07-26 22:18:18 http://localhost:49412/search.aspx elapsed milliseconds:0014
2017-07-26 22:18:18 http://localhost:49412/search.aspx sql=

select
pj_id,
isnull(pj_enable_custom_dropdown1,0) pj_enable_custom_dropdown1,
isnull(pj_enable_custom_dropdown2,0) pj_enable_custom_dropdown2,
isnull(pj_enable_custom_dropdown3,0) pj_enable_custom_dropdown3,
isnull(pj_custom_dropdown_label1,'') pj_custom_dropdown_label1,
isnull(pj_custom_dropdown_label2,'') pj_custom_dropdown_label2,
isnull(pj_custom_dropdown_label3,'') pj_custom_dropdown_label3,
isnull(pj_custom_dropdown_values1,'') pj_custom_dropdown_values1,
isnull(pj_custom_dropdown_values2,'') pj_custom_dropdown_values2,
isnull(pj_custom_dropdown_values3,'') pj_custom_dropdown_values3
from projects
where isnull(pj_enable_custom_dropdown1,0) = 1
or isnull(pj_enable_custom_dropdown2,0) = 1
or isnull(pj_enable_custom_dropdown3,0) = 1
2017-07-26 22:18:18 http://localhost:49412/search.aspx elapsed milliseconds:0000
2017-07-26 22:18:18 http://localhost:49412/search.aspx sql=
select isnull(pr_background_color,'#ffffff') [color], bg_id [id],
bg_short_desc [desc]
,isnull(rpt.us_username,'') [reported by]
,bg_reported_date [reported on]
,isnull(lu.us_username,'') [last updated by]
,bg_last_updated_date [last updated on],
isnull(pj_name,'') [project],
isnull(og_name,'') [organization],
isnull(ct_name,'') [category],
isnull(pr_name,'') [priority],
isnull(asg.us_username,'') [assigned to],
isnull(st_name,'') [status] from bugs
			left outer join users rpt on rpt.us_id = bg_reported_user
			left outer join users lu on lu.us_id = bg_last_updated_user
			left outer join users asg on asg.us_id = bg_assigned_to_user
			left outer join projects on pj_id = bg_project
			left outer join orgs on og_id = bg_org
			left outer join categories on ct_id = bg_category
			left outer join priorities on pr_id = bg_priority
			left outer join statuses on st_id = bg_status
			 where /* altered - both  */ (  bg_reported_user in (1) and bg_assigned_to_user in (2) and bg_project in (1) and bg_org in (1) and bg_category in (2) and bg_priority in (1) and bg_status in (1)   ) AND (  (bugs.bg_project not in (
					select pu_project
					from project_user_xref
					where pu_user = 1
					and pu_permission_level = 0))  ) order by bg_id desc
2017-07-26 22:18:18 http://localhost:49412/search.aspx elapsed milliseconds:0014
2017-07-26 22:26:59 http://localhost:49412/search.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = 'da9260a7-e70e-4cf8-a482-ed2ea59fc595';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = 'da9260a7-e70e-4cf8-a482-ed2ea59fc595'
and us_active = 1
2017-07-26 22:26:59 http://localhost:49412/search.aspx elapsed milliseconds:0000
2017-07-26 22:26:59 http://localhost:49412/search.aspx sql=

/* get related users 2 */
select  pj_id, us_id,
case when 0 = 1 then
    case when len(isnull(us_firstname,'') + ' ' + isnull(us_lastname,'')) > 1
	then isnull(us_firstname,'') + ' ' + isnull(us_lastname,'')
    else us_username end
else us_username end us_username,
isnull(us_email,'') us_email
into #temp
from projects, users
where pj_id not in
(
	select pu_project from project_user_xref
	where pu_permission_level = 0 and pu_user = 1
)





if 0 = 1 -- external
and 2 = 0 -- other orgs
begin
	select distinct a.us_id, a.us_username, a.us_email
	from #temp a
	inner join users b on a.us_id = b.us_id
	inner join orgs on b.us_org = og_id
	where og_external_user = 0 or b.us_org = 1
	order by a.us_username
end
else
begin

	select distinct us_id, us_username, us_email
		from #temp
		left outer join project_user_xref on pj_id = pu_project
		and us_id = pu_user
		where isnull(pu_permission_level,2) <> 0
		order by us_username
end

drop table #temp
2017-07-26 22:26:59 http://localhost:49412/search.aspx elapsed milliseconds:0013
2017-07-26 22:26:59 http://localhost:49412/search.aspx sql=
/* drop downs */ select pj_id, pj_name from projects order by pj_name; select og_id, og_name from orgs order by og_name;
	select ct_id, ct_name from categories order by ct_sort_seq, ct_name;
	select pr_id, pr_name from priorities order by pr_sort_seq, pr_name;
	select st_id, st_name from statuses order by st_sort_seq, st_name;
	select udf_id, udf_name from user_defined_attribute order by udf_sort_seq, udf_name
2017-07-26 22:26:59 http://localhost:49412/search.aspx elapsed milliseconds:0000
2017-07-26 22:26:59 http://localhost:49412/search.aspx sql=

select count(1)
from projects
where isnull(pj_enable_custom_dropdown1,0) = 1
or isnull(pj_enable_custom_dropdown2,0) = 1
or isnull(pj_enable_custom_dropdown3,0) = 1
2017-07-26 22:30:01 http://localhost:49412/search.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = 'da9260a7-e70e-4cf8-a482-ed2ea59fc595';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = 'da9260a7-e70e-4cf8-a482-ed2ea59fc595'
and us_active = 1
2017-07-26 22:30:01 http://localhost:49412/search.aspx elapsed milliseconds:0000
2017-07-26 22:30:01 http://localhost:49412/search.aspx sql=

/* get related users 2 */
select  pj_id, us_id,
case when 0 = 1 then
    case when len(isnull(us_firstname,'') + ' ' + isnull(us_lastname,'')) > 1
	then isnull(us_firstname,'') + ' ' + isnull(us_lastname,'')
    else us_username end
else us_username end us_username,
isnull(us_email,'') us_email
into #temp
from projects, users
where pj_id not in
(
	select pu_project from project_user_xref
	where pu_permission_level = 0 and pu_user = 1
)





if 0 = 1 -- external
and 2 = 0 -- other orgs
begin
	select distinct a.us_id, a.us_username, a.us_email
	from #temp a
	inner join users b on a.us_id = b.us_id
	inner join orgs on b.us_org = og_id
	where og_external_user = 0 or b.us_org = 1
	order by a.us_username
end
else
begin

	select distinct us_id, us_username, us_email
		from #temp
		left outer join project_user_xref on pj_id = pu_project
		and us_id = pu_user
		where isnull(pu_permission_level,2) <> 0
		order by us_username
end

drop table #temp
2017-07-26 22:30:01 http://localhost:49412/search.aspx elapsed milliseconds:0015
2017-07-26 22:30:01 http://localhost:49412/search.aspx sql=
/* drop downs */ select pj_id, pj_name from projects order by pj_name; select og_id, og_name from orgs order by og_name;
	select ct_id, ct_name from categories order by ct_sort_seq, ct_name;
	select pr_id, pr_name from priorities order by pr_sort_seq, pr_name;
	select st_id, st_name from statuses order by st_sort_seq, st_name;
	select udf_id, udf_name from user_defined_attribute order by udf_sort_seq, udf_name
2017-07-26 22:30:01 http://localhost:49412/search.aspx elapsed milliseconds:0000
2017-07-26 22:30:01 http://localhost:49412/search.aspx sql=

select count(1)
from projects
where isnull(pj_enable_custom_dropdown1,0) = 1
or isnull(pj_enable_custom_dropdown2,0) = 1
or isnull(pj_enable_custom_dropdown3,0) = 1
2017-07-26 22:35:02 http://localhost:49412/search.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = 'da9260a7-e70e-4cf8-a482-ed2ea59fc595';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = 'da9260a7-e70e-4cf8-a482-ed2ea59fc595'
and us_active = 1
2017-07-26 22:35:02 http://localhost:49412/search.aspx elapsed milliseconds:0000
2017-07-26 22:35:02 http://localhost:49412/search.aspx sql=

/* get related users 2 */
select  pj_id, us_id,
case when 0 = 1 then
    case when len(isnull(us_firstname,'') + ' ' + isnull(us_lastname,'')) > 1
	then isnull(us_firstname,'') + ' ' + isnull(us_lastname,'')
    else us_username end
else us_username end us_username,
isnull(us_email,'') us_email
into #temp
from projects, users
where pj_id not in
(
	select pu_project from project_user_xref
	where pu_permission_level = 0 and pu_user = 1
)





if 0 = 1 -- external
and 2 = 0 -- other orgs
begin
	select distinct a.us_id, a.us_username, a.us_email
	from #temp a
	inner join users b on a.us_id = b.us_id
	inner join orgs on b.us_org = og_id
	where og_external_user = 0 or b.us_org = 1
	order by a.us_username
end
else
begin

	select distinct us_id, us_username, us_email
		from #temp
		left outer join project_user_xref on pj_id = pu_project
		and us_id = pu_user
		where isnull(pu_permission_level,2) <> 0
		order by us_username
end

drop table #temp
2017-07-26 22:35:02 http://localhost:49412/search.aspx elapsed milliseconds:0014
2017-07-26 22:35:02 http://localhost:49412/search.aspx sql=
/* drop downs */ select pj_id, pj_name from projects order by pj_name; select og_id, og_name from orgs order by og_name;
	select ct_id, ct_name from categories order by ct_sort_seq, ct_name;
	select pr_id, pr_name from priorities order by pr_sort_seq, pr_name;
	select st_id, st_name from statuses order by st_sort_seq, st_name;
	select udf_id, udf_name from user_defined_attribute order by udf_sort_seq, udf_name
2017-07-26 22:35:02 http://localhost:49412/search.aspx elapsed milliseconds:0000
2017-07-26 22:35:02 http://localhost:49412/search.aspx sql=

select count(1)
from projects
where isnull(pj_enable_custom_dropdown1,0) = 1
or isnull(pj_enable_custom_dropdown2,0) = 1
or isnull(pj_enable_custom_dropdown3,0) = 1
2017-07-26 22:36:18 http://localhost:49412/search.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = 'da9260a7-e70e-4cf8-a482-ed2ea59fc595';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = 'da9260a7-e70e-4cf8-a482-ed2ea59fc595'
and us_active = 1
2017-07-26 22:36:18 http://localhost:49412/search.aspx elapsed milliseconds:0002
2017-07-26 22:36:18 http://localhost:49412/search.aspx sql=

/* get related users 2 */
select  pj_id, us_id,
case when 0 = 1 then
    case when len(isnull(us_firstname,'') + ' ' + isnull(us_lastname,'')) > 1
	then isnull(us_firstname,'') + ' ' + isnull(us_lastname,'')
    else us_username end
else us_username end us_username,
isnull(us_email,'') us_email
into #temp
from projects, users
where pj_id not in
(
	select pu_project from project_user_xref
	where pu_permission_level = 0 and pu_user = 1
)





if 0 = 1 -- external
and 2 = 0 -- other orgs
begin
	select distinct a.us_id, a.us_username, a.us_email
	from #temp a
	inner join users b on a.us_id = b.us_id
	inner join orgs on b.us_org = og_id
	where og_external_user = 0 or b.us_org = 1
	order by a.us_username
end
else
begin

	select distinct us_id, us_username, us_email
		from #temp
		left outer join project_user_xref on pj_id = pu_project
		and us_id = pu_user
		where isnull(pu_permission_level,2) <> 0
		order by us_username
end

drop table #temp
2017-07-26 22:36:18 http://localhost:49412/search.aspx elapsed milliseconds:0016
2017-07-26 22:36:18 http://localhost:49412/search.aspx sql=

select
pj_id,
isnull(pj_enable_custom_dropdown1,0) pj_enable_custom_dropdown1,
isnull(pj_enable_custom_dropdown2,0) pj_enable_custom_dropdown2,
isnull(pj_enable_custom_dropdown3,0) pj_enable_custom_dropdown3,
isnull(pj_custom_dropdown_label1,'') pj_custom_dropdown_label1,
isnull(pj_custom_dropdown_label2,'') pj_custom_dropdown_label2,
isnull(pj_custom_dropdown_label3,'') pj_custom_dropdown_label3,
isnull(pj_custom_dropdown_values1,'') pj_custom_dropdown_values1,
isnull(pj_custom_dropdown_values2,'') pj_custom_dropdown_values2,
isnull(pj_custom_dropdown_values3,'') pj_custom_dropdown_values3
from projects
where isnull(pj_enable_custom_dropdown1,0) = 1
or isnull(pj_enable_custom_dropdown2,0) = 1
or isnull(pj_enable_custom_dropdown3,0) = 1
2017-07-26 22:36:18 http://localhost:49412/search.aspx elapsed milliseconds:0000
2017-07-26 22:36:18 http://localhost:49412/search.aspx sql=
select isnull(pr_background_color,'#ffffff') [color], bg_id [id],
bg_short_desc [desc]
,isnull(rpt.us_username,'') [reported by]
,bg_reported_date [reported on]
,isnull(lu.us_username,'') [last updated by]
,bg_last_updated_date [last updated on],
isnull(pj_name,'') [project],
isnull(og_name,'') [organization],
isnull(ct_name,'') [category],
isnull(pr_name,'') [priority],
isnull(asg.us_username,'') [assigned to],
isnull(st_name,'') [status] from bugs
			left outer join users rpt on rpt.us_id = bg_reported_user
			left outer join users lu on lu.us_id = bg_last_updated_user
			left outer join users asg on asg.us_id = bg_assigned_to_user
			left outer join projects on pj_id = bg_project
			left outer join orgs on og_id = bg_org
			left outer join categories on ct_id = bg_category
			left outer join priorities on pr_id = bg_priority
			left outer join statuses on st_id = bg_status
			 where /* altered - both  */ (   bg_id in (select bp_bug from bug_posts where bp_type in ('comment','received','sent') and bp_date > '20170701 23:59:59')
and  bg_reported_date >= '20170704'
and  bg_reported_date <= '20170712 23:59:59'
and  bg_last_updated_date >= '20170718'
and  bg_last_updated_date <= '20170731 23:59:59'
  ) AND (  (bugs.bg_project not in (
					select pu_project
					from project_user_xref
					where pu_user = 1
					and pu_permission_level = 0))  ) order by bg_id desc
2017-07-26 22:36:18 http://localhost:49412/search.aspx elapsed milliseconds:0033
2017-07-26 22:38:10 http://localhost:49412/edit_bug.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = 'da9260a7-e70e-4cf8-a482-ed2ea59fc595';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = 'da9260a7-e70e-4cf8-a482-ed2ea59fc595'
and us_active = 1
2017-07-26 22:38:10 http://localhost:49412/edit_bug.aspx elapsed milliseconds:0000
2017-07-26 22:38:10 http://localhost:49412/edit_bug.aspx sql=
/* drop downs */ select pj_id, pj_name
		from projects
		left outer join project_user_xref on pj_id = pu_project
		and pu_user = 1
		where pj_active = 1
		and isnull(pu_permission_level,2) not in (0, 1)
		order by pj_name;
select og_id, og_name from orgs where og_active = 1 order by og_name;
select ct_id, ct_name from categories order by ct_sort_seq, ct_name;
select pr_id, pr_name from priorities order by pr_sort_seq, pr_name;
select st_id, st_name from statuses order by st_sort_seq, st_name;
select udf_id, udf_name from user_defined_attribute order by udf_sort_seq, udf_name;
2017-07-26 22:38:10 http://localhost:49412/edit_bug.aspx elapsed milliseconds:0007
2017-07-26 22:38:10 http://localhost:49412/edit_bug.aspx sql=

select top 1 pj_id from projects where pj_default = 1 order by pj_name;
select top 1 ct_id from categories where ct_default = 1 order by ct_name;
select top 1 pr_id from priorities where pr_default = 1 order by pr_name;
select top 1 st_id from statuses where st_default = 1 order by st_name;
select top 1 udf_id from user_defined_attribute where udf_default = 1 order by udf_name;
2017-07-26 22:38:10 http://localhost:49412/edit_bug.aspx elapsed milliseconds:0007
2017-07-26 22:38:10 http://localhost:49412/edit_bug.aspx sql=

/* users this project */ select us_id, case when 0 = 1 then us_lastname + ', ' + us_firstname else us_username end us_username
from users
inner join orgs on us_org = og_id
where us_active = 1
and og_can_be_assigned_to = 1
and (2 <> 0 or 1 = og_id or (og_external_user = 0 and 0 = 1))
and us_id not in
	(select pu_user from project_user_xref
		where pu_project = 0
		and pu_permission_level = 0)
order by us_username; 
2017-07-26 22:38:10 http://localhost:49412/edit_bug.aspx elapsed milliseconds:0008
2017-07-26 22:38:16 http://localhost:49412/bugs.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = 'da9260a7-e70e-4cf8-a482-ed2ea59fc595';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = 'da9260a7-e70e-4cf8-a482-ed2ea59fc595'
and us_active = 1
2017-07-26 22:38:16 http://localhost:49412/bugs.aspx elapsed milliseconds:0002
2017-07-26 22:38:16 http://localhost:49412/bugs.aspx sql=
/* query dropdown */
select qu_id, qu_desc
from queries
where (isnull(qu_user,0) = 0 and isnull(qu_org,0) = 0)
or isnull(qu_user,0) = 1
or isnull(qu_org,0) = 1
order by qu_desc
2017-07-26 22:38:16 http://localhost:49412/bugs.aspx elapsed milliseconds:0000
2017-07-26 22:38:16 http://localhost:49412/bugs.aspx sql=
select qu_sql from queries where qu_id = 1
2017-07-26 22:38:16 http://localhost:49412/bugs.aspx sql=
select isnull(pr_background_color,'#ffffff'), bg_id [id], isnull(bu_flag,0) [$FLAG], 
 bg_short_desc [desc], isnull(pj_name,'') [project], isnull(og_name,'') [organization], isnull(ct_name,'') [category], rpt.us_username [reported by],
 bg_reported_date [reported on], isnull(pr_name,'') [priority], isnull(asg.us_username,'') [assigned to],
 isnull(st_name,'') [status], isnull(lu.us_username,'') [last updated by], bg_last_updated_date [last updated on]
 from bugs 
 left outer join bug_user on bu_bug = bg_id and bu_user = 1 
 left outer join users rpt on rpt.us_id = bg_reported_user
 left outer join users asg on asg.us_id = bg_assigned_to_user
 left outer join users lu on lu.us_id = bg_last_updated_user
 left outer join projects on pj_id = bg_project
 left outer join orgs on og_id = bg_org
 left outer join categories on ct_id = bg_category
 left outer join priorities on pr_id = bg_priority
 left outer join statuses on st_id = bg_status
  /* altered - just order by  */ WHERE  (bugs.bg_project not in (
					select pu_project
					from project_user_xref
					where pu_user = 1
					and pu_permission_level = 0)) order by bg_id desc
2017-07-26 22:38:16 http://localhost:49412/bugs.aspx elapsed milliseconds:0001
2017-07-26 22:38:26 http://localhost:49412/edit_bug.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = 'da9260a7-e70e-4cf8-a482-ed2ea59fc595';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = 'da9260a7-e70e-4cf8-a482-ed2ea59fc595'
and us_active = 1
2017-07-26 22:38:26 http://localhost:49412/edit_bug.aspx elapsed milliseconds:0002
2017-07-26 22:38:26 http://localhost:49412/edit_bug.aspx sql=
/* drop downs */ select pj_id, pj_name
		from projects
		left outer join project_user_xref on pj_id = pu_project
		and pu_user = 1
		where pj_active = 1
		and isnull(pu_permission_level,2) not in (0, 1)
		order by pj_name;
select og_id, og_name from orgs where og_active = 1 order by og_name;
select ct_id, ct_name from categories order by ct_sort_seq, ct_name;
select pr_id, pr_name from priorities order by pr_sort_seq, pr_name;
select st_id, st_name from statuses order by st_sort_seq, st_name;
select udf_id, udf_name from user_defined_attribute order by udf_sort_seq, udf_name;
2017-07-26 22:38:26 http://localhost:49412/edit_bug.aspx elapsed milliseconds:0001
2017-07-26 22:38:26 http://localhost:49412/edit_bug.aspx sql=

select top 1 pj_id from projects where pj_default = 1 order by pj_name;
select top 1 ct_id from categories where ct_default = 1 order by ct_name;
select top 1 pr_id from priorities where pr_default = 1 order by pr_name;
select top 1 st_id from statuses where st_default = 1 order by st_name;
select top 1 udf_id from user_defined_attribute where udf_default = 1 order by udf_name;
2017-07-26 22:38:26 http://localhost:49412/edit_bug.aspx elapsed milliseconds:0000
2017-07-26 22:38:26 http://localhost:49412/edit_bug.aspx sql=

/* users this project */ select us_id, case when 0 = 1 then us_lastname + ', ' + us_firstname else us_username end us_username
from users
inner join orgs on us_org = og_id
where us_active = 1
and og_can_be_assigned_to = 1
and (2 <> 0 or 1 = og_id or (og_external_user = 0 and 0 = 1))
and us_id not in
	(select pu_user from project_user_xref
		where pu_project = 0
		and pu_permission_level = 0)
order by us_username; 
2017-07-26 22:38:26 http://localhost:49412/edit_bug.aspx elapsed milliseconds:0000
2017-07-26 22:38:34 http://localhost:49412/bugs.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = 'da9260a7-e70e-4cf8-a482-ed2ea59fc595';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = 'da9260a7-e70e-4cf8-a482-ed2ea59fc595'
and us_active = 1
2017-07-26 22:38:34 http://localhost:49412/bugs.aspx elapsed milliseconds:0002
2017-07-26 22:38:34 http://localhost:49412/bugs.aspx sql=
/* query dropdown */
select qu_id, qu_desc
from queries
where (isnull(qu_user,0) = 0 and isnull(qu_org,0) = 0)
or isnull(qu_user,0) = 1
or isnull(qu_org,0) = 1
order by qu_desc
2017-07-26 22:38:34 http://localhost:49412/bugs.aspx elapsed milliseconds:0002
2017-07-26 22:38:34 http://localhost:49412/bugs.aspx sql=
select qu_sql from queries where qu_id = 1
2017-07-26 22:38:34 http://localhost:49412/bugs.aspx sql=
select isnull(pr_background_color,'#ffffff'), bg_id [id], isnull(bu_flag,0) [$FLAG], 
 bg_short_desc [desc], isnull(pj_name,'') [project], isnull(og_name,'') [organization], isnull(ct_name,'') [category], rpt.us_username [reported by],
 bg_reported_date [reported on], isnull(pr_name,'') [priority], isnull(asg.us_username,'') [assigned to],
 isnull(st_name,'') [status], isnull(lu.us_username,'') [last updated by], bg_last_updated_date [last updated on]
 from bugs 
 left outer join bug_user on bu_bug = bg_id and bu_user = 1 
 left outer join users rpt on rpt.us_id = bg_reported_user
 left outer join users asg on asg.us_id = bg_assigned_to_user
 left outer join users lu on lu.us_id = bg_last_updated_user
 left outer join projects on pj_id = bg_project
 left outer join orgs on og_id = bg_org
 left outer join categories on ct_id = bg_category
 left outer join priorities on pr_id = bg_priority
 left outer join statuses on st_id = bg_status
  /* altered - just order by  */ WHERE  (bugs.bg_project not in (
					select pu_project
					from project_user_xref
					where pu_user = 1
					and pu_permission_level = 0)) order by bg_id desc
2017-07-26 22:38:34 http://localhost:49412/bugs.aspx elapsed milliseconds:0001
2017-07-26 22:39:14 http://localhost:49412/search.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = 'da9260a7-e70e-4cf8-a482-ed2ea59fc595';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = 'da9260a7-e70e-4cf8-a482-ed2ea59fc595'
and us_active = 1
2017-07-26 22:39:14 http://localhost:49412/search.aspx elapsed milliseconds:0001
2017-07-26 22:39:14 http://localhost:49412/search.aspx sql=

/* get related users 2 */
select  pj_id, us_id,
case when 0 = 1 then
    case when len(isnull(us_firstname,'') + ' ' + isnull(us_lastname,'')) > 1
	then isnull(us_firstname,'') + ' ' + isnull(us_lastname,'')
    else us_username end
else us_username end us_username,
isnull(us_email,'') us_email
into #temp
from projects, users
where pj_id not in
(
	select pu_project from project_user_xref
	where pu_permission_level = 0 and pu_user = 1
)





if 0 = 1 -- external
and 2 = 0 -- other orgs
begin
	select distinct a.us_id, a.us_username, a.us_email
	from #temp a
	inner join users b on a.us_id = b.us_id
	inner join orgs on b.us_org = og_id
	where og_external_user = 0 or b.us_org = 1
	order by a.us_username
end
else
begin

	select distinct us_id, us_username, us_email
		from #temp
		left outer join project_user_xref on pj_id = pu_project
		and us_id = pu_user
		where isnull(pu_permission_level,2) <> 0
		order by us_username
end

drop table #temp
2017-07-26 22:39:14 http://localhost:49412/search.aspx elapsed milliseconds:0020
2017-07-26 22:39:14 http://localhost:49412/search.aspx sql=
/* drop downs */ select pj_id, pj_name from projects order by pj_name; select og_id, og_name from orgs order by og_name;
	select ct_id, ct_name from categories order by ct_sort_seq, ct_name;
	select pr_id, pr_name from priorities order by pr_sort_seq, pr_name;
	select st_id, st_name from statuses order by st_sort_seq, st_name;
	select udf_id, udf_name from user_defined_attribute order by udf_sort_seq, udf_name
2017-07-26 22:39:14 http://localhost:49412/search.aspx elapsed milliseconds:0002
2017-07-26 22:39:14 http://localhost:49412/search.aspx sql=

select count(1)
from projects
where isnull(pj_enable_custom_dropdown1,0) = 1
or isnull(pj_enable_custom_dropdown2,0) = 1
or isnull(pj_enable_custom_dropdown3,0) = 1
2017-07-26 23:19:31  caught exception in util.set_context:Request is not available in this context
2017-07-26 23:19:31  threadproc_votes
2017-07-26 23:19:31  sql=

if exists (select * from dbo.sysobjects where id = object_id(N'[votes_view]'))
drop view [votes_view]
2017-07-26 23:19:31  started creating Lucene index using folder C:\Users\Oisiktekiner\Documents\Visual Studio 2017\Projects\btnetnew\btnetnew\App_Data\lucene_index
2017-07-26 23:19:31  sql=

create view votes_view as
select bu_bug as vote_bug, sum(bu_vote) as vote_total
from bug_user
group by bu_bug
having sum(bu_vote) > 0
2017-07-26 23:19:31  sql=

select bu_bug, count(1)
from bug_user 
where bu_vote = 1
group by bu_bug
2017-07-26 23:19:31  elapsed milliseconds:0027
2017-07-26 23:19:31  sql=

/* get searchable cols */					
select sc.name
from syscolumns sc
inner join systypes st on st.xusertype = sc.xusertype
inner join sysobjects so on sc.id = so.id
where so.name = 'bugs'
and st.[name] <> 'sysname'
and sc.name not in ('rowguid',
'bg_id',
'bg_short_desc',
'bg_reported_user',
'bg_reported_date',
'bg_project',
'bg_org',
'bg_category',
'bg_priority',
'bg_status',
'bg_assigned_to_user',
'bg_last_updated_user',
'bg_last_updated_date',
'bg_user_defined_attribute',
'bg_project_custom_dropdown_value1',
'bg_project_custom_dropdown_value2',
'bg_project_custom_dropdown_value3',
'bg_tags')
and st.[name] in ('nvarchar','varchar')
and sc.length > 30
2017-07-26 23:19:31  elapsed milliseconds:0000
2017-07-26 23:19:31  sql=

select bg_id, 	

isnull(bg_tags,'') bg_tags,
bg_short_desc
from bugs
2017-07-26 23:19:31  elapsed milliseconds:0000
2017-07-26 23:19:31 http://localhost:49412/default.aspx sql=
select count(1) from users
2017-07-26 23:19:31  sql=

select bp_bug, bp_id, 
isnull(bp_comment_search,bp_comment) [text] 
from bug_posts 
where bp_type <> 'update'
and bp_hidden_from_external_users = 0
2017-07-26 23:19:31  elapsed milliseconds:0000
2017-07-26 23:19:31  done creating Lucene index
2017-07-26 23:19:36 http://localhost:49412/default.aspx sql=
select count(1) from users
2017-07-26 23:19:36 http://localhost:49412/default.aspx sql=

select us_username, us_id, us_password, isnull(us_salt,0) us_salt, us_active
from users
where us_username = N'admin'
2017-07-26 23:19:36 http://localhost:49412/default.aspx elapsed milliseconds:0000
2017-07-26 23:19:36 http://localhost:49412/default.aspx sql=
update users set us_most_recent_login_datetime = getdate() where us_id = 1
2017-07-26 23:19:36 http://localhost:49412/default.aspx sql=
select us_id from users where us_username = N'admin'
2017-07-26 23:19:36 http://localhost:49412/default.aspx elapsed milliseconds:0000
2017-07-26 23:19:36 http://localhost:49412/default.aspx guid=56812d22-4b34-4dc9-995a-d4a4d44f546a
2017-07-26 23:19:36 http://localhost:49412/default.aspx sql=
insert into sessions (se_id, se_user) values('56812d22-4b34-4dc9-995a-d4a4d44f546a', 1)
2017-07-26 23:19:36 http://localhost:49412/default.aspx AppPath:
2017-07-26 23:19:36 http://localhost:49412/bugs.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '56812d22-4b34-4dc9-995a-d4a4d44f546a';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '56812d22-4b34-4dc9-995a-d4a4d44f546a'
and us_active = 1
2017-07-26 23:19:37 http://localhost:49412/bugs.aspx elapsed milliseconds:0013
2017-07-26 23:19:37 http://localhost:49412/bugs.aspx sql=

/* custom columns */ select sc.name, st.[name] [datatype], 
case when st.[name] = 'nvarchar' or st.[name] = 'nchar' then sc.length/2 else sc.length end as [length], 
sc.xprec, sc.xscale, sc.isnullable,
mm.text [default value], 
dflts.name [default name], 
isnull(ccm_dropdown_type,'') [dropdown type],
isnull(ccm_dropdown_vals,'') [vals],
isnull(ccm_sort_seq, sc.colorder) [column order],
sc.colorder
from syscolumns sc
inner join systypes st on st.xusertype = sc.xusertype
inner join sysobjects so on sc.id = so.id
left outer join syscomments mm on sc.cdefault = mm.id
left outer join custom_col_metadata on ccm_colorder = sc.colorder
left outer join sysobjects dflts on dflts.id = mm.id
where so.name = 'bugs'
and st.[name] <> 'sysname'
and sc.name not in ('rowguid',
'bg_id',
'bg_short_desc',
'bg_reported_user',
'bg_reported_date',
'bg_project',
'bg_org',
'bg_category',
'bg_priority',
'bg_status',
'bg_assigned_to_user',
'bg_last_updated_user',
'bg_last_updated_date',
'bg_user_defined_attribute',
'bg_project_custom_dropdown_value1',
'bg_project_custom_dropdown_value2',
'bg_project_custom_dropdown_value3',
'bg_tags')
order by sc.id, isnull(ccm_sort_seq,sc.colorder)
2017-07-26 23:19:37 http://localhost:49412/bugs.aspx elapsed milliseconds:0000
2017-07-26 23:19:37 http://localhost:49412/bugs.aspx sql=
/* query dropdown */
select qu_id, qu_desc
from queries
where (isnull(qu_user,0) = 0 and isnull(qu_org,0) = 0)
or isnull(qu_user,0) = 1
or isnull(qu_org,0) = 1
order by qu_desc
2017-07-26 23:19:37 http://localhost:49412/bugs.aspx elapsed milliseconds:0000
2017-07-26 23:19:37 http://localhost:49412/bugs.aspx sql=
select qu_id, qu_sql from queries where qu_id in
			(select us_default_query from users where us_id = 1)
2017-07-26 23:19:37 http://localhost:49412/bugs.aspx elapsed milliseconds:0000
2017-07-26 23:19:37 http://localhost:49412/bugs.aspx sql=
select isnull(pr_background_color,'#ffffff'), bg_id [id], isnull(bu_flag,0) [$FLAG], 
 bg_short_desc [desc], isnull(pj_name,'') [project], isnull(og_name,'') [organization], isnull(ct_name,'') [category], rpt.us_username [reported by],
 bg_reported_date [reported on], isnull(pr_name,'') [priority], isnull(asg.us_username,'') [assigned to],
 isnull(st_name,'') [status], isnull(lu.us_username,'') [last updated by], bg_last_updated_date [last updated on]
 from bugs 
 left outer join bug_user on bu_bug = bg_id and bu_user = 1 
 left outer join users rpt on rpt.us_id = bg_reported_user
 left outer join users asg on asg.us_id = bg_assigned_to_user
 left outer join users lu on lu.us_id = bg_last_updated_user
 left outer join projects on pj_id = bg_project
 left outer join orgs on og_id = bg_org
 left outer join categories on ct_id = bg_category
 left outer join priorities on pr_id = bg_priority
 left outer join statuses on st_id = bg_status
  /* altered - just order by  */ WHERE  (bugs.bg_project not in (
					select pu_project
					from project_user_xref
					where pu_user = 1
					and pu_permission_level = 0)) order by bg_id desc
2017-07-26 23:19:37 http://localhost:49412/bugs.aspx elapsed milliseconds:0000
2017-07-26 23:19:55 http://localhost:49412/bugs.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '56812d22-4b34-4dc9-995a-d4a4d44f546a';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '56812d22-4b34-4dc9-995a-d4a4d44f546a'
and us_active = 1
2017-07-26 23:19:55 http://localhost:49412/bugs.aspx elapsed milliseconds:0001
2017-07-26 23:19:58 http://localhost:49412/bugs.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '56812d22-4b34-4dc9-995a-d4a4d44f546a';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '56812d22-4b34-4dc9-995a-d4a4d44f546a'
and us_active = 1
2017-07-26 23:19:58 http://localhost:49412/bugs.aspx elapsed milliseconds:0000
2017-07-26 23:20:05 http://localhost:49412/flag.aspx?ses=56812d22-4b34-4dc9-995a-d4a4d44f546a&bugid=1&flag=2 sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '56812d22-4b34-4dc9-995a-d4a4d44f546a';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '56812d22-4b34-4dc9-995a-d4a4d44f546a'
and us_active = 1
2017-07-26 23:20:05 http://localhost:49412/flag.aspx?ses=56812d22-4b34-4dc9-995a-d4a4d44f546a&bugid=1&flag=2 elapsed milliseconds:0000
2017-07-26 23:20:05 http://localhost:49412/flag.aspx?ses=56812d22-4b34-4dc9-995a-d4a4d44f546a&bugid=1&flag=2 sql=

declare @bg_org int

select isnull(pu_permission_level,2),
bg_org
from bugs
left outer join project_user_xref
on pu_project = bg_project
and pu_user = 1
where bg_id = 1
2017-07-26 23:20:05 http://localhost:49412/flag.aspx?ses=56812d22-4b34-4dc9-995a-d4a4d44f546a&bugid=1&flag=2 elapsed milliseconds:0005
2017-07-26 23:20:05 http://localhost:49412/flag.aspx?ses=56812d22-4b34-4dc9-995a-d4a4d44f546a&bugid=1&flag=2 sql=

if not exists (select bu_bug from bug_user where bu_bug = 1 and bu_user = 1)
	insert into bug_user (bu_bug, bu_user, bu_flag, bu_seen, bu_vote) values(1, 1, 1, 0, 0) 
update bug_user set bu_flag = 2, bu_flag_datetime = getdate() where bu_bug = 1 and bu_user = 1 and bu_flag <> 2
2017-07-26 23:20:06 http://localhost:49412/flag.aspx?ses=56812d22-4b34-4dc9-995a-d4a4d44f546a&bugid=1&flag=0 sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '56812d22-4b34-4dc9-995a-d4a4d44f546a';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '56812d22-4b34-4dc9-995a-d4a4d44f546a'
and us_active = 1
2017-07-26 23:20:06 http://localhost:49412/flag.aspx?ses=56812d22-4b34-4dc9-995a-d4a4d44f546a&bugid=1&flag=0 elapsed milliseconds:0000
2017-07-26 23:20:06 http://localhost:49412/flag.aspx?ses=56812d22-4b34-4dc9-995a-d4a4d44f546a&bugid=1&flag=0 sql=

declare @bg_org int

select isnull(pu_permission_level,2),
bg_org
from bugs
left outer join project_user_xref
on pu_project = bg_project
and pu_user = 1
where bg_id = 1
2017-07-26 23:20:06 http://localhost:49412/flag.aspx?ses=56812d22-4b34-4dc9-995a-d4a4d44f546a&bugid=1&flag=0 elapsed milliseconds:0000
2017-07-26 23:20:06 http://localhost:49412/flag.aspx?ses=56812d22-4b34-4dc9-995a-d4a4d44f546a&bugid=1&flag=0 sql=

if not exists (select bu_bug from bug_user where bu_bug = 1 and bu_user = 1)
	insert into bug_user (bu_bug, bu_user, bu_flag, bu_seen, bu_vote) values(1, 1, 1, 0, 0) 
update bug_user set bu_flag = 0, bu_flag_datetime = getdate() where bu_bug = 1 and bu_user = 1 and bu_flag <> 0
2017-07-26 23:21:19 http://localhost:49412/ajax.aspx?bugid=1 sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '56812d22-4b34-4dc9-995a-d4a4d44f546a';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '56812d22-4b34-4dc9-995a-d4a4d44f546a'
and us_active = 1
2017-07-26 23:21:19 http://localhost:49412/ajax.aspx?bugid=1 elapsed milliseconds:0000
2017-07-26 23:21:19 http://localhost:49412/ajax.aspx?bugid=1 sql=

declare @bg_org int

select isnull(pu_permission_level,2),
bg_org
from bugs
left outer join project_user_xref
on pu_project = bg_project
and pu_user = 1
where bg_id = 1
2017-07-26 23:21:19 http://localhost:49412/ajax.aspx?bugid=1 elapsed milliseconds:0000
2017-07-26 23:21:19 http://localhost:49412/ajax.aspx?bugid=1 sql=

/* get_bug_posts */
select
a.bp_bug,
a.bp_comment,
isnull(us_username,'') [us_username],
case rtrim(us_firstname)
	when null then isnull(us_lastname, '')
	when '' then isnull(us_lastname, '')
	else isnull(us_lastname + ', ' + us_firstname,'')
	end [us_fullname],
isnull(us_email,'') [us_email],
a.bp_date,
datediff(s,a.bp_date,getdate()) [seconds_ago],
a.bp_id,
a.bp_type,
isnull(a.bp_email_from,'') bp_email_from,
isnull(a.bp_email_to,'') bp_email_to,
isnull(a.bp_email_cc,'') bp_email_cc,
isnull(a.bp_file,'') bp_file,
isnull(a.bp_size,0) bp_size,
isnull(a.bp_content_type,'') bp_content_type,
a.bp_hidden_from_external_users,
isnull(ba.bp_file,'') ba_file,  -- intentionally ba
isnull(ba.bp_id,'') ba_id, -- intentionally ba
isnull(ba.bp_size,'') ba_size,  -- intentionally ba
isnull(ba.bp_content_type,'') ba_content_type -- intentionally ba
from bug_posts a
left outer join users on us_id = a.bp_user
left outer join bug_posts ba on ba.bp_parent = a.bp_id and ba.bp_bug = a.bp_bug
where a.bp_bug = 1
and a.bp_parent is null
 and a.bp_type <> 'update'
 order by a.bp_id desc, ba.bp_parent, ba.bp_id
2017-07-26 23:21:19 http://localhost:49412/ajax.aspx?bugid=1 elapsed milliseconds:0171
2017-07-26 23:21:24 http://localhost:49412/search.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '56812d22-4b34-4dc9-995a-d4a4d44f546a';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '56812d22-4b34-4dc9-995a-d4a4d44f546a'
and us_active = 1
2017-07-26 23:21:24 http://localhost:49412/search.aspx elapsed milliseconds:0000
2017-07-26 23:21:24 http://localhost:49412/search.aspx sql=

/* get related users 2 */
select  pj_id, us_id,
case when 0 = 1 then
    case when len(isnull(us_firstname,'') + ' ' + isnull(us_lastname,'')) > 1
	then isnull(us_firstname,'') + ' ' + isnull(us_lastname,'')
    else us_username end
else us_username end us_username,
isnull(us_email,'') us_email
into #temp
from projects, users
where pj_id not in
(
	select pu_project from project_user_xref
	where pu_permission_level = 0 and pu_user = 1
)





if 0 = 1 -- external
and 2 = 0 -- other orgs
begin
	select distinct a.us_id, a.us_username, a.us_email
	from #temp a
	inner join users b on a.us_id = b.us_id
	inner join orgs on b.us_org = og_id
	where og_external_user = 0 or b.us_org = 1
	order by a.us_username
end
else
begin

	select distinct us_id, us_username, us_email
		from #temp
		left outer join project_user_xref on pj_id = pu_project
		and us_id = pu_user
		where isnull(pu_permission_level,2) <> 0
		order by us_username
end

drop table #temp
2017-07-26 23:21:24 http://localhost:49412/search.aspx elapsed milliseconds:0013
2017-07-26 23:21:24 http://localhost:49412/search.aspx sql=
/* drop downs */ select pj_id, pj_name from projects order by pj_name; select og_id, og_name from orgs order by og_name;
	select ct_id, ct_name from categories order by ct_sort_seq, ct_name;
	select pr_id, pr_name from priorities order by pr_sort_seq, pr_name;
	select st_id, st_name from statuses order by st_sort_seq, st_name;
	select udf_id, udf_name from user_defined_attribute order by udf_sort_seq, udf_name
2017-07-26 23:21:24 http://localhost:49412/search.aspx elapsed milliseconds:0000
2017-07-26 23:21:24 http://localhost:49412/search.aspx sql=

select count(1)
from projects
where isnull(pj_enable_custom_dropdown1,0) = 1
or isnull(pj_enable_custom_dropdown2,0) = 1
or isnull(pj_enable_custom_dropdown3,0) = 1
2017-07-26 23:24:06 http://localhost:49412/search.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '56812d22-4b34-4dc9-995a-d4a4d44f546a';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '56812d22-4b34-4dc9-995a-d4a4d44f546a'
and us_active = 1
2017-07-26 23:24:06 http://localhost:49412/search.aspx elapsed milliseconds:0000
2017-07-26 23:24:06 http://localhost:49412/search.aspx sql=

/* get related users 2 */
select  pj_id, us_id,
case when 0 = 1 then
    case when len(isnull(us_firstname,'') + ' ' + isnull(us_lastname,'')) > 1
	then isnull(us_firstname,'') + ' ' + isnull(us_lastname,'')
    else us_username end
else us_username end us_username,
isnull(us_email,'') us_email
into #temp
from projects, users
where pj_id not in
(
	select pu_project from project_user_xref
	where pu_permission_level = 0 and pu_user = 1
)





if 0 = 1 -- external
and 2 = 0 -- other orgs
begin
	select distinct a.us_id, a.us_username, a.us_email
	from #temp a
	inner join users b on a.us_id = b.us_id
	inner join orgs on b.us_org = og_id
	where og_external_user = 0 or b.us_org = 1
	order by a.us_username
end
else
begin

	select distinct us_id, us_username, us_email
		from #temp
		left outer join project_user_xref on pj_id = pu_project
		and us_id = pu_user
		where isnull(pu_permission_level,2) <> 0
		order by us_username
end

drop table #temp
2017-07-26 23:24:06 http://localhost:49412/search.aspx elapsed milliseconds:0018
2017-07-26 23:24:06 http://localhost:49412/search.aspx sql=

select
pj_id,
isnull(pj_enable_custom_dropdown1,0) pj_enable_custom_dropdown1,
isnull(pj_enable_custom_dropdown2,0) pj_enable_custom_dropdown2,
isnull(pj_enable_custom_dropdown3,0) pj_enable_custom_dropdown3,
isnull(pj_custom_dropdown_label1,'') pj_custom_dropdown_label1,
isnull(pj_custom_dropdown_label2,'') pj_custom_dropdown_label2,
isnull(pj_custom_dropdown_label3,'') pj_custom_dropdown_label3,
isnull(pj_custom_dropdown_values1,'') pj_custom_dropdown_values1,
isnull(pj_custom_dropdown_values2,'') pj_custom_dropdown_values2,
isnull(pj_custom_dropdown_values3,'') pj_custom_dropdown_values3
from projects
where isnull(pj_enable_custom_dropdown1,0) = 1
or isnull(pj_enable_custom_dropdown2,0) = 1
or isnull(pj_enable_custom_dropdown3,0) = 1
2017-07-26 23:24:06 http://localhost:49412/search.aspx elapsed milliseconds:0000
2017-07-26 23:24:06 http://localhost:49412/search.aspx sql=
select isnull(pr_background_color,'#ffffff') [color], bg_id [id],
bg_short_desc [desc]
,isnull(rpt.us_username,'') [reported by]
,bg_reported_date [reported on]
,isnull(lu.us_username,'') [last updated by]
,bg_last_updated_date [last updated on],
isnull(pj_name,'') [project],
isnull(og_name,'') [organization],
isnull(ct_name,'') [category],
isnull(pr_name,'') [priority],
isnull(asg.us_username,'') [assigned to],
isnull(st_name,'') [status] from bugs
			left outer join users rpt on rpt.us_id = bg_reported_user
			left outer join users lu on lu.us_id = bg_last_updated_user
			left outer join users asg on asg.us_id = bg_assigned_to_user
			left outer join projects on pj_id = bg_project
			left outer join orgs on og_id = bg_org
			left outer join categories on ct_id = bg_category
			left outer join priorities on pr_id = bg_priority
			left outer join statuses on st_id = bg_status
			  /* altered - just order by  */ WHERE  (bugs.bg_project not in (
					select pu_project
					from project_user_xref
					where pu_user = 1
					and pu_permission_level = 0)) order by bg_id desc
2017-07-26 23:24:07 http://localhost:49412/search.aspx elapsed milliseconds:0020
2017-07-26 23:24:20 http://localhost:49412/search_text.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '56812d22-4b34-4dc9-995a-d4a4d44f546a';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '56812d22-4b34-4dc9-995a-d4a4d44f546a'
and us_active = 1
2017-07-26 23:24:20 http://localhost:49412/search_text.aspx elapsed milliseconds:0000
2017-07-26 23:24:56 http://localhost:49412/queries.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '56812d22-4b34-4dc9-995a-d4a4d44f546a';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '56812d22-4b34-4dc9-995a-d4a4d44f546a'
and us_active = 1
2017-07-26 23:24:56 http://localhost:49412/queries.aspx elapsed milliseconds:0000
2017-07-26 23:24:56 http://localhost:49412/queries.aspx sql=
select
			qu_desc [query],
			case
				when isnull(qu_user,0) = 0 and isnull(qu_org,0) is null then 'everybody'
				when isnull(qu_user,0) <> 0 then 'user:' + us_username
				when isnull(qu_org,0) <> 0 then 'org:' + og_name
				else ' '
				end [visibility],
			'<a href=bugs.aspx?qu_id=' + convert(varchar,qu_id) + '>view list</a>' [view list],
			'<a target=_blank href=print_bugs.aspx?qu_id=' + convert(varchar,qu_id) + '>print list</a>' [print list],
			'<a target=_blank href=print_bugs.aspx?format=excel&qu_id=' + convert(varchar,qu_id) + '>export as excel</a>' [export as excel],
			'<a target=_blank href=print_bugs2.aspx?qu_id=' + convert(varchar,qu_id) + '>print detail</a>' [print list<br>with detail],
			'<a href=edit_query.aspx?id=' + convert(varchar,qu_id) + '>edit</a>' [edit],
			'<a href=delete_query.aspx?id=' + convert(varchar,qu_id) + '>delete</a>' [delete],
			replace(convert(nvarchar(4000),qu_sql), char(10),'<br>') [sql]
			from queries
			left outer join users on qu_user = us_id
			left outer join orgs on qu_org = og_id
			where 1 = 0 /* all */
			or isnull(qu_user,0) = 1
			or isnull(qu_user,0) = 0
			order by qu_desc
2017-07-26 23:24:56 http://localhost:49412/queries.aspx elapsed milliseconds:0010
2017-07-26 23:32:34  caught exception in util.set_context:Request is not available in this context
2017-07-26 23:32:34  threadproc_votes
2017-07-26 23:32:34  sql=

if exists (select * from dbo.sysobjects where id = object_id(N'[votes_view]'))
drop view [votes_view]
2017-07-26 23:32:34  started creating Lucene index using folder C:\Users\Oisiktekiner\Documents\Visual Studio 2017\Projects\btnetnew\btnetnew\App_Data\lucene_index
2017-07-26 23:32:34  sql=

create view votes_view as
select bu_bug as vote_bug, sum(bu_vote) as vote_total
from bug_user
group by bu_bug
having sum(bu_vote) > 0
2017-07-26 23:32:34  sql=

select bu_bug, count(1)
from bug_user 
where bu_vote = 1
group by bu_bug
2017-07-26 23:32:35  elapsed milliseconds:0066
2017-07-26 23:32:35  sql=

/* get searchable cols */					
select sc.name
from syscolumns sc
inner join systypes st on st.xusertype = sc.xusertype
inner join sysobjects so on sc.id = so.id
where so.name = 'bugs'
and st.[name] <> 'sysname'
and sc.name not in ('rowguid',
'bg_id',
'bg_short_desc',
'bg_reported_user',
'bg_reported_date',
'bg_project',
'bg_org',
'bg_category',
'bg_priority',
'bg_status',
'bg_assigned_to_user',
'bg_last_updated_user',
'bg_last_updated_date',
'bg_user_defined_attribute',
'bg_project_custom_dropdown_value1',
'bg_project_custom_dropdown_value2',
'bg_project_custom_dropdown_value3',
'bg_tags')
and st.[name] in ('nvarchar','varchar')
and sc.length > 30
2017-07-26 23:32:35  elapsed milliseconds:0000
2017-07-26 23:32:35  sql=

select bg_id, 	

isnull(bg_tags,'') bg_tags,
bg_short_desc
from bugs
2017-07-26 23:32:35  elapsed milliseconds:0000
2017-07-26 23:32:35  sql=

select bp_bug, bp_id, 
isnull(bp_comment_search,bp_comment) [text] 
from bug_posts 
where bp_type <> 'update'
and bp_hidden_from_external_users = 0
2017-07-26 23:32:35  elapsed milliseconds:0000
2017-07-26 23:32:35  done creating Lucene index
2017-07-26 23:32:37 http://localhost:49412/default.aspx sql=
select count(1) from users
2017-07-26 23:32:39 http://localhost:49412/default.aspx sql=
select count(1) from users
2017-07-26 23:32:39 http://localhost:49412/default.aspx sql=

select us_username, us_id, us_password, isnull(us_salt,0) us_salt, us_active
from users
where us_username = N'admin'
2017-07-26 23:32:39 http://localhost:49412/default.aspx elapsed milliseconds:0000
2017-07-26 23:32:39 http://localhost:49412/default.aspx sql=
update users set us_most_recent_login_datetime = getdate() where us_id = 1
2017-07-26 23:32:39 http://localhost:49412/default.aspx sql=
select us_id from users where us_username = N'admin'
2017-07-26 23:32:39 http://localhost:49412/default.aspx elapsed milliseconds:0000
2017-07-26 23:32:39 http://localhost:49412/default.aspx guid=f71a333f-b81c-4eda-968c-9460a804054e
2017-07-26 23:32:39 http://localhost:49412/default.aspx sql=
insert into sessions (se_id, se_user) values('f71a333f-b81c-4eda-968c-9460a804054e', 1)
2017-07-26 23:32:39 http://localhost:49412/default.aspx AppPath:
2017-07-26 23:32:42 http://localhost:49412/bugs.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = 'f71a333f-b81c-4eda-968c-9460a804054e';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = 'f71a333f-b81c-4eda-968c-9460a804054e'
and us_active = 1
2017-07-26 23:32:42 http://localhost:49412/bugs.aspx elapsed milliseconds:0009
2017-07-26 23:32:42 http://localhost:49412/bugs.aspx sql=

/* custom columns */ select sc.name, st.[name] [datatype], 
case when st.[name] = 'nvarchar' or st.[name] = 'nchar' then sc.length/2 else sc.length end as [length], 
sc.xprec, sc.xscale, sc.isnullable,
mm.text [default value], 
dflts.name [default name], 
isnull(ccm_dropdown_type,'') [dropdown type],
isnull(ccm_dropdown_vals,'') [vals],
isnull(ccm_sort_seq, sc.colorder) [column order],
sc.colorder
from syscolumns sc
inner join systypes st on st.xusertype = sc.xusertype
inner join sysobjects so on sc.id = so.id
left outer join syscomments mm on sc.cdefault = mm.id
left outer join custom_col_metadata on ccm_colorder = sc.colorder
left outer join sysobjects dflts on dflts.id = mm.id
where so.name = 'bugs'
and st.[name] <> 'sysname'
and sc.name not in ('rowguid',
'bg_id',
'bg_short_desc',
'bg_reported_user',
'bg_reported_date',
'bg_project',
'bg_org',
'bg_category',
'bg_priority',
'bg_status',
'bg_assigned_to_user',
'bg_last_updated_user',
'bg_last_updated_date',
'bg_user_defined_attribute',
'bg_project_custom_dropdown_value1',
'bg_project_custom_dropdown_value2',
'bg_project_custom_dropdown_value3',
'bg_tags')
order by sc.id, isnull(ccm_sort_seq,sc.colorder)
2017-07-26 23:32:42 http://localhost:49412/bugs.aspx elapsed milliseconds:0000
2017-07-26 23:32:42 http://localhost:49412/bugs.aspx sql=
/* query dropdown */
select qu_id, qu_desc
from queries
where (isnull(qu_user,0) = 0 and isnull(qu_org,0) = 0)
or isnull(qu_user,0) = 1
or isnull(qu_org,0) = 1
order by qu_desc
2017-07-26 23:32:42 http://localhost:49412/bugs.aspx elapsed milliseconds:0000
2017-07-26 23:32:42 http://localhost:49412/bugs.aspx sql=
select qu_id, qu_sql from queries where qu_id in
			(select us_default_query from users where us_id = 1)
2017-07-26 23:32:42 http://localhost:49412/bugs.aspx elapsed milliseconds:0000
2017-07-26 23:32:42 http://localhost:49412/bugs.aspx sql=
select isnull(pr_background_color,'#ffffff'), bg_id [id], isnull(bu_flag,0) [$FLAG], 
 bg_short_desc [desc], isnull(pj_name,'') [project], isnull(og_name,'') [organization], isnull(ct_name,'') [category], rpt.us_username [reported by],
 bg_reported_date [reported on], isnull(pr_name,'') [priority], isnull(asg.us_username,'') [assigned to],
 isnull(st_name,'') [status], isnull(lu.us_username,'') [last updated by], bg_last_updated_date [last updated on]
 from bugs 
 left outer join bug_user on bu_bug = bg_id and bu_user = 1 
 left outer join users rpt on rpt.us_id = bg_reported_user
 left outer join users asg on asg.us_id = bg_assigned_to_user
 left outer join users lu on lu.us_id = bg_last_updated_user
 left outer join projects on pj_id = bg_project
 left outer join orgs on og_id = bg_org
 left outer join categories on ct_id = bg_category
 left outer join priorities on pr_id = bg_priority
 left outer join statuses on st_id = bg_status
  /* altered - just order by  */ WHERE  (bugs.bg_project not in (
					select pu_project
					from project_user_xref
					where pu_user = 1
					and pu_permission_level = 0)) order by bg_id desc
2017-07-26 23:32:42 http://localhost:49412/bugs.aspx elapsed milliseconds:0000
2017-07-26 23:32:49 http://localhost:49412/queries.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = 'f71a333f-b81c-4eda-968c-9460a804054e';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = 'f71a333f-b81c-4eda-968c-9460a804054e'
and us_active = 1
2017-07-26 23:32:49 http://localhost:49412/queries.aspx elapsed milliseconds:0000
2017-07-26 23:32:49 http://localhost:49412/queries.aspx sql=
select
			qu_desc [query],
			case
				when isnull(qu_user,0) = 0 and isnull(qu_org,0) is null then 'everybody'
				when isnull(qu_user,0) <> 0 then 'user:' + us_username
				when isnull(qu_org,0) <> 0 then 'org:' + og_name
				else ' '
				end [visibility],
			'<a href=bugs.aspx?qu_id=' + convert(varchar,qu_id) + '>view list</a>' [view list],
			'<a target=_blank href=print_bugs.aspx?qu_id=' + convert(varchar,qu_id) + '>print list</a>' [print list],
			'<a target=_blank href=print_bugs.aspx?format=excel&qu_id=' + convert(varchar,qu_id) + '>export as excel</a>' [export as excel],
			'<a target=_blank href=print_bugs2.aspx?qu_id=' + convert(varchar,qu_id) + '>print detail</a>' [print list<br>with detail],
			'<a href=edit_query.aspx?id=' + convert(varchar,qu_id) + '>edit</a>' [edit],
			'<a href=delete_query.aspx?id=' + convert(varchar,qu_id) + '>delete</a>' [delete],
			replace(convert(nvarchar(4000),qu_sql), char(10),'<br>') [sql]
			from queries
			left outer join users on qu_user = us_id
			left outer join orgs on qu_org = og_id
			where 1 = 0 /* all */
			or isnull(qu_user,0) = 1
			or isnull(qu_user,0) = 0
			order by qu_desc
2017-07-26 23:32:49 http://localhost:49412/queries.aspx elapsed milliseconds:0001

TIME: 23:32:49
MSG: A page can have only one server-side Form tag.
URL: http://localhost:49412/queries.aspx
EXCEPTION: System.Web.HttpException (0x80004005): A page can have only one server-side Form tag.
   at System.Web.UI.Page.OnFormRender()
   at System.Web.UI.HtmlControls.HtmlForm.RenderChildren(HtmlTextWriter writer)
   at System.Web.UI.HtmlControls.HtmlContainerControl.Render(HtmlTextWriter writer)
   at System.Web.UI.HtmlControls.HtmlForm.Render(HtmlTextWriter output)
   at System.Web.UI.Control.RenderControlInternal(HtmlTextWriter writer, ControlAdapter adapter)
   at System.Web.UI.Control.RenderControl(HtmlTextWriter writer, ControlAdapter adapter)
   at System.Web.UI.HtmlControls.HtmlForm.RenderControl(HtmlTextWriter writer)
   at ASP.queries_aspx.__RenderContent2(HtmlTextWriter __w, Control parameterContainer) in c:\Users\Oisiktekiner\Documents\Visual Studio 2017\Projects\btnetnew\btnetnew\queries.aspx:line 18
   at System.Web.UI.Control.RenderChildrenInternal(HtmlTextWriter writer, ICollection children)
   at System.Web.UI.Control.RenderChildren(HtmlTextWriter writer)
   at System.Web.UI.Control.Render(HtmlTextWriter writer)
   at System.Web.UI.Control.RenderControlInternal(HtmlTextWriter writer, ControlAdapter adapter)
   at System.Web.UI.Control.RenderControl(HtmlTextWriter writer, ControlAdapter adapter)
   at System.Web.UI.Control.RenderControl(HtmlTextWriter writer)
   at ASP.btnet_master.__RenderaspnetForm(HtmlTextWriter __w, Control parameterContainer) in c:\Users\Oisiktekiner\Documents\Visual Studio 2017\Projects\btnetnew\btnetnew\btnet.Master:line 43
   at System.Web.UI.Control.RenderChildrenInternal(HtmlTextWriter writer, ICollection children)
   at System.Web.UI.HtmlControls.HtmlForm.RenderChildren(HtmlTextWriter writer)
   at System.Web.UI.HtmlControls.HtmlContainerControl.Render(HtmlTextWriter writer)
   at System.Web.UI.HtmlControls.HtmlForm.Render(HtmlTextWriter output)
   at System.Web.UI.Control.RenderControlInternal(HtmlTextWriter writer, ControlAdapter adapter)
   at System.Web.UI.Control.RenderControl(HtmlTextWriter writer, ControlAdapter adapter)
   at System.Web.UI.HtmlControls.HtmlForm.RenderControl(HtmlTextWriter writer)
   at System.Web.UI.Control.RenderChildrenInternal(HtmlTextWriter writer, ICollection children)
   at System.Web.UI.Control.RenderChildren(HtmlTextWriter writer)
   at System.Web.UI.Control.Render(HtmlTextWriter writer)
   at System.Web.UI.Control.RenderControlInternal(HtmlTextWriter writer, ControlAdapter adapter)
   at System.Web.UI.Control.RenderControl(HtmlTextWriter writer, ControlAdapter adapter)
   at System.Web.UI.Control.RenderControl(HtmlTextWriter writer)
   at System.Web.UI.Control.RenderChildrenInternal(HtmlTextWriter writer, ICollection children)
   at System.Web.UI.Control.RenderChildren(HtmlTextWriter writer)
   at System.Web.UI.Page.Render(HtmlTextWriter writer)
   at System.Web.UI.Control.RenderControlInternal(HtmlTextWriter writer, ControlAdapter adapter)
   at System.Web.UI.Control.RenderControl(HtmlTextWriter writer, ControlAdapter adapter)
   at System.Web.UI.Control.RenderControl(HtmlTextWriter writer)
   at System.Web.UI.Page.ProcessRequestMain(Boolean includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint)

ALL_HTTP=HTTP_CONNECTION:Keep-Alive
HTTP_ACCEPT:text/html, application/xhtml+xml, */*
HTTP_ACCEPT_ENCODING:gzip, deflate
HTTP_ACCEPT_LANGUAGE:tr-TR
HTTP_COOKIE:user=name=admin&NTLM=0; se_id=f71a333f-b81c-4eda-968c-9460a804054e; ASP.NET_SessionId=ty5xgs2n4254wjiea0rqot52
HTTP_HOST:localhost:49412
HTTP_REFERER:http://localhost:49412/bugs.aspx
HTTP_USER_AGENT:Mozilla/5.0 (Windows NT 6.1; WOW64; Trident/7.0; rv:11.0) like Gecko
HTTP_DNT:1

ALL_RAW=Connection: Keep-Alive
Accept: text/html, application/xhtml+xml, */*
Accept-Encoding: gzip, deflate
Accept-Language: tr-TR
Cookie: user=name=admin&NTLM=0; se_id=f71a333f-b81c-4eda-968c-9460a804054e; ASP.NET_SessionId=ty5xgs2n4254wjiea0rqot52
Host: localhost:49412
Referer: http://localhost:49412/bugs.aspx
User-Agent: Mozilla/5.0 (Windows NT 6.1; WOW64; Trident/7.0; rv:11.0) like Gecko
DNT: 1

APPL_MD_PATH=/LM/W3SVC/2/ROOT
APPL_PHYSICAL_PATH=C:\Users\Oisiktekiner\Documents\Visual Studio 2017\Projects\btnetnew\btnetnew\
CONTENT_LENGTH=0
GATEWAY_INTERFACE=CGI/1.1
HTTPS=off
INSTANCE_ID=2
INSTANCE_META_PATH=/LM/W3SVC/2
LOCAL_ADDR=::1
PATH_INFO=/queries.aspx
PATH_TRANSLATED=C:\Users\Oisiktekiner\Documents\Visual Studio 2017\Projects\btnetnew\btnetnew\queries.aspx
REMOTE_ADDR=::1
REMOTE_HOST=::1
REMOTE_PORT=49624
REQUEST_METHOD=GET
SCRIPT_NAME=/queries.aspx
SERVER_NAME=localhost
SERVER_PORT=49412
SERVER_PORT_SECURE=0
SERVER_PROTOCOL=HTTP/1.1
SERVER_SOFTWARE=Microsoft-IIS/10.0
URL=/queries.aspx
HTTP_CONNECTION=Keep-Alive
HTTP_ACCEPT=text/html, application/xhtml+xml, */*
HTTP_ACCEPT_ENCODING=gzip, deflate
HTTP_ACCEPT_LANGUAGE=tr-TR
HTTP_COOKIE=user=name=admin&NTLM=0; se_id=f71a333f-b81c-4eda-968c-9460a804054e; ASP.NET_SessionId=ty5xgs2n4254wjiea0rqot52
HTTP_HOST=localhost:49412
HTTP_REFERER=http://localhost:49412/bugs.aspx
HTTP_USER_AGENT=Mozilla/5.0 (Windows NT 6.1; WOW64; Trident/7.0; rv:11.0) like Gecko
HTTP_DNT=1
2017-07-26 23:32:50 http://localhost:49412/queries.aspx to email addr: admin@example.com
2017-07-26 23:32:50 http://localhost:49412/queries.aspx There was a problem sending email.   Check settings in Web.config.
2017-07-26 23:32:50 http://localhost:49412/queries.aspx TO:admin@example.com
2017-07-26 23:32:50 http://localhost:49412/queries.aspx FROM:errors@example.com
2017-07-26 23:32:50 http://localhost:49412/queries.aspx SUBJECT:Error: A page can have only one server-side Form tag.
2017-07-26 23:32:50 http://localhost:49412/queries.aspx Could not find a part of the path 'C:\temp\pickup\bc43b163-c705-48d8-bd6b-98de3cc46e63.eml'.
2017-07-26 23:33:29 http://localhost:49412/queries.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = 'f71a333f-b81c-4eda-968c-9460a804054e';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = 'f71a333f-b81c-4eda-968c-9460a804054e'
and us_active = 1
2017-07-26 23:33:29 http://localhost:49412/queries.aspx elapsed milliseconds:0001
2017-07-26 23:33:29 http://localhost:49412/queries.aspx sql=
select
			qu_desc [query],
			case
				when isnull(qu_user,0) = 0 and isnull(qu_org,0) is null then 'everybody'
				when isnull(qu_user,0) <> 0 then 'user:' + us_username
				when isnull(qu_org,0) <> 0 then 'org:' + og_name
				else ' '
				end [visibility],
			'<a href=bugs.aspx?qu_id=' + convert(varchar,qu_id) + '>view list</a>' [view list],
			'<a target=_blank href=print_bugs.aspx?qu_id=' + convert(varchar,qu_id) + '>print list</a>' [print list],
			'<a target=_blank href=print_bugs.aspx?format=excel&qu_id=' + convert(varchar,qu_id) + '>export as excel</a>' [export as excel],
			'<a target=_blank href=print_bugs2.aspx?qu_id=' + convert(varchar,qu_id) + '>print detail</a>' [print list<br>with detail],
			'<a href=edit_query.aspx?id=' + convert(varchar,qu_id) + '>edit</a>' [edit],
			'<a href=delete_query.aspx?id=' + convert(varchar,qu_id) + '>delete</a>' [delete],
			replace(convert(nvarchar(4000),qu_sql), char(10),'<br>') [sql]
			from queries
			left outer join users on qu_user = us_id
			left outer join orgs on qu_org = og_id
			where 1 = 0 /* all */
			or isnull(qu_user,0) = 1
			or isnull(qu_user,0) = 0
			order by qu_desc
2017-07-26 23:33:29 http://localhost:49412/queries.aspx elapsed milliseconds:0002
2017-07-26 23:34:32 http://localhost:49412/reports.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = 'f71a333f-b81c-4eda-968c-9460a804054e';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = 'f71a333f-b81c-4eda-968c-9460a804054e'
and us_active = 1
2017-07-26 23:34:32 http://localhost:49412/reports.aspx elapsed milliseconds:0001
2017-07-26 23:34:32 http://localhost:49412/reports.aspx sql=

select
rp_desc [report],
case
	when rp_chart_type = 'pie' then
		'<a target=''_blank'' href=''view_report.aspx?view=chart&id=' + convert(varchar, rp_id) + '''>pie</a>'
	when rp_chart_type = 'line' then
		'<a target=''_blank'' href=''view_report.aspx?view=chart&id=' + convert(varchar, rp_id) + '''>line</a>'
	when rp_chart_type = 'bar' then
		'<a target=''_blank'' href=''view_report.aspx?view=chart&id=' + convert(varchar, rp_id) + '''>bar</a>'
	else
		'&nbsp;' end [view<br>chart],
'<a target=''_blank'' href=''view_report.aspx?view=data&id=' + convert(varchar, rp_id) + '''>data</a>' [view<br>data]
, '<a href=''edit_report.aspx?id=' + convert(varchar, rp_id) + '''>edit</a>' [edit], '<a href=''delete_report.aspx?id=' + convert(varchar, rp_id) + '''>delete</a>' [delete] 
from reports order by rp_desc
2017-07-26 23:34:32 http://localhost:49412/reports.aspx elapsed milliseconds:0010
2017-07-26 23:36:28 http://localhost:49412/reports.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = 'f71a333f-b81c-4eda-968c-9460a804054e';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = 'f71a333f-b81c-4eda-968c-9460a804054e'
and us_active = 1
2017-07-26 23:36:28 http://localhost:49412/reports.aspx elapsed milliseconds:0000
2017-07-26 23:36:28 http://localhost:49412/reports.aspx sql=

select
rp_desc [report],
case
	when rp_chart_type = 'pie' then
		'<a target=''_blank'' href=''view_report.aspx?view=chart&id=' + convert(varchar, rp_id) + '''>pie</a>'
	when rp_chart_type = 'line' then
		'<a target=''_blank'' href=''view_report.aspx?view=chart&id=' + convert(varchar, rp_id) + '''>line</a>'
	when rp_chart_type = 'bar' then
		'<a target=''_blank'' href=''view_report.aspx?view=chart&id=' + convert(varchar, rp_id) + '''>bar</a>'
	else
		'&nbsp;' end [view<br>chart],
'<a target=''_blank'' href=''view_report.aspx?view=data&id=' + convert(varchar, rp_id) + '''>data</a>' [view<br>data]
, '<a href=''edit_report.aspx?id=' + convert(varchar, rp_id) + '''>edit</a>' [edit], '<a href=''delete_report.aspx?id=' + convert(varchar, rp_id) + '''>delete</a>' [delete] 
from reports order by rp_desc
2017-07-26 23:36:28 http://localhost:49412/reports.aspx elapsed milliseconds:0000
2017-07-26 23:36:53 http://localhost:49412/queries.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = 'f71a333f-b81c-4eda-968c-9460a804054e';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = 'f71a333f-b81c-4eda-968c-9460a804054e'
and us_active = 1
2017-07-26 23:36:53 http://localhost:49412/queries.aspx elapsed milliseconds:0001
2017-07-26 23:36:53 http://localhost:49412/queries.aspx sql=
select
			qu_desc [query],
			case
				when isnull(qu_user,0) = 0 and isnull(qu_org,0) is null then 'everybody'
				when isnull(qu_user,0) <> 0 then 'user:' + us_username
				when isnull(qu_org,0) <> 0 then 'org:' + og_name
				else ' '
				end [visibility],
			'<a href=bugs.aspx?qu_id=' + convert(varchar,qu_id) + '>view list</a>' [view list],
			'<a target=_blank href=print_bugs.aspx?qu_id=' + convert(varchar,qu_id) + '>print list</a>' [print list],
			'<a target=_blank href=print_bugs.aspx?format=excel&qu_id=' + convert(varchar,qu_id) + '>export as excel</a>' [export as excel],
			'<a target=_blank href=print_bugs2.aspx?qu_id=' + convert(varchar,qu_id) + '>print detail</a>' [print list<br>with detail],
			'<a href=edit_query.aspx?id=' + convert(varchar,qu_id) + '>edit</a>' [edit],
			'<a href=delete_query.aspx?id=' + convert(varchar,qu_id) + '>delete</a>' [delete],
			replace(convert(nvarchar(4000),qu_sql), char(10),'<br>') [sql]
			from queries
			left outer join users on qu_user = us_id
			left outer join orgs on qu_org = og_id
			where 1 = 0 /* all */
			or isnull(qu_user,0) = 1
			or isnull(qu_user,0) = 0
			order by qu_desc
2017-07-26 23:36:53 http://localhost:49412/queries.aspx elapsed milliseconds:0004
2017-07-26 23:36:59 http://localhost:49412/search.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = 'f71a333f-b81c-4eda-968c-9460a804054e';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = 'f71a333f-b81c-4eda-968c-9460a804054e'
and us_active = 1
2017-07-26 23:36:59 http://localhost:49412/search.aspx elapsed milliseconds:0000
2017-07-26 23:36:59 http://localhost:49412/search.aspx sql=

/* get related users 2 */
select  pj_id, us_id,
case when 0 = 1 then
    case when len(isnull(us_firstname,'') + ' ' + isnull(us_lastname,'')) > 1
	then isnull(us_firstname,'') + ' ' + isnull(us_lastname,'')
    else us_username end
else us_username end us_username,
isnull(us_email,'') us_email
into #temp
from projects, users
where pj_id not in
(
	select pu_project from project_user_xref
	where pu_permission_level = 0 and pu_user = 1
)





if 0 = 1 -- external
and 2 = 0 -- other orgs
begin
	select distinct a.us_id, a.us_username, a.us_email
	from #temp a
	inner join users b on a.us_id = b.us_id
	inner join orgs on b.us_org = og_id
	where og_external_user = 0 or b.us_org = 1
	order by a.us_username
end
else
begin

	select distinct us_id, us_username, us_email
		from #temp
		left outer join project_user_xref on pj_id = pu_project
		and us_id = pu_user
		where isnull(pu_permission_level,2) <> 0
		order by us_username
end

drop table #temp
2017-07-26 23:36:59 http://localhost:49412/search.aspx elapsed milliseconds:0013
2017-07-26 23:36:59 http://localhost:49412/search.aspx sql=
/* drop downs */ select pj_id, pj_name from projects order by pj_name; select og_id, og_name from orgs order by og_name;
	select ct_id, ct_name from categories order by ct_sort_seq, ct_name;
	select pr_id, pr_name from priorities order by pr_sort_seq, pr_name;
	select st_id, st_name from statuses order by st_sort_seq, st_name;
	select udf_id, udf_name from user_defined_attribute order by udf_sort_seq, udf_name
2017-07-26 23:36:59 http://localhost:49412/search.aspx elapsed milliseconds:0000
2017-07-26 23:36:59 http://localhost:49412/search.aspx sql=

select count(1)
from projects
where isnull(pj_enable_custom_dropdown1,0) = 1
or isnull(pj_enable_custom_dropdown2,0) = 1
or isnull(pj_enable_custom_dropdown3,0) = 1
2017-07-26 23:37:05 http://localhost:49412/admin.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = 'f71a333f-b81c-4eda-968c-9460a804054e';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = 'f71a333f-b81c-4eda-968c-9460a804054e'
and us_active = 1
2017-07-26 23:37:05 http://localhost:49412/admin.aspx elapsed milliseconds:0000
2017-07-26 23:37:05 http://localhost:49412/admin.aspx sql=
select count(1) from bugs
